# å¦‚ä½•åœ¨ NPM ä¸Šå‘å¸ƒåŒ…

> åŸæ–‡:[https://dev . to/jumpalottahigh/how-to-publish-a-package-on-NPM-816](https://dev.to/jumpalottahigh/how-to-publish-a-package-on-npm-816)

å‡ å‘¨å‰ï¼Œæˆ‘åœ¨ NPM ä¸Šåˆ›å»ºå¹¶å‘å¸ƒäº†æˆ‘çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹åŒ…ï¼Œéå¸¸æœ‰è¶£ã€‚ä»¤æˆ‘æƒŠè®¶çš„æ˜¯ï¼Œè¿™æ¯”æˆ‘æƒ³è±¡çš„è¦å®¹æ˜“å¾—å¤šã€‚

è‡³å°‘æœ‰ä¸€äº›[æ ·æ¿æ–‡ä»¶](https://github.com/sindresorhus/node-module-boilerplate)å’Œ[æ­å»ºå·¥å…·](https://github.com/kentcdodds/generator-kcd-oss)å¯ä»¥å¸®åŠ©ä½ å¼€å§‹ï¼Œè™½ç„¶å®ƒä»¬å¯èƒ½æ˜¯æ­£ç¡®çš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒä»¬å¸¦æœ‰æ‰€æœ‰çš„å·¥å…·ã€æµ‹è¯•å’ŒæŒ‚é’©ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå®é™…å‘å¸ƒèŠ‚ç‚¹åŒ…çš„ç®€å•ä¾‹å­ã€‚æœ‰å¾ˆå¤šå…³äºå¦‚ä½•åšçš„æŒ‡å—ï¼ŒåŒ…æ‹¬ npm æ–‡æ¡£ä¸Šçš„[è¿™ç¯‡æ–‡ç« ](https://docs.npmjs.com/creating-node-js-modules)ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªå…³äºå¦‚ä½•è¿›è¡Œæœ€å°è®¾ç½®çš„æ–¹æ³•ã€‚

### [](#make-a-new-repository-on-github)ğŸ”åœ¨ GitHub ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æºåº“

åˆ›å»ºä¸€ä¸ªæ–°çš„å­˜å‚¨åº“ï¼Œå¹¶åœ¨æœ¬åœ°æœºå™¨ä¸Šå…‹éš†å®ƒã€‚ç„¶åæŠŠç›®å½•æ¢åˆ°é‡Œé¢ï¼Œç”¨ä½ æœ€å–œæ¬¢çš„ç¼–è¾‘å™¨æ‰“å¼€æ–‡ä»¶å¤¹ã€‚

```
git clone https://github.com/jumpalottahigh/how-to-publish-to-npm
cd how-to-publish-to-npm/
code . 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#run-npm-init)è¿è¡Œ npm åˆå§‹åŒ–

```
npm init 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ ä¹Ÿå¯ä»¥ä¼ é€’`-y`æ¥è‡ªåŠ¨å›ç­”åˆå§‹åŒ–å™¨ä¸­çš„æ¯ä¸ªé—®é¢˜ã€‚æˆ‘ä¼šè¯´ä½ å¯èƒ½æƒ³å›é¡¾ä¸€ä¸‹ä¿¡æ¯ï¼Œæ‰€ä»¥å¯ä»¥æ…¢ä¸€ç‚¹ã€‚å› ä¸ºæˆ‘ä»¬åªæ˜¯æƒ³çœ‹çœ‹äº‹æƒ…æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œç¼ºçœå€¼å°±è¶³å¤Ÿäº†ã€‚

æ£€æŸ¥æ‚¨çš„`package.json`é”®ï¼Œç¡®ä¿`main`é”®æŒ‡å‘æ¨¡å—çš„å…¥å£ç‚¹ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬æŠŠå®ƒæŒ‡å‘`index.js`ã€‚

### [](#write-the-module)ğŸ“¦ç¼–å†™æ¨¡å—

åˆ›å»º index.jsï¼Œ

```
touch index.js 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

â€¦è®©æˆ‘ä»¬å¯¼å‡ºä¸€ä¸ªåä¸º`sum`çš„ç®€å•å‡½æ•°ï¼Œå®ƒå°†ä¸¤ä¸ªæ•°ç›¸åŠ å¹¶è¿”å›ç»“æœã€‚

```
exports.sum = function(a, b) {
  return a + b
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#publish-the-package)ğŸ“¢å‘å¸ƒåŒ…

å°†æ‚¨çš„æ‰€æœ‰æ›´æ”¹æš‚å­˜ã€æäº¤å¹¶æ¨é€åˆ° GitHub ä¸Šçš„è¿œç¨‹å­˜å‚¨åº“ã€‚

```
git add .
git commit -m "Export a sum function"
git push origin master 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ¥ä¸‹æ¥ï¼Œæ‚¨éœ€è¦ç™»å½• npmï¼Œå› æ­¤è¿è¡Œ:

```
npm login 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨æ‚¨å®Œæˆè¿™ä¸ªæµç¨‹ä¹‹åï¼Œæ‚¨å°±å¯ä»¥ä½¿ç”¨:
å‘å¸ƒæ‚¨çš„åŒ…äº†

```
npm publish 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°±æ˜¯è¿™æ ·ï¼Œç¡®å®é‚£ä¹ˆå®¹æ˜“ï¼å‰å¾€[npmjs.com](https://www.npmjs.com/)ï¼Œç”¨ä½ ç»™å®ƒèµ·çš„åå­—æœç´¢ä½ æ–°å‘å¸ƒçš„åŒ…ã€‚

### [](#consume-the-module)ğŸ´æ¶ˆè´¹æ¨¡å—

æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œè®©æˆ‘ä»¬è¯•ä¸€è¯•ã€‚åœ¨ä½ æœ€å–œæ¬¢çš„é¡¹ç›®ä¸­å®‰è£…è½¯ä»¶åŒ…:

```
npm i how-to-publish-to-npm 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶ååœ¨ä»£ç ä¸­ä½¿ç”¨å®ƒ:

```
// Importing the module using a named import
import { sum } from 'how-to-publish-to-npm'

console.log(sum(7, 11)) // 18 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#upgrading-the-package)ğŸ†™å‡çº§è½¯ä»¶åŒ…

å‡è®¾ä½ å¯¹ä½ çš„å‡½æ•°åšäº†ä¸€äº›ä¿®æ”¹ï¼Œæƒ³è¦å‘å¸ƒä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ã€‚å¯ä»¥ç”¨`npm version`æ¥æ’åŒ…ç‰ˆæœ¬ã€‚

```
npm version major # 1.0.0
npm version minor # 0.1.0
npm version patch # 0.0.1 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é˜…è¯»æ›´å¤šå…³äº[æ’åŒ…ç‰ˆæœ¬](https://docs.npmjs.com/cli/version.html)çš„å†…å®¹ã€‚

ç„¶åä½ å¯ä»¥è¿è¡Œ`npm publish`ï¼Œç”¨æ–°çš„ç‰ˆæœ¬å†æ¬¡å‘å¸ƒè¿™ä¸ªåŒ…ã€‚

### [](#wrap-up)ğŸŒ¯åŒ…è£¹

å°±è¿™äº›äº†ï¼ç¥è´ºğŸ‰ï¼è¿™çœŸçš„æ²¡æœ‰äººä»¬æƒ³è±¡çš„é‚£ä¹ˆå¤æ‚(æˆ–è€…è‡³å°‘æˆ‘æ˜¯è¿™æ ·è®¤ä¸ºçš„)ã€‚æˆ‘å¸Œæœ›è¿™èƒ½æ¿€åŠ±æ‚¨åˆ›ä½œè‡ªå·±çš„æ¨¡å—ï¼Œå¹¶ä¸ Node ç¤¾åŒºå…±äº«å®ƒä»¬ã€‚

å¦å¤–ï¼Œè¯·ä¸è¦å°†è¿™æ ·çš„æ¨¡å—ç”¨äºç”Ÿäº§ã€‚ä¸ºäº†åˆ›å»ºä¸€ä¸ªæ¦‚å¿µéªŒè¯(PoC)å¹¶å¾—åˆ°ä¸€äº›ä¸œè¥¿ï¼Œæˆ‘ä»¬ä¸¥é‡å¿½è§†äº†æµ‹è¯•å’ŒæŒç»­é›†æˆã€‚æ²¡æœ‰ä»€ä¹ˆå¯ä»¥é˜»æ­¢ä½ ä»å°å¤„ç€æ‰‹ï¼Œåœ¨ä½ éœ€è¦çš„æ—¶å€™å¼•å…¥æ‰€æœ‰çš„åŠŸèƒ½ï¼Œæˆ–è€…ä»ä¸€ä¸ªç”Ÿæˆçš„é¡¹ç›®å¼€å§‹ã€‚ä½ åšä½ çš„ï¼