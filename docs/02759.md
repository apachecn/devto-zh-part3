# æ¯”èµ›å¯¹æ‰¿è¯ºã€‚ä»»ä½•å’Œæ‰¿è¯ºã€‚æ‰€æœ‰å¯¹æ‰¿è¯ºã€‚æ‰€æœ‰è§£å†³

> åŸæ–‡:[https://dev . to/dance 2 die/promise-race vs-promise-any-and-promise-all vs-promise-all-settled-26if](https://dev.to/dance2die/promise-race-vs-promise-any-and-promise-all-vs-promise-allsettled-26if)

*ç…§ç‰‡ç”±[ç‘å®‰Â·ä½›æœ—å“¥](https://unsplash.com/photos/C6YVD4keMJY?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨[Unsplash](https://unsplash.com/search/photos/pinky-promise?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)T5 æ‹æ‘„*

[2019 å¹´ 5 æœˆ 8 æ—¥ JavaScript (Google I/O '19)](https://www.youtube.com/watch?v=c0oy0vQKEZE) ä¸­çš„æ–°åŠŸèƒ½å±•ç¤ºäº†é™æ€æ‰¿è¯ºç»„åˆå­æ–¹æ³•ã€ [Promise.allSettled](https://github.com/tc39/proposal-promise-allSettled) å’Œ [Promise.any](https://github.com/tc39/proposal-promise-any) çš„æœªæ¥/å¯ç”¨åŠŸèƒ½ã€‚

ç°ä»£æµè§ˆå™¨ä¸­å·²ç»æœ‰ä¸¤ç§æ–¹æ³•å¯ç”¨ï¼Œ [Promise.all](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all) å’Œ [Promise.race](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/race) ã€‚

è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸åŒä¹‹å¤„ä»¥åŠæ¯ç§æ–¹æ³•çš„å·¥ä½œåŸç†ã€‚

## [](#prerequisite)ğŸš€å…ˆå†³æ¡ä»¶

### [](#promise-definition)ğŸ”†æ‰¿è¯ºå®šä¹‰

æˆ‘å°†è·³è¿‡æ‰¿è¯ºæ˜¯ä»€ä¹ˆï¼Œç›´æ¥è·³åˆ°é™æ€æ–¹æ³•ï¼Œå¹¶è®¨è®ºä¸åŒä¹‹å¤„ã€‚

è¦ç‚¹æ˜¯ï¼Œæ‰¿è¯ºæ˜¯ JavaScript å‘æ‚¨æ‰¿è¯ºå·¥ä½œå°†ä¼šå®Œæˆ(æˆ–è€…å¦‚æœå·¥ä½œæ— æ³•å®Œæˆå¯èƒ½ä¼šå¤±è´¥)çš„æ–¹å¼ã€‚

*å¦‚æœä½ ç†Ÿæ‚‰ C#ï¼Œé‚£å°±ç±»æ¯”* [*ä»»åŠ¡*](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task) *ç±»ã€‚*

æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒä»¥ä¸‹æ–‡æ¡£ã€‚

*   [Promiseâ€“MDN ä¸Šçš„ JavaScript](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)
*   JavaScript æ‰¿è¯º:è°·æ­Œå¼€å‘è€…ç®€ä»‹

### [](#promise-state-definitions)ğŸ”†æ‰¿è¯ºçŠ¶æ€å®šä¹‰

*   **å±¥è¡Œ**â€“æ‰¿è¯ºæˆåŠŸå…‘ç°æ—¶ã€‚
*   **è¢«æ‹’ç»**â€”â€”å½“ä¸€ä¸ªæ‰¿è¯ºè½ç©ºã€‚
*   **å¾…å®š**â€”â€”å½“ä¸€ä¸ªæ‰¿è¯ºâ€œ[æ—¢ä¸å±¥è¡Œä¹Ÿä¸æ‹’ç»](https://github.com/domenic/promises-unwrapping/blob/master/docs/states-and-fates.md#states)â€æ—¶ã€‚
*   **Settled**â€”â€”ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„å›½å®¶ï¼Œè€Œæ˜¯ä¸€ä¸ª*çš„æ€»ç§°*ï¼Œç”¨æ¥æè¿°ä¸€ä¸ªæ‰¿è¯ºè¦ä¹ˆè¢«å±¥è¡Œï¼Œè¦ä¹ˆè¢«æ‹’ç»ã€‚
    *   è¿™ä¸ªæœ¯è¯­å°†åœ¨åé¢ç”¨æ¥æè¿°æ–°æ–¹æ³•çš„ç‰¹å¾ã€‚

æœ‰å…³çŠ¶æ€å’Œå‘½è¿çš„æ›´è¯¦ç»†è§£é‡Šï¼Œè¯·å‚è€ƒ[çŠ¶æ€å’Œå‘½è¿](https://github.com/domenic/promises-unwrapping/blob/master/docs/states-and-fates.md)ã€‚

è¿˜æœ‰å…¶ä»–é™æ€æ‰¿è¯ºæ–¹æ³•ï¼Œæ¯”å¦‚ [Promise.reject](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/reject) ã€ [Promise.resolve](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/resolve) ï¼Œä½†æ˜¯æˆ‘å°†åªä»‹ç»â€œç»„åˆå­â€æ–¹æ³•ï¼Œå®ƒæ¥å—ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚

## [](#differences)ğŸš€å·®å¼‚

è®©æˆ‘ä»¬é¦–å…ˆçœ‹çœ‹ç°æœ‰çš„å’Œæ–°çš„ç»„åˆæ–¹æ³•ä¹‹é—´çš„åŒºåˆ«ã€‚

### [](#promiseall-vs-promiseallsettled)ğŸ”…promise . all vs . promise . all å·²è§£å†³

ä¸¤è€…éƒ½æ¥å—å¯è¿­ä»£å¯¹è±¡ï¼Œä½†æ˜¯

*   ä¸€æ—¦å¯é‡å¤å¯¹è±¡ä¸­çš„æ‰¿è¯ºè¢«æ‹’ç»ï¼Œå°±ç«‹å³æ‹’ç»ã€‚
*   `Promise.allSettled`è§£ææ—¶ä¸è€ƒè™‘ iterable å¯¹è±¡ä¸­è¢«æ‹’ç»çš„æ‰¿è¯ºã€‚

### [](#promiserace-vs-promiseany)ğŸ”…æ‰¿è¯ºã€‚æ¯”èµ›å¯¹æ‰¿è¯ºã€‚ä»»ä½•

ä¸¤è€…éƒ½æ¥å—å¯è¿­ä»£å¯¹è±¡ï¼Œä½†æ˜¯

*   `Promise.race`å¯è¿­ä»£å¯¹è±¡å†…ç¬¬ä¸€ä¸ªå·²è§£å†³(å®Œæˆæˆ–æ‹’ç»)æ‰¿è¯ºçš„çŸ­è·¯ã€‚
*   `Promise.any`çŸ­è·¯ç¬¬ä¸€ä¸ªå®ç°çš„æ‰¿è¯ºå¹¶ç»§ç»­è§£å†³ï¼Œè€Œä¸ç®¡æ‹’ç»çš„æ‰¿è¯ºï¼Œé™¤é iterable å¯¹è±¡ä¸­çš„æ‰€æœ‰æ‰¿è¯ºéƒ½æ‹’ç»ã€‚

## [](#comparison-table)ğŸš€å¯¹ç…§è¡¨

ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹ç°æœ‰çš„/å³å°†å‡ºç°çš„ç»„åˆå­æ–¹æ³•ã€‚