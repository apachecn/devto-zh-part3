# Xamarin WatchOSï¼Œä¸º Apple Watch æ‰“é€ ä¸€æ¬¾æ¸¸æˆ

> åŸæ–‡:[https://dev . to/andreslopezrm/xa marin-watch OS-create-a-game-for-apple-watch-322 c](https://dev.to/andreslopezrm/xamarin-watchos-create-a-game-for-apple-watch-322c)

Xamarin æ˜¯ä¸€ä¸ªå¼€å‘å¹³å°ï¼Œå®ƒä¸ä»…ä»…æ˜¯ä¸º iOS å’Œ Android å¼€å‘è·¨å¹³å°çš„åº”ç”¨ç¨‹åºã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•åœ¨ Xamarin ä¸­ä¸º WatchOS åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚

# [](#requirements)è¦æ±‚

*   Mac ç‰ˆ Visual Studio
*   Xcode 10
*   Mac OS Mojave
*   iPhone æ¨¡æ‹Ÿå™¨
*   è‹¹æœæ‰‹è¡¨æ¨¡æ‹Ÿå™¨

# [](#creation-of-the-solution)åˆ›å»ºè§£å†³æ–¹æ¡ˆ

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†åŸºäºçŸ³å¤´ã€å‰ªåˆ€å’Œå¸ƒçš„æ¸¸æˆä¸º Apple Watch åˆ›å»ºä¸€ä¸ªå°æ¸¸æˆï¼Œå¹¶å±•ç¤º Xamarin åœ¨åˆ›å»ºè§£å†³æ–¹æ¡ˆæ—¶æä¾›çš„ä¸€äº›å·¨å¤§å¯èƒ½æ€§ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ Visual Studio for Mac ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„è§£å†³æ–¹æ¡ˆã€‚

[![alt xamarin](../Images/1ed925e32d846707b9bb6e6fc194113d.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--6WmyfXKV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2A6RIgTTsHJMJRxB-NXa025w.png)

ä¸€æ—¦åˆ›å»ºäº†è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å°†æ·»åŠ  WatchOS é¡¹ç›®ã€‚

[![alt xamarin](../Images/68b5754c242cb395e63390df34c64c43.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--sWubyGH8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2ADXRMGbaim4bGoQ22en9ahw.png)

æˆ‘ä»¬é€‰æ‹© Watchkit åº”ç”¨ç¨‹åºã€‚

[![alt xamarin](../Images/77c2bd8ca7eb27c575b840c18b4e9e72.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Nu1QsQJ7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2A9LjzFN6D34FqwFT3xZOcFg.png)

å–æ¶ˆé€‰ä¸­åŒ…æ‹¬é€šçŸ¥é€‰é¡¹ã€‚

[![alt xamarin](../Images/9c9f478c8425464f4e24c29f67d66c02.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--KIR5D59A--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AwxXJUOI5afoJFFsbqpR4lQ.png)

# [](#design)è®¾è®¡

å›¾å½¢ç•Œé¢åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:

[![alt xamarin](../Images/3170dddbcf550fe671a63d6fb661b89b.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--691N1M4---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2Ag_9qo7DuaCisuvRDumHK8g.png)

ç•Œé¢çš„ç»“æ„ä¸ iOS æ‹–åŠ¨æ§åˆ¶ä¸­çš„ç»“æ„ç›¸åŒï¼Œåº”è¯¥å¦‚ä¸‹æ‰€ç¤º:

*   **è´´ä¸Šæ ‡ç­¾**çœ‹è°é€‰æ‹©äº†æ‰‹è¡¨(çŸ³å¤´ã€å¸ƒæˆ–å‰ªåˆ€)
*   **æ ‡æ³¨**æŸ¥çœ‹ç»“æœ(èµ¢ã€è¾“ã€å¹³)
*   **ç™½è‰²**ç»†çº¿åˆ†éš”ç¬¦
*   **å¸¦ä¸‰ä¸ªæŒ‰é’®çš„ç¾¤ç»„è§†å›¾**
*   **ç¾¤ç»„è§†å›¾**å·¦è¾¹æ˜¯æ ‡ç­¾ï¼Œå³è¾¹æ˜¯è®¡æ—¶å™¨

æŸ¥çœ‹ç»“æœçš„æ ‡ç­¾å¿…é¡»å…·æœ‰ä¸æ—¶é’Ÿå¤§å°æˆæ¯”ä¾‹çš„é«˜åº¦ï¼Œä»¥ä¾¿åœ¨ size éƒ¨åˆ†ä¸­åˆ†é…è¿™äº›å€¼ã€‚

*   å®½åº¦ï¼Œç›¸å¯¹äºå®¹å™¨èµ‹å€¼ä¸º**ï¼Œå€¼ä¸º 1ï¼Œå– 100%çš„å®½åº¦ã€‚**
*   ç›¸å¯¹äºå®¹å™¨çš„é«˜åº¦**è¢«èµ‹å€¼ä¸º 0.4ï¼Œè¿™å°†å æ—¶é’Ÿé«˜åº¦çš„ 40%ã€‚**

[![alt xamarin](../Images/adb5a3558ea236a75b63a3d8a2bfb4db.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--oU7wbqF3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2A4u5-Ly26ik5vf7d5e9gBVw.png)

ä¸€ä¸ª**ç»„è§†å›¾**æ˜¯æ°´å¹³å¹¶æ’å®¹çº³æ¯ä¸ªæ§ä»¶çš„è§†å›¾ã€‚

[![alt xamarin](../Images/737dbe8518a11908cdc53a6f036bc4b3.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--i32IXhzK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AWhirGmrNzVAjoTdq3SkMjQ.png)

å°† GroupView ä¸­çš„æ§ä»¶åœ¨å·¥å…·ç®±çš„ align éƒ¨åˆ†ä¸­ä¸ right value å³å¯¹é½ã€‚

å®šæ—¶å™¨æ˜¯ä¸€ä¸ªæ§ä»¶ï¼Œä»¥æ ‡ç­¾çš„å½¢å¼æ˜¾ç¤ºä¸€ç§æ—¶é’Ÿã€‚

[![alt xamarin](../Images/4b56649e56519d6dc0df430b3f813cf2.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Teqp1lFa--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2A2jW3PWRDk32PTK4SHZPqqg.png)

# [](#code)ä»£ç 

*   å£°æ˜ä¸€ä¸ªåŒ…å« 3 ä¸ªé€‰é¡¹å’Œä¸€ä¸ªè®¡æ•°å™¨çš„å®‰æ’ï¼Œä»¥æ˜¾ç¤ºèµ¢å¾—çš„æ¸¸æˆæ•°ã€‚

*   åˆå§‹åŒ–æ—¶ï¼Œæˆ‘ä»¬å°†å›¾åƒæ”¾åœ¨æŒ‰é’®ä¸Šï¼Œè®¡æ—¶å™¨å¼€å§‹æ˜¾ç¤ºç»è¿‡çš„æ—¶é—´ã€‚

*   ç”¨å¦‚ä½•ç¡®å®šè·èƒœè€…çš„é€»è¾‘åˆ›å»ºä¸€ä¸ªå‡½æ•°ã€‚
    æ§åˆ¶å™¨çš„å®Œæ•´ä»£ç å¦‚ä¸‹ã€‚

```
 using System;

using WatchKit;
using UIKit;
using Foundation;

namespace RockPaperScissorsXamarin.RockPaperScissorsWatchExtension
{

    public partial class InterfaceController : WKInterfaceController
    {

        private int Counter = 0;

        private enum Results { TIE, WIN, LOSE };
        private enum Moves { Rock, Paper, Scissors }

        private Moves[] Options = { Moves.Rock, Moves.Paper, Moves.Scissors };

        protected InterfaceController(IntPtr handle) : base(handle)
        {

        }

        public override void Awake(NSObject context)
        {
            base.Awake(context);

            RockButton.SetBackgroundImage(new UIImage("rock"));
            PaperButton.SetBackgroundImage(new UIImage("paper"));
            ScissorsButton.SetBackgroundImage(new UIImage("scissors"));

            Timer.Start();
        }

        public override void WillActivate()
        {
            Console.WriteLine("{0} will activate", this);
        }

        public override void DidDeactivate()
        {
            Console.WriteLine("{0} did deactivate", this);
        }

        partial void RockButton_Activated()
        {
            Check(Moves.Rock);
        }

        partial void PaperButton_Activated()
        {
            Check(Moves.Paper);
        }

        partial void ScissorsButton_Activated()
        {
            Check(Moves.Scissors);
        }

        private void Check(Moves selection) 
        {
            var random = new Random();

            var position = random.Next(0, Options.Length);
            var machineChoose = Options[position];

            if (selection == machineChoose)
            {
                ResultLabel.SetText(Results.TIE.ToString());
            }
            else if (selection == Moves.Rock && machineChoose == Moves.Scissors)
            {
                ResultLabel.SetText(Results.WIN.ToString());
                Counter += 1;
            }
            else if (selection == Moves.Rock && machineChoose == Moves.Paper)
            {
                ResultLabel.SetText(Results.LOSE.ToString());
            }
            else if (selection == Moves.Paper && machineChoose == Moves.Rock)
            {
                ResultLabel.SetText(Results.WIN.ToString());
                Counter += 1;
            }
            else if (selection == Moves.Paper && machineChoose == Moves.Scissors)
            {
                ResultLabel.SetText(Results.LOSE.ToString());
          }
            else if (selection == Moves.Scissors && machineChoose == Moves.Paper)
            {
                ResultLabel.SetText(Results.WIN.ToString());
                Counter += 1;
          }
            else if (selection == Moves.Scissors && machineChoose == Moves.Rock)
            {
                ResultLabel.SetText(Results.LOSE.ToString());
          }

            WinnerLabel.SetText($"Wins: {Counter}");
            OponentLabel.SetText($"Oponent: { machineChoose }");

        }
    }

} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é¡¹ç›®æ‰§è¡Œå’Œåº”ç”¨ç¨‹åºæ‰§è¡Œå¦‚ä¸‹:

[![alt xamarin](../Images/3fe7fbede31c11cb5a0d12f6e2f6a414.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--kCC2lXuq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AX4O6h4kfT_Z5dpmcKklLmA.png)

# [](#conclusion)ç»“è®º

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº† Xamarin åœ¨åˆ›å»ºåº”ç”¨ç¨‹åºæ—¶æä¾›çš„å¹¿æ³›å¯èƒ½æ€§ï¼Œå¢åŠ äº†å¯¹ WatchOSã€TVOSã€Android Wear ç”šè‡³ Android TV åº”ç”¨ç¨‹åºçš„æ”¯æŒã€‚ğŸ˜„

ä½ å¯ä»¥åœ¨ [Github](https://github.com/andreslopezrm/XamarinWatchOSRockPaperScissors) ä¸ŠæŸ¥çœ‹åº”ç”¨ä»£ç 