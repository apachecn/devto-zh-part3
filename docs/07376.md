# ä¸€ä¸ªæ•´æ´çš„è‡ªå·±åŠ¨æ‰‹åˆ¶ä½œæ»šåŠ¨åŠ¨ç”»çš„è§£å†³æ–¹æ¡ˆ(é€‚ç”¨äºä»»ä½•æ¡†æ¶)

> åŸæ–‡:[https://dev . to/bholmesdev/a-neat-DIY-solution-to-animated-on-scroll-for-any-framework-24lc](https://dev.to/bholmesdev/a-neat-diy-solution-to-animating-on-scroll-for-any-framework-24lc)

> **æ›´æ–° 4.10.19** ä¸‹é¢æœ€è¿‘çš„ä¸€ä¸ªè¯„è®ºç‚¸äº†æˆ‘çš„å¿ƒæ€åå­—æ‰è·¯å£è§‚å¯Ÿè€… APIã€‚è¿™å®é™…ä¸Šæ­£æ˜¯ä¸ºäº†æœ¬æ–‡çš„ç›®çš„è€Œæ„å»ºçš„ï¼Œå…è®¸æ‚¨åœ¨å…ƒç´ ä½äºå±å¹•ä¸Šçš„æŸä¸ªä½ç½®æ—¶è§¦å‘å›è°ƒï¼æœ¬æ–‡åé¢å…³äºç”¨å­˜å‚¨é›†ä¸­é€»è¾‘çš„éƒ¨åˆ†ä»ç„¶å®Œå…¨é€‚ç”¨äºæ­¤ï¼Œä½†æ˜¯äº¤é›†è§‚å¯Ÿè€…åœ¨ requestAnimationFrame ä¸Šåšäº†å¤§é‡çš„æ¸…ç†å·¥ä½œï¼ŒåŒæ—¶ä¹Ÿæ›´å…·æ€§èƒ½ã€‚ä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼Œç›´åˆ°æœ€è¿‘æ‰å‡ºç° IE å’Œ Safari æ”¯æŒã€‚å¥½å§ï¼Œäº«å—è¿™ç¯‡æ–‡ç« çš„å…¶ä½™éƒ¨åˆ†ğŸ˜Š

åœ¨ä¸‡ç»´ç½‘ä¸Šå¯»æ‰¾çµæ„Ÿï¼Œæˆ‘å‘ç°æ¯å½“æˆ‘æ»šåŠ¨åˆ°æŸäº›å…ƒç´ æ—¶ï¼Œæˆ‘å–œæ¬¢çš„è®¸å¤šç½‘ç«™éƒ½åŒ…å«æœ‰è¶£çš„å°â€œæ­ç¤ºâ€åŠ¨ç”»ã€‚è™½ç„¶å¾ˆå¾®å¦™ï¼Œä½†è¿™äº›é¢å¤–çš„è§¦æ‘¸è®©é¡µé¢æ„Ÿè§‰ä¸é‚£ä¹ˆé™æ€ï¼Œæ›´å…·å“åº”æ€§ã€‚é—®é¢˜æ˜¯...å®ç°è¿™ä¸€ç‚¹çš„æœ€ä½³æ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿ

æµè§ˆ CodePen çš„ä¾‹å­ï¼Œæˆ‘å‘ç°[æ—¶é—´](https://codepen.io/syedrafeeq/pen/yEJKn)å’Œ[æ—¶é—´](https://codepen.io/letsbleachthis/pen/zewKYE)äººä»¬æ­£åœ¨å¯»æ‰¾å¯ä»¥ä¸ºä»–ä»¬å¤„ç†å®ƒçš„åŒ…ç½—ä¸‡è±¡çš„åº“ã€‚åœ¨å·è½´ä¸Šåˆ¶ä½œåŠ¨ç”»æœ‰æ•°ä¸æ¸…çš„é€‰æ‹©ï¼Œæœ€æµè¡Œçš„æ˜¯åå‰¯å…¶å®çš„ [AOS](https://github.com/michalsnik/aos) ã€‚æˆ‘è‡ªå·±ä¹Ÿå¸Œæœ›ğŸŒ¶æˆ‘çš„ç½‘ç«™ä¸Šæœ‰ä¸€äº›æ»šåŠ¨åŠ¨ç”»ï¼Œæ‰€ä»¥æˆ‘å¾ˆè‡ªç„¶åœ°æƒ³åˆ°æ±‚åŠ©äº AOS å›¾ä¹¦é¦†ã€‚ç„¶è€Œï¼Œéšç€æˆ‘çš„å®ç°å˜å¾—è¶Šæ¥è¶Šä¸“ä¸š(ä¾‹å¦‚å¦‚ä½•é¿å…åœ¨æ»šåŠ¨åˆ° iFrame ä¹‹å‰åŠ è½½å®ƒï¼Ÿ)æˆ‘å¼€å§‹æ€€ç–‘...

æˆ‘ä¸èƒ½è‡ªå·±åšå—ï¼Ÿ

## [](#maybe-lets-see-how)ä¹Ÿè®¸å§ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•

ä»åŸºæœ¬çš„ã€æ™®é€šçš„ JS å¼€å§‹ï¼Œæ²¡æœ‰æ¡†æ¶ï¼Œè¿™ç§æ–¹æ³•å®é™…ä¸Šéå¸¸ç®€å•ã€‚æˆ‘ä»¬æ‰€éœ€è¦çš„æ˜¯ä¸€ä¸ª`onScroll`å¤„ç†ç¨‹åºå’Œä»»ä½•æˆ‘ä»¬æƒ³è¦æ¿€æ´»çš„å…ƒç´ ã€‚ä»åŸºç¡€å¼€å§‹ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæƒ³è¦è§¦å‘åŠ¨ç”»çš„ç‰¹å®š ID çš„å…ƒç´ ã€‚æ­£å¦‚ä½ å¯èƒ½æƒ³è±¡çš„é‚£æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ DOM çª—å£çš„`onScroll`äº‹ä»¶æ¥è®¡ç®—å‡ºæˆ‘ä»¬çš„å…ƒç´ åœ¨å±å¹•ä¸Šçš„ä½ç½®ï¼Œåªè¦ä½ æ»šåŠ¨:

```
window.onScroll = ({target}) => {
    const element = document.getElementById('animate-me')
    const elementTop = element.getBoundingClientRect().top
    if (elementTop < document.body.clientHeight) {
        element.classList.add('scrolled-to')
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦è·å–ä¸€äº›åµŒå¥—çš„å¯¹è±¡å±æ€§ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è·å¾—å…ƒç´ é¡¶éƒ¨åœ¨å±å¹•ä¸Šçš„åƒç´ å€¼ã€‚æœ‰ä¸€äº›æœ‰æ•ˆçš„æ–¹æ³•å¯ä»¥æ‰¾åˆ°è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯é€šè¿‡å¿«é€Ÿçš„äº’è”ç½‘æœç´¢ï¼Œä¼¼ä¹`getBoundingClientRect()`æ˜¯è·¨æµè§ˆå™¨åšåˆ°è¿™ä¸€ç‚¹çš„æœ€å¯é çš„æ–¹æ³•ã€‚

æœ‰äº†è¿™ä¸ªï¼Œæˆ‘ä»¬åº”è¯¥å¯¹ç…§æ–‡æ¡£çš„å›ºå®šé«˜åº¦ã€‚è¿™åŸºæœ¬ä¸Šåªæ˜¯ä½ çš„æµè§ˆå™¨çª—å£çš„é«˜åº¦ï¼Œä½œä¸º`clientHeight`ã€‚å¦‚æœæˆ‘ä»¬å…ƒç´ çš„é¡¶éƒ¨å°äºè¿™ä¸ªé«˜åº¦ï¼Œé‚£ä¹ˆå®ƒçš„æŸä¸ªéƒ¨åˆ†ä¸€å®šåœ¨å±å¹•ä¸Šã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€åœ¨`.animate-me.scrolled-to`ä¸Šå°†å…³é”®å¸§æ·»åŠ åˆ° CSS ä¸­ï¼Œå°±å¯ä»¥å¼€å§‹äº†ğŸ‘

### å¾ˆå¥½ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šé‡æ–°åˆ›å»ºäº†ä¸€ä¸ª MDN å¸®åŠ©é¡µé¢ç¤ºä¾‹...

è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç°å®ä¸–ç•Œä¸­ä½¿ç”¨å®ƒäº†ã€‚é¦–å…ˆï¼Œå¦‚æœä½ æ„Ÿåˆ°å¥½å¥‡ï¼Œå¹¶åœ¨é‚£é‡ŒæŠ›å‡ºäº†ä¸€ä¸ª`console.log`è¯­å¥ï¼Œé‚£ä¹ˆæ— è®ºä½•æ—¶ä½ æ‰­åŠ¨æ»šè½®ï¼Œä½ éƒ½å¯èƒ½å¾—åˆ°è¿™ä¸ªã€‚

[![Console log of on scroll handler](../Images/f5709b2fd32449c1c71dd237ab6845e4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--DXW4KZm7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/defuaddw82tdkyrzkfpo.png)

è¿™åæ˜ äº†åˆ†ææ¯ä¸ªæ»šåŠ¨äº‹ä»¶å®é™…ä¸Šæ˜¯å¤šä¹ˆæ˜‚è´µã€‚æˆ‘ä»¬æ­£åœ¨ä¸ºæˆ‘ä»¬æ»šåŠ¨çš„æ¯ä¸ªåƒç´ æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œå½“æˆ‘ä»¬å¼€å§‹ä½¿è¿™ä¸ªå‡½æ•°å˜å¾—æ›´å¥å£®æ—¶ï¼Œè¿™å¯èƒ½ä¼šå¼€å§‹å¯¼è‡´æ»åå’Œå£åƒã€‚

è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªæ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ª`requestAnimationFrame`æ¥å†³å®šæˆ‘ä»¬çš„å›è°ƒä½•æ—¶è¢«è§¦å‘ã€‚è¿™æ˜¯å¦ä¸€ä¸ªçª—å£çº§åˆ«çš„å‡½æ•°ï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥ä¸ºæµè§ˆå™¨è°ƒç”¨çš„å›è°ƒè¿›è¡Œæ’é˜Ÿã€‚å½“å®ƒè§‰å¾—å·²ç»å‡†å¤‡å¥½æ‰§è¡Œè¿™äº›åŠŸèƒ½è€Œä¸ä¼šå½±å“ä½ çš„æ»šåŠ¨ä½“éªŒæ—¶ï¼Œå®ƒå°±ä¼šå¯åŠ¨è¿™äº›åŠŸèƒ½ã€‚å€¼å¾—åº†å¹¸çš„æ˜¯ï¼Œè¿™ç§æ–¹æ³•å·²ç»è®©[ç›¸å¯¹è¾ƒé«˜çš„æµè§ˆå™¨é‡‡ç”¨ç‡](https://caniuse.com/#search=requestanimationframe)ã€‚æˆ‘ä»¬æ‰€éœ€è¦çš„æ˜¯ä¸€ä¸ªåŒ…è£…å™¨ï¼ŒåŒ…è£…æˆ‘ä»¬çš„`onScroll`å¤„ç†ç¨‹åºåˆ°`requestAnimationFrame`ï¼Œä»¥åŠä¸€ä¸ª`boolean`æ ‡å¿—ï¼Œè®©æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬ä¹‹å‰çš„å›è°ƒæ˜¯å¦å·²ç»æ‰§è¡Œå®Œæ¯•:

```
let waitingOnAnimRequest = false

const animChecker = (target) => {
    // Our old handler
    const element = document.getElementById('animate-me')
    const elementTop = element.getBoundingClientRect().top
    if (elementTop < document.body.clientHeight) {
        element.classList.add('scrolled-to')
    }
}

window.onScroll = ({target}) => {
    if (!waitingOnAnimRequest) {
        window.requestAnimationFrame(() => {
            animChecker(target)
            waitingOnAnimRequest = false
        })
        waitingOnAnimRequest = true
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¤ªå¥½äº†ï¼ç°åœ¨æˆ‘ä»¬çš„é€šè¯åº”è¯¥æ›´æœ‰æ•ˆç‡ä¸€ç‚¹ã€‚ä½†æ˜¯è®©æˆ‘ä»¬æ¥è§£å†³ä¸€ä¸ªæ›´ç´§è¿«çš„é—®é¢˜:æˆ‘ä»¬å¦‚ä½•è®©è¿™ä¸ªä¸ºæ–‡æ¡£ä¸­çš„ä»»ä½•å…ƒç´ å·¥ä½œå‘¢ï¼Ÿ

ä¸ºæˆ‘ä»¬éœ€è¦çš„æ¯ä¸ªå¯èƒ½çš„ ID æˆ–ç±»åæ·»åŠ å›è°ƒå½“ç„¶æ²¡æœ‰æ„ä¹‰ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸åˆ›å»ºä¸€ä¸ªé›†ä¸­å¼æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰çš„å…ƒç´ é€‰æ‹©å™¨é™„åŠ åˆ°è¿™ä¸ªæ•°ç»„ä¸­å‘¢ï¼Ÿ

## [](#time-for-some-loops)æŸäº›å¾ªç¯çš„æ—¶é—´

è¿™ç§æ·»åŠ åˆ©ç”¨`querySelectorAll`ç›¸å½“ç®€å•ã€‚åªéœ€åˆ›å»ºä¸€ä¸ªå…¨å±€æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰åº”è¯¥æ¿€æ´»çš„é€‰æ‹©å™¨(id æˆ–ç±»)ï¼Œå¹¶åƒè¿™æ ·å¾ªç¯éå†å®ƒä»¬:

```
let animationSelectors = ['#ID-to-animate', '.class-to-animate']

const animChecker = (target) => {
    // Loop over our selectors
    animationSelectors.forEach(selector => {
        // Loop over all matching DOM elements for that selector
        target.querySelectorAll(selector).forEach(element => {
            const elementTop = element.getBoundingClientRect().top
            if (elementTop < bodyHeight) {
                 element.classList.add('scrolled-to')
            }
        })
    })
}
... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬çš„æ»šåŠ¨åŠ¨ç”»æ£€æŸ¥å™¨åº”è¯¥èƒ½å¤Ÿå¤„ç†æˆ‘ä»¬æ‰”ç»™å®ƒçš„ä»»ä½•å…ƒç´ äº†ï¼

## [](#neat-but-i-use-x-framework-and-i-dont-think-i-could-use-this-because-of-y)æ•´é½ï¼ä½†æ˜¯æˆ‘ä½¿ç”¨ X æ¡†æ¶ï¼Œæˆ‘ä¸è®¤ä¸ºæˆ‘å¯ä»¥ä½¿ç”¨å®ƒï¼Œå› ä¸º Y

ç°åœ¨ç«™åœ¨é‚£é‡Œåˆ«åŠ¨ã€‚æˆ‘çŸ¥é“æ¯ä¸ªäººçš„å·¥å…·éƒ½æœ‰è‡ªå·±çš„æ€ªç™–ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬è¯•ç€è§£å†³å…¶ä¸­çš„ä¸€äº›ã€‚

### [](#i-use-a-component-system-so-how-do-i-centralize-this-logic)æˆ‘ä½¿ç”¨ä¸€ä¸ªç»„ä»¶ç³»ç»Ÿï¼Œé‚£ä¹ˆæˆ‘å¦‚ä½•é›†ä¸­è¿™ä¸ªé€»è¾‘ï¼Ÿ

è™½ç„¶æœ‰ä¸€ä¸ªç®€æ´çš„æˆ‘ä»¬æƒ³è¦æ¿€æ´»çš„ç±»å’Œ id çš„åˆ—è¡¨æ˜¯å¾ˆå¥½çš„ï¼Œä½†æ˜¯ç»„ä»¶ï¼Œå°¤å…¶æ˜¯æœ‰ä½œç”¨åŸŸçš„ CSS è§£å†³æ–¹æ¡ˆï¼Œä½¿å¾—è¿™ä¸ªåˆ—è¡¨å¾ˆéš¾ä¿æŒå¯è¯»æ€§å’Œå¯æ‰©å±•æ€§ã€‚

å¹¸è¿çš„æ˜¯ï¼Œè¿™ä¸ªè§£å†³æ–¹æ¡ˆåªéœ€è¦ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„å°±å¯ä»¥å·¥ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå…¨å±€å­˜å‚¨ï¼Œæ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥ç”¨å®ƒä»¬æƒ³è¦æ¿€æ´»çš„ DOM é€‰æ‹©å™¨è¿›è¡Œæ›´æ–°ã€‚æˆ‘åœ¨æœ€è¿‘ä¸€ä¸ªåŸºäº SvelteJS çš„é¡¹ç›®ä¸­ä½¿ç”¨äº†è¿™ä¸ªï¼Œå®ƒä½¿ç”¨äº†ä¸€ä¸ªåŸºäºè®¢é˜…çš„å…¨çƒå•†åº—ã€‚ä¸ºäº†æ›´æ–°`animationSelectors`ï¼Œæˆ‘åˆšåˆšåˆ›å»ºäº†ä¸€ä¸ªå•†åº—...

```
export const animationTriggers = writable({}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

...å¹¶åœ¨åˆ›å»ºç»„ä»¶æ—¶æ·»åŠ äº†ç»„ä»¶çš„ç±»åã€‚

```
import { animationTriggers } from '../stores'

onMount(() => {
    animationTriggers.set([
      ...$animationTriggers,
      '.wackily-animated-class',
      '#section-id',
    ])
  }) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™åŒæ ·é€‚ç”¨äºé€šç”¨çš„å…¨å±€çŠ¶æ€è§£å†³æ–¹æ¡ˆï¼Œå¦‚ Redux å’Œ React Contextã€‚Redux çš„å®ç°å› ä¸­é—´ä»¶çš„ä¸åŒè€Œæœ‰å¾ˆå¤§å·®å¼‚ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿™é‡Œçœç•¥äº†å¤šæ–‡ä»¶çš„ä¾‹å­ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªä½¿ç”¨ React ä¸Šä¸‹æ–‡çš„é€‰é¡¹(åœ¨æ™®é€š React ä¸­æœ‰æ•ˆ):

```
// store.js
...
const AnimationTriggerContext = React.createContext()

class StoreWrapper extends React.Component {
    constructor() {
        super()
        this.state = {
            selectors: []
        }
    }
    render() {
        return (
            // create a provider to wrap our components in at the parent level
            <AnimationTriggerContext.Provider value={{
                // make our array of selectors accessible from all children
                selectors: this.state.selectors,
                // add a helper function to update our array
                addSelector: (selector) => {
                    this.setState({
                        selectors: [...this.state.selectors, selector],
                    })
                }
            }}>
                {this.props.children}
            </AnimationTriggerContext.Provider>
        )
    }
}

//childManyLayersDeep.js
...
class Child extends React.Component {
    componentDidMount() {
        this.context.addSelector('special-class')
    }
    render() {
        return <div className="special-class"></div>
    }
}

//wrap the child with a 'withContext' so it can be accessed
export default withContext(Child) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è‡ªç„¶åœ°ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥æ‰©å±•åˆ° VueJSã€RxJS observablesï¼Œä»¥åŠåŸºæœ¬ä¸Šä»»ä½•ä½ å¯èƒ½ä½¿ç”¨å…¨å±€å­˜å‚¨çš„åœ°æ–¹ã€‚

### [](#okay-thats-pretty-nifty-but-i-cant-use-basic-css-selectors-these-are-components)å¥½çš„ï¼Œé‚£å¾ˆæ¼‚äº®...ä½†æ˜¯æˆ‘ä¸ä¼šç”¨åŸºæœ¬çš„ CSS é€‰æ‹©å™¨ã€‚è¿™äº›éƒ½æ˜¯ç»„ä»¶ï¼

å¥½å§å…¬å¹³ç‚¹ï¼›è¿™å¯èƒ½ä¼šä½¿å¤§å¤šæ•°åŸºäºç»„ä»¶çš„æ¡†æ¶å˜å¾—å¤æ‚ã€‚æœ€ç®€å•çš„å¦¥åæ˜¯åœ¨æˆ‘ä»¬çš„â€œaddâ€å‡½æ•°ä¸­ä¼ é€’å¯¹å…ƒç´ æœ¬èº«çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯ç±»åï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é¿å… DOM æŸ¥è¯¢ã€‚æ€»çš„æ¥è¯´ï¼ŒReact æˆ– Vue ä¸­ä¸èµ·çœ¼çš„`ref`å±æ€§ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç±»æˆ– ID é€‰æ‹©å™¨ï¼Œåº”è¯¥å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚

### å¦å¤–ï¼Œæˆ‘æ­£åœ¨ä½¿ç”¨ CSS-in-JSï¼Œä¸æƒ³æ£€æŸ¥ç±»åæ¥å¼€å§‹åŠ¨ç”»ã€‚æˆ‘æœ‰ä»€ä¹ˆé€‰æ‹©ï¼Ÿ

è¿™æ˜¯ç›®å‰ç›¸å½“å¸¸è§çš„æ¨¡å¼ï¼Œå¹¶ä¸”å€¾å‘äºæ›´å¤šåœ°ä¾èµ–äºç±»ååˆ‡æ¢çš„é€‚å½“ä¼ é€’ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†å‡ ä¹æ‰€æœ‰çš„é€»è¾‘æ¥æ ¹æ®æˆ‘ä»¬çš„å•†åº—æ‰¾å‡ºè¿™äº›é“å…·ã€‚æˆ‘ä»¬æ‰€éœ€è¦çš„åªæ˜¯ä¼ å…¥çš„é€‰æ‹©å™¨ä¸Šçš„ä¸€ä¸ªé¢å¤–çš„å¯¹è±¡å±æ€§ï¼Œæ¯”å¦‚ä¸€ä¸ª`scrolledTo`æ ‡å¿—ï¼Œå®ƒå¯ä»¥è®¾ç½®ä¸ºâ€œçœŸâ€æˆ–â€œå‡â€ã€‚

ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä¿®æ”¹æ·»åŠ åˆ°å­˜å‚¨ä¸­çš„å†…å®¹ï¼Œä½¿å…¶ä»ä¸€ä¸ªå­—ç¬¦ä¸²(æˆ–å¼•ç”¨)å˜æˆä¸€ä¸ªå¯¹è±¡...

```
{
    selector: 'class-name',
    scrolledTo: false,
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

...å¹¶åœ¨æ»šåŠ¨åˆ°æ—¶æ›´æ–°å…¶æ ‡å¿—ã€‚

```
const animChecker = (target) => {
    ...
        if (elementTop < bodyHeight) {
            animationTriggers[currentIndex].scrolledTo = true
        }
    ...
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬å¯ä»¥è®¢é˜…æˆ‘ä»¬çš„ animationTriggers æ•°ç»„(æˆ–è€…è·å–ä¸Šä¸‹æ–‡ï¼Œè¿™å–å†³äºæ‚¨çš„å®ç°)å¹¶å°†æˆ‘ä»¬çš„`scrolledTo`æ ‡å¿—ä½œä¸ºé“å…·ä¼ é€’ç»™ç»„ä»¶çš„æ ·å¼ã€‚

## [](#in-summary)æ€»ç»“

æ‰€ä»¥ï¼Œåœ¨ä½ æŠ—è®®ä½ å¯ä»¥åœ¨é˜…è¯»è¿™ç¯‡æ–‡ç« çš„æ—¶å€™è®©ä½ æœ€å–œæ¬¢çš„åŠ¨ç”»åº“å·¥ä½œä¹‹å‰...æˆ‘æ˜ç™½äº†ã€‚ä½†æ˜¯æˆ‘æƒ³è¯´ï¼Œå°†è¿™ä¸ªç‰¹æ€§ä½œä¸ºä¸€ä¸ªæœ‰è¶£çš„å°æŒ‘æˆ˜æ¥æ‰©å±•è‡ªå·±ï¼Œå¯¹äºç†è§£å¦‚ä½•åˆ¶ä½œåœ†æ»‘ã€é«˜æ•ˆçš„ DOM ä¾¦å¬å™¨éå¸¸æœ‰å¸®åŠ©ã€‚è¿™ä¹Ÿæ„å‘³ç€åœ¨ä½ çš„åŒ…ä¸­ä½ å°†å°‘äº†ä¸€ä¸ªéœ€è¦æ‹…å¿ƒçš„ä¾èµ–é¡¹ï¼Œæ‰€ä»¥æ²¡æœ‰çªç ´æ€§çš„æ”¹å˜ï¼Œå¹¶ä¸”åœ¨æ·»åŠ æ–°ç‰¹æ€§æ–¹é¢æœ‰å¾ˆå¤§çš„çµæ´»æ€§ï¼

ä¸ºäº†çœ‹åˆ°è¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„å®é™…åº”ç”¨ï¼Œæˆ‘ä»¬ä½æ²»äºšç†å·¥å­¦é™¢ä¿±ä¹éƒ¨çš„ä¸»é¡µä¸Šåˆ°å¤„éƒ½åœ¨ä½¿ç”¨å®ƒ:Golden Swarm Gamesã€‚è®¿é—®ç½‘ç«™ [https://gsg.surge.sh](https://gsg.surge.sh) æˆ– [the repo](https://github.com/Holben888/gsg-site) ï¼Œçœ‹çœ‹æˆ‘ä»¬çš„æ»šåŠ¨åŠ¨ç”»æ˜¯å¦‚ä½•åœ¨å¹•åå·¥ä½œçš„ã€‚

## [](#learn-a-little-something)å­¦ç‚¹å°ä¸œè¥¿ï¼Ÿ

æ»‘å¤´ã€‚å¦‚æœä½ é”™è¿‡äº†ï¼Œæˆ‘å‘å¸ƒäº†ä¸€ä¸ª[æˆ‘çš„â€œç½‘ç»œé­”æ³•â€æ—¶äº‹é€šè®¯](https://tinyletter.com/bholmesdev)æ¥æ¢ç´¢æ›´å¤šåƒè¿™æ ·çš„çŸ¥è¯†é‡‘å—ï¼

è¿™ä¸ªä¸œè¥¿è§£å†³äº† web å¼€å‘çš„[ã€é¦–è¦åŸåˆ™ã€‘](https://www.swyx.io/first-principles-approach/)ã€‚æ¢å¥è¯è¯´ï¼Œæ˜¯ä»€ä¹ˆè®©æˆ‘ä»¬æ‰€æœ‰çš„ web é¡¹ç›®è¿è½¬èµ·æ¥çš„æ‰€æœ‰ janky æµè§ˆå™¨ APIã€å¼¯æ›²çš„ CSS è§„åˆ™å’ŒåŠå¯è®¿é—®çš„ HTMLï¼Ÿå¦‚æœä½ æ­£åœ¨å¯»æ‰¾è¶…è¶Šæ¡†æ¶çš„*ï¼Œè¿™æ˜¯ç»™ä½ äº²çˆ±çš„ç½‘ç»œå·«å¸ˆçš„ğŸ”®*

 *[ç«‹å³åœ¨æ­¤è®¢é˜…](https://tinyletter.com/bholmesdev)ã€‚æˆ‘ä¿è¯æ°¸è¿œæ•™ï¼Œæ°¸è¿œä¸ä¼šåƒåœ¾é‚®ä»¶â¤ï¸*