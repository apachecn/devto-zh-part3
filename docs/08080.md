# XML å’Œ JSON ä»‹ç»#5: XML/CSV è½¬æ¢

> åŸæ–‡:[https://dev . to/katiekodes/intro-to-XML-and-JSON-5-XML-CSV-conversions-45n 5](https://dev.to/katiekodes/intro-to-xml-and-json-5-xml-csv-conversions-45n5)

ç°åœ¨æ‚¨å¯ä»¥é˜…è¯» XML å¹¶æ‰‹å†™ï¼Œè®©æˆ‘ä»¬æ¥è°ˆè°ˆ XML å’Œ CSV ä¹‹é—´çš„è½¬æ¢ã€‚

*(æç¤º:CSV åˆ° XML æ€»æ˜¯å¾ˆå®¹æ˜“çš„ã€‚XML åˆ° CSV éœ€è¦ä½ å¾ˆèªæ˜ã€‚)*

* * *

[![](../Images/15b3518feb8181bb6cc92f483aaee8cb.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--X-Ig0rYM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://katiekodes.com/images/booksmany.jpg)

## [](#posts-in-this-series)æœ¬ç³»åˆ—ä¸­çš„å¸–å­

1.  æ¦‚è¿°[![katiekodes image](../Images/91ff852c8568473209156ff5bd632209.png)](/katiekodes) [## XML å’Œ JSON ç®€ä»‹

    ### å‡¯è’‚ 3 æœˆ 18 æ—¥ 194 åˆ†é’Ÿé˜…è¯»

    # XML# JSON#æ•™ç¨‹#åˆå­¦è€…](/katiekodes/intro-to-xml-and-json-56co)
2.  è¡¨æ ¼ä¸åˆ—è¡¨*(æœ¬å¸–)*[![katiekodes image](../Images/91ff852c8568473209156ff5bd632209.png)](/katiekodes) [## XML å’Œ JSON ä»‹ç»#2:æ•°æ®çš„å½¢çŠ¶

    T12ã€‘å‡¯è’‚ 3 æœˆ 25 æ—¥ 198 åˆ†é’Ÿé˜…è¯»# XML# JSON#æ•™ç¨‹#åˆå­¦è€…](/katiekodes/intro-to-xml-and-json-2-datas-shape-3iji)
3.  XML 1[![katiekodes image](../Images/91ff852c8568473209156ff5bd632209.png)](/katiekodes)[T8ã€‘XML å’Œ JSON #3 ç®€ä»‹:XML æ¡ç›®å’Œé”®

    ### å‡¯è’‚å››æœˆ 3 æ—¥ 197 åˆ†é’Ÿé˜…è¯»

    # XML# JSON#æ•™ç¨‹#åˆå­¦è€…](/katiekodes/intro-to-xml-and-json-3-xml-items-keys-1m7i)
4.  XML 2[![katiekodes image](../Images/91ff852c8568473209156ff5bd632209.png)](/katiekodes)[T8ã€‘XML å’Œ JSON #4 ç®€ä»‹:XML å€¼

    ### å‡¯è’‚å››æœˆ 3 æ—¥ 197 åˆ†é’Ÿé˜…è¯»

    # XML# JSON#æ•™ç¨‹#åˆå­¦è€…](/katiekodes/dying-intro-to-xml-and-json-4-xml-values-5bi1)
5.  XML 3[![katiekodes image](../Images/91ff852c8568473209156ff5bd632209.png)](/katiekodes) [## XML å’Œ JSON ä»‹ç»#5: XML/CSV è½¬æ¢

    ### å‡¯è’‚å››æœˆ 3 æ—¥ 194 åˆ†é’Ÿé˜…è¯»

    # XML# JSON#æ•™ç¨‹#åˆå­¦è€…](/katiekodes/intro-to-xml-and-json-5-xml-csv-conversions-45n5)
6.  JSON[![katiekodes image](../Images/91ff852c8568473209156ff5bd632209.png)](/katiekodes)[T8ã€‘XML å’Œ JSON ä»‹ç»#6: JSON

    ### å‡¯è’‚å››æœˆ 26 æ—¥ 1911 åˆ†é’Ÿé˜…è¯»

    # XML# JSON#æ•™ç¨‹#åˆå­¦è€…](/katiekodes/intro-to-xml-and-json-6-json-30h3)
7.  é‡è¿°[![katiekodes image](../Images/91ff852c8568473209156ff5bd632209.png)](/katiekodes) [## XML å’Œ JSON ä»‹ç»#7:æ¦‚è¿°å’Œå®é™…åº”ç”¨

    ### å‡¯è’‚å››æœˆ 26 æ—¥ 196 åˆ†é’Ÿé˜…è¯»

    # XML# JSON#æ•™ç¨‹#åˆå­¦è€…](/katiekodes/intro-to-xml-and-json-7-recap-and-real-world-use-5586)

* * *

[![](../Images/ee2baa85a3cf85eb33ec0d688e565808.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--aEuiSrMd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://katiekodes.com/images/currencies-wide.jpg)

## [](#converting-xml-to-csv)å°† XML è½¬æ¢ä¸º CSV

æˆ‘ä»¬çœ‹åˆ°çš„ä¸€äº›ä¾‹å­æ˜¯å¦‚æ­¤çš„â€œå•è°ƒâ€å’Œâ€œé‡å¤â€,ä»¥è‡³äºå®ƒä»¬å¯ä»¥æˆä¸ºå¾ˆå¥½çš„ CSV æ–‡ä»¶ã€‚

æ¯”å¦‚ï¼Œè¿˜è®°å¾—æˆ‘ä»¬çš„è½¦é˜Ÿå—ï¼Ÿ

```
<RootElement>
 <Car VIN="First car's Vehicle Identification Number here"/>
 <Car VIN="Second car's Vehicle Identification Number here"/>
</RootElement> 
```

1.  æ¯ä¸ªé¡¹ç›®éƒ½æœ‰ä¸å…¶ä»–é¡¹ç›®ç›¸åŒçš„**é”®**ã€‚
2.  æ¯ä¸ª**é”®**åªæœ‰ 1 ä¸ª**å€¼**ã€‚

è¿™å°†æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ 1 åˆ— CSV æ–‡ä»¶ï¼Œä¸æ˜¯å—ï¼Ÿ

| è½¦è¾†è¯†åˆ«å·ç  |
| --- |
| ç¬¬ä¸€è¾†è½¦çš„è½¦è¾†è¯†åˆ«å·åœ¨è¿™é‡Œ |
| ç¬¬äºŒè¾†è½¦çš„è½¦è¾†è¯†åˆ«å·åœ¨è¿™é‡Œ |

* * *

[![](../Images/25ebc5109e7e7fca95fd29afd17e9b6c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--t5vE8W6u--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://katiekodes.com/images/financial_ledger-wide.jpg)

### [](#look-for-repetition)å¯»æ‰¾é‡å¤

è¿™ä¸ªæ•…äº‹çš„å¯“æ„æ˜¯:

> **æ¯æ¬¡æŸ¥çœ‹ XMLï¼Œ*å¯»æ‰¾é‡å¤*ã€‚**

è¿™å°é‚®ä»¶æ˜¯å†™ç»™æ‰€æœ‰éç¨‹åºå‘˜å’Œä¸šåŠ¡åˆ†æå¸ˆçš„ã€‚

å³ä½¿ä½ ä»æ¥æ²¡æœ‰å­¦è¿‡ç¼–ç¨‹ï¼Œè¯†åˆ«æ•°æ®çš„å½¢çŠ¶å¯ä»¥å¸®åŠ©ä½ è¯„ä¼°ä½ æ˜¯å¦è®¤ä¸ºèŠ±æ—¶é—´è®©ç¨‹åºå‘˜ä¸ºä½ å†™ä»£ç æ˜¯å€¼å¾—çš„ã€‚

* * *

[![](../Images/642fa10c88a4ad5906e81ec4b177382c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ZcGoO8rn--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://katiekodes.com/images/tools-wide.jpg)

### [](#coding)ç¼–ç 

å¦‚æœä½ çœŸçš„æƒ³è‡ªå·±ç¼–å†™ä¸€ä¸ª XML åˆ° CSV çš„è½¬æ¢è„šæœ¬ï¼Œè®©æˆ‘å‘Šè¯‰ä½ ä¸€ä¸ªç§˜å¯†:

> å°† XML æ–‡ä»¶è½¬æ¢æˆ CSV æ–‡ä»¶æœ€éš¾çš„ä¸æ˜¯â€œå­¦ä¹ ç¼–ç â€ã€‚T3 æ˜¯**çŸ¥é“è°·æ­Œä»€ä¹ˆ**ã€‚*   It is **that decides whether it is worth trying.****T11ã€‘**

 **è¯†åˆ«æ•°æ®çš„â€œå½¢çŠ¶â€æ˜¯è¿™ä¸€è¿‡ç¨‹çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚

æˆ‘ä½¿ç”¨äº†å¤§é‡çš„ Google æ¥ç¼–å†™ä¸‹é¢çš„ 5 è¡Œ Python ç¨‹åºï¼Œè¯¥ç¨‹åºå°†ä¸Šé¢çš„ XML æ–‡ä»¶ä½œä¸ºè¾“å…¥ï¼Œå¹¶å°†ä¸Šé¢çš„ CSV æ–‡ä»¶ä½œä¸ºè¾“å‡ºã€‚

```
import xml.etree.ElementTree
import pandas
car_details = [x.attrib for x in xml.etree.ElementTree.parse(r'C:\example\fleet.xml').findall('Car')]
df = pandas.DataFrame.from_dict(car_details)
df.to_csv(r'C:\example\fleet.csv', index=False) 
```

å½“æˆ‘åœ¨è°·æ­Œä¸Šæœç´¢â€œXML åˆ° CSV Pythonâ€æ—¶ï¼Œæ‰¾åˆ°æ­£ç¡®æœç´¢ç»“æœçš„å›°éš¾éƒ¨åˆ†æ˜¯:

*   æ¦‚å¿µçš„ğŸ’­ï¼š
    *   å‘ç°â€œ`Car`â€é¡¹æ˜¯â€œå¹³çš„â€&â€œé‡å¤çš„â€è¶³ä»¥æ„æˆä¸€ä¸ªå¥½çš„â€œå¾ªç¯â€
    *   å‘ç°â€œæ¯ä¸ª`Car`çš„å±æ€§è¶³å¤Ÿé‡å¤ï¼Œå¯ä»¥æ„æˆä¸€ä¸ªå¥½çš„â€œå¾ªç¯â€
*   æŠ€æœ¯çš„ğŸ’»ï¼š
    *   é€šè¿‡é˜…è¯»æ–‡æ¡£å’Œè°·æ­Œæœç´¢ï¼Œæˆ‘äº†è§£åˆ° Python çš„â€œElementTreeâ€æ’ä»¶æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥åˆ—å‡ºé¡¹ç›®*(â€œ`.attrib`â€)*çš„æ‰€æœ‰é”®å€¼å±æ€§å¯¹ï¼Œè¿™ç§æ–¹æ³•ä¸â€œPandasâ€åŒ…çš„â€œ`.from_dict()`â€å‘½ä»¤å…¼å®¹
    *   ç†è§£ Python çš„â€œåˆ—è¡¨â€ã€â€œå­—å…¸â€ã€å¾ªç¯ã€ElementTree å’Œ Pandasï¼Œç›´åˆ°æˆ‘å¾—åˆ°æˆ‘æƒ³è¦çš„è¾“å‡º

é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œæ˜¯æ¦‚å¿µä¸Šçš„å·¥ä½œå¸®åŠ©æˆ‘è®¤è¯†åˆ°è¿™ç§è½¬å˜â€œåœ¨æˆ‘çš„å¤´è„‘ä¸­å¾ˆå®¹æ˜“åšåˆ°â€

ä¸€æ—¦æˆ‘çŸ¥é“å®ƒâ€œåœ¨æˆ‘çš„è„‘æµ·ä¸­å¾ˆå®¹æ˜“å®ç°â€ï¼Œæˆ‘å°±å¯ä»¥ä¸ºâ€œç”¨ä»£ç å®ç°å®ƒâ€åˆ¶å®šä¸€ä¸ªæ¸¸æˆè®¡åˆ’

* * *

[![](../Images/17c07867fe111308b410a0ef99ec038e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--89wVN7J1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://katiekodes.com/images/holdingeuros-wide.jpg)

## [](#converting-csv-to-xml)å°† CSV è½¬æ¢ä¸º XML

æ­£å¦‚æˆ‘åœ¨æœ¬ç³»åˆ—çš„ç¬¬äºŒç¯‡æ–‡ç« ä¸­æåˆ°çš„ï¼Œå…³äºæ•°æ®çš„å½¢çŠ¶ï¼Œå°†â€œè¡¨æ ¼å½¢çŠ¶â€çš„æ•°æ®è½¬æ¢æˆâ€œåˆ—è¡¨å½¢çŠ¶çš„åˆ—è¡¨â€æ•°æ®åœ¨æ¦‚å¿µä¸Šå¹¶ä¸å›°éš¾ã€‚

å› æ­¤ï¼Œä» CSV åˆ° XML æ›´å¤šçš„æ˜¯çº¯ç²¹çš„æŠ€æœ¯ä»»åŠ¡ã€‚

çœŸçš„æ²¡æœ‰ä»€ä¹ˆå¤§çš„æ¦‚å¿µæ€§é—®é¢˜è¦é—®ã€‚

**ä¸šåŠ¡åˆ†æå¸ˆ**:â€œæˆ‘çš„ç¨‹åºå‘˜èƒ½åšåˆ°å—ï¼Ÿâ€æ°¸è¿œæ˜¯â€œæ˜¯çš„ï¼ï¼!"ä» CSV åˆ° XMLã€‚

* * *

[![](../Images/642fa10c88a4ad5906e81ec4b177382c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ZcGoO8rn--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://katiekodes.com/images/tools-wide.jpg)

### [](#coding)ç¼–ç 

å¯¹äºé‚£äº›å¯¹ä»£ç æ„Ÿå…´è¶£çš„äººæ¥è¯´ï¼Œè¿™é‡Œæœ‰ä¸€ç§ç”¨ Python å®ç°çš„æ–¹æ³•ï¼Œä½¿ç”¨ä¸€ä¸ªåä¸º" [lxml](https://lxml.de/tutorial.html) "çš„æ’ä»¶ï¼Œæˆ‘å–œæ¬¢ç”¨å®ƒæ¥ç”¨*ç¼–å†™* XMLï¼Œå› ä¸ºå®ƒçš„"`pretty_print`"è®¾ç½®æ–¹ä¾¿äº†æ¢è¡Œç¬¦å’Œåˆ¶è¡¨ç¬¦ï¼Œä¾¿äºäººä»¬é˜…è¯»:

```
import lxml.etree
import pandas
xmlroot = lxml.etree.Element('RootElement')
df = pandas.read_csv(r'C:\example\fleet.csv')
for row in df.to_dict(orient='records'):
    current_car = lxml.etree.Element('Car')
    xmlroot.append(current_car)
    for colname, cellvalue in row.items():
        current_car.set(colname, cellvalue)
with open(r'C:\example\fleet2.xml', 'wb') as filepath:
    filepath.write(lxml.etree.tostring(xmlroot, pretty_print=True)) 
```

(æˆ‘ä»¬å°†ä¸å¾—ä¸æ”¹å¤©å†è§£é‡Šå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚)

* * *

[![](../Images/9e9a42350b141ae6e94235b07ed69cb8.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--WdD4DMbJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://katiekodes.com/images/shoppingbags.jpg)

## [](#takeaways)å¤–å–

*   ä»æ¦‚å¿µä¸Šæ¥è¯´ï¼ŒXML åˆ° CSV å¯èƒ½å¾ˆéš¾ç¼–ç ï¼ŒåŸå› ä¸æœ¬ç³»åˆ—ç¬¬äºŒç¯‡æ–‡ç« [ä¸­çš„â€œç”Ÿæ—¥ç¤¼ç‰©æ¸…å•â€](https://dev.to/katiekodes/intro-to-xml-and-json-2-datas-shape-3iji)ä¸º*åˆ¶ä½œçš„éå¸¸éš¾çœ‹çš„ç”µå­è¡¨æ ¼ç›¸åŒã€‚*
    *   XML åˆ° CSV é€šå¸¸å¾ˆéš¾ç¼–ç ï¼Œç”¨çº¸å’Œç¬”ä¹Ÿå¾ˆéš¾ã€‚
    *   ä¸ºäº†å¼„æ¸…æ¥šè¿™æ ·çš„è½¬æ¢æ˜¯å¦å¯è¡Œï¼Œé‡è¦çš„æ˜¯åœ¨è¯»å– XML æ–‡ä»¶*æ—¶è§‚å¯Ÿå®ƒçœ‹èµ·æ¥åƒä»€ä¹ˆã€‚*
*   å¦ä¸€æ–¹é¢ï¼ŒCSV åˆ° XML åœ¨æ¦‚å¿µä¸Šå¾ˆå®¹æ˜“ï¼Œå› ä¸ºæˆ‘ä»¬çš„â€œ[ç°¿è®°å‘˜çš„åˆ†ç±»è´¦](https://dev.to/katiekodes/intro-to-xml-and-json-2-datas-shape-3iji/#example-table-data-in-csv-xml-amp-json)â€å¾ˆå®¹æ˜“ç”¨çº¸å’Œç¬”è‰è‰è®°ä¸‹ï¼Œä½œä¸ºä¸€ä¸ªç›¸å¯¹å¹³å¦ã€é‡å¤çš„é¡¹ç›®ç¬¦å·åˆ—è¡¨ã€‚

ä¸€æ—¦ä½ å®Œæˆäº†æ¦‚å¿µæ€§çš„å·¥ä½œï¼Œå‰©ä¸‹çš„é—®é¢˜å°±å¯ä»¥é€šè¿‡è¯¢é—®ä½ çš„å¼€å‘äººå‘˜æˆ–è€…ä»æŠ€æœ¯æ–¹é¢ç€æ‰‹ç¼–å†™ä½ è‡ªå·±çš„ä»£ç æ¥è§£å†³ã€‚

å¿«ä¹è½¬æ¢ï¼ğŸ’±**