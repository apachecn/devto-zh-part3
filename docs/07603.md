# å†è§ Azure é—¨æˆ·ï¼Œæ¬¢è¿ Azure CLI

> åŸæ–‡:[https://dev . to/tech watching/good-bye-azure-portal-welcome-azure-CLI-oo2](https://dev.to/techwatching/good-bye-azure-portal-welcome-azure-cli-oo2)

åœ¨è¿™ç¯‡å…³äº Azure CLI çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®º:

*   ç®¡ç† Azure èµ„æº
*   Azure CLI è¯­æ³•
*   æ·±å…¥äº†è§£ Azure CLI
*   åœ¨å“ªé‡Œä½¿ç”¨ Azure CLI
*   Azure CLI äº¤äº’æ¨¡å¼

Azure CLI å¯ä»¥æŒ‰ç…§æœ¬é¡µé¢ä¸Š[çš„è¯´æ˜è¿›è¡Œå®‰è£…ã€‚](https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest)

## [](#1-managing-azure-resources)1 -ç®¡ç† Azure èµ„æº

Azure èµ„æºå¯ä»¥é€šè¿‡ä¸åŒçš„æ–¹å¼è¿›è¡Œç®¡ç†ï¼Œä½†ä¸»è¦çš„æœ‰ [Azure Portal](https://portal.azure.com) ã€ [Azure PowerShell](https://docs.microsoft.com/en-us/powershell/azure/) å’Œ [Azure CLI](https://docs.microsoft.com/en-us/cli/azure) ã€‚å¦‚æœä½ æ˜¯ Azure çš„æ–°æ‰‹ï¼Œæˆ–è€…ä½ æ­£åœ¨åˆ›å»ºä½ ä¸ç†Ÿæ‚‰çš„èµ„æºï¼Œæœ‰ä¸€ä¸ª GUI æ¥ç†è§£ä½ åœ¨åšä»€ä¹ˆæ€»æ˜¯å¾ˆå¥½çš„ï¼ŒAzure Portal æ˜¯æ­£ç¡®çš„é€‰æ‹©ã€‚

[![](../Images/a0a096d049d46e5b0621f5be16b7487f.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--YO_3CQrB--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://techwatching.dev/posts/images/azurecli_portal_1.png)

ç„¶è€Œï¼Œåœ¨é—¨æˆ·ä¸­å¤„ç†èµ„æºã€ä»ä¸€ä¸ªçª—æ ¼ç§»åŠ¨åˆ°å¦ä¸€ä¸ªçª—æ ¼ä»¥æ€»æ˜¯æ‰§è¡Œç›¸åŒç±»å‹çš„æ“ä½œä¼šå¾ˆå¿«å˜å¾—æœ‰ç‚¹éº»çƒ¦ã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³æ›´æœ‰æ•ˆç‡ï¼Œæˆ–è€…å¦‚æœä½ æ›´å–œæ¬¢å‘½ä»¤è¡Œï¼Œä½ ä¼šå‘ç° Azure CLI æˆ– Azure PowerShell æ˜¯ Azure Portal çš„éå¸¸å¥½çš„æ›¿ä»£å“ã€‚ä¸¤è€…éƒ½æ˜¯è·¨å¹³å°å·¥å…·(PowerShell Core è¿è¡Œåœ¨ Windowsã€MacOS å’Œ Linux ä¸ŠğŸ‘)å¹¶æä¾›ç›¸åŒçš„åŠŸèƒ½æ¥ç®¡ç† Azure èµ„æºã€‚

ç›´åˆ°æœ€è¿‘ï¼Œå½“æˆ‘ä¸ä½¿ç”¨ Azure Portal æ—¶ï¼Œæˆ‘æ›´å€¾å‘äºä½¿ç”¨ Azure PowerShell è€Œä¸æ˜¯ Azure CLIï¼Œå¯èƒ½æ˜¯å› ä¸ºæˆ‘ç»å¸¸æ‰¾åˆ°ç”¨ PowerShell ç¼–å†™çš„æˆ‘æƒ³åšçš„äº‹æƒ…çš„ç¤ºä¾‹ã€‚ä½†äº‹å®ä¸Šï¼ŒAzure PowerShell ä¸­æœ‰å¾ˆå¤šå‘½ä»¤ï¼Œå³ä½¿æœ‰äº†è‡ªåŠ¨å®ŒæˆåŠŸèƒ½ï¼Œæˆ‘ä¹Ÿä¸å¤ªæ“…é•¿è®°ä½å®ƒä»¬ã€‚æ‰€ä»¥æˆ‘æ— æ³•åœæ­¢ä½¿ç”¨ Azure PortalğŸ˜•ã€‚ç„¶è€Œï¼Œæœ€è¿‘å½“æˆ‘å¼€å§‹å‘ç° Azure CLI çš„å¼ºå¤§æ—¶ï¼Œæˆ‘ç»ˆäºå›åˆ°äº†å‘½ä»¤è¡Œ:è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„å·¥å…·ï¼Œè¿™æ˜¯æˆ‘æ¥ä¸‹æ¥å°†å°è¯•å‘æ‚¨å±•ç¤ºçš„ã€‚

## [](#2-azure-cli-syntax)2 - Azure CLI è¯­æ³•

Azure CLI è¯­æ³•å¾ˆå®¹æ˜“ç†è§£ã€‚ä¾‹å¦‚ï¼Œå‘½ä»¤`az webapp list`å°†åˆ—å‡ºæ‚¨å½“å‰ç™»å½•çš„è®¢é˜…ä¸­çš„ web åº”ç”¨ç¨‹åºã€‚

å®é™…ä¸Šï¼ŒAzure CLI å‘½ä»¤å…·æœ‰ä»¥ä¸‹ç»“æ„:

*   ä»£è¡¨ Azure æœåŠ¡çš„**å‘½ä»¤ç»„**,å®ƒå¯ä»¥æ˜¯å­ç»„çš„ç»„åˆ
*   ä¸€ä¸ª**å‘½ä»¤**ï¼Œè¿™æ˜¯æ‚¨æƒ³è¦åœ¨ group / Azure æœåŠ¡ä¸Šæ‰§è¡Œçš„æ“ä½œ
*   **å‚æ•°**å¯é€‰ï¼Œæ˜¯å‚æ•°åç§°å’Œå€¼çš„åˆ—è¡¨

è¦åœ¨æ‚¨çš„ç»ˆç«¯ä¸­ç™»å½•æ‚¨çš„ Azure å¸æˆ·ï¼Œæ‚¨å¿…é¡»æ‰§è¡Œ Azure CLI å‘½ä»¤`az login`ï¼Œå…¶ä¸­`az`æ˜¯å‘½ä»¤ç»„ï¼Œ`login`æ˜¯ä¸ç»„/æœåŠ¡`az`(æ„æŒ‡ Azure)ç›¸å…³çš„å‘½ä»¤ã€‚

åœ¨æˆ‘ä»¬ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œ`az webapp list`:

*   `az webapp`æ˜¯ç”±`az`åŠå…¶å­ç»„`webapp`ç»„æˆçš„æŒ‡æŒ¥ç»„å—
*   `list`æ˜¯å‘½ä»¤
*   è¿™é‡Œæ²¡æœ‰äº‰è®º

æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªå‘½ä»¤ä¸­æ·»åŠ ä¸€äº›å‚æ•°ï¼Œæ¯”å¦‚`--resource-group`å‚æ•°(æˆ–`-g`)æ¥åªåˆ—å‡ºç‰¹å®šèµ„æºç»„ä¸­çš„ WebAppsï¼Œè¿™æ ·å°±å˜æˆäº†`az webapp list --resource-group 'myResourceGroupName'`

ä¸€äº›å‚æ•°æ˜¯å…¨å±€å¯ç”¨çš„å‚æ•°ï¼Œè¿™æ„å‘³ç€å¯ä»¥ç”¨äºæ¯ä¸ªå‘½ä»¤ã€‚è¿™å°±æ˜¯æ˜¾ç¤ºå‘½ä»¤å¸®åŠ©ä¿¡æ¯çš„`--help`å‚æ•°çš„æƒ…å†µã€‚ä¸‹é¢çš„ç¤ºä¾‹æ˜¾ç¤ºäº†ä½¿ç”¨`--help`å‚æ•°å¯ä»¥æ›´å¥½åœ°ç†è§£ Azure CLI å‘½ä»¤çš„ç»“æ„ã€‚

[![](../Images/d512e5f880580fc90d0fe760b466ca0f.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--icZ1jmHn--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://techwatching.dev/posts/images/azurecli_console_1.png)

ä¸€æ—¦ä¹ æƒ¯äº† Azure CLI è¯­æ³•ï¼Œå®ƒå°±æ¯” Azure Portal æ–¹ä¾¿å¾—å¤šï¼Œä½ ä¸å¿…æœç´¢ä½ éœ€è¦ä½¿ç”¨çš„ Azure PowerShell å‘½ä»¤ã€‚ä½ åªéœ€è¦åœ¨ä½ æƒ³å·¥ä½œçš„ Azure æœåŠ¡ä¸­å¯»æ‰¾å¯ç”¨çš„å­ç»„å’Œå‘½ä»¤(ä¸è¦å¿˜è®°ä½¿ç”¨`--help`)ï¼Œä½ å°†å¾ˆå¿«å®Œæˆå·¥ä½œã€‚

## [](#3-deep-dive-in-azure-cli)3 -åœ¨ Azure CLI ä¸­æ·±åº¦æ½œæ°´

### [](#command-output)å‘½ä»¤è¾“å‡º

[![](../Images/55abb29f0cb0acef51e430551bb1eb2b.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--8KOIvJmn--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://techwatching.dev/posts/images/azurecli_console_2.png)

é»˜è®¤æƒ…å†µä¸‹ï¼ŒAzure CLI å‘½ä»¤çš„è¾“å‡ºæ ¼å¼æ˜¯ jsonï¼Œä½†æ˜¯é€šè¿‡æŒ‡å®šè¾“å‡ºå‚æ•°(`--output`æˆ–`-o`)ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æ ¼å¼ï¼Œæ¯”å¦‚:`az group list -o table`ã€‚

[![](../Images/2808cece09c30ff7f16cbfd0ea93fe31.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--uN85f-dQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://techwatching.dev/posts/images/azurecli_console_3.png)

ğŸ’å¯ä»¥ä½¿ç”¨`az configure`å‘½ä»¤é…ç½®é»˜è®¤è¾“å‡ºæ ¼å¼ã€‚æ­¤å‘½ä»¤è¿˜å…è®¸æ‚¨é…ç½®å…¶ä»–è®¾ç½®ï¼Œä¾‹å¦‚ä¸ºæ‚¨çš„å‘½ä»¤é…ç½®é»˜è®¤èµ„æºç»„ã€‚

### [](#using-variables)ä½¿ç”¨å˜é‡

æ— è®ºæ‚¨é€‰æ‹©åœ¨ Bash è¿˜æ˜¯ PowerShell ä¸­è¿è¡Œå‘½ä»¤ï¼Œæ‚¨éƒ½å¯ä»¥åœ¨ Azure CLI ä¸­ä½¿ç”¨å˜é‡ï¼Œåªæœ‰åˆ›å»ºå˜é‡çš„è¯­æ³•ä¼šæ ¹æ®æ‚¨ä½¿ç”¨çš„å‘½ä»¤è¡Œ Shell è€Œæ”¹å˜ã€‚

> æœ¬æ–‡ä¸­çš„ç¤ºä¾‹ä½¿ç”¨ PowerShell è¯­æ³•ã€‚

```
$rgName = 'TestingAzureCLI'

# Create a new resource group
az group create -n $rgName -l westeurope

# Create an App Service plan with the Free tier
az appservice plan create -n $webAppName -g $rgName --sku FREE

# Show the App Service plan just created 
az appservice plan show -n $webAppName -g $rgName 

# Store the result of the show query in a PowerShell variable
$servicePlan = az appservice plan show -n $webAppName -g $rgName 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#jmespath)JMESPath

å¦‚æœä½ ä¸çŸ¥é“[jme path](http://jmespath.org/)ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨äº JSON çš„æŸ¥è¯¢è¯­è¨€ï¼Œå…è®¸ä» JSON æ–‡æ¡£æˆ– Azure CLI ä¸Šä¸‹æ–‡ä¸­çš„ CLI è¾“å‡ºä¸­æå–å’Œè½¬æ¢å…ƒç´ ã€‚

ä¸ºäº†ä½¿ç”¨ JMESPathï¼Œæ‚¨å¿…é¡»åœ¨ CLI å‘½ä»¤ä¸­æ·»åŠ å‚æ•°`--query`ï¼Œåè·Ÿæ‚¨çš„ JMESPath æŸ¥è¯¢ã€‚è®©æˆ‘ä»¬çœ‹ä¸€äº›ä¾‹å­ã€‚

å¯¹æˆ‘çš„è®¢é˜…æ‰§è¡Œçš„æŸ¥è¯¢`az group list`è¿”å›ä»¥ä¸‹ json :

```
[
  {
    "id": "/subscriptions/ ********-**** - ****-**** - ************ /resourceGroups/CloudShellRG",
    "location": "westeurope",
    "managedBy": null,
    "name": "CloudShellRG",
    "properties": {
      "provisioningState": "Succeeded"
    },
    "tags": {
      "Environment": "Production"
    },
    "type": null
  },
  {
    "id": "/subscriptions/ ********-**** - ****-**** - ************ /resourceGroups/MyApp1ResourceGroup",
    "location": "canadacentral",
    "managedBy": null,
    "name": "MyApp1ResourceGroup",
    "properties": {
      "provisioningState": "Succeeded"
    },
    "tags": {
      "Department": "RH",
      "Environment": "Dev"
    },
    "type": null
  },
  {
    "id": "/subscriptions/ ********-**** - ****-**** - ************ /resourceGroups/TestingAzureCLI",
    "location": "westeurope",
    "managedBy": null,
    "name": "TestingAzureCLI",
    "properties": {
      "provisioningState": "Succeeded"
    },
    "tags": {
      "Department": "IT",
      "Environment": "Production"
    },
    "type": null
  }
] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä»¥ä¸‹æ˜¯ä¸€äº›æ›´ç²¾ç¡®åœ°æŸ¥è¯¢èµ„æºç»„çš„ CLI å‘½ä»¤:

*   ä»…é€‰æ‹©å¸¦æœ‰`az group list --query '[].name'` [![](../Images/19b15e929b503472a9ee567ac4f31423.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--oRKTTnkH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://techwatching.dev/posts/images/azurecli_jmespath_2.png) çš„èµ„æºç»„åç§°

*   ç”¨`az group list --query "[?location=='westeurope']"` [![](../Images/8905cbed96eb6f96e0be026110d62962.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--sOcCmqMS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://techwatching.dev/posts/images/azurecli_jmespath_1.png) è¿‡æ»¤è¥¿æ¬§çš„èµ„æºç»„

*   ä½¿ç”¨å€¼ä¸º Production çš„ç¯å¢ƒæ ‡è®°è¿‡æ»¤èµ„æºç»„ï¼Œé€‰æ‹©å¹¶é‡å‘½ååç§°ï¼Œå¹¶ä½¿ç”¨`az group list --query "[?tags.Environment=='Production'].{RGName:name, RGTags:tags}"` [![](../Images/26ec38bd99d14942f9b35d30fe696050.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--tNIJnOca--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://techwatching.dev/posts/images/azurecli_jmespath_3.png) æ ‡è®°å±æ€§

ğŸ’JMESPath ä¸æ˜¯ Azure CLI ç‹¬æœ‰çš„ä¸œè¥¿ï¼Œå®ƒè¢«ç”¨äºä¸åŒçš„å…¶ä»–é¡¹ç›®æˆ–å·¥å…·ï¼Œå¦‚ [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/cli-usage-output.html#controlling-output-filter) ã€‚

### [](#mixing-output-variables-and-jmespath)æ··åˆè¾“å‡ºï¼Œå˜é‡å’Œ JMESPath

ä¸€æ—¦ä½ ç†è§£äº†å¦‚ä½•åœ¨ Azure CLI ä¸­ä½¿ç”¨å˜é‡ã€å‘½ä»¤è¾“å‡ºå’Œ JMESPathï¼Œä½ å°±å¯ä»¥ç”¨ CLI å‘½ä»¤æ··åˆç®¡ç† Azure èµ„æºï¼Œè¿™äº› CLI å‘½ä»¤ä½¿ç”¨ä»¥å‰çš„ CLI å‘½ä»¤çš„ç»“æœï¼Œå¯ä»¥ç”Ÿæˆå¼ºå¤§çš„è„šæœ¬ğŸ˜ƒ

å‡è®¾æˆ‘ä»¬æƒ³åœ¨ä½äºè¥¿æ¬§çš„è®¢é˜…çš„ç°æœ‰åº”ç”¨æœåŠ¡è®¡åˆ’ä¸­ä¸º IT éƒ¨é—¨åˆ›å»ºä¸€ä¸ª Web åº”ç”¨ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·åš:

```
# Retrieve resource group name of IT Department in West Europe
$itRgName = az group list --query "[?tags.Department=='IT' && location=='westeurope'].name" -o tsv

# Retrieve app service plan name in this resource group
$appServicePlan = az appservice plan list -g $itRgName --query "[0].name" -o tsv

# Create a new Web App on this app service plan
az webapp create -n "MyNewWebAp" -g $itRgName --plan $appServicePlan

# List all Web App in this resource group
az webapp list -g $itRgName --query "[].name" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä½†ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°æƒ³è±¡ Azure CLI ä¸ºä½ æä¾›çš„æ‰€æœ‰å¯èƒ½æ€§ã€‚

## [](#4-where-to-use-azure-cli)4 -åœ¨å“ªé‡Œä½¿ç”¨ Azure CLI

æ‰€æœ‰è¿™äº›éƒ½å¾ˆæ£’ï¼Œä½†æˆ‘ä»¬è¿˜æ²¡æœ‰çœŸæ­£è®¨è®ºæˆ‘ä»¬å¯ä»¥åœ¨å“ªé‡Œä½¿ç”¨ Azure CLIï¼Œè®©æˆ‘ä»¬ç°åœ¨å°±å¼€å§‹å§ï¼

### [](#bash-vs-powershell)Bash vs PowerShell

æˆ‘ä»¬ç®€å•åœ°æåˆ°è¿‡ä½ å¯ä»¥åœ¨ Bash æˆ–è€… PowerShell ä¸­è¿è¡Œ Azure CLIï¼Œäº‹å®ä¸Šä½ ä¹Ÿå¯ä»¥åœ¨ Windows å‘½ä»¤æç¤ºç¬¦ä¸­è¿è¡Œå®ƒã€‚å°½ç®¡ Azure CLI æœ€åˆè¢«è®¾è®¡æˆé¢å‘ bash çš„ï¼Œä½†å®ƒåœ¨ PowerShell ä¸­å·¥ä½œå¾—å¾ˆå¥½ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå®Œç¾çš„æœ‰æ•ˆé€‰æ‹©ã€‚ä½ é€‰æ‹©ä»€ä¹ˆå‘½ä»¤è¡Œ shell çœŸçš„å–å†³äºä½ è‡ªå·±ï¼

å¹¶ä¸”ä¸è¦è®¤ä¸ºæ‚¨å°†è¢«é™åˆ¶äºä½¿ç”¨ä¸€ç§æˆ–å¦ä¸€ç§ shellï¼Œè¿™å–å†³äºæ‚¨æ­£åœ¨å·¥ä½œçš„å¹³å°ï¼Œå› ä¸º PowerShell å’Œ Bash éƒ½å¯ä»¥åœ¨ä»»ä½•å¹³å°ä¸Šä½¿ç”¨(PowerShell æ ¸å¿ƒæ˜¯è·¨å¹³å°çš„ï¼ŒBash å¯ä»¥é€šè¿‡ Linux çš„ Windows å­ç³»ç»Ÿåœ¨ Windows ä¸­ä½¿ç”¨)ã€‚å› æ­¤ï¼Œæˆ‘å»ºè®®ä½ ä½¿ç”¨ä½ æœ€ç†Ÿæ‚‰çš„ shell æ¥ä½¿ç”¨ Azure CLIã€‚

å…³äºè‡ªåŠ¨è¡¥å…¨ï¼Œç®€å•æä¸€ä¸‹:ç›®å‰åªæœ‰ bash æ”¯æŒ tab è¡¥å…¨ï¼Œå¾®è½¯ç›®å‰ä¸æ‰“ç®—å¢åŠ å¯¹ PowerShell çš„æ”¯æŒï¼Œä½†æ˜¯å¯¹ç¤¾åŒºè´¡çŒ®å¼€æ”¾ã€‚è¿™æ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼Œä½†çŸ¥é“è¿™ä¸€ç‚¹å¾ˆå¥½ï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸Šæœ‰ä¸€ä¸ª GitHub é—®é¢˜ã€‚å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨ bashï¼Œå¹¶ä¸” tab è¡¥å…¨å¯¹ä½ çœŸçš„å¾ˆé‡è¦ï¼Œé‚£ä¹ˆ [Azure CLI äº¤äº’æ¨¡å¼](https://docs.microsoft.com/en-us/cli/azure/interactive-azure-cli?view=azure-cli-latest)å°±æ˜¯ä½ æ­£åœ¨å¯»æ‰¾çš„(æˆ‘ä»¬å°†åœ¨æœ¬æ–‡åé¢è®¨è®º)ï¼

### Visual Studio ä»£ç ä¸­çš„ Azure CLI

è‡³äºå¤§å¤šæ•° Azure ç»„ä»¶ï¼Œåœ¨ vs ä»£ç ä¸­æœ‰ä¸€ä¸ª Azure CLI çš„æ‰©å±•:Azure CLI Toolsã€‚

[![](../Images/25aa7a1b8e0676ed8ac956cb2ed85b7c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--CoMPv5SL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://techwatching.dev/posts/images/azurecli_vscode_1.png)

æœ‰äº†è¿™ä¸ªæ‰©å±•ï¼Œä½ å¯ä»¥åˆ›å»º Azure CLI å‰ªè´´ç°¿ï¼Œè¿™äº›å‰ªè´´ç°¿æ˜¯å¸¦æœ‰`.azcli`æ‰©å±•åçš„æ–‡ä»¶ï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­æ™ºèƒ½æ„ŸçŸ¥ä½ ç¼–å†™çš„ CLI å‘½ä»¤ã€‚

[![](../Images/c4b938d0f1bc1511c2bf3f9e28fdc8f8.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--T3BO8gYx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://techwatching.dev/posts/images/azurecli_vscode_3.png)

å®ƒè¿˜å…è®¸æ‚¨åœ¨é›†æˆç»ˆç«¯ä¸­è¿è¡Œå‘½ä»¤ï¼Œæˆ–è€…åœ¨å¹¶æ’ç¼–è¾‘å™¨ä¸­è¿è¡Œå‘½ä»¤å¹¶æ˜¾ç¤ºå…¶è¾“å‡ºï¼Œå¦‚ä¸‹é¢çš„å±å¹•æˆªå›¾æ‰€ç¤ºã€‚

[![](../Images/7bccd21ff6e1435288e1710559e36848.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--8JA4JRDY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://techwatching.dev/posts/images/azurecli_vscode_2.png)

### [](#azure-cloud-shell)è”šè“è‰²çš„äº‘å£³

æˆ‘æ²¡æœ‰è°ˆåˆ° Azure CLI çš„å®‰è£…ï¼Œä½†ä½ å¯ä»¥åœ¨å¾®è½¯æ–‡æ¡£ä¸­æ‰¾åˆ°ä½ éœ€è¦çš„ä¸€åˆ‡ã€‚äº‹å®ä¸Šï¼ŒAzure Cloud Shell ä¸ºæ‚¨æä¾›äº†ä¸€ç§æ— éœ€å®‰è£…ä»»ä½•ä¸œè¥¿å³å¯ä½¿ç”¨ Azure CLI çš„æ–¹å¼ã€‚

å¦‚æœæˆ‘ä»¬å¼•ç”¨æ–‡æ¡£:

> Azure äº‘å¤–å£³æ˜¯ä¸€ä¸ªäº¤äº’å¼çš„ã€æµè§ˆå™¨å¯è®¿é—®çš„å¤–å£³ï¼Œç”¨äºç®¡ç† Azure èµ„æº

å…·ä½“æ¥è¯´ï¼Œä½ æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ï¼Œè¿›å…¥[https://shell.azure.com](https://shell.azure.com)ï¼Œç™»å½•ä½ çš„ Azure è®¢é˜…ï¼Œä½ å°±å¯ä»¥è®¿é—®ä¸€ä¸ª shell (PowerShell æˆ– Bash)ï¼Œå®ƒå¯ä»¥é€šè¿‡ Azure CLI ä¸ä½ çš„è®¢é˜…çš„æ‰€æœ‰èµ„æºè¿›è¡Œäº¤äº’ã€‚

[![](../Images/7a9e8d1cfb193e70fead8924a63ba7d4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--fnpkI3pD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://techwatching.dev/posts/images/azurecli_cloudshell_1.png)

Cloud Shell æœ¬èº«æ˜¯å…è´¹çš„ï¼Œä½†æ˜¯éœ€è¦å®‰è£… Azure æ–‡ä»¶å…±äº«ï¼Œæ‰€ä»¥ä½ ä¼šæœ‰å›ºå®šçš„å­˜å‚¨æˆæœ¬(éå¸¸ä½)ã€‚

Azure äº‘å£³ä¹Ÿå¯ä»¥é€šè¿‡ [Azure è´¦æˆ·æ‰©å±•](https://marketplace.visualstudio.com/items?itemName=ms-vscode.azure-account)åœ¨ Azure é—¨æˆ·æˆ–è€…ç›´æ¥åœ¨ä½ çš„ vs ä»£ç é›†æˆç»ˆç«¯ä¸­è·å¾—ã€‚

## [](#5-azure-cli-interactive-mode)5 - Azure CLI äº¤äº’æ¨¡å¼

æˆ‘æåˆ° Azure CLI äº¤äº’æ¨¡å¼æ˜¯ä¸€ç§è‡ªåŠ¨å®Œæˆçš„æ–¹å¼ã€‚äº‹å®ä¸Šï¼Œå®ƒè¿œä¸æ­¢è¿™äº›ï¼Œå› ä¸ºå®ƒè¿˜ä¸ºæ‚¨æä¾›äº†å‘½ä»¤æè¿°ã€ç¤ºä¾‹ã€èµ„æºåç§°çš„è¡¥å…¨ã€ä¸Šä¸€ä¸ªå‘½ä»¤çš„ JMESPath...

è¦è¿›å…¥äº¤äº’æ¨¡å¼ï¼Œä½ å¿…é¡»åœ¨ç»ˆç«¯è¾“å…¥`az interactive`ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥é”®å…¥å¸¦æœ‰è‡ªåŠ¨å®ŒæˆåŠŸèƒ½çš„ CLI å‘½ä»¤ã€æ‚¨æ­£åœ¨ä½¿ç”¨çš„å‘½ä»¤çš„æè¿°ä»¥åŠç¤ºä¾‹ã€‚æ­¤å¤–ï¼Œå½“æ‚¨é”®å…¥å‘½ä»¤æ—¶ï¼Œæ‚¨ä¼šçœ‹åˆ°å…³äºè¯¥å‘½ä»¤å‚æ•°çš„å¸®åŠ©ã€‚

[![](../Images/fcf0fbc94c276554d656d70b1bdf8993.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ZIE1zH5K--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://techwatching.dev/posts/images/azurecli_interactive_1.png)

éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œæ‚¨é”®å…¥çš„å‘½ä»¤ä»…é™äºä¸€ä¸ªå‘½ä»¤ç»„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒçš„ä½œç”¨åŸŸæ˜¯`az`ç»„ï¼Œå› æ­¤æ‚¨ä¸å¿…åœ¨å‘½ä»¤å‰é”®å…¥`az`å…³é”®å­—ã€‚æ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåªä¸ºä½ èŠ‚çœäº†ä¸¤ä¸ªå­—ç¬¦ï¼Œå› ä¸ºä½ å°†å†™`group list`è€Œä¸æ˜¯`az group list`ã€‚ä½†æ˜¯æ‚¨å¯ä»¥å°†èŒƒå›´è®¾ç½®ä¸º any å­ç»„ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºã€‚

[![](../Images/51aebb08f5cb63d588c07e6b72d7d3b1.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ad0yOzbW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://techwatching.dev/posts/images/azurecli_interactive_2.png)

ä½¿ç”¨äº¤äº’æ¨¡å¼å¯ä»¥åšçš„å¦ä¸€ä»¶éå¸¸å¥½çš„äº‹æƒ…æ˜¯ä½¿ç”¨ JMESPath è¯­æ³•æŸ¥è¯¢å‰é¢å‘½ä»¤çš„ç»“æœã€‚å‡è®¾æˆ‘åˆšåˆšåœ¨äº¤äº’æ¨¡å¼ä¸‹æ‰§è¡Œäº†å‘½ä»¤`group list`ã€‚å¦‚æœæˆ‘æƒ³åœ¨è¿™ä¸ªå‘½ä»¤çš„ç»“æœä¸­åªé€‰æ‹©åå­—ï¼Œæˆ‘å¯ä»¥åªè¾“å…¥`"?? [*].name"`ã€‚

[![](../Images/fc3c4df6b72f64838c549fd6992f65fe.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--HuN7rmsX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://techwatching.dev/posts/images/azurecli_interactive_3.png)

æ­£å¦‚æ‚¨åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­æ‰€çœ‹åˆ°çš„ï¼Œæ‚¨ç”šè‡³å¯ä»¥åœ¨å‰ä¸€ä¸ªå‘½ä»¤ä¸­ä½¿ç”¨ JMESPath æŸ¥è¯¢ä½œä¸ºä¸‹ä¸€ä¸ªå‘½ä»¤çš„å‚æ•°ã€‚è¿™é‡Œæˆ‘ä»¬åˆ—å‡ºäº† TestingAzureCLI ç»„çš„æ‰€æœ‰èµ„æºã€‚

ğŸ’åœ¨[https://shell.azure.com/](https://shell.azure.com/)ä¸Šä½¿ç”¨ Azure äº¤äº’æ¨¡å¼æœ‰æ—¶ä¼šæœ‰ç‚¹æ…¢ï¼Œæ‰€ä»¥å¦‚æœä½ é‡åˆ°è¿™ç§æƒ…å†µï¼Œæˆ‘å»ºè®®ä½ ä½¿ç”¨ vs ä»£ç é›†æˆç»ˆç«¯(å¦‚æœä½ æƒ³ä½¿ç”¨ Azure äº‘ Shell)æˆ–ä»»ä½•ä½ æƒ³è¦çš„ç»ˆç«¯(å¦‚æœä½ å®‰è£…äº† Azure CLI)è€Œä¸æ˜¯æµè§ˆå™¨ã€‚

ğŸ’å¦‚æœä½ å–œæ¬¢äº¤äº’å¼ CLIï¼Œä½ ä¹Ÿå¯ä»¥çœ‹çœ‹ [AzBrowse](https://github.com/lawrencegripper/azbrowse) è¿™æ˜¯ä¸€ä¸ªä¸é”™çš„ç¤¾åŒºé¡¹ç›®ã€‚

## [](#to-conclude)å¾—å‡ºç»“è®º

å³ä½¿è¿™ç¯‡æ–‡ç« çš„æ ‡é¢˜å»ºè®®å¯¹ Azure Portal è¯´å†è§ï¼Œå½“ä½ å¼€å§‹ä½¿ç”¨ Azure CLI æ—¶ï¼Œä½ ä¸ä¼šçœŸçš„å®Œå…¨åœæ­¢ä½¿ç”¨ Azure Portalã€‚ä½ æ€»æ˜¯éœ€è¦ä¸€ä¸ª GUI æ¥å®Œæˆä¸€äº›ä»»åŠ¡æˆ–è€…æ›´å¥½çš„å¯è§†åŒ–äº‹ç‰©ã€‚ç„¶è€Œï¼Œä½ å¯èƒ½ä¼šå‡å°‘ä½¿ç”¨ Azure Portal çš„é¢‘ç‡ï¼Œå› ä¸ºä½ ä¼šå‘ç°è‡ªå·±ä½¿ç”¨ Azure CLI ä¼šæ›´æœ‰æ•ˆç‡ï¼Œå¹¶ä¸”ä¼šå–œæ¬¢èƒ½å¤Ÿç¼–å†™æ‰€æœ‰âœ¨.çš„è„šæœ¬

å…³äº Azure CLI è¿˜æœ‰å¾ˆå¤šè¦è¯´çš„ï¼Œä½†é‚£å·²ç»æ˜¯ä¸€ç¯‡å¾ˆé•¿çš„æ–‡ç« äº†ï¼Œæ‰€ä»¥æœ€å¥½çš„äº‹æƒ…æ˜¯ä½ è‡ªå·±å°è¯•ä¸€ä¸‹ï¼