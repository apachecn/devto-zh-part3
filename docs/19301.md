# å°é—­é“¶è¡Œæœ‰é™å…¬å¸-JS é“¶è¡Œç³»ç»Ÿ

> åŸæ–‡:[https://dev.to/yashwanth2804/closure-bank-ltd-a-js-é“¶è¡Œ-ç³»ç»Ÿ- 5g8](https://dev.to/yashwanth2804/closure-bank-ltd---a-js-banking-system---5g8)

### [](#hi-devs)å—¨ Devsï¼Œ

å½“æˆ‘å­¦ä¹  JavaScript æ¦‚å¿µçš„æ—¶å€™ï¼Œæˆ‘å¾ˆéš¾ç†è§£ **clo `sure` s** ï¼Œå½“ç„¶ä¸€äº›åˆå­¦è€…ä¹Ÿå¯èƒ½é¢ä¸´è¿™ä¸ªé—®é¢˜ã€‚

> ä»€ä¹ˆæ˜¯ç»ˆç»“ï¼Ÿ

é—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°ä¸å¯¹å…¶å‘¨å›´çŠ¶æ€(è¯æ³•ç¯å¢ƒ)çš„å¼•ç”¨æ†ç»‘åœ¨ä¸€èµ·(å°é—­)çš„ç»„åˆã€‚æ¢å¥è¯è¯´ï¼Œé—­åŒ…å…è®¸æ‚¨ä»å†…éƒ¨å‡½æ•°è®¿é—®å¤–éƒ¨å‡½æ•°çš„èŒƒå›´ã€‚åœ¨ JavaScript ä¸­ï¼Œé—­åŒ…æ˜¯åœ¨æ¯æ¬¡åˆ›å»ºå‡½æ•°æ—¶åˆ›å»ºçš„ã€‚

*æ‘˜è‡ª[ä¸­ç¯‡](https://medium.com/javascript-scene/master-the-javascript-interview-what-is-a-closure-b2f0d2152b36)*

[![](../Images/638a4ca9942a038e2f1f92cf35a5050f.png)T2ã€‘](https://i.giphy.com/media/3lx7OMPseuokgfzCK2/giphy.gif)

æ‰€ä»¥éšç€æˆ‘çš„ç†è§£å’Œä¸€äº›ç²¾åŠ›çš„æŠ•å…¥ï¼Œæˆ‘åšäº†ä¸€ä¸ªä¾‹å­

å¦‚æœæˆ‘è¯´é”™äº†ï¼Œè¯·çº æ­£æˆ‘

### [](#about-the-example)å…³äºä¾‹å­

åœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæˆ‘çˆ·çˆ·å¸¦æ¥äº† 1000 BTCğŸ¤‘å¹¶ä¸”å­˜åˆ°äº†æ¯”ç‰¹å¸é“¶è¡Œï¼Œåæ¥ä»–èŠ±äº†ä¸€äº› BTC (200)å‰©ä¸‹çš„ç»™äº†æˆ‘çˆ¸ï¼Œåæ¥æˆ‘çˆ¸æŠŠè±ªæ–¯(300 BTC)ä¹Ÿç»™äº†æˆ‘ã€‚æˆ‘æäº†(499 BTC)ç»™`DEV.to`ğŸ˜‡

### JavaScript ä¸­é—­åŒ…çš„åŸºæœ¬ä¾‹å­:

`// hidden setup JavaScript code goes in this preamble area` `function sum(a) { return function(b) { return a + b; // takes "a" from the outer lexical environment }; } // method 1 console.log( sum(1)(2) ); // 3 /// method 2 var call_1 = sum(1); var call_2 = call_1(4); console.log( call_2 ); // 5`

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè€ƒè™‘æ–¹æ³• 2ï¼Œé¦–å…ˆæˆ‘ä»¬è°ƒç”¨`sum`å‡½æ•°å¹¶åœ¨è¯¥å‡½æ•°èŒƒå›´å†…è®¾ç½®`a`å€¼(é€šè¿‡ä½œä¸ºå‚æ•°ä¼ é€’)ã€‚

> var call _ 1 = sum(1)ï¼›

å­˜å‚¨åœ¨å˜é‡`call_1`ä¸­çš„è¿”å›å‡½æ•°ï¼Œå¦‚æœæˆ‘ä»¬è®°å½• call_1ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°è¿™ä¸ª

```
function(b) {
  return a + b; // takes "a" from the outer lexical environment
} 
```

ç°åœ¨æŠŠå˜é‡`call_1`çœ‹ä½œä¸€ä¸ªå…¸å‹çš„å‡½æ•°ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨ call_1(4)æ¥è°ƒç”¨å®ƒï¼Œè¿™å°†ç»™å‡ºä¸¤ä¸ªæ•°å­—çš„å’Œï¼Œä½†æ˜¯ç­‰ä¸€ä¸‹æˆ‘ä»¬çŸ¥é“å½“ä½œç”¨åŸŸ/å‡½æ•°ç»“æŸæ—¶ï¼Œå‡½æ•°ä½œç”¨åŸŸå˜é‡æ­»äº¡ï¼Œå¯¹å§ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆ`call_1`è®¾æ³•å¾—åˆ°ç›´æ¥çˆ¶å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡ï¼Œå³ä½¿åœ¨çˆ¶å‡½æ•°å·²ç»è¿”å›ä¹‹åï¼Œæ‰€ä»¥å®ƒåº”è¯¥å·²ç»æ­»äº†ã€‚

[æ‰§è¡Œä¸Šä¸‹æ–‡](https://hackernoon.com/execution-context-in-javascript-319dd72e8e2c)ï¼Œè¯·å‚è€ƒæœ¬ç«™ã€‚

æ ¹æ® it ECï¼Œ`Scope chain`æŒæœ‰è‡ªå·±çš„å˜é‡å¯¹è±¡ã€å¤–éƒ¨å‡½æ•°çš„å˜é‡å¯¹è±¡å’Œå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡å˜é‡ã€‚

è¿™å°±æ˜¯å½“è°ƒç”¨`call_1()`æ—¶ï¼Œä¸ºä»€ä¹ˆ`var a`å¯ç”¨çš„åŸå› ã€‚ç¡®ä¿å®ƒè·å–çš„æ˜¯å¤–éƒ¨å‡½æ•°å˜é‡çš„å¼•ç”¨è€Œä¸æ˜¯å®é™…å€¼ã€‚

### [](#here-is-the-code-of-closure-bank-ltd)è¿™é‡Œæ˜¯å°è¡Œæœ‰é™å…¬å¸çš„ä»£ç 

`// hidden setup JavaScript code goes in this preamble area` `var BTCbank = function(BTC_balanace) { return grandpa = (moneyspent) => { // grandpa BTC_balanace -= moneyspent; return dad = (moneyspent) => { // dad BTC_balanace -= moneyspent; return me = (moneyspent) => { // me return BTC_balanace -= moneyspent; } } } }; // step-1 // deposit 1000 to BTCbank var bankBalance = BTCbank(1000); // step-2 // now grandpa spending amount is 300 var afterGrandpaSpending = bankBalance(300); // step-3 // now grandpa spending amount is 200 var afterDadSpending = afterGrandpaSpending(200); // step-4 // now grandpa spending amount is 499 var aftermyDonation = afterDadSpending(499); console.log(aftermyDonation); /// simple way /// console.dir(BTCbank(1000)(400)(100)(499));`

### è®©æˆ‘ä»¬æ¥åˆ†è§£ä»£ç 

ç¬¬ä¸€æ­¥:
å½“æˆ‘ä»¬è°ƒç”¨å‡½æ•°`BTCbank(BTC_balance)`æ—¶ï¼Œæˆ‘ä»¬åªæ˜¯å°†`BTC_balance`çš„ var åˆå§‹åŒ–ä¸º`1000`ï¼Œå¹¶å°†å‡½æ•°`grandpa`è¿”å›ç»™ var `bankBalance`ã€‚

`console.log(bankBalance)`