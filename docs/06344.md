# å¦‚ä½•å¼€å§‹ä½¿ç”¨ Java å¤šçº¿ç¨‹

> åŸæ–‡:[https://dev . to/adityasridhar/how-to-get-started-with-threading-in-Java-1b 74](https://dev.to/adityasridhar/how-to-get-started-with-multithreading-in-java-1b74)

**æœ¬å¸–åŸè½½äº[adityasridhar.com](https://adityasridhar.com/posts/how-to-get-started-with-multithreading-in-java)T3ã€‘**

# [](#what-is-a-thread)ä»€ä¹ˆæ˜¯çº¿ç¨‹

çº¿ç¨‹æ˜¯ä¸€ä¸ªè½»é‡çº§çš„è¿›ç¨‹ã€‚ä»»ä½•è¿›ç¨‹éƒ½å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åœ¨å…¶ä¸­è¿è¡Œã€‚

ä¾‹å¦‚ï¼Œåœ¨ web æµè§ˆå™¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ä¸€ä¸ªçº¿ç¨‹æ¥åŠ è½½ç”¨æˆ·ç•Œé¢ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æœ‰å¦ä¸€ä¸ªçº¿ç¨‹æ¥å®é™…æ£€ç´¢éœ€è¦åœ¨ç”¨æˆ·ç•Œé¢ä¸­æ˜¾ç¤ºçš„æ‰€æœ‰æ•°æ®ã€‚

# [](#what-is-multithreading)ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹

å¤šçº¿ç¨‹ä½¿æˆ‘ä»¬èƒ½å¤ŸåŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹ã€‚

ä¾‹å¦‚ï¼Œåœ¨ web æµè§ˆå™¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ä¸€ä¸ªçº¿ç¨‹å¤„ç†ç”¨æˆ·ç•Œé¢ï¼ŒåŒæ—¶æˆ‘ä»¬å¯ä»¥æœ‰ä¸€ä¸ªçº¿ç¨‹è·å–è¦æ˜¾ç¤ºçš„æ•°æ®ã€‚

å› æ­¤å¤šçº¿ç¨‹æé«˜äº†ç³»ç»Ÿçš„å“åº”èƒ½åŠ›ã€‚

# [](#what-is-concurrency)ä»€ä¹ˆæ˜¯å¹¶å‘

çº¿ç¨‹ç¯å¢ƒä¸­çš„å¹¶å‘æ€§ä½¿æˆ‘ä»¬èƒ½å¤ŸåŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹ã€‚

ä½†æ˜¯çº¿ç¨‹çœŸçš„åŒæ—¶è¿è¡Œå—ï¼Ÿ

## [](#single-core-systems)å•æ ¸ç³»ç»Ÿ

JVM æä¾›çš„**çº¿ç¨‹è°ƒåº¦å™¨**å†³å®šåœ¨ä»»ä½•ç»™å®šçš„æ—¶é—´è¿è¡Œå“ªä¸ªçº¿ç¨‹ã€‚è°ƒåº¦å™¨ç»™æ¯ä¸ªçº¿ç¨‹ä¸€ä¸ªå°çš„æ—¶é—´ç‰‡ã€‚

å› æ­¤ï¼Œåœ¨ä»»ä½•ç»™å®šçš„æ—¶é—´ï¼Œæˆ‘ä»¬éƒ½åªæœ‰å®é™…è¿è¡Œåœ¨å¤„ç†å™¨ä¸­çš„çº¿ç¨‹ã€‚ä½†æ˜¯ç”±äºæ—¶é—´ç‰‡ï¼Œæˆ‘ä»¬æ„Ÿè§‰å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œã€‚

## [](#multi-core-systems)å¤šæ ¸ç³»ç»Ÿ

å³ä½¿åœ¨å¤šæ ¸ç³»ç»Ÿä¸­ï¼Œä¹Ÿæ¶‰åŠåˆ°çº¿ç¨‹è°ƒåº¦å™¨ã€‚ä½†æ˜¯ç”±äºæˆ‘ä»¬æœ‰å¤šä¸ªå†…æ ¸ï¼Œæˆ‘ä»¬å®é™…ä¸Šå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªåŒæ ¸ç³»ç»Ÿï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åŒæ—¶è¿è¡Œä¸¤ä¸ªçº¿ç¨‹ã€‚ç¬¬ä¸€ä¸ªçº¿ç¨‹å°†åœ¨ç¬¬ä¸€ä¸ªå†…æ ¸ä¸­è¿è¡Œï¼Œç¬¬äºŒä¸ªçº¿ç¨‹å°†åœ¨ç¬¬äºŒä¸ªå†…æ ¸ä¸­è¿è¡Œã€‚

# [](#why-is-multithreading-needed)ä¸ºä»€ä¹ˆéœ€è¦å¤šçº¿ç¨‹ï¼Ÿ

å¤šçº¿ç¨‹ä½¿æˆ‘ä»¬èƒ½å¤Ÿæé«˜ç³»ç»Ÿçš„å“åº”èƒ½åŠ›ã€‚

ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªç½‘ç»œæµè§ˆå™¨ä¸­ï¼Œå¦‚æœæ‰€æœ‰çš„ä¸œè¥¿éƒ½åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è¿è¡Œï¼Œé‚£ä¹ˆæ— è®ºä½•æ—¶è·å–æ•°æ®æ¥æ˜¾ç¤ºï¼Œç³»ç»Ÿéƒ½å°†å®Œå…¨æ²¡æœ‰å“åº”ã€‚å¦‚æœè·å–æ•°æ®éœ€è¦ 10 ç§’é’Ÿï¼Œé‚£ä¹ˆåœ¨è¿™ 10 ç§’é’Ÿå†…ï¼Œæˆ‘ä»¬å°†æ— æ³•åœ¨ web æµè§ˆå™¨ä¸­åšä»»ä½•å…¶ä»–äº‹æƒ…ï¼Œæ¯”å¦‚æ‰“å¼€æ–°æ ‡ç­¾ï¼Œç”šè‡³å…³é—­ web æµè§ˆå™¨ã€‚

å› æ­¤ï¼Œåœ¨ä¸åŒçš„çº¿ç¨‹ä¸­åŒæ—¶è¿è¡Œç¨‹åºçš„ä¸åŒéƒ¨åˆ†æœ‰åŠ©äºæé«˜ç³»ç»Ÿçš„å“åº”èƒ½åŠ›ã€‚

# [](#how-to-write-multithreaded-programs-in-java)å¦‚ä½•ç”¨ Java ç¼–å†™å¤šçº¿ç¨‹ç¨‹åº

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç åœ¨ java ä¸­åˆ›å»ºçº¿ç¨‹

*   æ‰©å±•çº¿ç¨‹ç±»
*   å®ç° Runnable æ¥å£
*   å®ç°å¯è°ƒç”¨æ¥å£
*   é€šè¿‡ä½¿ç”¨ Executor æ¡†æ¶ä»¥åŠå¯è¿è¡Œå’Œå¯è°ƒç”¨çš„ä»»åŠ¡

æˆ‘ä»¬å°†åœ¨å¦ä¸€ç¯‡åšå®¢ä¸­è®¨è®º Callables å’Œ Executor æ¡†æ¶ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä¸»è¦å…³æ³¨æ‰©å±• Thread ç±»å’Œå®ç° Runnable æ¥å£ã€‚

## [](#extending-the-thread-class)æ‰©å±•çº¿ç¨‹ç±»

ä¸ºäº†åˆ›å»ºä¸€æ®µå¯ä»¥åœ¨çº¿ç¨‹ä¸­è¿è¡Œçš„ä»£ç ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»ï¼Œç„¶åæ‰©å±• **Thread** ç±»ã€‚è¿™æ®µä»£ç æ‰§è¡Œçš„ä»»åŠ¡éœ€è¦æ”¾åœ¨ **run()** å‡½æ•°ä¸­ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ä½ å¯ä»¥çœ‹åˆ° **Worker** æ˜¯ä¸€ä¸ªæ‰©å±• **Thread** ç±»çš„ç±»ï¼Œæ‰“å°æ•°å­— 0 åˆ° 5 çš„ä»»åŠ¡æ˜¯åœ¨ **run()** å‡½æ•°ä¸­å®Œæˆçš„ã€‚

```
class Worker extends Thread {

    @Override
    public void run() {
        for (int i = 0; i <= 5; i++) {
            System.out.println(Thread.currentThread().getName() + ": " + i);
        }
    }

} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ä¸Šé¢çš„ä»£ç **ä¸­ Thread.currentThread()ã€‚getName()** ç”¨äºè·å–è¿è¡Œä»£ç çš„å½“å‰çº¿ç¨‹çš„åç§°ã€‚

ä¸ºäº†åˆ›å»ºä¸€ä¸ª**çº¿ç¨‹**ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ª Worker ç±»çš„å®ä¾‹ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ **start()** å‡½æ•°æ¥å¯åŠ¨çº¿ç¨‹ã€‚

```
public class ThreadClassDemo {
    public static void main(String[] args) {
        Thread t1 = new Worker();
        Thread t2 = new Worker();
        Thread t3 = new Worker();
        t1.start();
        t2.start();
        t3.start();

    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä» Worker ç±»åˆ›å»ºäº† 3 ä¸ªçº¿ç¨‹ t1ã€t2 å’Œ t3ã€‚
ç„¶åæˆ‘ä»¬ä½¿ç”¨ **start()** å‡½æ•°å¯åŠ¨çº¿ç¨‹ã€‚

ä¸‹é¢æ˜¯é€šè¿‡æ‰©å±•çº¿ç¨‹ç±»
åˆ›å»ºçº¿ç¨‹çš„æœ€ç»ˆä»£ç 

```
class Worker extends Thread {

    @Override
    public void run() {
        for (int i = 0; i <= 5; i++) {
            System.out.println(Thread.currentThread().getName() + ": " + i);
        }
    }

}

public class ThreadClassDemo {
    public static void main(String[] args) {
        Thread t1 = new Worker();
        Thread t2 = new Worker();
        Thread t3 = new Worker();
        t1.start();
        t2.start();
        t3.start();

    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸‹é¢æ˜¯æˆ‘ä»¬é€šè¿‡è¿è¡Œä¸Šè¿°ä»£ç å¾—åˆ°çš„è¾“å‡º

[![Thread class output](../Images/fef4709ebc39bde47857c3bbed9282e5.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Np_q1Bea--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/4q9e9jk45360k9vrh549.png)

å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰ 3 æ ¹çº¿éƒ½æ‰“å°äº†ä» 0 åˆ° 5 çš„æ•°å­—ã€‚

**ä»è¾“å‡ºä¸­å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œ3 ä¸ªçº¿ç¨‹æ²¡æœ‰æŒ‰ç…§ä»»ä½•ç‰¹å®šçš„é¡ºåºè¿è¡Œ**

## [](#implementing-the-runnable-interface)å®ç°å¯è¿è¡Œæ¥å£

ä¸ºäº†åˆ›å»ºä¸€æ®µå¯ä»¥åœ¨çº¿ç¨‹ä¸­è¿è¡Œçš„ä»£ç ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç±»ï¼Œç„¶åå®ç°äº† **Runnable** æ¥å£ã€‚è¿™æ®µä»£ç æ‰§è¡Œçš„ä»»åŠ¡éœ€è¦æ”¾åœ¨ **run()** å‡½æ•°ä¸­ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ä½ å¯ä»¥çœ‹åˆ° **RunnableWorker** æ˜¯ä¸€ä¸ªå®ç° **Runnable** æ¥å£çš„ç±»ï¼Œæ‰“å°æ•°å­— 0 åˆ° 4 çš„ä»»åŠ¡æ˜¯åœ¨ **run()** å‡½æ•°å†…éƒ¨å®Œæˆçš„ã€‚

```
class RunnableWorker implements Runnable{

    @Override
    public void run() {
        for (int i = 0; i <= 4; i++) {
            System.out.println(Thread.currentThread().getName() + ": " + i);
        }
    }

} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸ºäº†åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª **RunnableWorker** çš„å®ä¾‹ï¼Œå®ƒå®ç°äº† **Runnable** æ¥å£ã€‚

ç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»º **Thread** ç±»çš„å®ä¾‹å¹¶ä¼ é€’ **RunnableWorker** çš„å®ä¾‹ä½œä¸ºå‚æ•°æ¥åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ã€‚è¿™å¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤º

```
public class RunnableInterfaceDemo {

    public static void main(String[] args) {
        Runnable r = new RunnableWorker();
        Thread t1 = new Thread(r);
        Thread t2 = new Thread(r);
        Thread t3 = new Thread(r);

        t1.start();
        t2.start();
        t3.start();

    }

} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸Šé¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªå¯è¿è¡Œçš„å®ä¾‹ rã€‚ç„¶åï¼Œå®ƒåˆ›å»ºäº† 3 ä¸ªçº¿ç¨‹ t1ã€t2 å’Œ t3ï¼Œå¹¶å°† **r** ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¿™ 3 ä¸ªçº¿ç¨‹ã€‚ç„¶åä½¿ç”¨ **start()** å‡½æ•°æ¥å¯åŠ¨æ‰€æœ‰ 3 ä¸ªçº¿ç¨‹ã€‚

ä¸‹é¢æ˜¯é€šè¿‡å®ç° Runnable æ¥å£
åˆ›å»ºçº¿ç¨‹çš„å®Œæ•´ä»£ç 

```
class RunnableWorker implements Runnable{

    @Override
    public void run() {
        for (int i = 0; i <= 4; i++) {
            System.out.println(Thread.currentThread().getName() + ": " + i);
        }
    }

}

public class RunnableInterfaceDemo {

    public static void main(String[] args) {
        Runnable r = new RunnableWorker();
        Thread t1 = new Thread(r);
        Thread t2 = new Thread(r);
        Thread t3 = new Thread(r);

        t1.start();
        t2.start();
        t3.start();

    }

} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å°†å¾—åˆ°ä¸‹é¢çš„è¾“å‡ºã€‚æ¯æ¬¡è¿è¡Œä»£ç æ—¶ï¼Œè¾“å‡ºçš„é¡ºåºéƒ½ä¼šæ”¹å˜ã€‚

[![Runnable Interface Output](../Images/7f6dd5154288de4fccf09461584c4e99.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--5oQNQ_Q4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/265uzbyfndmgdq27l89q.png)

å®ç° Runnable æ¥å£æ˜¯æ¯”æ‰©å±• Thread ç±»æ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºæˆ‘ä»¬åªèƒ½æ‰©å±•ä¸€ä¸ªç±»ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨ java å®ç°å¤šä¸ªæ¥å£ã€‚

## Java 8 ä¸­çš„å¯è¿è¡Œæ¥å£

åœ¨ java 8 ä¸­ï¼ŒRunnable æ¥å£å˜æˆäº† **FunctionalInterface** ï¼Œå› ä¸ºå®ƒåªæœ‰ä¸€ä¸ªå‡½æ•° **run()** ã€‚

ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†æˆ‘ä»¬å¦‚ä½•åœ¨ java 8 ä¸­åˆ›å»ºä¸€ä¸ªå¯è¿è¡Œçš„å®ä¾‹ã€‚

```
public class RunnableFunctionalInterfaceDemo {

    public static void main(String[] args) {

        Runnable r = () -> {
            for (int i = 0; i <= 4; i++) {
                System.out.println(Thread.currentThread().getName() + ": " + i);
            }
        };

        Thread t1 = new Thread(r);
        Thread t2 = new Thread(r);
        Thread t3 = new Thread(r);

        t1.start();
        t2.start();
        t3.start();
    }

} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œä¸ç”¨åˆ›å»ºä¸€ä¸ªç±»ç„¶åå®ç° Runnable æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ lambda è¡¨è¾¾å¼åˆ›å»ºä¸€ä¸ª Runnable å®ä¾‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º

```
Runnable r = () -> {
        for (int i = 0; i <= 4; i++) {
            System.out.println(Thread.currentThread().getName() + ": " + i);
        }
    }; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [](#code)ä»£ç 

è¿™ç¯‡æ–‡ç« ä¸­çš„ä»£ç å¯ä»¥åœ¨ä¸‹é¢çš„ github repo
[https://github.com/aditya-sridhar/basic-threads-demo](https://github.com/aditya-sridhar/basic-threads-demo)ä¸­æ‰¾åˆ°

# [](#congrats)æ­å–œæ­å–œğŸ˜ƒ

æ‚¨ç°åœ¨çŸ¥é“äº†å¦‚ä½•é€šè¿‡æ‰©å±• Thread ç±»å’Œå®ç° Runnable æ¥å£æ¥åˆ›å»ºçº¿ç¨‹ã€‚

æˆ‘å°†åœ¨ä¸‹ä¸€ç¯‡åšæ–‡ä¸­è®¨è®ºçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œä½¿ç”¨çº¿ç¨‹æ—¶çš„æŒ‘æˆ˜ã€‚

### [](#feel-free-to-connect-with-me-in-linkedin-or-follow-me-in-twitter)æ¬¢è¿åœ¨ [LinkedIn](https://www.linkedin.com/in/aditya1811/) ä¸æˆ‘è”ç³»ï¼Œæˆ–åœ¨ [twitter](https://twitter.com/adityasridhar18) å…³æ³¨æˆ‘ã€‚

### å¦‚æœä½ å–œæ¬¢è¿™ä¸ªå¸–å­ï¼Œä½ å¯ä»¥å»æˆ‘çš„ç½‘ç«™ã€https://adityasridhar.com T2ã€‘æŸ¥çœ‹å…¶ä»–ç±»ä¼¼çš„å¸–å­