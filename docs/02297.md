# VS ä»£ç ä¸­çš„æ¸è¿›å¼ Web åº”ç”¨ç¨‹åº

> åŸæ–‡:[https://dev . to/mayeedwin/progressive-web-apps-in-vs-code-646](https://dev.to/mayeedwin/progressive-web-apps-in-vs-code-646)

åƒä¸“ä¸šäººå£«ä¸€æ ·éšæ—¶éšåœ°ç”¨ VS ä»£ç æ„å»ºæ¸è¿›å¼ Web åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬çš„[å·¥ä½œç®±æ”¯æ¶](https://developers.google.com/web/tools/workbox/)ä¹Ÿå®Œå…¨å †å åœ¨ä¸€èµ·ã€‚

### [](#about-pwafireorg)å…³äº pwafire.org[çš„](https://pwafire.org)

æˆ‘ä»¬çš„ä½¿å‘½æ˜¯è®©æ‚¨çš„ **webdev** ç¯å¢ƒå®Œå…¨ç¬¦åˆæ¸è¿›å¼ web åº”ç”¨çš„æœ€ä½³ Web å¼€å‘å®è·µã€‚

æˆ‘ä»¬æœ‰ä¸€ä¸ªå®˜æ–¹çš„å¼€å‘è€…æŒ‡å—[å‘å¸ƒåœ¨è¿™é‡Œ](https://pwafire.org/developer/docs/how-to-use-vscode-pwa-in-vscode/)å¹¶ä¸”æ›´æ–°äº†è¿™ä¸ªæ‰©å±•çš„æœ€æ–°æ›´æ–°ã€‚

### [](#setting-up-the-pwa-development-environment)è®¾ç½® PWA å¼€å‘ç¯å¢ƒ

æˆ‘ä»¬æœ‰ä¸€ä¸ª **pwadev æç¤º** [å›è´­åœ¨è¿™é‡Œå¯ç”¨](https://github.com/mayeedwin/pwadev-tips)å¸®åŠ©æŒ‡å¯¼ä½ ï¼Œå¦‚æœä½ åˆšåˆšå¼€å§‹æˆ–æƒ³è®©ä½ çš„è®¾ç½®æ¸…å•åšå¯¹ã€‚

### [](#setting-up-the-app-manifest-and-registering-the-service-worker)è®¾ç½®åº”ç”¨æ¸…å•å¹¶æ³¨å†ŒæœåŠ¡äººå‘˜

ç¼–å†™**æœåŠ¡äººå‘˜**å’Œ**åº”ç”¨æ¸…å•**çœŸçš„å¾ˆå¿«å¾ˆä¸“ä¸šï¼

| å‘½ä»¤ | ç›®çš„å’Œé”®å…¥ä½ç½® |
| --- | --- |
| `register service worker` | åœ¨ä½ çš„ç™»é™†é¡µé¢æ³¨å†ŒæœåŠ¡äººå‘˜è¯´`index.html` |
| `add web manifest to pages` | å°†`app.webmanifest`é“¾æ¥åˆ°`head tag`ä¸­æ‚¨çš„é¡µé¢ |
| `theme color` | åœ¨ä½ çš„é¡µé¢ head æ ‡ç­¾ä¸­æ·»åŠ ä¸»é¢˜é¢œè‰² |
| `manifest` | åœ¨ç©ºçš„`app.webmanifest`æ–‡ä»¶ä¸­æ·»åŠ æ¸…å•å…ƒæ•°æ® |

### [](#simple-basic-service-worker)ç®€å•çš„åŸºç¡€æœåŠ¡å·¥ä½œè€…

| å‘½ä»¤ | ç›®çš„å’Œé”®å…¥ä½ç½® |
| --- | --- |
| `basic service worker` | ä¸ºç®€å•çš„é™æ€ç«™ç‚¹åˆ›å»ºç®€å•çš„æœåŠ¡å·¥ä½œè€… |

### [](#commands-to-type-in-your-editor-for-cdn-workbox)åœ¨ä½ çš„ç¼–è¾‘å™¨ä¸­é”®å…¥å‘½ä»¤ç”¨äº CDN å·¥ä½œç®±

| å‘½ä»¤ | ç›®çš„å’Œé”®å…¥ä½ç½® |
| --- | --- |
| `import workbox` | åœ¨æ‚¨çš„æœåŠ¡äººå‘˜ä¸­å¯¼å…¥å·¥å…·ç®± |
| `workbox.strategies` | åœ¨æœåŠ¡äººå‘˜ä¸­æ·»åŠ ç¼“å­˜ç­–ç•¥ |
| `cache assets` | é€šè¿‡ä»ç¼“å­˜ä¸­è¿”å›èµ„æºï¼Œä½¿æ‚¨çš„ JS å’Œ CSS âš¡æ›´å¿«ï¼ŒåŒæ—¶ç¡®ä¿å®ƒä»¬åœ¨åå°æ›´æ–°ï¼Œä»¥ä¾¿ä¸‹æ¬¡åœ¨æ‚¨çš„å·¥å…·ç®±`service-worker.js`æ–‡ä»¶ä¸­ä½¿ç”¨ |
| `cache images` | ä»ç¼“å­˜ä¸­å¿«é€Ÿæä¾›å›¾åƒï¼ŒåŒæ—¶ç¡®ä¿ä¸ä¼šæ— é™æœŸåœ°ç¼“å­˜å›¾åƒï¼Œä»è€Œæ¶ˆè€—ç”¨æˆ·åœ¨ workbox `service-worker.js`æ–‡ä»¶ä¸­çš„å­˜å‚¨ç©ºé—´ |
| `cache fonts` | ä¾é è°·æ­Œå­—ä½“æˆ–å…¶ä»–åœ¨ç”¨æˆ·è®¿é—®ä½ çš„ç½‘ç«™åå¯ä»¥ç¦»çº¿ä½¿ç”¨çš„å­—ä½“ |
| `cache external orgins` | ç¼“å­˜æ¥è‡ªå¤–éƒ¨æ¥æºçš„å¤–éƒ¨èµ„æºï¼Œä¾‹å¦‚ boostrap css |
| `workbox set config` | å·¥å…·ç®±ä¸ºè°ƒè¯•æˆ–ç”Ÿäº§ç‰ˆæœ¬è®¾ç½®é…ç½® |
| `workbox window` | åœ¨æ‚¨çš„ç™»å½•é¡µé¢ä¸­æ·»åŠ å·¥å…·ç®±çª—å£ï¼Œä»¥ä¾¿æ–°æœåŠ¡äººå‘˜æ›´å¿«åœ°å®‰è£…å’Œæ›´æ–° |
| `workbox page reload` | ä¸ºç”¨æˆ·æä¾›é¡µé¢é‡æ–°åŠ è½½ |
| `workbox.cacheableResponse` | åŸºäºæ•°å­—çŠ¶æ€ä»£ç ã€å…·æœ‰ç‰¹å®šå€¼çš„æŠ¥å¤´çš„å­˜åœ¨æˆ–ä¸¤è€…çš„ç»„åˆçš„é«˜é€Ÿç¼“å­˜ï¼›[åœ¨æ­¤äº†è§£æ›´å¤šä¿¡æ¯](https://developers.google.com/web/tools/workbox/modules/workbox-cacheable-response) |

### [](#setting-up-workbox-precache)è®¾ç½®å·¥å…·ç®±é¢„ç¼“å­˜

| å‘½ä»¤ | ç›®çš„å’Œé”®å…¥ä½ç½® |
| --- | --- |
| `precache for npm` | say `sw-config.js`æ–‡ä»¶ä¸­çš„å·¥å…·ç®±é¢„ç¼“å­˜é…ç½®ä»£ç ç‰‡æ®µ |
| `workbox-cli devDependencies` | åœ¨æ‚¨çš„`package.json`æ–‡ä»¶ä¸­æ·»åŠ  workbox å®¢æˆ·ç«¯ä¾èµ–é¡¹ |
| `workbox injectManifest` | åœ¨å·¥å…·ç®±`service-worker.js`æ–‡ä»¶ä¸­æ·»åŠ é¢„ç¼“å­˜ç‰ˆæœ¬åŒ–çš„ URL é…ç½® |

**æ‘˜å½•:**å½“ä½¿ç”¨ bundler åˆ›å»ºä½ çš„æœåŠ¡å·¥äººæ—¶ï¼Œä½ ä» **npm** å®‰è£…ä½ æƒ³è¦ä½¿ç”¨çš„ Workbox åŒ…ï¼Œç„¶å
ä½¿ç”¨ import è¯­å¥ç›´æ¥å¼•ç”¨ä½ æƒ³è¦ä½¿ç”¨çš„ Workbox æ¨¡å—ã€‚

åœ¨è¿™é‡Œé˜…è¯»æ›´å¤š

| å‘½ä»¤ | ç›®çš„å’Œé”®å…¥ä½ç½® |
| --- | --- |
| `import workbox npm modules` | åœ¨æ‚¨çš„å·¥ä½œç®±`service-worker.js`æ–‡ä»¶ä¸­å¯¼å…¥æ‰€æœ‰å·¥ä½œç®± npm æ¨¡å— |
| `workbox register route for npm` | å°†è·¯ç”±ä¸å­—ç¬¦ä¸²åŒ¹é…ï¼Œå­—ç¬¦ä¸²åŸºæœ¬ä¸Šæ˜¯èµ„æºçš„å®Œæ•´ç¼“å­˜è·¯ç”±çš„å— |
| `workbox google analytics for npm` | åœ¨åº•éƒ¨çš„å·¥å…·ç®±`service-worker.js`æ–‡ä»¶ä¸­æ·»åŠ ç¦»çº¿è°·æ­Œåˆ†æã€‚ |

### [](#advanced-progressive-web-apps-features)é«˜çº§æ¸è¿›å¼ç½‘ç»œåº”ç”¨åŠŸèƒ½

æ·»åŠ èƒŒæ™¯åŒæ­¥â€”â€”åœ¨ä½ çš„ javascript æºæ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªç©ºçš„ **backgroundSync.js** æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­é”®å…¥ä¸‹é¢çš„
å…³é”®å­—æ¥æ·»åŠ [èƒŒæ™¯åŒæ­¥](https://pwafire.org/developer/docs/background-sync/)

| å‘½ä»¤ | ç›®çš„å’Œé”®å…¥ä½ç½® |
| --- | --- |
| `background sync` | åœ¨æ–°çš„`backgroundSync.js`æ–‡ä»¶ä¸­æ·»åŠ åå°åŒæ­¥ |

### [](#requirements)è¦æ±‚

```
 "vscode": "^1.8.0" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#installation)å®‰è£…

å®‰è£… vscode-pwa ã€‚å®ƒåœ¨ Visual Studio Marketplace ä¸­å¯ç”¨ï¼è¿ç­¹å­¦

å¯åŠ¨ VS ä»£ç å¿«é€Ÿæ‰“å¼€(Ctrl + P)ï¼Œç²˜è´´ä¸‹é¢çš„å‘½ä»¤ï¼ŒæŒ‰å›è½¦é”®ã€‚

```
 ext install mayeedwin.vscode-pwa 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#demo-with-pwa-vs-code-in-play)ä½¿ç”¨ PWA VS ä»£ç è¿›è¡Œæ¼”ç¤º

åœ¨æ‚¨çš„æµè§ˆå™¨ä¸­åŠ è½½[é¢„è§ˆ](//.github/images/vscode-pwa-vid.gif)

### [](#known-issues)å·²çŸ¥é—®é¢˜

è´å¡”ä¸€åˆ‡é¡ºåˆ©ï¼

### [](#release-notes)å‘å¸ƒè¯´æ˜

> è¿™ä¸ªæµ‹è¯•ç‰ˆå…è®¸ä½ å¯¼å…¥ Workbox å¹¶åƒä¸“ä¸šäººå£«ä¸€æ ·ä½¿ç”¨ç¼“å­˜ç­–ç•¥ï¼

æœ€æ–°å‘å¸ƒçš„ vscode-pwa betaï¼

**äº«å—ğŸ˜Š ğŸ¥**æ„Ÿè°¢æ‚¨çš„å…³æ³¨ã€‚æˆ‘ä»¬åœ¨æ¨ç‰¹ä¸Šè¿çº¿ [@mayeedwin1](https://twitter.com/mayeedwin1) :)