# How did I develop Nothing PWA in 15 minutes

> åŸæ–‡:[https://dev.to/henrylim96/15nothing-pwa-12i9](https://dev.to/henrylim96/15nothing-pwa-12i9)

> è‹±æ–‡ç‰ˆ(è‹±æ–‡ç‰ˆ):[0 åˆ° 15 åˆ†é’Ÿâ€”â€”15 åˆ†é’Ÿå†…å»ºé€ ä¸€ä¸ªä»€ä¹ˆéƒ½æ²¡æœ‰çš„ PWA](https://dev.to/henrylim96/zero-to-15--building-a-nothing-pwa-in-15-minutes-258j)

## [](#%E4%BB%80%E9%BA%BC%E6%98%AF-nothing)ä»€éº¼æ˜¯ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Ÿ

[![](../Images/68c15b650da8d0da6541f55e3bf817a2.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--es5rS71C--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AXZkZE7VkNnfQ5q18LpMBow.jpeg)

The original " [Nothing](https://play.google.com/store/apps/details?id=com.gorro.nothing) " Android application was developed by Chilango Lab. This app has been downloaded over one million times in Google Play Store, and has a high rating of 4.2 stars.

And this Android version of Nothing application actually doesn't have any function. But there is another very unique egg () in this application.

In other words, the Android version of Nothing application is 14MB in size. To make matters worse, it occupied 19.24MB after installation. This gave me a whim. What can I do to reduce the size of this application?

[![](../Images/5f347838d30a1b9594e78244ccd0bc4b.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--bolv9Rtx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/5jnvpxtc0e1jrp10a194.png) 
*(left) Nothing Android application: 19.24MBâ€”(right) Nothing progressive web application: 205KB ã€T5]*

The solution is very simple. I can use HTML, CSS, and JavaScript to reduce the size of the application. However, I can take it to a higher level, that is, upgrade it to progressive web application (PWA). In this way, users can use it without the Internet, and can still use it normally. At the same time, this PWA can be added to the homepage.

## [](#icon-%E8%A8%AD%E8%A8%88)ğŸ‘©ğŸ»â€ğŸ¨å›¾æ ‡è¨­è¨ˆ

Before I begin to discuss in depth, let me design a *beautiful* icon for this Nothing PWA.

The tool I used today is called [T0ã€‘ Launcher Icon Generator ã€T1]. This is a [open source tool](https://github.com/romannurik/AndroidAssetStudio) developed by a Google employee named [T2ã€‘ Roman Nurik ã€T3].

[![](../Images/ff26e28896700140ae06333a5c6fc761.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--1HwOgmAs--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1400/1%2AIlOsAMmxr7AUcq2K5maV9Q.png)

In a very short time, I used Launcher icon Generator to design a very beautiful icon (see the picture above).

In addition, this tool will automatically export icon to different sizes: 48px, 72px, 96px, 144px, 192px and 512px. This function provides great convenience.

## pwacompath

Ok, I have designed the icon, and the next step is to put the icon into the webpage.

First, I will create a new [T0ã€‘ Web App Manifest ã€T1] file, and write the information of the icon, the name of the application, the theme color, and so on in the manifest.json file. In this case, the Android version of Chrome will automatically display the startup screen when the PWA is started.

But not every visitor supports the function of this startup screen. What can I do to bring this function to all the visitors?

Let me introduce [T0ã€‘ PWACompat ã€T1], which is a tool library that can bring the functions of Web App Manifest to browsers that do not support Web App Manifest. In this way, it can bring the function of progressive web application (PWA) to more browsers.

This pwacopt is very easy to use. You only need to add the webappmanifest (`manifest.json`) and PWACompat (ã€T1]) to your code (see the following code).

```
<link rel="manifest" href="manifest.json" />
<script async src="https://cdn.jsdelivr.net/npm/pwacompat@2.0.6/pwacompat.min.js"
    integrity="sha384-GOaSLecPIMCJksN83HLuYf9FToOiQ2Df0+0ntv7ey8zjUHESXhthwvq9hXAZTifA"
    crossorigin="anonymous"></script> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

[![](../Images/6e8f9d924027753663c515b021721ac5.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--uSssavUG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/59vmpvldy9p74bt0wio7.gif) 
*Startup screen (iOS) ã€T5] in Safari*

In this way, I successfully brought the PWA startup screen to the old browser (the above example is Safari for iOS). But this is not all the functions of PWACompat. PWACompat has more functions than you think.

Let me see what other functions pwacompat has:

â€”automatically add icon meta tag (and favicon) in `<head>` according to icon information in Manifest file.

â€”according to the `theme_color` attribute in the Manifest file, automatically add the meta tag of the theme color in `<head>`.

-Wait.

## [](#%E6%B7%BB%E5%8A%A0%E5%88%B0%E4%B8%BB%E5%B1%8F%E5%B9%95)added to the main screen

This is my favorite feature in progressive web application, that is, adding to the home screen (A2HS). However, after Chrome 68, [T0ã€‘ Chrome will display a smaller mini information bar to replace the previous larger installation banner :

[![](../Images/146bf47a2a59323399b84f839bbeb038.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--ruMjH-d2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2A3GwP3kbKBFSedyTaI4NWZQ.png) 
*Goodbye, web application installation banner (before Chrome 67)*

Nevertheless, this mini information bar is also a temporary solution, which will be removed in future Chrome updates. Therefore, I need to use a better UX added to the home screen.

[![](../Images/95e6de868147b6d868a73528f92e091f.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--zyX5s5uZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/gv6errto96fbkd8blotl.png) 
*(left) Install button-(middle) Install button+A2HS mini information bar-(right) A2HS dialog box*

If the browser supports the function added to the home screen, this will display an "Install" button at the top of the webpage. When the user clicks the Install button, the A2HS dialog box will be displayed on the webpage (see the following code).

```
 var installPromptEvent;
var btnInstall = document.querySelector('#install');

window.addEventListener('beforeinstallprompt', function (event) {
    event.preventDefault();
    installPromptEvent = event;
    btnInstall.removeAttribute('disabled');
});

btnInstall.addEventListener('click', function () {
    btnInstall.setAttribute('disabled', '');
    installPromptEvent.prompt();
    installPromptEvent.userChoice.then((choice) => {
        if (choice.outcome === 'accepted') {
            console.log('User accepted the A2HS prompt');
        } else {
            console.log('User dismissed the A2HS prompt');
        }
        installPromptEvent = null;
    });
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*If the webpage meets the conditions of being added to the main screen, the visitor will launch the "beforeinstallprompt" event) ã€T1].*

## [](#%E5%BD%A9%E8%9B%8B)Eggs

[![](../Images/85e4976e94aab787e43c7c6c6d737281.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Davn8YwE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1000/1%2AePTthP8JcXDteH9p7G8gqQ.jpeg) 
*å‰§é€é¢„è­¦ï¼ï¼ï¼*

This is the egg in Nothing PWA: Konami Code+ [10 hours of YouTube video](https://twitter.com/Nick_Craver/status/720062942960623616) .

[![](../Images/d84ddda73cbe4bc05960e98243c9a3a7.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Q0TS7wvZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://cdn-images-1.medium.com/max/600/1%2A9f-Coe9dfwz_UmlsTUmHjA.gif) 
*ğŸ‘†ğŸ»ğŸ‘†ğŸ»*

When the user has successfully completed the secret trick of Conami, this Nothing PWA will reprint the user to this very special [T0ã€‘ YouTube video .

In this Nothing PWA, I used this [konami-js](http://snaptortoise.github.io/konami-js/) . The reason why I choose to use this is because its documentation is very small and it is very easy to use.

Moreover, this Konami-JS also supports mobile phones. The only difference is that this Conami secret skill will change from "T0" to "T1".

## [](#%E6%8B%89%E5%8B%95%E5%88%B7%E6%96%B0)Pull to refresh

Just then, I found a small problem. If users are using mobile phones or touch screens, they will accidentally refresh to the web page when they slide down.

[![](../Images/cb1596f29b721104e6490ce979eda4ac.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--fRJyjpZo--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2AcDXJ33JdnhzIUfzy8R_14g.gif)

How should I solve this problem?

The good news is that I can use `overscroll-behavior-y: contain` to avoid pulling and refreshing the webpage.

In this way, the problem is solved!

## [](#%E7%B6%B2%E9%A0%81%E8%A8%97%E7%AE%A1)Web hosting

This Nothing PWA is deployed on Netlify.

### [](#%E4%BB%80%E9%BA%BC%E6%98%AFnetlify%E5%91%A2)What is Netlify?

Netlify is a front-end web hosting platform with complete functions. The reason why I chose to use Netlify this time is very simple, that is, Netlify is very easy to use, and Netlify is free to use!

[![](../Images/7ed92ce85238afeedb9aed7721317329.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--vaTUyqZS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1200/1%2AxLFM3ifLVb5X63Nj7XZHUw.png) 
*Netlify ä»ªè¡¨ç›˜*

If you want to deploy your web page to Netlify, you have three ways: using command-line tools, manual deployment, or continuous deployment.

#### [](#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7-cli)Command line tool (CLI)

This is the most common way to deploy websites. Install the command-line tool of Netlify on your computer, log in to your Netlify, initialize the project, and then you can deploy your website to Netlify.

```
> brew tap netlify/netlifyctl 
> brew install netlifyctl
> netlifyctl login
> netlifyctl init
> netlifyctl deploy 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#%E6%89%8B%E5%8B%95%E9%83%A8%E7%BD%B2)Manual deployment

This method is the simplest way for Netlify to deploy web pages: Drag and Drop.

[![](../Images/bc714ab8986349f049a3a0ec3ca8803f.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--JZPOP2jf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2A8eB2dwalDXgHBHR4Pm83Iw.png)

In this way, developers only need to drag and drop the folder of web pages into Netlify's website. This feature is very cool, which makes me hope that Firebase can add this feature in Firebase Hosting.

#### [](#%E6%8C%81%E7%BA%8C%E9%83%A8%E7%BD%B2-continuous-deployment)æŒçºŒéƒ¨ç½²(æŒç»­éƒ¨ç½²)

Nothing PWA I use continuous deployment to automatically deploy web pages to Netlify.

When my GitHub project is connected to Netlify, whenever I push the code to GitHub, Netlify will automatically deploy the webpage to Netlify. This automatic deployment provides the function of automatic update, which is very convenient!

### [](#https)ğŸ”’HTTPSï¼

As one of the necessary conditions of progressive web application is from secure origin, I must ensure that HTTPS is correctly implemented in this web page.

The good news is that Netlify provides free HTTPS for everyone, which also includes custom domain names.

[![](../Images/434a0da2349e11c33298dfdf366fa8dd.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--MTLZNWWq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1000/1%2Acu1Zs1B4ziZFkJVXj7lwTA.png)

Netlify also provides a great function, that is, HSTS ( [http strict transport security](https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security) ). After startup, your webpage will be forcibly reprinted to HTTPS version. This can ensure that the web page is always running under HTTPS.

## [](#lighthouse)ğŸ’¡ç¯å¡”

[T0ã€‘ Lighthouse ã€T1] is an open source automation tool, which is used to improve the quality of network applications. You can use Lighthouse to analyze the performance of web pages, SEO, and so on. You can study how to make your web page better according to the Lighthouse report.

[![](../Images/b6bf691dffd98a0cae73a0618974d06e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--iUSeYkQX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2A85AX9Hs1Tty316wkADoifQ.png)

Isn't it nice? I succeeded in getting 97 points in performance, and 100 out of 100 in PWA, Accessibility, Best Practices and SEO.

æ‚¨å¯ä»¥åœ¨é€™è£¡æŸ¥çœ‹å®Œæ•´çš„ç¯å¡”å ±å‘Š:[https://builder-dot-light house-ci . app spot . com/report . 1533954675085 . html](https://builder-dot-lighthouse-ci.appspot.com/report.1533954675085.html)

## [](#%E5%98%97%E8%A9%A6%E7%9C%8B%E7%9C%8B)Try it.

[![](../Images/0776d3b3f2132fc96c23f18cad92a8d8.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--PN0KoqL1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2AhA7rq9gWv2ea6UEIwMIDOw.gif)

In this way, I successfully converted a 19MB Android application into a progressive web application within 15 minutes, and reduced the application to 205KB!

ğŸš€ æ‚¨å¯ä»¥åœ¨é€™è£¡å˜—è©¦è™šæ—  PWA: [è™šæ— . limhenry.xyz](https://nothing.limhenry.xyz)

é€™è‰¾æ»‹ç—…æ‚£è€…çš„ä»£ç¢¼å¯ä»¥åœ¨å¼€æºä»£ç åº“ä¸Šæ‰¾åˆ°:[github.com/limhenry/nothing](https://github.com/limhenry/nothing)