# react è·¯ç”±å™¨ä¸­çš„åŠ¨æ€é¡µé¢

> åŸæ–‡:[https://dev . to/param Harrison/dynamic-pages-in-react-router-2c 73](https://dev.to/paramharrison/dynamic-pages-in-react-router-2c73)

> åœ¨ [Twitter](https://twitter.com/learnwithparam) ä¸Šå…³æ³¨æˆ‘ï¼Œå¾ˆé«˜å…´æ¥å—æ‚¨å¯¹ä¸»é¢˜æˆ–æ”¹è¿›çš„å»ºè®®

åœ¨[ç¬¬ 1 éƒ¨åˆ†](https://dev.to/paramharrison/basic-routing-in-react-using-react-router-406e)ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•åœ¨ react router ä¸­åˆ›å»ºåŸºæœ¬çš„é™æ€é¡µé¢ã€‚ç°åœ¨æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•åœ¨ react è·¯ç”±å™¨ä¸­åˆ›å»ºåŠ¨æ€ URLã€‚

æˆ‘ä»¬å°†åˆ›å»ºä¸¤æ¡è·¯çº¿ï¼Œ

*   ç”¨æˆ·è·¯ç”±(æ˜¾ç¤ºä¸ªäººç”¨æˆ·æ‰€æœ‰é“¾æ¥çš„é™æ€è·¯ç”±)
*   ç”¨æˆ·è·¯ç”±â€”â€”æ¯ä¸ªç”¨æˆ·å°†ç”±ä»–ä»¬å”¯ä¸€çš„ ID æ ‡è¯†ï¼ŒURL å°†ä¼ é€’è¿™ä¸ª IDï¼Œç»„ä»¶å°†æ˜¾ç¤ºæ­£ç¡®çš„ç”¨æˆ·å†…å®¹

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„`users`æ•°æ®

```
const users = [
  {
    name: `Param`,
  },
  {
    name: `Vennila`,
  },
  {
    name: `Afrin`,
  },
]; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬åœ¨ App.js æ–‡ä»¶ä¸­ä¸ºæ‰€æœ‰ç”¨æˆ·å’Œå•ä¸ªç”¨æˆ·åˆ›å»ºæ–°çš„è·¯çº¿ã€‚

```
// App.js
...

const UsersPage = () => {
  return (
    <h3>Users Page</h3>
  );
};

const App = () => {
  return (
    <section className="App">
      <Router>
        <Link to="/">Home</Link>
        <Link to="/about">About</Link>
        <Link to="/users">Users</Link>
        <Route exact path="/" component={IndexPage} />
        <Route exact path="/users" component={UsersPage} />
        <Route exact path="/about" component={AboutPage} />
      </Router>
      <a href="/about">about with browser reload</a>
    </section>
  );
};

... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåˆ°ç”¨æˆ·é¡µé¢çš„é“¾æ¥ï¼Œä»¥åŠç”¨æˆ·é¡µé¢çš„è·¯ç”±å®šä¹‰åŠå…¶ç›¸å…³ç»„ä»¶(`UsersPage`)ã€‚

è®©æˆ‘ä»¬åœ¨ç”¨æˆ·é¡µé¢ä¸­æ·»åŠ æ¯ä¸ªç”¨æˆ·çš„é“¾æ¥(`/user/1`ã€`/user/2`ã€`/user/3` )

```
// userId will be Array index + 1
const UsersPage = () => {
  return (
    <>
      <h3>Users Page</h3>
      {users.map((user, index) => (
        <h5 key={index}>
          <Link to={`/user/${index + 1}`}>{user.name}'s Page</Link>
        </h5>
      ))}
    </>
  );
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> `<></>`è¿™æ˜¯`<React.Fragment></React.Fragment>`çš„ç®€ç§°ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»æ›´å¤šå…³äº[çš„ç‰‡æ®µ](https://reactjs.org/docs/fragments.html)

ç°åœ¨æˆ‘ä»¬æœ‰äº†å¸¦é“¾æ¥çš„ç”¨æˆ·é¡µé¢ã€‚å¦‚æœæ‚¨å•å‡»è¯¥é“¾æ¥ï¼Œå°†å¯¼è‡´æ²¡æœ‰é¡µé¢ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºè·¯ç”±å®šä¹‰ã€‚

æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·åˆ›å»ºæ¯ä¸ªå•ç‹¬çš„è·¯ç”±å®šä¹‰

```
<Route exact path="/user/1" component={UserPage1} />
<Route exact path="/user/2" component={UserPage2} /> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸è¦ï¼ğŸ˜±ã€‚æˆ‘åªæ˜¯åœ¨æ’’è°ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œè¿™ä¸ä¼šæ‰©å±•åˆ°åŒ…å«æ›´å¤šåŠ¨æ€æ•°æ®çš„åŠ¨æ€é¡µé¢ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨ react è·¯ç”±å™¨ä¸­åˆ›å»ºåŠ¨æ€è·¯ç”±å®šä¹‰ã€‚è¿™å¾ˆå®¹æ˜“ã€‚

```
<Route path="/user/:userId" component={UserPage} /> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œ`:userId`æ˜¯è·¯çº¿å®šä¹‰ä¸­çš„åŠ¨æ€è·¯çº¿å‚æ•°ã€‚å®ƒè¢«ä¼ é€’ç»™ç»„ä»¶ã€‚ä½ å¯ä»¥åœ¨`UserPage`ç»„ä»¶ä¸­è·å¾—åä¸º`userId`çš„é“å…·ã€‚

è®©æˆ‘ä»¬åœ¨ç¤ºä¾‹ä¸­æ·»åŠ è¿™æ®µä»£ç ã€‚

```
// App.js
...

const UserPage = () => {
  return (
    <h3>User Page</h3>
  );
};

const App = () => {
  return (
    <section className="App">
      <Router>
        <Link to="/">Home</Link>
        <Link to="/about">About</Link>
        <Link to="/users">Users</Link>
        <Route exact path="/" component={IndexPage} />
        <Route exact path="/users" component={UsersPage} />
        <Route exact path="/user/:userId" component={UserPage} />
        <Route exact path="/about" component={AboutPage} />
      </Router>
      <a href="/about">about with browser reload</a>
    </section>
  );
};

... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬çš„ç”¨æˆ·é¡µé¢ URL å¼€å§‹å·¥ä½œäº†ã€‚ä½†æ˜¯è¯¥é¡µé¢ä¸æ˜¾ç¤ºç”¨æˆ·çš„ä»»ä½•ä¿¡æ¯ã€‚è®©æˆ‘ä»¬æ˜¾ç¤ºä¿¡æ¯ã€‚

### [](#how-to-get-access-to-the-route-params-in-the-component)å¦‚ä½•è®¿é—®ç»„ä»¶ä¸­çš„è·¯çº¿å‚æ•°

React è·¯ç”±å™¨å‘æ‰€æœ‰ç»„ä»¶ä¼ é€’ä¸¤ä¸ªé“å…·

*   `match`é“å…·
*   `location`é“å…·

è®©æˆ‘ä»¬é€šè¿‡åœ¨ç»„ä»¶
ä¸­å®‰æ…°å®ƒæ¥æ£€æŸ¥é‚£äº›é“å…·æœ‰ä»€ä¹ˆä¿¡æ¯

```
// App.js

const UserPage = ({ match, location }) => {
  return (
    <>
      <p>
        <strong>Match Props: </strong>
        <code>{JSON.stringify(match, null, 2)}</code>
      </p>
      <p>
        <strong>Location Props: </strong>
        <code>{JSON.stringify(location, null, 2)}</code>
      </p>
    </>
  );
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹é‚£äº›é“å…·éƒ½æœ‰ä»€ä¹ˆï¼Œ

```
/*
  URL: /user/1
  userId: 1
*/

// Match Props
{ "path": "/user/:userId", "url": "/user/1", "isExact": true, "params": { "userId": "1" } }

// Location Props
{ "pathname": "/user/1", "search": "", "hash": "", "key": "7e6lx5" } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœæˆ‘ä»¬ä»”ç»†è§‚å¯Ÿå†…å®¹ï¼Œæˆ‘ä»¬æ„Ÿå…´è¶£çš„`userId`å‚æ•°åœ¨`match.params.userId`ä¸­ã€‚

è®©æˆ‘ä»¬ä½¿ç”¨`UserPage`ç»„ä»¶ä¸­çš„å‚æ•°å¹¶æ˜¾ç¤ºå…³äºç”¨æˆ·çš„ä¿¡æ¯ã€‚

```
...

// Getting the userId from match props and display the user from the users array
const UserPage = ({ match, location }) => {
  const { params: { userId } } = match;

  return (
    <>
      <p>
        <strong>User ID: </strong>
        {userId}
      </p>
      <p>
        <strong>User Name: </strong>
        {users[userId - 1].name}
      </p>
    </>
  );
};

... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

[https://codesandbox.io/embed/p3ozwy018j](https://codesandbox.io/embed/p3ozwy018j)T2ã€‘

```
// Object destructuring in JavaScript
const {
  params: { userId },
} = match; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> æˆ‘ä»¬åœ¨ä»£ç ä¸­ä½¿ç”¨äº†å¯¹è±¡ææ„ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œäº†è§£æ›´å¤šä¿¡æ¯

å°±è¿™æ ·äº†ï¼Œä¼™è®¡ä»¬ã€‚æˆ‘ä»¬å·²ç»æˆåŠŸåœ°å®Œæˆäº†åŠ¨æ€è·¯ç”±çš„å¼€å‘ï¼Œå¹¶ä¸”çŸ¥é“äº†å¦‚ä½•è®¿é—®åŠ¨æ€è·¯ç”±ç»„ä»¶ä¸­çš„è·¯ç”±å‚æ•°ã€‚å¸Œæœ›ä½ å–œæ¬¢è¿™ä¸ªç³»åˆ—ï¼Œè¯·ç»§ç»­å…³æ³¨æ›´å¤šçš„é«˜çº§ç‰¹æ€§ğŸ¤—

ä½ å¯ä»¥æŸ¥çœ‹è¿™ä¸ªç³»åˆ—çš„ä»£ç åº“[è¿™é‡Œ](https://github.com/learnwithparam/react-router-series)å’Œè¿™ä¸ªéƒ¨åˆ†çš„ä»£ç [è¿™é‡Œ](https://github.com/learnwithparam/react-router-series/commit/f6935df3e43e250ecdc6aa036e09f384b7548231)