# ä½¿ç”¨ AWS CDK ä¸ºæ— æœåŠ¡å™¨å¾®æœåŠ¡æ„å»º CICD ç®¡é“

> åŸæ–‡:[https://dev . to/pauls wail/building-cicd-pipelines-for-server less-microservice-using-the-AWS-CDK-107d](https://dev.to/paulswail/building-cicd-pipelines-for-serverless-microservices-using-the-aws-cdk-1o7d)

*è¿™æ˜¯ç³»åˆ—æ–‡ç« çš„ç¬¬ 5 éƒ¨åˆ†[å°†å•ä¸€çš„ SaaS åº”ç”¨ç¨‹åºè¿ç§»åˆ°æ— æœåŠ¡å™¨â€”â€”å†³ç­–æ—¥å¿—](https://winterwindsoftware.com/serverless-migration-journal/)ã€‚*

ä¸ºäº†ç¡®ä¿æˆ‘ä»ä¼ ç»Ÿ Express.js API è¿ç§»åˆ° Lambda çš„æ¯æ¡æ–°è·¯å¾„åœ¨å‘å¸ƒåˆ°äº§å“ä¹‹å‰éƒ½ç»è¿‡å½»åº•çš„æµ‹è¯•ï¼Œæˆ‘å·²ç»å¼€å§‹å®æ–½ä¸€ä¸ª CICD è¿‡ç¨‹ã€‚

æˆ‘å¯¹ CICD è¿›ç¨‹çš„ä¸»è¦ç›®æ ‡æ˜¯:

*   æ¯ä¸ªæ— æœåŠ¡å™¨æœåŠ¡éƒ½æœ‰è‡ªå·±çš„ç®¡é“ï¼Œå› ä¸ºæ¯ä¸ªéƒ½æ˜¯ç‹¬ç«‹éƒ¨ç½²çš„ã€‚
*   åˆå¹¶åˆ° master åº”è¯¥ä¼šè§¦å‘ä¸»ç®¡é“ï¼Œè¯¥ç®¡é“å°†æ‰§è¡Œä»å¼€å‘åˆ°ç”Ÿäº§çš„æµ‹è¯•å’Œéƒ¨ç½²ã€‚
*   CICD ç®¡é“å°†åœ¨å¼€å‘ AWS å¸æˆ·æ‰˜ç®¡ï¼Œä½†å¿…é¡»èƒ½å¤Ÿéƒ¨ç½²åˆ°å…¶ä»– AWS å¸æˆ·ã€‚
*   æ‰€æœ‰ CICD é…ç½®éƒ½å°†é€šè¿‡åŸºç¡€è®¾æ–½å³ä»£ç æ¥å®Œæˆï¼Œå› æ­¤æˆ‘å¯ä»¥åœ¨åˆ›å»ºæ–°æœåŠ¡æ—¶è½»æ¾è®¾ç½®ç®¡é“ã€‚æ§åˆ¶å°è®¿é—®å°†æ˜¯ä¸¥æ ¼åªè¯»çš„ã€‚

æˆ‘å·²ç»å†³å®šä½¿ç”¨ AWS [CodePipeline](https://aws.amazon.com/codepipeline/) å’Œ [CodeBuild](https://aws.amazon.com/codebuild/) æ¥åˆ›å»ºç®¡é“ï¼Œå› ä¸ºå®ƒä»¬æ˜¯æ— æœåŠ¡å™¨çš„ï¼Œå¹¶ä¸”å†…ç½®äº† IAM æ”¯æŒï¼Œæˆ‘å¯ä»¥ä½¿ç”¨å®ƒæ¥å®‰å…¨åœ°éƒ¨ç½²åˆ° prod æœåŠ¡å™¨ã€‚CodePipeline å……å½“ç¼–æ’å™¨ï¼Œè€Œ CodeBuild å……å½“ä»»åŠ¡è¿è¡Œå™¨ã€‚CodePipeline ç®¡é“ä¸­çš„æ¯ä¸ªé˜¶æ®µéƒ½åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªè°ƒç”¨ CodeBuild é¡¹ç›®çš„æ“ä½œï¼Œè¯¥é¡¹ç›®åŒ…å«åˆ›å»ºå‘å¸ƒåŒ…ã€è¿è¡Œæµ‹è¯•ã€è¿›è¡Œéƒ¨ç½²ç­‰å®é™…å‘½ä»¤ã€‚

## [](#pipeline-overview)ç®¡é“æ¦‚è¿°

å¯¹äºæˆ‘çš„ CICD æµç¨‹çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œæˆ‘å°†éƒ¨ç½²ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡ [`ac-rest-api`](https://winterwindsoftware.com/serverless-migration-journal-part3/) (å®ƒç›®å‰åªåŒ…å«ä¸€ä¸ªå•ç‹¬çš„æµ‹è¯• Lambda å‡½æ•°+ API GW è·¯ç”±)ã€‚è¯¥ç®¡é“å°†æŒ‰å¦‚ä¸‹æ–¹å¼å·¥ä½œ:

1.  æ¯å½“ä»£ç è¢«æ¨é€åˆ°æ‰˜ç®¡æˆ‘çš„`ac-rest-api`æœåŠ¡çš„ repo çš„ä¸»åˆ†æ”¯æ—¶ï¼Œå°±ä¼šè§¦å‘ GitHub æºåŠ¨ä½œã€‚
2.  è¿è¡Œ lint +å•å…ƒ/é›†æˆæµ‹è¯•ï¼Œå¹¶æ„å»ºéƒ¨ç½²åŒ…(ä½¿ç”¨`sls package`å‘½ä»¤)
3.  å°†åŒ…(ä½¿ç”¨`sls deploy`)éƒ¨ç½²åˆ°å¼€å‘é˜¶æ®µï¼Œå¹¶å¯¹å…¶è¿è¡ŒéªŒæ”¶æµ‹è¯•ã€‚
4.  å°†åŒ…éƒ¨ç½²åˆ°è¯•è¿è¡Œé˜¶æ®µï¼Œå¹¶å¯¹å…¶è¿è¡ŒéªŒæ”¶æµ‹è¯•ã€‚
5.  å°†åŒ…éƒ¨ç½²åˆ°ç”Ÿäº§é˜¶æ®µï¼Œå¹¶å¯¹å…¶è¿è¡ŒéªŒæ”¶æµ‹è¯•ã€‚

ä¸‹é¢æ˜¯æˆ‘å®Œæˆçš„ç®¡é“çš„æ ·å­:

[![CodePipeline stages](../Images/37dbc7af2a4bec32b57a285e27b0ed89.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--2HkN_bLG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://winterwindsoftware.com/img/blog-images/codepipeline-stages.png)

## [](#managing-pipelines-as-infrastructureascode)å°†ç®¡é“ä½œä¸ºåŸºç¡€è®¾æ–½è¿›è¡Œç®¡ç†

ä¸å¤§å¤šæ•° AWS æœåŠ¡ä¸€æ ·ï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°å…³äºå¦‚ä½•ä½¿ç”¨ AWS æ§åˆ¶å°åˆ›å»ºä»£ç ç®¡é“çš„æ•™ç¨‹ï¼Œä½†å¾ˆéš¾æ‰¾åˆ°è¯¦ç»†çš„åŸºç¡€è®¾æ–½ä»£ç ç¤ºä¾‹ã€‚CodeBuild åœ¨è¿™æ–¹é¢åšå¾—æ›´å¥½ï¼Œå› ä¸ºæ–‡æ¡£ä¼¼ä¹ä¸€èˆ¬éƒ½æ¨èåœ¨ repo ä¸­ä½¿ç”¨ä¸€ä¸ª`buildspec.yml`æ–‡ä»¶æ¥æŒ‡å®šæ„å»ºå‘½ä»¤ã€‚

ç”±äºåœ¨è¿ç§»è¿‡ç¨‹ä¸­ï¼Œæˆ‘å°†ä¸ºæˆ‘ç¡®å®šçš„æ¯ä¸ªå¾®æœåŠ¡åˆ›å»ºå‡ ä¸ªç®¡é“ï¼Œæ‰€ä»¥æˆ‘æƒ³è¦ä¸€äº›æˆ‘å¯ä»¥è½»æ¾é‡ç”¨çš„ä¸œè¥¿ã€‚

æˆ‘è€ƒè™‘äº†è¿™äº›å®šä¹‰æˆ‘çš„ç®¡é“çš„é€‰é¡¹:

1.  ä½¿ç”¨åŸå§‹äº‘å½¢æˆ YAML æ–‡ä»¶ã€‚
2.  åœ¨ serverless.yml çš„èµ„æºéƒ¨åˆ†ä½¿ç”¨ CloudFormationã€‚
3.  ä½¿ç”¨æ–°çš„ [AWS äº‘å¼€å‘å·¥å…·åŒ…(CDK)](https://github.com/awslabs/aws-cdk) ï¼Œå®ƒå…è®¸æ‚¨ä½¿ç”¨æµè¡Œè¯­è¨€(Javascript/Typescriptã€Javaã€C#)å®šä¹‰é«˜çº§åŸºç¡€æ¶æ„æ„é€ ï¼Œä»è€Œåœ¨åº•å±‚ç”Ÿæˆäº‘æ„å»ºå †æ ˆã€‚

æˆ‘å¯¹ CloudFormation æ¯”è¾ƒç²¾é€šï¼Œä½†æˆ‘å‘ç°å®ƒçš„å¼€å‘ä½“éªŒéå¸¸ä»¤äººæ²®ä¸§ï¼Œè¿‡å»æˆ‘èŠ±äº†å‡ å¤©æ—¶é—´æ¥æ„å»ºå’Œè¿è¡Œå¤æ‚çš„ CloudFormation å †æ ˆã€‚æˆ‘å¯¹å®ƒçš„ä¸»è¦ä¸æ»¡æ˜¯:

*   åˆ›ä½œå’Œçœ‹åˆ°éƒ¨ç½²å®Œæˆ(å¤±è´¥æˆ–æˆåŠŸ)ä¹‹é—´çš„ç¼“æ…¢åé¦ˆå¾ªç¯
*   ç¼ºå°‘æ¨¡æ¿/æ¨¡å—ï¼Œè¿™ä½¿å¾—åœ¨ä¸å¤åˆ¶å’Œç²˜è´´å¤§é‡æ ·æ¿æ–‡ä»¶çš„æƒ…å†µä¸‹å¾ˆéš¾é‡ç”¨(æˆ‘çŸ¥é“åƒå¯¹æµå±‚è¿™æ ·çš„å·¥å…·åœ¨è¿™æ–¹é¢æœ‰æ‰€å¸®åŠ©ï¼Œä½†æˆ‘æ˜¯ä¸€å Javascript å¼€å‘äººå‘˜ï¼Œä¸æƒ³å­¦ä¹ ä¸€é—¨æ–°è¯­è¨€(Python))
*   æˆ‘æ€»æ˜¯éœ€è¦åœ¨æµè§ˆå™¨é€‰é¡¹å¡ä¸­æ‰“å¼€æ–‡æ¡£ï¼Œä»¥æŸ¥çœ‹èµ„æºçš„å¯ç”¨å±æ€§

æœ‰é‰´äºæ­¤ï¼Œæˆ‘å†³å®šç»§ç»­ä½¿ç”¨ CDKï¼Œè¿™(ç†è®ºä¸Š)åº”è¯¥æœ‰åŠ©äºå‡è½»æ‰€æœ‰è¿™äº›æŠ•è¯‰ã€‚

## [](#creating-my-cdk-app)åˆ›å»ºæˆ‘çš„ CDK åº”ç”¨

CDK æä¾›äº†ä¸€ä¸ªç”¨äºéƒ¨ç½²â€œåº”ç”¨ç¨‹åºâ€çš„ CLIã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºå®é™…ä¸Šæ˜¯ä¸€ä¸ªèµ„æºæ ‘ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ¨¡å‹æ¥æ„å»ºå®ƒï¼Œæ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ç§°ä¸ºä¸€ä¸ªâ€œæ„é€ â€ã€‚CDK ä¸ºæ‰€æœ‰ä¸»è¦çš„ AWS èµ„æºæä¾›äº†ç°æˆçš„æ„é€ ï¼Œä¹Ÿå…è®¸(å¹¶ä¸”[é¼“åŠ±](https://docs.aws.amazon.com/CDK/latest/userguide/writing_constructs.html))ä½ è‡ªå·±ç¼–å†™ã€‚ä¸€ä¸ª CDK åº”ç”¨ç¨‹åºåŒ…å«è‡³å°‘ä¸€ä¸ª CloudFormation å †æ ˆç»“æ„ï¼Œå®ƒä½¿ç”¨è¯¥ç»“æ„æ¥å‘èµ·å¹•åéƒ¨ç½²ã€‚å› æ­¤ï¼Œæ‚¨ä»ç„¶å¯ä»¥è·å¾— CloudFormation æä¾›çš„è‡ªåŠ¨å›æ»šä¼˜åŠ¿ã€‚

*å…³äºä»€ä¹ˆæ˜¯ CDK ä»¥åŠå¦‚ä½•å®‰è£…å’Œå¼•å¯¼ä½ è‡ªå·±çš„åº”ç”¨ç¨‹åºçš„æ›´è¯¦ç»†çš„èƒŒæ™¯ï¼Œæˆ‘æ¨èä»è¿™é‡Œ[å¼€å§‹](https://docs.aws.amazon.com/CDK/latest/userguide/what-is.html)ã€‚*

æˆ‘è¿˜å†³å®šå°è¯•ä½¿ç”¨ Typescript(è€Œä¸æ˜¯æ™®é€šçš„ Javascript ),å› ä¸º CDK æ˜¯ç”¨ Typescript ç¼–å†™çš„ï¼Œå¼ºç±»å‹ä¼¼ä¹éå¸¸é€‚åˆå…·æœ‰å¤æ‚å±æ€§é›†çš„åŸºç¡€è®¾æ–½èµ„æºã€‚

æˆ‘é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªåä¸º`ServiceCicdPipelines`çš„è‡ªå®šä¹‰é¡¶çº§æ„é€ ï¼Œå®ƒå……å½“æˆ‘å°†åˆ›å»ºçš„æ¯ä¸ªæœåŠ¡çš„æ‰€æœ‰ç®¡é“å’Œä»»ä½•è¡¥å……èµ„æºçš„å®¹å™¨ã€‚æˆ‘å·²ç»åœ¨[è¿™ä¸ªè¦ç‚¹](https://gist.github.com/paulswail/2cdda90261e6d17506114ea00d780eb6)ä¸­åŒ…å«äº†æ‰€æœ‰çš„æºä»£ç ï¼Œä½†æ˜¯å®ƒçš„ä¸»è¦å…ƒç´ å¦‚ä¸‹:

*   `cicd-pipelines-stack`:éƒ¨ç½²æ‰€æœ‰ CICD ç›¸å…³èµ„æºçš„å•ä¸€äº‘æ¶æ„ã€‚
*   `pipelines[]`:`ServicePipeline`å¯¹è±¡çš„åˆ—è¡¨â€”â€”ä¸€ä¸ªå®šåˆ¶çš„æ„é€ ï¼Œå®ƒå°è£…äº†ä¸ºå•ä¸ªæ— æœåŠ¡å™¨æœåŠ¡åˆ›å»ºå•ä¸ªç®¡é“çš„é€»è¾‘ã€‚
*   `alertsTopic`:å°†æ¥æ”¶ç®¡é“é”™è¯¯é€šçŸ¥çš„ SNS ä¸»é¢˜ã€‚

å®šåˆ¶çš„`ServicePipeline`ç»“æ„æ˜¯å¤§éƒ¨åˆ†é€»è¾‘æ‰€åœ¨ã€‚å®ƒå°†ä¸€ä¸ª`ServiceDefinition`å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·:

```
export interface ServiceDefinition {
    serviceName: string;
    githubRepo: string;
    githubOwner: string;
    githubTokenSsmPath: string;
    /** Permissions that CodeBuild role needs to assume to deploy serverless stack */
    deployPermissions: PolicyStatement[];
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯¥å¯¹è±¡æ˜¯å®šä¹‰æ­£åœ¨éƒ¨ç½²çš„æœåŠ¡çš„æ‰€æœ‰å”¯ä¸€å±æ€§çš„åœ°æ–¹ã€‚ç›®å‰ï¼Œæˆ‘åœ¨è¿™é‡Œæ²¡æœ‰å¤ªå¤šçš„é€‰æ‹©ï¼Œä½†æˆ‘å¸Œæœ›éšç€æ—¶é—´çš„æ¨ç§»å¢åŠ è¿™ä¸€ç‚¹ã€‚

`ServicePipeline`æ„é€ ä¹Ÿæ˜¯å®šä¹‰ç®¡é“æ¯ä¸ªé˜¶æ®µçš„åœ°æ–¹:

```
export class ServicePipeline extends Construct {
    readonly pipeline: Pipeline;
    readonly alert: PipelineFailedAlert;

    constructor(scope: Construct, id: string, props: ServicePipelineProps) {
        super(scope, id);
        const pipelineName = `${props.service.serviceName}_${props.sourceTrigger}`;
        this.pipeline = new Pipeline(scope, pipelineName, {
            pipelineName,
        });

        // Read Github Oauth token from SSM Parameter Store
        // https://docs.aws.amazon.com/codepipeline/latest/userguide/GitHub-rotate-personal-token-CLI.html
        const oauth = new SecretParameter(scope, 'GithubPersonalAccessToken', {
            ssmParameter: props.service.githubTokenSsmPath,
        });

        const sourceAction = new GitHubSourceAction({
            actionName: props.sourceTrigger === SourceTrigger.PullRequest ? 'GitHub_SubmitPR' : 'GitHub_PushToMaster',
            owner: props.service.githubOwner,
            repo: props.service.githubRepo,
            branch: 'master',
            oauthToken: oauth.value,
            outputArtifactName: 'SourceOutput',
        });

        this.pipeline.addStage({
            name: 'Source',
            actions: [sourceAction],
        });

        // Create stages for DEV => STAGING => PROD.
        // Each stage defines its own steps in its own build file
        const buildProject = new ServiceCodebuildProject(this.pipeline, 'buildProject', {
            projectName: `${pipelineName}_dev`,
            buildSpec: 'buildspec.dev.yml',
            deployerRoleArn: CrossAccountDeploymentRole.getRoleArnForService(
                props.service.serviceName, 'dev', deploymentTargetAccounts.dev.accountId,
            ),
        });
        const buildAction = buildProject.project.toCodePipelineBuildAction({
            actionName: 'Build_Deploy_DEV',
            inputArtifact: sourceAction.outputArtifact,
            outputArtifactName: 'sourceOutput',
            additionalOutputArtifactNames: [
                'devPackage',
                'stagingPackage',
                'prodPackage',
            ],
        });
        this.pipeline.addStage({
            name: 'Build_Deploy_DEV',
            actions: [buildAction],
        });
        const stagingProject = new ServiceCodebuildProject(this.pipeline, 'deploy-staging', {
            projectName: `${pipelineName}_staging`,
            buildSpec: 'buildspec.staging.yml',
            deployerRoleArn: CrossAccountDeploymentRole.getRoleArnForService(
                props.service.serviceName, 'staging', deploymentTargetAccounts.staging.accountId,
            ),
        });
        const stagingAction = stagingProject.project.toCodePipelineBuildAction({
            actionName: 'Deploy_STAGING',
            inputArtifact: sourceAction.outputArtifact,
            additionalInputArtifacts: [
                buildAction.additionalOutputArtifact('stagingPackage'),
            ],
        });
        this.pipeline.addStage({
            name: 'Deploy_STAGING',
            actions: [stagingAction],
        });

        // Prod stage requires cross-account access as codebuild isn't running in same account
        const prodProject = new ServiceCodebuildProject(this.pipeline, 'deploy-prod', {
            projectName: `${pipelineName}_prod`,
            buildSpec: 'buildspec.prod.yml',
            deployerRoleArn: CrossAccountDeploymentRole.getRoleArnForService(
                props.service.serviceName, 'prod', deploymentTargetAccounts.prod.accountId,
            ),
        });
        const prodAction = prodProject.project.toCodePipelineBuildAction({
            actionName: 'Deploy_PROD',
            inputArtifact: sourceAction.outputArtifact,
            additionalInputArtifacts: [
                buildAction.additionalOutputArtifact('prodPackage'),
            ],
        });
        this.pipeline.addStage({
            name: 'Deploy_PROD',
            actions: [prodAction],
        });

        // Wire up pipeline error notifications
        if (props.alertsTopic) {
            this.alert = new PipelineFailedAlert(this, 'pipeline-failed-alert', {
                pipeline: this.pipeline,
                alertsTopic: props.alertsTopic,
            });
        }
    }
}

export interface ServicePipelineProps {
    /** Information about service to be built & deployed (source repo, etc) */
    service: ServiceDefinition;
    /** Trigger on PR or Master merge?  */
    sourceTrigger: SourceTrigger;
    /** Account details for where this service will be deployed to */
    deploymentTargetAccounts: DeploymentTargetAccounts;
    /** Optional SNS topic to send pipeline failure notifications to */
    alertsTopic?: Topic;
}

/** Wrapper around the CodeBuild Project to set standard props and create IAM role */
export class ServiceCodebuildProject extends Construct {
    readonly buildRole: Role;
    readonly project: Project;

    constructor(scope: Construct, id: string, props: ServiceCodebuildActionProps) {
        super(scope, id);

        this.buildRole = new ServiceDeployerRole(this, 'project-role', {
            deployerRoleArn: props.deployerRoleArn,
        }).buildRole;

        this.project = new Project(this, 'build-project', {
            projectName: props.projectName,
            timeout: 10, // minutes
            environment: {
                buildImage: LinuxBuildImage.UBUNTU_14_04_NODEJS_8_11_0,
            },
            source: new CodePipelineSource(),
            buildSpec: props.buildSpec || 'buildspec.yml',
            role: this.buildRole,
        });
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#quick-note-on-pipeline-code-organisation)ç®¡é“ä»£ç ç»„ç»‡çš„å¿«é€Ÿè¯´æ˜

æˆ‘åœ¨ä¸€ä¸ªå…±äº«çš„`autochart-infrastructure` repo ä¸­åˆ›å»ºäº†æ‰€æœ‰è¿™äº› CDK å®šåˆ¶æ„é€ ï¼Œæˆ‘ç”¨å®ƒæ¥å®šä¹‰å¤šä¸ªæœåŠ¡ä½¿ç”¨çš„å…±äº«çš„ã€è·¨é¢†åŸŸçš„åŸºç¡€è®¾æ–½èµ„æºã€‚æˆ‘åœ¨ä¸‹é¢ä»‹ç»çš„ buildspec æ–‡ä»¶ä¸å®ƒä»¬çš„æœåŠ¡ä½äºåŒä¸€ä¸ªå­˜å‚¨åº“ä¸­(è¿™æ˜¯åº”è¯¥çš„)ã€‚æˆ‘å¯¹å°†ç®¡é“å®šä¹‰å’Œæ„å»ºè„šæœ¬æ”¾åœ¨å•ç‹¬çš„å›è´­åè®®ä¸­å¹¶ä¸å®Œå…¨æ»¡æ„ï¼Œæˆ‘å¯èƒ½ä¼šè€ƒè™‘å°†æˆ‘çš„å¯é‡ç”¨ CDK ç»“æ„ç§»åŠ¨åˆ°å…±äº«åº“ä¸­çš„æ–¹æ³•ï¼Œå¹¶åœ¨å¼•ç”¨è¯¥åº“æ—¶åœ¨ç‰¹å®šäºæœåŠ¡çš„å›è´­åè®®ä¸­å®šä¹‰ CDK åº”ç”¨çš„æºä»£ç ã€‚

## [](#writing-the-codebuild-scripts)ç¼–å†™ä»£ç æ„å»ºè„šæœ¬

åœ¨ä¸Šé¢çš„ç®¡é“å®šä¹‰ä»£ç ä¸­ï¼Œæ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°æ¯ä¸ªéƒ¨ç½²é˜¶æ®µéƒ½æœ‰è‡ªå·±çš„ buildspec æ–‡ä»¶(ä½¿ç”¨å‘½åçº¦å®š`buildspec.<stage>.yml`)ã€‚æˆ‘æƒ³å°½é‡å‡å°‘ç®¡é“æœ¬èº«çš„é€»è¾‘æ•°é‡ï¼Œè®©å®ƒå•ç‹¬è´Ÿè´£ç¼–æ’ã€‚æ‰€æœ‰çš„é€»è¾‘éƒ½å°†å­˜åœ¨äºæ„å»ºè„šæœ¬ä¸­ã€‚

### [](#building-and-deploying-to-dev-stage)æ„å»ºå¹¶éƒ¨ç½²åˆ°å¼€å‘é˜¶æ®µ

ä¸€æ—¦ Github ä¸­çš„ä¸»åˆ†æ”¯å‘ç”Ÿæ¨é€ï¼Œä¸‹ä¸€ä¸ªç®¡é“æ­¥éª¤å°±æ˜¯è¿è¡Œæµ‹è¯•ã€æ‰“åŒ…å¹¶éƒ¨ç½²åˆ°å¼€å‘é˜¶æ®µã€‚å¦‚ä¸‹æ‰€ç¤º:

```
# buildspec.dev.yml
version: 0.2

env:
  variables:
    TARGET_REGION: us-east-1
    SLS_DEBUG: ''
    DEPLOYER_ROLE_ARN: 'arn:aws:iam::<dev_account_id>:role/ac-rest-api-dev-deployer-role'

phases:
  pre_build:
    commands:
      - chmod +x build.sh
      - ./build.sh install
  build:
    commands:
      # Do some local testing
      - ./build.sh test-unit
      - ./build.sh test-integration
      # Create separate packages for each target environment
      - ./build.sh clean
      - ./build.sh package dev $TARGET_REGION
      - ./build.sh package staging $TARGET_REGION
      - ./build.sh package prod $TARGET_REGION
      # Deploy to DEV and run acceptance tests there
      - ./build.sh deploy dev $TARGET_REGION dist/dev
      - ./build.sh test-acceptance dev

artifacts:
  files:
    - '**/*'
  secondary-artifacts:
    devPackage:
      base-directory: ./dist/dev
      files:
        - '**/*'
    stagingPackage:
      base-directory: ./dist/staging
      files:
        - '**/*'
    prodPackage:
      base-directory: ./dist/prod
      files:
        - '**/*' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„:

*   éœ€è¦ä¸€ä¸ª`DEPLOYER_ROLE_ARN`ç¯å¢ƒå˜é‡æ¥å®šä¹‰ä¸€ä¸ªé¢„å…ˆå­˜åœ¨çš„ IAM è§’è‰²ï¼Œè¯¥è§’è‰²æœ‰æƒåœ¨ç›®æ ‡å¸æˆ·ä¸­æ‰§è¡Œéƒ¨ç½²æ­¥éª¤ã€‚æˆ‘ä»¬å°†åœ¨åé¢ä»‹ç»å¦‚ä½•è®¾ç½®å®ƒã€‚
*   æ¯ä¸ªæ„å»ºå‘½ä»¤å¼•ç”¨ä¸€ä¸ª`build.sh`æ–‡ä»¶ã€‚è¿™ç§é—´æ¥çš„åŸå› æ˜¯ä¸ºäº†åœ¨å¼€å‘æœŸé—´æ›´å®¹æ˜“æµ‹è¯•æ„å»ºè„šæœ¬ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰åŠæ³•åœ¨æœ¬åœ°è°ƒç”¨ buildspec æ–‡ä»¶(è¿™æ˜¯åŸºäºå´”ç°åœ¨ä»–çš„ç”Ÿäº§å°±ç»ªæ— æœåŠ¡å™¨è¯¾ç¨‹çš„ [CI/CD æ¨¡å—ä¸­æ¨èçš„æ–¹æ³•)](https://livevideo.manning.com/module/38_5_2/production-ready-serverless/ci-cd/setting-up-a-ci-cd-pipeline-for-deploying-lambda-functions?)
*   åœ¨æ‰“åŒ…ä¹‹å‰ï¼Œæˆ‘è¿è¡Œå•å…ƒå’Œé›†æˆæµ‹è¯•ã€‚è¿™å°†åœ¨æœ¬åœ°è¿è¡Œ Lambda å‡½æ•°ä»£ç (åœ¨ CodeBuild å®¹å™¨ä¸­),è€Œä¸æ˜¯é€šè¿‡ AWS Lambdaï¼Œå°½ç®¡é›†æˆæµ‹è¯•å¯èƒ½ä¼šå½±å“å‡½æ•°è°ƒç”¨çš„ç°æœ‰ä¸‹æ¸¸ AWS èµ„æºã€‚
*   æˆ‘åœ¨è¿™é‡Œåˆ›å»ºäº† 3 ä¸ªéƒ¨ç½²å·¥ä»¶ï¼Œæ¯ä¸ªé˜¶æ®µä¸€ä¸ªï¼Œå¹¶å°†å®ƒä»¬ä½œä¸ºè¾“å‡ºå·¥ä»¶åŒ…å«åœ¨å†…ï¼Œä¾›ä»¥åçš„é˜¶æ®µä½¿ç”¨ã€‚æˆ‘å¯¹æ­¤å¹¶ä¸å®Œå…¨æ»¡æ„ï¼Œå› ä¸ºå®ƒè¿èƒŒäº† Devops çš„æœ€ä½³å®è·µï¼Œå³åœ¨æ¯ä¸ªé˜¶æ®µéƒ½æœ‰ä¸€ä¸ªå•ä¸€çš„ä¸å¯å˜çš„å·¥ä»¶æµã€‚æˆ‘è¿™æ ·åšçš„åŸå› æ˜¯ build.sh æ–‡ä»¶ä½¿ç”¨çš„`sls package`å‘½ä»¤éœ€è¦æä¾›ç»™å®ƒä¸€ä¸ªç‰¹å®šçš„ stageã€‚ç„¶è€Œï¼Œæˆ‘åæ¥äº†è§£åˆ°[æœ‰ä¸€ä¸ªè§£å†³è¿™ä¸ª](https://medium.com/@bishwash.aryal/serverless-framework-build-immutable-package-for-ci-cd-pipeline-949b49f7df91)çš„æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘å¯èƒ½ä¼šå¾ˆå¿«æ”¹å˜å®ƒã€‚
*   æˆ‘è¿è¡ŒéªŒæ”¶æµ‹è¯•(æµ‹è¯•æ–°éƒ¨ç½²çš„ API ç½‘å…³ç«¯ç‚¹)ä½œä¸ºæœ€åä¸€æ­¥ã€‚

`build.sh`æ–‡ä»¶å¦‚ä¸‹:

```
#!/bin/bash
set -e
set -o pipefail

instruction()
{
  echo "usage: ./build.sh package <stage> <region>"
  echo ""
  echo "/build.sh deploy <stage> <region> <pkg_dir>"
  echo ""
  echo "/build.sh test-<test_type> <stage>"
}

assume_role() {
  if [ -n "$DEPLOYER_ROLE_ARN" ]; then echo "Assuming role $DEPLOYER_ROLE_ARN ..."
    CREDS=$(aws sts assume-role --role-arn $DEPLOYER_ROLE_ARN \
        --role-session-name my-sls-session --out json)
    echo $CREDS > temp_creds.json
    export AWS_ACCESS_KEY_ID=$(node -p "require('./temp_creds.json').Credentials.AccessKeyId")
    export AWS_SECRET_ACCESS_KEY=$(node -p "require('./temp_creds.json').Credentials.SecretAccessKey")
    export AWS_SESSION_TOKEN=$(node -p "require('./temp_creds.json').Credentials.SessionToken")
    aws sts get-caller-identity
  fi
}

unassume_role() {
  unset AWS_ACCESS_KEY_ID
  unset AWS_SECRET_ACCESS_KEY
  unset AWS_SESSION_TOKEN
}

if [ $# -eq 0 ]; then instruction
  exit 1
elif [ "$1" = "install" ] && [ $# -eq 1 ]; then npm install elif [ "$1" = "test-unit" ] && [ $# -eq 1 ]; then npm run lint
  npm run test elif [ "$1" = "test-integration" ] && [ $# -eq 1 ]; then echo "Running INTEGRATION tests..."
  npm run test-integration
  echo "INTEGRATION tests complete."
elif [ "$1" = "clean" ] && [ $# -eq 1 ]; then rm -rf ./dist
elif [ "$1" = "package" ] && [ $# -eq 3 ]; then STAGE=$2
  REGION=$3
  'node_modules/.bin/sls' package -s $STAGE -p "./dist/${STAGE}" -r $REGION
elif [ "$1" = "deploy" ] && [ $# -eq 4 ]; then STAGE=$2
  REGION=$3
  ARTIFACT_FOLDER=$4
  echo "Deploying from ARTIFACT_FOLDER=${ARTIFACT_FOLDER}"
  assume_role
  # 'node_modules/.bin/sls' create_domain -s $STAGE -r $REGION
  echo "Deploying service to stage $STAGE..."
  'node_modules/.bin/sls' deploy --force -s $STAGE -r $REGION -p $ARTIFACT_FOLDER
  unassume_role
elif [ "$1" = "test-acceptance" ] && [ $# -eq 2 ]; then STAGE=$2
  echo "Running ACCEPTANCE tests for stage $STAGE..."
  STAGE=$STAGE npm run test-acceptance
  echo "ACCEPTANCE tests complete."
elif [ "$1" = "clearcreds" ] && [ $# -eq 1 ]; then unassume_role
  rm -f ./temp_creds.json
else instruction
  exit 1
fi 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ä¸Šé¢çš„è„šæœ¬ä¸­éœ€è¦æ³¨æ„çš„ä¸»è¦äº‹æƒ…æ˜¯åœ¨ deploy å‘½ä»¤ä¹‹å‰è°ƒç”¨çš„`assume_role`å‡½æ•°ã€‚ä¸ºäº†å°† CodeBuild éƒ¨ç½²åˆ°ä¸åŒçš„ AWS å¸æˆ·ï¼Œæ— æœåŠ¡å™¨æ¡†æ¶çš„`sls deploy`å‘½ä»¤éœ€è¦ä½œä¸ºç›®æ ‡å¸æˆ·ä¸­å®šä¹‰çš„è§’è‰²è¿è¡Œã€‚ä¸ºæ­¤ï¼ŒCodebuild IAM è§’è‰²(åœ¨ DEV å¸æˆ·ä¸­è¿è¡Œ)éœ€è¦æ‰¿æ‹…è¿™ä¸ªè§’è‰²ã€‚æˆ‘ç›®å‰æ­£åœ¨é€šè¿‡è°ƒç”¨ AWS CLI çš„`aws sts assume-role`å‘½ä»¤æ¥è·å–è¿™ä¸ªéƒ¨ç½²è§’è‰²çš„ä¸´æ—¶å‡­è¯ã€‚ç„¶è€Œï¼Œè¿™ä¼¼ä¹å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥å¦‚æœæœ‰äººçŸ¥é“æ›´å¹²å‡€çš„æ–¹æ³•ï¼Œæˆ‘å¾ˆæƒ³å¬å¬ã€‚

### [](#deploying-to-staging-and-production)éƒ¨ç½²åˆ°æš‚å­˜å’Œç”Ÿäº§

éƒ¨ç½²å’Œè¿è¡Œæµ‹è¯•çš„è„šæœ¬ç±»ä¼¼äº dev è„šæœ¬ï¼Œä½†æ˜¯æ›´ç®€å•:

```
# buildspec.staging.yml
version: 0.2

env:
  variables:
    TARGET_REGION: us-east-1
    SLS_DEBUG: '*'
    DEPLOYER_ROLE_ARN: 'arn:aws:iam::<staging_account_id>:role/ac-rest-api-staging-deployer-role'

# Deploy to STAGING stage and run acceptance tests.
phases:
  pre_build:
    commands:
      - chmod +x build.sh
      - ./build.sh install
  build:
    commands:
      - ./build.sh deploy staging $TARGET_REGION $CODEBUILD_SRC_DIR_stagingPackage
      - ./build.sh test-acceptance staging 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œéœ€è¦æ³¨æ„çš„å…³é”®ç‚¹æ˜¯:

*   æˆ‘ä½¿ç”¨`$CODEBUILD_SRC_DIR_stagingPackage`ç¯å¢ƒå˜é‡æ¥è®¿é—®æœ€åä¸€ä¸ªç®¡é“æ­¥éª¤ä¸­åä¸º`stagingPackage`çš„è¾“å‡ºå·¥ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚

`buildspec.prod.yml`æ–‡ä»¶ä¸æš‚å­˜æ–‡ä»¶éå¸¸ç›¸ä¼¼ï¼Œé™¤äº†å®ƒå¼•ç”¨äº†ç”Ÿäº§ IAM è§’è‰²å’Œå·¥ä»¶æºç›®å½•ã€‚

## [](#deployment-permissions-and-crossaccount-access)è°ƒé…æƒé™å’Œè·¨è´¦æˆ·æƒé™

è¿™å¯èƒ½æ˜¯æ•´ä¸ªè¿‡ç¨‹ä¸­æœ€å›°éš¾çš„éƒ¨åˆ†ã€‚æ­£å¦‚æˆ‘ä¸Šé¢æåˆ°çš„ï¼Œéƒ¨ç½²è„šæœ¬å‡è®¾ä¸€ä¸ªé¢„å…ˆå­˜åœ¨çš„`deployer-role` IAM è§’è‰²ï¼Œå®ƒå­˜åœ¨äºè¢«éƒ¨ç½²åˆ°çš„é˜¶æ®µçš„ AWS å¸æˆ·ä¸­ã€‚
ä¸ºäº†è®¾ç½®è¿™äº›è§’è‰²ï¼Œæˆ‘å†æ¬¡ä½¿ç”¨ CDK æ¥å®šä¹‰ä¸€ä¸ªå®šåˆ¶çš„æ„é€ `CrossAccountDeploymentRole`ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
export interface CrossAccountDeploymentRoleProps {
    serviceName: string;
    /** account ID where CodePipeline/CodeBuild is hosted */
    deployingAccountId: string;
    /** stage for which this role is being created */
    targetStageName: string;
    /** Permissions that deployer needs to assume to deploy stack */
    deployPermissions: PolicyStatement[];
}

/**
 * Creates an IAM role to allow for cross-account deployment of a service's resources.
 */
export class CrossAccountDeploymentRole extends Construct {
    public static getRoleNameForService(serviceName: string, stage: string): string {
        return `${serviceName}-${stage}-deployer-role`;
    }

    public static getRoleArnForService(serviceName: string, stage: string, accountId: string): string {
        return `arn:aws:iam::${accountId}:role/${CrossAccountDeploymentRole.getRoleNameForService(serviceName, stage)}`;
    }

    readonly deployerRole: Role;
    readonly deployerPolicy: Policy;
    readonly roleName: string;

    public constructor(parent: Construct, id: string, props: CrossAccountDeploymentRoleProps) {
        super(parent, id);
        this.roleName = CrossAccountDeploymentRole.getRoleNameForService(props.serviceName, props.targetStageName);
        // Cross-account assume role
        // https://awslabs.github.io/aws-cdk/refs/_aws-cdk_aws-iam.html#configuring-an-externalid
        this.deployerRole = new Role(this, 'deployerRole', {
            roleName: this.roleName,
            assumedBy: new AccountPrincipal(props.deployingAccountId),
        });
        const passrole = new PolicyStatement(PolicyStatementEffect.Allow)
            .addActions(
                'iam:PassRole',
            ).addAllResources();
        this.deployerPolicy = new Policy(this, 'deployerPolicy', {
            policyName: `${this.roleName}-policy`,
            statements: [passrole, ...props.deployPermissions],
        });
        this.deployerPolicy.attachToRole(this.deployerRole);
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¼ é€’ç»™æ„é€ å‡½æ•°çš„`props`å¯¹è±¡åŒ…å«æœåŠ¡çš„ç‰¹å®šéœ€æ±‚ã€‚è¿™é‡Œæœ€ä¸»è¦çš„æ˜¯`deployPermissions`ï¼Œå®ƒæ˜¯ä¸€ç»„ IAM ç­–ç•¥è¯­å¥ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿè¿è¡Œæ— æœåŠ¡å™¨æ¡†æ¶çš„`sis deploy`å‘½ä»¤æ¥éƒ¨ç½²æ‰€æœ‰å¿…è¦çš„èµ„æº(äº‘æ„é€ æ ˆã€Lambda å‡½æ•°ç­‰)ã€‚

éœ€è¦æ³¨æ„çš„é‡è¦ä¸€ç‚¹æ˜¯ï¼Œè¿™ç»„æƒé™ä¸åŒäºæ‚¨çš„æ— æœåŠ¡å™¨æœåŠ¡éœ€è¦æ‰§è¡Œçš„*è¿è¡Œæ—¶*æƒé™ã€‚è®¡ç®—å‡ºä¸€ä¸ªæœåŠ¡éœ€è¦ä»€ä¹ˆæ ·çš„*éƒ¨ç½²æ—¶é—´* IAM æƒé™æ˜¯æ— æœåŠ¡å™¨é¢†åŸŸçš„ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„é—®é¢˜ï¼Œæˆ‘è¿˜æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªå¥½çš„è§£å†³æ–¹æ¡ˆã€‚æœ€åˆï¼Œæˆ‘ç»™äº†æˆ‘çš„è§’è‰² admin è®¿é—®æƒé™ï¼Œç›´åˆ°æˆ‘è®©ç«¯åˆ°ç«¯ç®¡é“å·¥ä½œä¸ºæ­¢ï¼Œç„¶åå‘åå·¥ä½œï¼Œæ·»åŠ æ›´ç»†ç²’åº¦çš„æƒé™ï¼Œä½†æ˜¯è¿™æ¶‰åŠåˆ°å¤§é‡çš„è¯•éªŒå’Œé”™è¯¯ã€‚

æœ‰å…³ IAM å¦‚ä½•ä¸æ— æœåŠ¡å™¨æ¡†æ¶ä¸€èµ·å·¥ä½œçš„æ›´å¤šä¿¡æ¯ï¼Œæˆ‘æ¨èé˜…è¯»[IAM åŸºç¡€çŸ¥è¯†:ä½¿ç”¨æ— æœåŠ¡å™¨ç®¡ç†æƒé™](https://serverless.com/blog/abcs-of-iam-permissions/)ã€‚

## æ„å»ºå’Œæµ‹è¯•è‡ªå·±çš„ç®¡é“çš„ä¸€äº›æŠ€å·§

*   æ€»æ˜¯é¦–å…ˆåœ¨æœ¬åœ°è¿è¡Œ build.sh æ–‡ä»¶ï¼Œä»¥ç¡®ä¿å®ƒåœ¨æ‚¨çš„è®¡ç®—æœºä¸Šå·¥ä½œ
*   ä½¿ç”¨ CodePipeline æ§åˆ¶å°ä¸­çš„â€œRelease Changeâ€æŒ‰é’®ï¼Œä»¥ä¾¿å¯åŠ¨æ–°çš„ç®¡é“æ‰§è¡Œï¼Œè€Œæ— éœ€å‘ Github æ¨é€è™šæ‹Ÿæäº¤ã€‚

## [](#future-enhancements)æœªæ¥å¢å¼ºåŠŸèƒ½

å±•æœ›æœªæ¥ï¼Œæˆ‘æƒ³å¯¹æˆ‘çš„ CICD æµç¨‹åšä¸€äº›è¡¥å……:

*   åœ¨éƒ¨ç½²åˆ°äº§å“ä¹‹å‰ï¼Œæ·»åŠ ä¸€ä¸ª[æ‰‹åŠ¨æ‰¹å‡†æ­¥éª¤](https://docs.aws.amazon.com/codepipeline/latest/userguide/approvals.html)ã€‚
*   å¦‚æœé’ˆå¯¹ç”Ÿäº§éƒ¨ç½²çš„éªŒæ”¶æµ‹è¯•å¤±è´¥ï¼Œæ·»åŠ ä¸€ä¸ªè‡ªåŠ¨å›æ»šæ“ä½œã€‚
*   æ‹‰è¯·æ±‚çš„åˆ›å»º/æ›´æ–°åº”è¯¥è§¦å‘è¾ƒçŸ­çš„ä»…æµ‹è¯•ç®¡é“ã€‚è¿™å°†æœ‰åŠ©äºå°½æ—©å‘ç°é›†æˆé—®é¢˜ã€‚
*   æ„å»ºé€šçŸ¥çš„æ¾æ•£é›†æˆã€‚
*   æ›´æ–°æˆ‘çš„åŒ…æ­¥éª¤ï¼Œä»¥ä¾¿å®ƒåªæ„å»ºä¸€ä¸ªå°†è¢«éƒ¨ç½²åˆ°æ‰€æœ‰ç¯å¢ƒçš„ä¸å¯å˜åŒ…ã€‚
*   è·å¾—é¢å¤–çš„å…ƒï¼Œå¹¶æœ‰ä¸€ä¸ª CICD ä»£ç çš„ç®¡é“ğŸ¤¯ã€‚åœ¨éƒ¨ç½²æ–°ç®¡é“ä¹‹å‰ï¼Œå°†å¯¹æˆ‘çš„ç®¡é“çš„æ›´æ”¹è¿›è¡Œæµ‹è¯•ã€‚

## [](#next-steps)ä¸‹ä¸€æ­¥

åœ¨æˆ‘çš„è¿ç§»è®¡åˆ’ä¸­ï¼Œä¸‹ä¸€æ­¥æ˜¯åœ¨ API ç½‘å…³ä¸­å†…ç½®ä¸€ä¸ªæ–°è·¯ç”±å¯ä»¥ä½¿ç”¨çš„æˆæƒæœºåˆ¶ã€‚è¿™å°†æ˜¯æˆ‘çš„æ–° CICD ç®¡é“æµ‹è¯•çš„ç¬¬ä¸€ä¸ªçœŸæ­£çš„ç”Ÿäº§ä»£ç ã€‚

âœ‰ï¸ ***å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œå¹¶æƒ³äº†è§£æ›´å¤šå…³äºæ— æœåŠ¡å™¨çš„ä¿¡æ¯ï¼Œä½ å¯èƒ½ä¼šå–œæ¬¢[æˆ‘å…³äºåœ¨ AWS](https://winterwindsoftware.com/newsletter/) ä¸­æ„å»ºæ— æœåŠ¡å™¨åº”ç”¨çš„æ¯å‘¨ç®€è®¯ã€‚***

* * *

æ‚¨è¿˜å¯èƒ½ä¼šå–œæ¬¢:

*   [æ‹…å¿ƒæ— æœåŠ¡å™¨å¸¦èµ°](https://winterwindsoftware.com/concerns-that-serverless-takes-away/)
*   [â€œæ— æœåŠ¡å™¨â€çš„ä¸åŒå®šä¹‰](https://winterwindsoftware.com/serverless-definitions/)
*   [æ— æœåŠ¡å™¨è¯æ±‡è¡¨](https://winterwindsoftware.com/serverless-glossary/)

*åŸè½½äº winterwindsoftware.com*ã€‚