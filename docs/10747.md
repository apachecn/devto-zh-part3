# ğŸå°å¿ƒ Python dict.get()

> åŸæ–‡:[https://dev.to/daolf/beware-of-python-dictget-194k](https://dev.to/daolf/beware-of-python-dictget-194k)

å¦‚æœä½ è®¤ä¸º`value = my_dict.get('my_key', 'default_value')`ç­‰åŒäº
å’Œ`value = my_dict.get('my_key') or 'default_value'`,ä½ å¯èƒ½åº”è¯¥è¯»ä¸€ä¸‹è¿™ä¸ªğŸ˜ƒã€‚å¦‚æœä½ çŸ¥é“ä¸ºä»€ä¹ˆä¸ä¸€æ ·ï¼Œé‚£ä¹ˆä½ å¾ˆå¯èƒ½åœ¨è¿™é‡Œå­¦ä¸åˆ°ä¸œè¥¿ã€‚

## [](#the-good-thing)å¥½äº‹:

ä»»ä½•ä½¿ç”¨ Python 3 çš„äººéƒ½åº”è¯¥çŸ¥é“ï¼Œdict API éå¸¸æ¸…æ™°ç®€å•ã€‚æˆ‘å¯ä»¥è¿™æ ·å£°æ˜ä¸€ä¸ªæ ¼è¨€:

```
my_car = {'wheels': 4, 'brand': 'Tesla'} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ˜¯ç®€å•ã€å¿«æ·å’Œå®¹æ˜“çš„ã€‚æ£€ç´¢å€¼å¾ˆç®€å•:

```
my_car.get('brand')
>'Tesla'
my_car['brand']
>'Tesla' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯ä¸ºäº†æ£€ç´¢å€¼ï¼Œæˆ‘æ›´å–œæ¬¢ã€‚get()æœ‰ä¸¤ä¸ªåŸå› ã€‚é¦–å…ˆï¼Œå¦‚æœæ‚¨æƒ³è¦è®¿é—®çš„é”®ä¸åœ¨è¿™é‡Œï¼Œå°†ä¸ä¼šå‡ºç°å¼‚å¸¸(å®ƒå°†è¿”å›`None`)ã€‚ç¬¬äºŒï¼Œæ‚¨å¯ä»¥å‘æ–¹æ³•ä¼ é€’ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¦‚æœå…³é”®å­—ä¸åœ¨å­—å…¸ä¸­ï¼Œè¯¥å€¼å°†è¢«è¿”å›:

```
my_car['color']
>KeyError: 'color'

my_car.get('color')
>

my_car.get('color', 'black')
>'black' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#and-the-tricky-one)è¿˜æœ‰ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜:

ç°åœ¨ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºåœ¨ç°å®ä¸–ç•Œä¸­å‘ç”Ÿäº†ä»€ä¹ˆï¼ŒåŒæ—¶åœ¨æˆ‘ç¼–å†™çš„ä¸€ä¸ªæ–¹æ³•ä¸­ä¿®å¤äº† [ShopToList](https://www.shoptolist.com) çš„ä¸€ä¸ªé”™è¯¯ï¼Œè¯¥æ–¹æ³•ä½¿ç”¨äº†ä¸€ä¸ª[åº“](https://github.com/scrapinghub/extruct)ä» HTML é¡µé¢(åœ¨æœ¬ä¾‹ä¸­æ˜¯ä¸€ä¸ªç”µå­å•†åŠ¡é¡µé¢)ä¸­æå–å…ƒæ•°æ®ã€‚

ç®€è€Œè¨€ä¹‹ï¼Œæˆ‘æœŸæœ›çš„æ•°æ®åº”è¯¥æ˜¯è¿™æ ·çš„(ç®€åŒ–çš„ä¾‹å­):

```
data_from_extruct = {    
    'title': 't-shirt',    
    'brand': 'french-rocket',    
    'color': 'green',    
    'offer': {        
          'amount': 20,        
          'currency': 'â‚¬'
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä»è¿™äº›æ•°æ®ä¸­å¾—åˆ°ä»·æ ¼çš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯:

```
 price_from_extruct = data_from_extruct['offer']['amount']
    > 20 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯æ­£å¦‚æˆ‘ä¹‹å‰æ‰€è¯´ï¼Œè¿™ä¸ªè§£å†³æ–¹æ¡ˆä¸€ç‚¹ä¹Ÿä¸å¥å£®ã€‚è¿™æ˜¯çœŸå®çš„ä¸–ç•Œï¼Œåœ¨çœŸå®çš„ä¸–ç•Œä¸­ï¼Œæ¥è‡ª extruct çš„æ•°æ®å¹¶ä¸æ€»æ˜¯å¸¦æœ‰æŠ¥ä»·å’ŒæŠ¥ä»·ä¸­çš„ä»·æ ¼ã€‚æ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨ dict.get:

```
price_from_extruct = data_from_extruct.get('offer').get('amount') 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä»ç„¶ä¸å¤Ÿå¥½ï¼Œå› ä¸ºå¦‚æœæ•°æ®ä¸­æ²¡æœ‰æŠ¥ä»·ï¼Œæ‚¨å°†å°è¯•æ‰§è¡Œç¬¬äºŒä¸ªã€‚å¯¹`None`æ‰§è¡Œ get('amount ')æ“ä½œï¼Œè¿™å°†å¼•å‘ä¸€ä¸ªé”™è¯¯ã€‚é¿å…è¿™ç§æƒ…å†µçš„æ–¹æ³•æ˜¯:

```
price_from_extruct = data_from_extruct.get('offer',{}).get('amount') 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ•°æ®ä¸­æ²¡æœ‰ offerï¼Œç¬¬ä¸€ä¸ª get å°†è¿”å›`{}`(ç©ºå­—å…¸)è€Œä¸æ˜¯`None`ï¼Œç„¶åç¬¬äºŒä¸ª get å°†æ‰§è¡Œä¸€ä¸ªç©ºå­—å…¸å¹¶è¿”å›`None`ã€‚ä¸€åˆ‡éƒ½å¾ˆå¥½ï¼Œçœ‹èµ·æ¥æˆ‘ä»¬æœ‰ä¸€ä¸ªå¥å£®çš„æ–¹æ³•æ¥ä»æ ¼å¼ä¸ä¸€è‡´çš„æ•°æ®ä¸­æå–ä»·æ ¼ã€‚å½“ç„¶ï¼Œæœ‰æ—¶è¿™ä¸ªå€¼ä¼šæ˜¯ noneï¼Œä½†è‡³å°‘è¿™æ®µä»£ç ä¸ä¼šä¸­æ–­ã€‚

å¥½å§ï¼Œæˆ‘ä»¬é”™äº†ã€‚æ•æ‰æ¥è‡ªé»˜è®¤å‚æ•°çš„è¡Œä¸ºã€‚è®°ä½ï¼Œå½“ä¸”ä»…å½“å…³é”®å­—**ä¸åœ¨å­—å…¸ä¸­**æ—¶ï¼Œæ‰ä¼šè¿”å›é»˜è®¤å€¼ã€‚

å®ƒçš„æ„æ€æ˜¯ï¼Œå¦‚æœä½ æ”¶åˆ°çš„æ•°æ®æ˜¯è¿™æ ·çš„:

```
data_from_extruct = {    
    'title': 't-shirt',    
    'brand': 'french-rocket',    
    'color': 'green',    
    'offer': None
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é‚£ä¹ˆå‰é¢çš„ä»£ç ç‰‡æ®µå°†ä¼šä¸­æ–­:

```
price_from_extruct = data_from_extruct.get('offer',{}).get('amount')
> AttributeError: 'NoneType' object has no attribute 'get' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œæ²¡æœ‰è¿”å› get çš„é»˜è®¤å€¼(' offer 'ï¼Œ{})ï¼Œå› ä¸ºå…³é”®çš„ offer åœ¨ dict ä¸­ã€‚å®ƒåˆšåˆšè¢«è®¾ç½®ä¸ºæ— ã€‚

å½“ç„¶ Python å¾ˆæ£’ï¼Œæ‰€ä»¥æœ‰å¾ˆå¤šç®€å•çš„æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä»¥ä¸‹ç‰‡æ®µåªæ˜¯å…¶ä¸­ä¹‹ä¸€:

```
offers_from_extruct = data_from_extruct.get('offer') or {}
price_from_extruct = offers_from_extruct.get('amount') 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“ç„¶ï¼Œä¾‹å¦‚ï¼Œå¦‚æœ offer çš„å†…å®¹æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œè¿™ä¹Ÿå¯ä»¥ä¸­æ–­ã€‚ä½†æ˜¯ä¸ºäº†ä¸¾ä¾‹ï¼Œæˆ‘ä»¬å°±è®²åˆ°è¿™é‡Œã€‚

## [](#thank-you-for-reading)æ„Ÿè°¢é˜…è¯»

å¸Œæœ›è¿™ç¯‡çŸ­æ–‡èƒ½å¸®ä½ ä»¥åèŠ‚çœæ—¶é—´ã€‚æˆ‘å¸Œæœ›åœ¨æœ¬å‘¨èŠ±è´¹å¤§é‡æ—¶é—´è¯•å›¾ä¿®å¤æŸä¸ª bug ä¹‹å‰çŸ¥é“è¿™ä¸€ç‚¹ã€‚

å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ï¼Œä¸è¦å¿˜è®°è®¢é˜…æˆ‘çš„æ—¶äº‹é€šè®¯ï¼Œè¿˜æœ‰æ›´å¤š(ä½ è¿˜å¯ä»¥å…è´¹è·å¾—æˆ‘ä¸‹ä¸€æœ¬ç”µå­ä¹¦çš„ç¬¬ä¸€ç« )ğŸ˜).

å¦‚æœä½ å–œæ¬¢ JSï¼Œæˆ‘åˆšåˆšå‘è¡¨äº†[ä¸€äº›ä½ å¯èƒ½ä¼šå–œæ¬¢çš„ä¸œè¥¿](https://dev.to/daolf/things-you-should-know-about-js-events-4k2l)ã€‚

å¦‚æœä½ å–œæ¬¢ gitï¼Œ[æˆ‘ä¼šå¸®ä½ æå®š](https://dev.to/daolf/git-series-13-understanding-git-for-real-by-exploring-the-git-director--5bd0)ã€‚