# æˆ‘å¦‚ä½•ä»é›¶åˆ°å®¶åº­è‡ªåŠ¨åŒ–é¢†åŸŸçš„è‹±é›„

> åŸæ–‡:[https://dev . to/martis 347/how-I-get-from zero to-hero-in-home-automation-48jm](https://dev.to/martis347/how-i-got-from-zero-to-hero-in-home-automation-48jm)

# [](#how-it-all-started)è¿™ä¸€åˆ‡æ˜¯å¦‚ä½•å¼€å§‹çš„

ç‰©è”ç½‘å’Œå®¶åº­è‡ªåŠ¨åŒ–è¿™å‡ å¹´ä¸€ç›´åœ¨å´›èµ·ã€‚

å¯¹æˆ‘æ¥è¯´ï¼Œä¸€åˆ‡éƒ½å¼€å§‹äºå¤§çº¦ 3 å¹´å‰ï¼Œé‚£æ—¶æˆ‘å¬è¯´äº†ä»€ä¹ˆæ˜¯ Arduinoã€‚å¿«è¿›ä¸€å¹´å·¦å³ï¼Œæˆ‘ç”¨è¿™ä¸ªå¾®å‹æ§åˆ¶å™¨å»ºé€ ä¸œè¥¿è¶Šæ¥è¶Šå¥½äº†ã€‚æˆ‘æœ‰å¤šä¸ª LED ç¯æ¡ã€æ¸©åº¦ä¼ æ„Ÿå™¨ã€æ˜¾ç¤ºå™¨ç­‰ç­‰ã€‚
ä¸€æ­¥ä¸€æ­¥ï¼Œæˆ‘å¼€å§‹ç”¨æ™ºèƒ½æ‰‹æœºæ§åˆ¶æˆ‘çš„æˆ¿é—´ã€‚

[![How one of my drawers looks right now](../Images/bfa31f202ce7cabf231676db506d8912.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Ef4Ki9EJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/5jdawom.jpg)

<figcaption>How one of my drawers looks right now ğŸ™ƒ</figcaption>

# [](#lets-get-technical)è®©æˆ‘ä»¬æ¥è°ˆæŠ€æœ¯

## [](#what-does-the-setup-consist-of)è®¾ç½®åŒ…æ‹¬å“ªäº›å†…å®¹ï¼Ÿ

*   è¿è¡Œæˆ‘çš„ Node.js æœåŠ¡çš„ä¸­å¤®ç½‘å…³
*   2 ç›ç”±å¾®æ§åˆ¶å™¨æ§åˆ¶çš„ç¯
*   1 ä¸ªå¯å•ç‹¬å¯»å€çš„ LED ç¯æ¡
*   ä¸€ç»„æ‰¬å£°å™¨
*   ä¸€åˆ‡éƒ½ç”± PWA(æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº)æˆ–è°·æ­ŒåŠ©æ‰‹æ§åˆ¶

è¿™ä¸ªä¸­å¤®ç½‘å…³æ˜¯ä¸€å°è¿è¡Œåœ¨ Ubuntu ä¸Šçš„å•æ¿è®¡ç®—æœºã€‚
æˆ‘ä½¿ç”¨çš„å¾®æ§åˆ¶å™¨æ˜¯ [NodeMCU](https://www.nodemcu.com/index_en.html) (ä½ å¯èƒ½ä¼šé—®ä¸ºä»€ä¹ˆä¸æ˜¯ arduinoï¼Ÿè¿™äº›å°å®è´å†…ç½®äº†æ— çº¿ç½‘ç»œï¼Œéå¸¸ä¾¿å®œï¼)

[![Picture of Khadas VIM](../Images/391f3985477de341460cf12bd582ad22.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--tiOwtEmF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://forum.khadas.com/uploads/default/original/1X/2356700c782c5efa8db0c1e4e50bea812fc9b63e.png)

<figcaption>Picture of Khadas VIM</figcaption>

## [](#architecture)å»ºç­‘

æ­£å¦‚æˆ‘æ‰€æåˆ°çš„ï¼Œæœ‰ä¸€ä¸ªä¸­å¤®ç½‘å…³è´Ÿè´£ä¸€åˆ‡ã€‚å®ƒè¿è¡Œä¸€ä¸ªåŸºæœ¬çš„ Node.js Express æœåŠ¡å™¨ï¼Œå¹¶æ ¹æ®è¯·æ±‚è°ƒç”¨æŸä¸ªå¾®æ§åˆ¶å™¨ã€‚åœ¨æœ¬åœ°ç½‘ç»œä¸­ï¼Œä¸å¾®æ§åˆ¶å™¨çš„é€šä¿¡ä½¿ç”¨ httpã€‚
ç½‘å…³æœ¬èº«é€šè¿‡æˆ‘çš„è·¯ç”±å™¨å…¬å¼€æš´éœ²ï¼Œå› æ­¤æˆ‘å¯ä»¥ä»ä»»ä½•åœ°æ–¹è®¿é—®å®ƒã€‚

### [](#lamps)ç¯å…·

[![Diagram for lamp connection](../Images/d1c65b725d65043c8d4b0195b8fd3c41.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--BC4LXsKv--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/http://fritzing.org/media/CACHE/images/fritzing-repo/projects/i/iot-switch-onoff-220-240v-device-with-nodemcu-5v-r/images/Fritzing/fc584c411b025ee1bd6523709106b2b5.png)

<figcaption>Diagram for lamp connection</figcaption>

æˆ‘æˆ¿é—´é‡Œæœ‰ä¸¤ç›ä¸»è¦çš„ç¯(ä¸€ç›åœ¨å¢™ä¸Šï¼Œå¦ä¸€ç›åœ¨å¤©èŠ±æ¿ä¸Š)ã€‚æ¯ä¸ªç¯ç”± NodeMCU ä½¿ç”¨ 220v ç»§ç”µå™¨æ§åˆ¶ã€‚

### [](#lights-strip)ç¯æ¡

[![How my lights strip looks like](../Images/a6b0bda4aeccc29e1159e2e8b6a6b482.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--cm8xAHdF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://s2.gifyu.com/images/ezgif.com-video-to-gife0179c0e5b39833e.gif)

<figcaption>How my lights strip looks like</figcaption>

ç¯æ¡çš„æ§åˆ¶æ˜¯éå¸¸åŸºæœ¬çš„ï¼Œåªæ˜¯ä¸€ä¸ªæ ‡å‡†çš„è¿æ¥ï¼Œæˆ‘ä¸æƒ³è¯¦ç»†ä»‹ç»ã€‚

### [](#speakers)éŸ³ç®±

[![Speakers setup](../Images/23ef5b34a5128e121ab775d53994fe64.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--XgU9U2Vt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/laPkXCo.jpg)

<figcaption>Speakers setup</figcaption>

æˆ‘ä¸ºè¿™ä¸ªæ„Ÿåˆ°éå¸¸è‡ªè±ªã€‚æˆ‘æ­£åœ¨ä½¿ç”¨çš„æ‰¬å£°å™¨æ˜¯ [Edifier R2730](https://www.edifier.com/int/en/speakers/r2730db-bluetooth-bookshelf)
æ§åˆ¶å®ƒä»¬çš„å”¯ä¸€æ–¹æ³•æ˜¯ä½¿ç”¨å®ƒä»¬é™„å¸¦çš„é¥æ§å™¨æˆ–ä½¿ç”¨æ‰¬å£°å™¨æœ¬èº«å†…ç½®çš„æ§ä»¶ã€‚

æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯è¯»å–é¥æ§å™¨çš„çº¢å¤–ä»£ç ï¼Œä¿å­˜ä»£ç ï¼Œç„¶åä½¿ç”¨æˆ‘çš„ NodeMCU çš„çº¢å¤– led é‡å¤è¿™äº›ä»£ç ã€‚ç°åœ¨æœ‰ä¸€ä¸ª NodeMCU è´´åœ¨æˆ‘çš„æ‰¬å£°å™¨ä¸Š(ä½†ä»è§†è§‰ä¸Šçœ‹ä¸å‡ºæ¥),å®ƒå¯ä»¥è¿œç¨‹æ§åˆ¶å®ƒä»¬ã€‚

### [](#pwa)PWA

[![Overview of the PWA](../Images/f33433cd68793abd99270777b0faeb1e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--xTQLcIdv--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://s2.gifyu.com/images/ezgif.com-video-to-gif-2e0dac0bb0b0eff44.gif)

<figcaption>Overview of the PWA</figcaption>

ä¸­å¤®ç½‘å…³ç”±æˆ‘çš„ PWA æ§åˆ¶ï¼Œå®ƒæ˜¯ä½¿ç”¨ [Vue.js](https://vuejs.org/) å’Œ [Vuetify](https://vuetifyjs.com/en/) æ„å»ºçš„ã€‚
PWA éƒ¨ç½²åœ¨ä¸€ä¸ª Azure Web App çš„å…è´¹å®ä¾‹ä¸Šã€‚
å»å¾€ç½‘å…³çš„æ¯ä¸ªè°ƒç”¨éƒ½é€šè¿‡ Node.js æœåŠ¡ä»£ç†ï¼Œè¯¥æœåŠ¡è¿è¡Œåœ¨åŒä¸€ä¸ª Web åº”ç”¨ç¨‹åºä¸Šã€‚
ä½†æ˜¯**ä¸ºä»€ä¹ˆ**æˆ‘è¦ä»£ç†æ¯ä¸ªå‘¼å«ï¼Ÿå®ƒä¸ºæ¯ä¸ª HTTP è°ƒç”¨å¢åŠ äº†é¢å¤–çš„å¼€é”€å’Œå»¶è¿Ÿã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼å¯¹äºä¸€ä¸ª PWAï¼Œä½ **å¿…é¡»**åœ¨ HTTPS æœåŠ¡å®ƒï¼Œå¹¶ä¸”æ¯ä¸ªå‘¼å«ä¹Ÿå¿…é¡»ä½¿ç”¨ **HTTPS** ï¼æˆ‘çš„ç½‘å…³åªæ˜¯ä¸€ä¸ª IP åœ°å€ï¼Œå› æ­¤æˆ‘å¿…é¡»é€šè¿‡æä¾›å…è´¹ SSL è¯ä¹¦çš„ Azure Web App ä»£ç†ä¸€åˆ‡ã€‚

### [](#google-assistant)è°·æ­ŒåŠ©æ‰‹

äº‹å®ä¸Šï¼Œæˆ‘ä¹°äº†ä¸€ä¸ªè°·æ­Œ Home mini åªæ˜¯ä¸ºäº†æŠŠå®ƒè¿æ¥åˆ°è¿™ä¸ªç³»ç»Ÿä¸Šã€‚ğŸ˜„(ä½†å®ƒä¹Ÿé€‚ç”¨äºæˆ‘çš„æ‰‹æœº)
è¯¥ç½‘å…³åŒ…å«ä¸€ä¸ªå°å‹çš„ç±»ä¼¼äººå·¥æ™ºèƒ½çš„ç®—æ³•ï¼Œæ­£åœ¨å¤„ç†ä»è°·æ­ŒåŠ©ç†æ¥æ”¶çš„è¾“å…¥ã€‚
åœ¨ [IFTTT](https://ifttt.com/google_assistant) çš„å¸®åŠ©ä¸‹æ¥æ”¶è¯¥è¯­éŸ³è¾“å…¥ã€‚ç„¶åå®ƒå°±è°ƒç”¨å¾®æ§åˆ¶å™¨ã€‚

[!["An AI-like solution"](../Images/36aac142834fe4b7bf2621f5007ca5e4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--k_7wANoh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/1AraF4i.jpg)

<figcaption>"An AI-like solution"</figcaption>

# [](#closing-words)ç»“æŸè¯­

ä¸€å¹´å¤šæ¥ï¼Œæˆ‘ä¸€ç›´åœ¨ä¸æ—¶åœ°å¼€å‘è¿™ä¸ªç³»ç»Ÿã€‚å®ƒå®é™…ä¸Šæ˜¯ä½œä¸ºä¸€ä¸ª React æœ¬åœ°åº”ç”¨ç¨‹åºå¼€å§‹çš„ï¼Œåæ¥è¯æ˜ä¸æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘å’Œæˆ‘çš„å¥³æœ‹å‹æ¯å¤©éƒ½åœ¨ä½¿ç”¨å®ƒï¼Œæˆ‘å¸Œæœ›èƒ½è¿›ä¸€æ­¥æ¨å¹¿ã€‚
[![](../Images/f9d2fb9d7998f7c46f3ba1fd2b617c48.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--VHoJioBv--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgflip.com/2sp4sp.jpg) 
åªè¦è¯´ä¸€å¥â€œå˜¿ï¼Œè°·æ­Œï¼Œæˆ‘å›æ¥äº†â€ï¼Œç¯å°±äº®äº†ï¼Œæ‰¬å£°å™¨æ’­æ”¾ä½ æœ€å–œæ¬¢çš„ç”µå°ï¼Œä½ å°±å¯ä»¥æ”¾æ¾ä¸‹æ¥ï¼Œå¼€å§‹ç¼–å†™ä½ å–œæ¬¢çš„ä»£ç ï¼Œè¿™æ˜¯éå¸¸ä»¤äººæ»¡æ„çš„ğŸ˜Šã€‚æˆ–è€…ï¼Œå¦‚æœå·²ç»å¾ˆæ™šäº†ï¼Œä½ æ­£åœ¨è¯»ä½ åœ¨ Dev.to ä¸Šçš„æœ€åä¸€ç¯‡æ–‡ç« ï¼Œå½“ä½ å†³å®šç¡è§‰çš„æ—¶å€™ï¼Œä½ ç”šè‡³ä¸éœ€è¦æŠŠä½ çš„å±è‚¡ä»åºŠä¸ŠæŠ¬èµ·æ¥å°±å¯ä»¥å…³æ‰ç¯å’Œæ”¶éŸ³æœºğŸ˜ã€‚

æœ‰å¾ˆå¤šç»†èŠ‚/ç‰¹ç‚¹æˆ‘æ²¡æœ‰æåˆ°ã€‚å¦‚æœè¿™ä¸ªå¸–å­å¾—åˆ°ä¸€äº›å…³æ³¨ï¼Œæˆ‘å¯ä»¥åˆ›å»ºä¸€ä¸ªå…³äºå®ƒçš„æ›´æŠ€æœ¯æ€§çš„ç³»åˆ—ã€‚
ä¾‹å¦‚:

*   NodeMCU çš„ OTA æ›´æ–°
*   é€šè¿‡æˆ‘çš„ç½‘å…³æ’­æ”¾ Youtube ä¸Šçš„éŸ³é¢‘
*   æˆ‘çš„å¹³æ¿ç”µè„‘è®¾ç½®(æ˜¯çš„ï¼Œæˆ‘åœ¨å¢™ä¸Šå®‰è£…äº†ä¸€å°å¹³æ¿ç”µè„‘ğŸ˜¬)
*   å¤„ç†ä»è°·æ­ŒåŠ©ç†æ”¶åˆ°çš„æ–‡å­—
*   å†…ç½®é—¹é’Ÿ

å†™å®Œè¿™ç¯‡æ–‡ç« åï¼Œæˆ‘æŸ¥äº†ä¸€ä¸‹å…³äºå®¶åº­è‡ªåŠ¨åŒ–å’Œç‰©è”ç½‘çš„[è°·æ­Œè¶‹åŠ¿](https://trends.google.com/trends/explore?date=today%205-y&geo=US&q=%2Fm%2F02vnd10)ï¼Œä¼¼ä¹åœ¨è¿‡å»å‡ å¹´é‡Œï¼Œå®ƒçš„å—æ¬¢è¿ç¨‹åº¦æ­£åœ¨ä¸‹é™ğŸ˜²ã€‚