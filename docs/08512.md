# ä½¿ç”¨åŒ…è¿›è¡Œçƒ­é‡è£…çš„åŒ…è„šæœ¬

> åŸæ–‡:[https://dev . to/tkshnwesper/pure script-with-hot-reloading-using-parcel-ip3](https://dev.to/tkshnwesper/purescript-with-hot-reloading-using-parcel-ip3)

## [](#the-why)è¿™ä¸ªâ€œä¸ºä»€ä¹ˆâ€

å› æ­¤ï¼Œæ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼ŒParcel ä¸æ”¯æŒ Purescriptã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½ç®€å•åœ°è¯´

```
<script src="src/Main.purs"></script> 
```

è®©å®ƒè¿è½¬èµ·æ¥ã€‚å¦ä¸€ä»¶äº‹æ˜¯ï¼Œæ¨èçš„ Purescript æ„å»ºå·¥å…·æ”¯æŒä¸€äº›å¾ˆé…·çš„ä¸œè¥¿ï¼Œæ¯”å¦‚

```
pulp browserify 
```

(è™½ç„¶æˆ‘çœŸçš„æ²¡æœ‰åœ¨å…¶ä»–æ„å»ºå·¥å…·ä¸Šè§è¿‡è¿™ç§äº‹æƒ…)å’Œ

```
pulp server 
```

å®ƒå¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨ï¼Œä¸ºæºä»£ç ä¸­çš„ä»»ä½•æ›´æ”¹é‡å»º JS è¾“å‡ºã€‚

ä½†æ˜¯æµè§ˆå™¨æ²¡æœ‰çƒ­é‡è£…ã€‚æ‚¨ä»ç„¶éœ€è¦è¿›è¡Œæ‰‹åŠ¨åˆ·æ–°ã€‚æˆ‘è§‰å¾—å½“ä½ åœ¨å¼€å‘çš„æ—¶å€™ï¼Œè¿™æ˜¯ä¸€ç§æ‹–ç´¯ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä¸å¯èƒ½è®¾ç½®çƒ­é‡è£…ï¼Œè¿œéå¦‚æ­¤ï¼Œå®ƒç°åœ¨æ˜¯è¶…çº§å®¹æ˜“çš„ï¼Œæ„Ÿè°¢åŒ…(å› ä¸ºæˆ‘ä»¬ç”šè‡³ä¸å¿…é…ç½® Webpackï¼ğŸ‰)æˆ‘ç›¸ä¿¡è¿™ä¸€é€‰æ‹©ä¸ä¼šå¤ªç‰µå¼ºã€‚

æ— è®ºå¦‚ä½•ï¼Œè®©æˆ‘ä»¬è¿›å…¥ç»†èŠ‚ã€‚

## [](#some-prerequisites)ä¸€äº›å…ˆå†³æ¡ä»¶

### [](#get-raw-pulp-endraw-)å¾—åˆ°`pulp`

æˆ‘çŒœæ‚¨å·²ç»ä½¿ç”¨æ¨èçš„æ–¹æ³•å»ºç«‹äº†ä¸€ä¸ª Purescript é¡¹ç›®ã€‚å¦‚æœæ²¡æœ‰ï¼Œ[è¯·è‡ªä¾¿](https://github.com/purescript/documentation/blob/master/guides/Getting-Started.md)ã€‚

### [](#create-a-raw-packagejson-endraw-)åˆ›é€ ä¸€ä¸ª`package.json`

ç¡®ä¿æ‚¨çš„é¡¹ç›®æ ¹ç›®å½•ä¸­æœ‰ä¸€ä¸ª`package.json`æ–‡ä»¶ã€‚æ‚¨å¯ä»¥æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªï¼Œæˆ–è€…åœ¨ä½¿ç”¨
è®¾ç½®çš„è¿‡ç¨‹ä¸­å›ç­”å‡ ä¸ªé—®é¢˜

```
npm init 
```

å‘½ä»¤ã€‚

### [](#need-some-raw-npm-endraw-dependencies-as-well)ä¹Ÿéœ€è¦ä¸€äº›`npm`çš„ä¾èµ–

å³ï¼Œ

1.  `concurrently`
2.  `parcel-bundler`

ä½ å¯ä»¥ç®€å•åœ°è¿è¡Œï¼Œ

```
npm i -D concurrently parcel-bundler 
```

### [](#and-lastly-an-raw-indexhtml-endraw-file)æœ€åæ˜¯ä¸€ä¸ª`index.html`æ–‡ä»¶

åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œåœ¨æˆ‘ä¸º VSCode å®‰è£…çš„*ä¼—å¤š*æ’ä»¶ä¸­(æˆ–è€…ç”šè‡³ VSCode æœ¬èº«å°±æ”¯æŒè¿™ä¸ª),æˆ‘æœ‰ä¸€ä¸ªä»£ç ç‰‡æ®µçš„å¿«æ·æ–¹å¼ï¼Œå®ƒæœ¬è´¨ä¸Šç”Ÿæˆäº†ä¸€ä¸ªæ ·æ¿ HTMLã€‚æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡åœ¨ä¸€ä¸ª`HTML`æ–‡ä»¶ä¸­é”®å…¥ä¸€ä¸ª`!`æ¥æ£€æŸ¥æ‚¨æ˜¯å¦æ‹¥æœ‰å®ƒã€‚

[![html snippet](../Images/f796d966d1e5ed86c257b1a5250c3fe4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--eMYTS4hU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/rmofh54jzyidbgu6vaxc.png)

æ— è®ºå¦‚ä½•ï¼Œè¿™å°±æ˜¯:

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>

</body>
</html> 
```

## [](#great-yer-doin-it)å¤ªæ£’äº†ï¼ä½ åœ¨åšå—

ä½ ç°åœ¨åªéœ€è¦åšä¸¤ä¸ªæ”¹å˜ã€‚

### [](#change-1)æ”¹å˜#1

åœ¨`package.json`æ–‡ä»¶ä¸­è®¾ç½®è„šæœ¬ï¼Œè¿™å°†ä½¿å¯åŠ¨å¼€å‘æœåŠ¡å™¨å˜å¾—æ›´åŠ å®¹æ˜“ã€‚

åªéœ€å°†å…¶æ·»åŠ åˆ°`scripts`éƒ¨åˆ†:

```
"start":  "concurrently \"pulp --watch build --to ./output/app.js\"  \"parcel index.html\"" 
```

### [](#change-2)æ”¹å˜#2

ç°åœ¨é—­åˆå›è·¯ï¼Œä»¥ä¾¿åŒ…è£¹æ‹¾å–å‘å‡ºçš„`app.js`ã€‚

å°†æ­¤æ·»åŠ åˆ°`index.html` :
çš„`head`éƒ¨åˆ†

```
<script src="output/app.js"></script> 
```

å°±æ˜¯è¿™æ ·ï¼æˆ‘ä»¬å®Œäº†ï¼ğŸŠ

## [](#running-it)å¥”è·‘å§

åªéœ€è¿è¡Œ

```
npm start 
```

è¿™å°±è¶³å¤Ÿäº†ã€‚

## [](#setting-up-a-build-script)è®¾ç½®æ„å»ºè„šæœ¬

æˆ–è€…ï¼Œæ‚¨ç”šè‡³å¯ä»¥è®¾ç½®ä¸€ä¸ªæ„å»ºè„šæœ¬ï¼Œåœ¨é¡¹ç›®å®Œæˆæ—¶ä½¿ç”¨ã€‚

å°†æ­¤æ·»åŠ åˆ°æ‚¨çš„`package.json` :
ä¸­çš„`scripts`éƒ¨åˆ†

```
"build":  "pulp build --to ./output/app.js && parcel build index.html" 
```

å¹²æ¯ï¼ğŸ»