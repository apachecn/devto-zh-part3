# åˆ é™¤æ‚¨æœªä½¿ç”¨çš„ CSS

> åŸæ–‡:[https://dev.to/yashints/knock-out-your-unused-css-2o57](https://dev.to/yashints/knock-out-your-unused-css-2o57)

æœªä½¿ç”¨çš„ CSS æ˜¯å¤§å¤šæ•° web åº”ç”¨ç¨‹åºåœ¨æ€§èƒ½å’Œé¡µé¢åŠ è½½æ—¶é—´æ–¹é¢é‡åˆ°çš„é—®é¢˜ä¹‹ä¸€ã€‚

## [](#disclaimer)å…è´£å£°æ˜

é™¤äº†è¿™ç¯‡æ–‡ç« ä¸­çš„ç¬¬ä¸€ä¸ªé€‰é¡¹ï¼Œå¤§å¤šæ•°æ—¶å€™ä½ éœ€è¦ä¸€ä¸ªå·¥å…·å’Œä¸€äº›æ‰‹åŠ¨å¹²é¢„æ¥å®‰å…¨åœ°åˆ é™¤æœªä½¿ç”¨çš„ CSSã€‚è¿™äº›å·¥å…·åœ¨æŸç§æ„ä¹‰ä¸Šæ˜¯ä¼Ÿå¤§çš„ï¼Œå®ƒä»¬ä¼šè®©ä½ çŸ¥é“ä½ æ‰€ä¸çŸ¥é“çš„ï¼›æ¨¡æ¿æ–‡ä»¶ä¸­çš„å“ªäº›ç±»æ²¡æœ‰è¢«ä½¿ç”¨ã€‚

è¿™äº›å·¥å…·ä¸èƒ½å¤„ç†å¤æ‚çš„åœºæ™¯ï¼Œæ¯”å¦‚å½“ JavaScript åœ¨æ¨¡æ¿ä¸­æ·»åŠ  DOM å…ƒç´ æ—¶ã€‚

åœ¨å•é¡µåº”ç”¨ç¨‹åº(SPA)ä¸­ä½¿ç”¨åŠ¨æ€æ¨¡æ¿æ—¶ï¼Œæˆ–è€…å½“æ‚¨çš„æ¨¡æ¿æ ¹æ®æœåŠ¡å™¨ç«¯ä»£ç çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä»–ä»¬ä¼šé‡åˆ°é—®é¢˜ã€‚

## [](#problem)é—®é¢˜

æ­£å¦‚æˆ‘æ‰€è¯´çš„ï¼Œæœªä½¿ç”¨çš„ CSS æ˜¯å¤§å¤šæ•° web åº”ç”¨ç¨‹åºåœ¨æ€§èƒ½å’Œé¡µé¢åŠ è½½æ—¶é—´æ–¹é¢é‡åˆ°çš„é—®é¢˜ä¹‹ä¸€ã€‚

å½“ä½ ä½¿ç”¨åƒ Tailwind è¿™æ ·çš„ CSS åº“ï¼Œæˆ–è€…åƒ [Bootstrap](https://getbootstrap.com/) æˆ– [Material Design](https://material.io/design/) è¿™æ ·çš„ CSS æ¡†æ¶çš„æ—§ç‰ˆæœ¬æ—¶ï¼Œè¿™ç”šè‡³ä¼šå˜å¾—æ›´ç³Ÿã€‚

æ³¨æ„:å¤§å¤šæ•° CSS æ¡†æ¶å·²ç»è½¬å‘æ¨¡å—åŒ–ç»“æ„ï¼Œä½ å¯ä»¥åªå¯¼å…¥ä½ éœ€è¦çš„éƒ¨åˆ†ï¼Œè€Œä¸å¿…åŒ…å«æ•´ä¸ªåŒ…ã€‚

## [](#best-and-safest-approach)æœ€ä½³å’Œæœ€å®‰å…¨çš„æ–¹æ³•

åœ¨æˆ‘çœ‹æ¥ï¼Œæœ€å¥½å’Œæœ€å®‰å…¨çš„æ–¹æ³•æ˜¯å°å¿ƒå¤„ç†æ‰ä»»ä½• CSS æ–‡ä»¶æˆ–è€…ä½ ä» HTML æˆ–è€…æ¨¡æ¿æ–‡ä»¶ä¸­åˆ é™¤çš„éƒ¨åˆ†ã€‚å½“æ¶‰åŠåˆ°è¿™æ ·çš„æŠ€æœ¯å€ºåŠ¡æ—¶ï¼Œä¸è¦æ‡’æƒ°æˆ–æ— çŸ¥ã€‚å¦‚æœä½ å‚ä¸äº†ä¸€ä¸ªç»¿è‰²é¢†åŸŸçš„é¡¹ç›®ï¼Œç¡®ä¿ä½ ä¸ä¼šåœ¨æ²¡æœ‰æ„è¯†åˆ°å“ªäº›éƒ¨åˆ†å®é™…ä¸Šè¢«ä½¿ç”¨çš„æƒ…å†µä¸‹ï¼Œä»ä½ æ­£åœ¨å¯»æ‰¾çš„åœ°æ–¹å¤åˆ¶ç²˜è´´å¤§å—çš„ CSSã€‚

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤ä½¿ç”¨[è°·æ­Œæµè§ˆå™¨](https://www.google.com/chrome/)ä¸­çš„[å¼€å‘å·¥å…·](https://developers.google.com/web/tools/chrome-devtools/)æ‰‹åŠ¨æ‰¾åˆ°ä½ æœªä½¿ç”¨çš„ CSS:

1.  åœ¨ Windows ä¸Šä½¿ç”¨`F12`æˆ–`Ctrl` `Shift` `J`æˆ–åœ¨ Mac ä¸Šä½¿ç”¨`Command` `Option` `J`æ‰“å¼€ Chrome DevToolsã€‚
2.  åœ¨ Windows ä¸ŠæŒ‰`Ctrl` `Shift` `P`æˆ–åœ¨ Mac ä¸ŠæŒ‰`Command` `Shift` `J`æ‰“å¼€å‘½ä»¤èœå•ã€‚
3.  é”®å…¥â€œè¦†ç›–èŒƒå›´â€å¹¶ç‚¹å‡»â€œæ˜¾ç¤ºè¦†ç›–èŒƒå›´â€é€‰é¡¹
4.  å•å‡»â€œä¿é™©â€é€‰é¡¹å¡ä¸Šçš„â€œé‡æ–°åŠ è½½â€æŒ‰é’®ã€‚
5.  ä» Coverage é€‰é¡¹å¡ä¸­é€‰æ‹©ä¸€ä¸ª CSS æ–‡ä»¶ï¼Œè¿™å°†åœ¨ Sources é€‰é¡¹å¡ä¸­æ‰“å¼€è¯¥æ–‡ä»¶ã€‚

ä½¿ç”¨å·¦ä¾§æœ‰ç»¿è‰²å®çº¿çš„ CSS è§„åˆ™ã€‚çº¢çº¿ä»£è¡¨çš„ä¸æ˜¯:

[![Unused CSS](../Images/b772d4c8b284da60473296a2c9c2e76b.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--fLdmcMJx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/sz7en9eia838wrguypf1.jpg)

**è­¦å‘Š:**ä»…ä»…å› ä¸ºä¸€ä¸ªè§„åˆ™æ²¡æœ‰åœ¨è¿™ä¸ªé¡µé¢ä¸Šä½¿ç”¨å¹¶ä¸æ„å‘³ç€å®ƒæ²¡æœ‰åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæ‚¨ä¼šæ£€æŸ¥æ‰€æœ‰é¡µé¢çš„è¦†ç›–ç‡ï¼Œå¹¶ç»“åˆç»“æœä»¥è·å¾—æ›´å¥½çš„æ¦‚è§ˆã€‚
T3ã€‘

## [](#tools)å·¥å…·

æœ‰æ—¶å€™ä½ ä¸èƒ½åšæŒâ˜ğŸ¼ç‚¹å› ä¸ºå„ç§åŸå› ã€‚ä¾‹å¦‚ï¼Œæ‚¨å‚ä¸äº†ä¸€ä¸ªæ£•è‰²åŒºåŸŸé¡¹ç›®ï¼Œæˆ–è€…ä»£ç åº“å¤ªå¤§ï¼Œæ— æ³•åŠæ—¶é‡æ„å’Œä¿®å¤é—®é¢˜ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½ä¼šå¯»æ‰¾ä¸€äº›å·¥å…·æ¥è‡ªåŠ¨åŒ–è¯¥è¿‡ç¨‹ï¼Œå¹¶åœ¨æ„å»ºæœŸé—´ç³»ç»Ÿåœ°è¿›è¡Œæ¸…ç†ã€‚å¹¸è¿çš„æ˜¯ï¼Œæœ‰å¾ˆå¤šå·¥å…·å¯ä»¥å¸®åŠ©ä½ ã€‚æˆ‘å°†æ¶µç›–ä¸€äº›è‘—åçš„ï¼Œå¹¶åœ¨æœ€åæåˆ°ä¸€ä¸ªç®€çŸ­çš„åå•ğŸ˜‰ã€‚

## [](#1-purifycss)1ã€‚çº¯åŒ– CSS

PurifyCSS æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥åˆ†æä½ çš„æ–‡ä»¶ï¼Œæ£€æŸ¥ä»£ç ï¼Œæ‰¾å‡ºå“ªäº›ç±»æ²¡æœ‰è¢«ä½¿ç”¨ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå½“ä½ æœ‰é™æ€çš„ HTML æ–‡ä»¶æ—¶ï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥æ¶ˆé™¤å‡ ä¹æ‰€æœ‰æœªä½¿ç”¨çš„ CSSã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ”¯æŒå•é¡µé¢åº”ç”¨ç¨‹åº(SPA)ã€‚

### [](#setup)è®¾ç½®

**ç‹¬ç«‹**

æ‚¨å¯ä»¥é€šè¿‡`npm` :
å®‰è£…è¯¥è½¯ä»¶åŒ…

```
npm i -D purify-css 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿˜æœ‰ä¸€äº›åŸºæœ¬ç”¨æ³•:

```
import purify from 'purify-css'
const purify = require('purify-css')

let content = ''
let css = ''
let options = {
  output: 'filepath/output.css',
}
purify(content, css, options) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä½ æƒ³çŸ¥é“ï¼Œè¿™å¯¹æˆ‘æ²¡æœ‰å¸®åŠ©ï¼Œä½ å¯èƒ½æ˜¯å¯¹çš„ã€‚ä½†è¿™æ˜¯æœ€ç®€å•çš„å½¢å¼ã€‚äº‹å®ä¸Šåœ¨`purify`å‘½ä»¤ä¸­ï¼Œ`content`å’Œ`css`å‚æ•°å¯ä»¥æ˜¯ [glob](https://github.com/isaacs/node-glob) æ–‡ä»¶æ¨¡å¼çš„ä¸€ä¸ª`Array`ã€‚ç°åœ¨ä½ çœ‹åˆ°äº†æ›´å¤§çš„å›¾æ™¯ï¼Œä»¥åŠè¿™æ˜¯å¦‚ä½•å¸®åŠ©ä½ çš„ã€‚

ç°åœ¨è®©æˆ‘ä»¬æŠŠå®ƒå˜å¾—å¤æ‚ä¸€ç‚¹ã€‚

**é€šè¿‡å’•å™œå£°**

é¦–å…ˆä½ éœ€è¦å®‰è£… grunt åŒ…:

```
npm install grunt-purifycss --save-dev 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åä½¿ç”¨:

```
grunt.initConfig({
  purifycss: {
    options: {},
    target: {
      src: ['path/to/*.html', 'path/to/*.js'],
      css: ['path/to/*.css'],
      dest: 'tmp/purestyles.css',
    },
  },
}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ç”šè‡³å¯ä»¥å¤„ç†ä½¿ç”¨ JavaScript æ·»åŠ äº†ä¸€ä¸ªç±»çš„æƒ…å†µğŸ˜ã€‚æ‰€ä»¥è¿™ä¸ªä¼šè¢«æ‹¿èµ·æ¥:

```
<!-- html -->
<!-- class directly on element -->
<div class="button-active">click</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ–è€…ç”¨ JavaScript:

```
// javascript
// Anytime your class name is together in your files, it will find it.
$(button).addClass('button-active') 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ–è€…æ›´å¤æ‚ä¸€ç‚¹çš„åœºæ™¯:

```
// Can detect if class is split.
var half = 'button-';
$(button).addClass(half + 'active');

// Can detect if class is joined.
var dynamicClass = ['button', 'active'].join('-');
$(button).addClass(dynamicClass);

// Can detect various more ways, including all Javascript frameworks.
// A React example.
var classes = classNames({
  'button-active': this.state.buttonActive
});

return (
  <button className={classes}>Submit</button>; ); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

**è­¦å‘Š**:purify CSS çš„ Webpack æ’ä»¶å·²è¢«å¼ƒç”¨ã€‚æ‚¨å°†éœ€è¦ä½¿ç”¨ Purgecssï¼Œæˆ‘ç¨åå°†ä»‹ç»å®ƒã€‚

CLI

å®‰è£…å‘½ä»¤è¡Œç•Œé¢:

```
npm install -g purify-css 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨å¯ä»¥ä½¿ç”¨`-h` param:
æŸ¥çœ‹å¸®åŠ©

```
purifycss -h

purifycss <css> <content> [option]

Options:
  -m, --min        Minify CSS                                   [boolean] [default: false]
  -o, --out        Filepath to write purified css to                              [string]
  -i, --info       Logs info on how much css was removed        [boolean] [default: false]
  -r, --rejected   Logs the CSS rules that were removed         [boolean] [default: false]
  -w, --whitelist  List of classes that should not be removed        [array] [default: []]
  -h, --help       Show help                                                     [boolean]
  -v, --version    Show version number                                           [boolean] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#stats)ç»Ÿè®¡æ•°æ®

è¿™ä¸ªå›¾ä¹¦é¦†èƒ½å¸®ä½ å¤§å¿™ã€‚å®ƒéå¸¸æœ‰æ•ˆï¼Œé€‚ç”¨äºå¤æ‚çš„åœºæ™¯ã€‚ä½†æ˜¯æ­£å¦‚æˆ‘ä¹‹å‰æåˆ°çš„ï¼Œä½ éœ€è¦æœ‰å¥½çš„æµ‹è¯•æ¥å‘ç°åœ¨æ¸…ç†ä¹‹åæ˜¯å¦æœ‰ä»»ä½•äº‹æƒ…è¢«æç ¸äº†ã€‚

> å°± Boostrap è€Œè¨€ï¼ŒPurifyCSS å¯ä»¥å‡å°‘é«˜è¾¾~ 33.8%çš„æœªä½¿ç”¨ CSSã€‚

## 2ã€‚Purgecss(çº¯æ–‡æœ¬)

Purgecss æ˜¯å¦ä¸€ä¸ªç§»é™¤æ— ç”¨ css çš„å¼ºå¤§å·¥å…·ã€‚å®ƒå¯ä»¥ä½œä¸ºå¼€å‘å·¥ä½œæµç¨‹çš„ä¸€éƒ¨åˆ†ã€‚å®ƒé™„å¸¦äº†ä¸€ä¸ª JavaScript APIã€ä¸€ä¸ª CLI å’Œæµè¡Œæ„å»ºå·¥å…·çš„æ’ä»¶ã€‚

### [](#cli)CLI

å¯ä»¥å…¨å±€å®‰è£…`Purgecss`ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨`npx`ã€‚

```
npm i -g Purgecss 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¹¶ä½¿ç”¨å®ƒ:

```
Purgecss --css <css> --content <content> [option] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æ‚¨æ‰€è§ï¼ŒAPI ä¸`PurifyCSS`éå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯å½“ç„¶é€‰é¡¹ä¼šæœ‰æ‰€ä¸åŒã€‚

### [](#via-webpack)é€šè¿‡ Webpack

ä½ åº”è¯¥å…ˆå®‰è£…æ’ä»¶:

```
npm i -D Purgecss-webpack-plugin 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¹¶å°†å…¶æ·»åŠ åˆ°æ‚¨çš„ Webpack é…ç½®:

```
const path = require('path')
const glob = require('glob')
const ExtractTextPlugin = require('extract-text-webpack-plugin')
const PurgecssPlugin = require('Purgecss-webpack-plugin')

const PATHS = {
  src: path.join(__dirname, 'src'),
}

module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'bundle.js',
    path: path.join(__dirname, 'dist'),
  },
  module: {
    rules: [
      {
        test: /\.css$/,
        use: ExtractTextPlugin.extract({
          fallback: 'style-loader',
          use: 'css-loader?sourceMap',
        }),
      },
    ],
  },
  plugins: [
    new ExtractTextPlugin('[name].css?[hash]'),
    new PurgecssPlugin({
      paths: glob.sync(`${PATHS.src}/**/*`, {
        nodir: true,
      }),
    }),
  ],
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ[ä»–ä»¬çš„æ–‡æ¡£](https://www.Purgecss.com/)ã€‚

## [](#3-uncss)3ã€‚UnCSS

UnCSS æ˜¯å¦ä¸€ä¸ªå¸®åŠ©ä½ ç§»é™¤ä¸ç”¨çš„ CSS çš„å·¥å…·ã€‚ä½†æ˜¯è¿™ä¸ªå·¥å…·æœ‰ç‚¹ä¸åŒï¼Œå®ƒå°†æŠŠä½ çš„æ–‡ä»¶åŠ è½½åˆ° [jsdom](https://github.com/jsdom/jsdom) ä¸­ï¼Œç„¶åç”¨ PostCSS è§£ææ‰€æœ‰çš„æ ·å¼è¡¨ã€‚

ä¸€æ—¦å®Œæˆï¼Œ`document.querySelector`å°†è¿‡æ»¤æ‰åœ¨ HTML æ–‡ä»¶ä¸­æ‰¾ä¸åˆ°çš„é€‰æ‹©å™¨ã€‚æœ€åï¼Œå‰©ä½™çš„è§„åˆ™è¢«è½¬æ¢å› CSSã€‚

**æ³¨æ„:**æˆ‘å–œæ¬¢çš„è¿™ä¸ªåº“æœ€å¥½çš„ä¸€ç‚¹æ˜¯ä»–ä»¬çš„[éå®˜æ–¹æœåŠ¡å™¨](https://uncss-online.com/)ï¼Œä½ å¯ä»¥åœ¨é‚£é‡Œç²˜è´´ä½ çš„ HTML å’Œ CSSï¼Œå®ƒä¼šåœ¨çº¿å‘ä½ å±•ç¤ºç®€åŒ–çš„ CSSã€‚

### [](#install)å®‰è£…

åŒæ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨`npm`æ¥å®‰è£…å®ƒæˆ–è€…ä½¿ç”¨`npx` :

```
npm i -g uncss 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¯ä»¥å°† UnCSS ä¸èŠ‚ç‚¹:
ä¸€èµ·ä½¿ç”¨

```
var uncss = require('uncss')

var files = [
    'my',
    'array',
    'of',
    'HTML',
    'files',
    'or',
    'http://urls.com',
  ],
  options = {
    ignore: ['#added_at_runtime', /test\-[0-9]+/],
    media: [
      '(min-width: 700px) handheld and (orientation: landscape)',
    ],
    csspath: '../public/css/',
    raw: 'h1 { color: green }',
    stylesheets: [
      'lib/bootstrap/dist/css/bootstrap.css',
      'src/public/css/main.css',
    ],
    ignoreSheets: [/fonts.googleapis/],
    timeout: 1000,
    htmlroot: 'public',
    report: false,
    banner: false,
    uncssrc: '.uncssrc',
    userAgent:
      'Mozilla/5.0 (iPhone; CPU iPhone OS 10_3 like Mac OS X)',
    inject: function(window) {
      window.document
        .querySelector('html')
        .classList.add('no-csscalc', 'csscalc')
    },
  }

uncss(files, options, function(error, output) {
  console.log(output)
})

/* Look Ma, no options! */
uncss(files, function(error, output) {
  console.log(output)
})

/* Specifying raw HTML */
var rawHtml = '...'

uncss(rawHtml, options, function(error, output) {
  console.log(output)
}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ–è€…ä½¿ç”¨ä»–ä»¬æ”¯æŒ Gulpã€Grunt å’ŒèŠ±æ¤°èœçš„æ„å»ºæµç¨‹(ä¸å¹¸çš„æ˜¯æ²¡æœ‰ WebpackğŸ˜”).æœ‰å…³å¦‚ä½•è®¾ç½®è¿™äº›å·¥å…·çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ[å®ƒä»¬çš„æ–‡æ¡£](https://github.com/uncss/uncss)ã€‚

## [](#comparison)æ¯”è¾ƒ

ç°åœ¨è®©æˆ‘ä»¬æ¯”è¾ƒä¸€ä¸‹è¿™äº›å·¥å…·ï¼Œçœ‹çœ‹å®ƒä»¬çš„ä¼˜ç¼ºç‚¹ã€‚

### [](#purifycss)çº¯åŒ– CSS

ä¸€äº›äººè®¤ä¸º PurifyCSS çš„æœ€å¤§é—®é¢˜æ˜¯ç¼ºä¹æ¨¡å—åŒ–ã€‚æœ‰äººè®¤ä¸ºè¿™ä¹Ÿæ˜¯å®ƒæœ€å¤§çš„å¥½å¤„ğŸ¤·ğŸ½â€â™‚ï¸.å®ƒå¯ä»¥å¤„ç†ä»»ä½•æ–‡ä»¶ç±»å‹ï¼Œè€Œä¸ä»…ä»…æ˜¯ HTMLã€‚å®ƒè¿˜å¯ä»¥æ‰¾åˆ°ä½¿ç”¨ JavaScript æ·»åŠ çš„é€‰æ‹©å™¨ã€‚

ä¸å¹¸çš„æ˜¯ï¼Œç”±äºæ¯ä¸ªå•è¯éƒ½è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å¾ˆå¤šè¯¯æŠ¥ï¼Œå¹¶ä½¿ç”Ÿæˆçš„ CSS æ¯”å®ƒåº”è¯¥çš„è¦å¤§ä¸€ç‚¹ã€‚

### [](#purgecss)æ¸…æ´— css

Purgecss é€šè¿‡æä¾›åˆ›å»ºæå–å™¨çš„å¯èƒ½æ€§æ¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œå®ƒè·å–æ–‡ä»¶çš„å†…å®¹å¹¶æå–å…¶ä¸­ä½¿ç”¨çš„ CSS é€‰æ‹©å™¨åˆ—è¡¨ã€‚

æå–å™¨å¯ä»¥ç”¨ä½œè§£æå™¨ï¼Œå®ƒè¿”å›ä¸€ä¸ª AST(æŠ½è±¡è¯­æ³•æ ‘),å¹¶é€šè¿‡å®ƒæŸ¥æ‰¾ä»»ä½• CSS é€‰æ‹©å™¨ã€‚è¿™å°±æ˜¯`purge-from-html`çš„å·¥ä½œæ–¹å¼ã€‚æ‚¨å¯ä»¥ä¸ºæ¯ç§æ–‡ä»¶ç±»å‹æŒ‡å®šè¦ä½¿ç”¨çš„é€‰æ‹©å™¨ï¼Œä»è€Œè·å¾—æœ€å‡†ç¡®çš„ç»“æœã€‚æ­¤å¤–ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é»˜è®¤æˆ–é—ç•™æå–å™¨ï¼Œå®ƒå°†æ¨¡ä»¿ PurifyCSS çš„è¡Œä¸ºã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼ŒPurgecss ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œä½ éœ€è¦ä¸ºåƒ`Tailwind`è¿™æ ·çš„æ¡†æ¶ç¼–å†™ä¸€ä¸ªå®šåˆ¶çš„æå–å™¨ã€‚å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå½“æ‚¨ä½¿ç”¨åƒ [primjs](https://prismjs.com/) è¿™æ ·çš„è¯­æ³•é«˜äº®å™¨æ—¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨ä¸€ä¸ªåä¸º`whitelistPatternsChildren`çš„å±æ€§å°†æ‚¨çš„ä»¤ç‰Œç±»åˆ—å…¥ç™½åå•ã€‚

éœ€è¦è€ƒè™‘çš„å¦ä¸€ç‚¹æ˜¯ Purgecss æ²¡æœ‰ JavaScript æ–‡ä»¶çš„æå–å™¨ã€‚ä½†æ˜¯ç”±äºå®ƒçš„æ¨¡å—åŒ–ï¼Œå¼€å‘è€…å¯ä»¥ä¸ºåƒ *Angular* ã€ *React* æˆ– *Vue* è¿™æ ·çš„æ¡†æ¶åˆ›å»ºå®šåˆ¶çš„æå–å™¨ã€‚

### [](#uncss)UnCSS

ç”±äºå…¶ HTML æ¨¡æ‹Ÿå’Œ JavaScript æ‰§è¡Œï¼ŒUnCSS åœ¨ä» web åº”ç”¨ç¨‹åºä¸­ç§»é™¤æœªä½¿ç”¨çš„é€‰æ‹©å™¨æ–¹é¢æ˜¯æœ‰æ•ˆçš„ã€‚ä½†æ˜¯ï¼Œå®ƒçš„æ¨¡æ‹Ÿåœ¨æ€§èƒ½å’Œå®ç”¨æ€§æ–¹é¢æ˜¯æœ‰ä»£ä»·çš„ã€‚

æ­¤æ—¶ï¼Œå¦‚æœä¸ä½¿ç”¨æœåŠ¡å™¨ç«¯å‘ˆç°ï¼ŒUnCSS å¯èƒ½æ˜¯åˆ é™¤æœªä½¿ç”¨çš„ CSS çš„æœ€å‡†ç¡®çš„å·¥å…·ã€‚

## [](#other-tools)å…¶ä»–å·¥å…·

ä»¥ä¸‹æ˜¯æ‚¨å¯ä»¥è€ƒè™‘çš„å…¶ä»–å·¥å…·:

*   GitBit :ä¸€ä¸ªåœ¨çº¿å·¥å…·ï¼ŒæŠ“å–ä½ çš„æ ¹é¡µé¢å’Œå…¶ä¸­é“¾æ¥çš„æ ·å¼è¡¨ã€‚
*   æœªä½¿ç”¨çš„ CSS:å¦ä¸€ä¸ªåœ¨çº¿å·¥å…·ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰¾åˆ°å¹¶åˆ é™¤æœªä½¿ç”¨çš„ CSS è§„åˆ™

## [](#summary)æ€»ç»“

è™½ç„¶è¿™äº›å·¥å…·åœ¨æŸ¥æ‰¾æœªä½¿ç”¨çš„ CSS æ–¹é¢ç¡®å®å¾ˆæœ‰å¸®åŠ©ï¼Œä½†æ˜¯æ¯ç§å·¥å…·éƒ½æœ‰è‡ªå·±çš„ç¼ºç‚¹ï¼Œæ‚¨éœ€è¦å°å¿ƒä¸è¦ä»¥æŸåçš„ UI å‘Šç»ˆã€‚

å¸Œæœ›æ‚¨å·²ç»å¯¹å¦‚ä½•æ‰¾åˆ°æœªä½¿ç”¨çš„ CSS å¹¶å°†å®ƒä»¬éƒ¨ç½²åˆ°ç©ºé—´ä¸­æœ‰äº†ä¸€ç‚¹ç‚¹äº†è§£ğŸ˜ğŸ‘‡ã€‚

> ![StackBlitz profile image](../Images/8c68e842042d2ce5a3171051871bc0c0.png)@ stack blitz![twitter logo](../Images/65e26e35707d96169ec8af6b3cbf2003.png)éƒ¨ç½²...å»å¤ªç©ºï¼Ÿï¼ï¼ŸğŸš€ğŸ”¥ğŸ¤¯[deployto . space](https://t.co/zb8jNPs5zs)2019 å¹´ 05 æœˆ 02 æ—¥ä¸Šåˆ 05:10[![Twitter reply action](../Images/5d5a32424597af8488f7190c7d7d496b.png)](https://twitter.com/intent/tweet?in_reply_to=1123816907881242624)[![Twitter retweet action](../Images/3d12d4a909b79beaf8d81b6491fd052d.png)](https://twitter.com/intent/retweet?tweet_id=1123816907881242624)[![Twitter like action](../Images/3f89df2f36e8e5624d2a25952b3ac8b8.png)](https://twitter.com/intent/like?tweet_id=1123816907881242624)