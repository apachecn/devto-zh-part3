# [é¢„ç¨³å®šç‰ˆæœ¬]å¼€å§‹æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç›–èŒ¨æ¯”ä¸»é¢˜

> åŸæ–‡:[https://dev.to/ekafyi/creating-a-gatsby-theme-locally-4h9j](https://dev.to/ekafyi/creating-a-gatsby-theme-locally-4h9j)

> âš ï¸**2019 å¹´ 7 æœˆ 7 æ—¥æ›´æ–°:**è¿™ç¯‡æ–‡ç« æ˜¯åœ¨ä¸»é¢˜ç¨³å®šä¹‹å‰*å†™çš„ã€‚è¿™ç¯‡æ–‡ç« ä¸­çš„ä¸€äº› API å’Œä»£ç ç°åœ¨å¯èƒ½ä¸å‡†ç¡®ã€‚å°å¿ƒè¡Œäº‹ã€‚âš ï¸*

* * *

ğŸ§ *è¦äº†è§£æ›´å¤šå…³äºç›–èŒ¨æ¯”çš„ä¸»é¢˜ï¼Œè¯·æŸ¥çœ‹æˆ‘åœ¨è¿™ä¸ªç³»åˆ—ä¸­çš„[ç¬¬ä¸€](https://dev.to/ekafyi/learning-gatsby-themes-introduction-1gje)å’Œ[ç¬¬äºŒ](https://dev.to/ekafyi/using-gatsby-themes-in-a-non-theme-starter-54c7)å¸–å­ã€‚*

ä¸€ä¸ªç›–èŒ¨æ¯”**ä¸»é¢˜**æ˜¯ä¸€ä¸ªç›–èŒ¨æ¯”ç«™ç‚¹çš„*å¯é‡ç”¨å—ï¼Œå¯ä»¥*å…±äº«ã€æ‰©å±•å’Œå®šåˆ¶* ( [æº](https://youtu.be/SV2zu9FvUTw?t=406))ã€‚å®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿåˆ†ç¦»æˆ‘ä»¬ç«™ç‚¹çš„åŠŸèƒ½ï¼Œä»¥æ¨¡å—åŒ–çš„æ–¹å¼åœ¨å¤šä¸ªç«™ç‚¹ä¸­å…±äº«ã€é‡ç”¨å’Œä¿®æ”¹ã€‚*

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡*æ„å»ºä¸€ä¸ªåŸºæœ¬çš„ã€åŸºæœ¬çš„ä¸»é¢˜*å¼€å§‹ä¸»é¢˜åŒ–ï¼Œè¿™ä¸ªä¸»é¢˜å«åš`gatsby-theme-hello-world`ã€‚æˆ‘ä»¬æ­£åœ¨æœ¬åœ°åˆ›å»ºè¿™ä¸ª*ï¼Œè¿™æ„å‘³ç€æ–‡ä»¶åœ¨æˆ‘ä»¬çš„æœ¬åœ°æœºå™¨ä¸Šï¼Œæˆ‘ä»¬è¿˜ä¸æ‰“ç®—å‘å¸ƒä¸»é¢˜ã€‚ä¸ºäº†æ£€æŸ¥ä¸»é¢˜æ˜¯å¦å¯ç”¨ï¼Œæˆ‘ä»¬è¿˜å°†åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºç™½ç«™ç‚¹ï¼Œæ·»åŠ ä¸»é¢˜ï¼Œå¹¶ä»æˆ‘ä»¬çš„ç«™ç‚¹æ·»åŠ å†…å®¹ã€‚*

è¿™ä¸»è¦æ˜¯åŸºäºçº¦ç¿°Â·å¥¥å¦å¾·å’Œæ°æ£®Â·ä¼¦æ–¯æ‰˜å¤«åˆ¶ä½œçš„è§†é¢‘çš„å‰ 24 åˆ†é’Ÿï¼Œç¨ä½œä¿®æ”¹ã€‚

æˆ‘ä»¬èµ°å§ï¼

[![the band Ramones on stage with text Hey Ho, Let's Go!](../Images/5e76689a96627ca1f4e1bfd96ef7c832.png)T2ã€‘](https://i.giphy.com/media/5HMukcn0XDp5K/giphy-downsized.gif)

**ç›®å½•**

1.  åˆ›å»ºæ–‡ä»¶å¤¹
2.  åœ¨æ ¹ã€ä¸»é¢˜å’Œç«™ç‚¹ä¸­åˆ›å»º`package.json`
3.  å‘ä¸»é¢˜æ·»åŠ  devDependencies å’Œ peerDependencies
4.  å‘ä¸»é¢˜æ·»åŠ ä¾èµ–é¡¹
5.  åˆ›å»ºç´¢å¼•é¡µé¢å¹¶åœ¨ä¸»é¢˜ä¸­å‘å¸ƒ
6.  å‘ç½‘ç«™æ·»åŠ ä¾èµ–é¡¹(åŒ…æ‹¬ä¸»é¢˜)
7.  åœ¨ç½‘ç«™ä¸­åˆ›å»ºå¸–å­
8.  æ·»åŠ é‡å½±(å¯é€‰)

> âš ï¸Â·ç›–èŒ¨æ¯”çš„ä¸»é¢˜ç›®å‰è¿˜å¤„äºå®éªŒé˜¶æ®µã€‚ä¸»é¢˜ API å°†æ¥å¯èƒ½ä¼šæ”¹å˜ã€‚âš ï¸

* * *

### [](#1-create-our-folders)1ã€‚åˆ›å»ºæˆ‘ä»¬çš„æ–‡ä»¶å¤¹

æˆ‘ä»¬æ­£åœ¨åˆ›å»ºæˆ‘ä»¬çš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«åˆ†åˆ«ç”¨äºä¸»é¢˜å’Œç«™ç‚¹çš„ä¸¤ä¸ªæ–‡ä»¶å¤¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è°ˆè®ºçš„æ˜¯ä¸‰ä¸ªåœ°ç‚¹çš„*:*

*   é¡¹ç›®(å·¥ä½œåŒº)æ ¹â€”â€”æˆ‘ç§°å®ƒä¸º`eka-site-with-theme`ï¼Œå¯ä»¥éšæ„ä½¿ç”¨ä»»ä½•å…¶ä»–åç§°
*   ä¸»é¢˜â€” `eka-site-with-theme/gatsby-theme-hello-world`
*   ç«™ç‚¹â€” `eka-site-with-theme/example-site`

```
# create and go to our project folder
mkdir eka-site-with-theme
cd eka-site-with-theme

# make our theme and site folders
mkdir gatsby-theme-hello-world example-site 
```

å¦‚æœæ˜¯å’Œ[è¿™ä¸ªè§†é¢‘](https://www.youtube.com/watch?v=PS2784YfPpw)æ¯”è¾ƒï¼Œé¡¹ç›®æ ¹æ˜¯`gatsby-themes`ï¼Œä¸»é¢˜æ–‡ä»¶å¤¹æ˜¯`gatsby-themes/packages/gatsby-theme-livestream`ï¼Œç«™ç‚¹æ–‡ä»¶å¤¹æ˜¯`gatsby-themes/site`ã€‚æ‚¨å¯ä»¥éšæ„æ’åˆ—å’Œå‘½åæ–‡ä»¶å¤¹ã€‚è¯·ç¡®ä¿åœ¨ä¸‹ä¸€æ­¥ä¸­æ­£ç¡®å¼•ç”¨å­æ–‡ä»¶å¤¹ï¼

**æ³¨æ„:**æ‚¨ä¸å¿…ä»å¤´å¼€å§‹åˆ›å»ºç«™ç‚¹éƒ¨ä»¶ã€‚æˆ–è€…ï¼Œä½ å¯ä»¥åƒå¾€å¸¸ä¸€æ ·[ä½¿ç”¨`gatsby new`å‘½ä»¤](https://www.gatsbyjs.org/tutorial/part-zero/#create-a-gatsby-site)ï¼Œæˆ–è€…ä½¿ç”¨ä½ çš„*ç°æœ‰* Gatsby ç«™ç‚¹çš„ä¸»é¢˜ã€‚æƒ³äº†è§£æ›´å¤šå…³äºåè€…çš„å†…å®¹ï¼Œè¯·çœ‹æˆ‘ä¸‹é¢çš„å¸–å­ã€‚

[![ekafyi image](../Images/c93ebdb7f76a26e4e235feb2075f96ee.png)](/ekafyi) [## [é¢„ç¨³å®šç‰ˆæœ¬]åœ¨éä¸»é¢˜å¯åŠ¨å™¨ä¸­ä½¿ç”¨ Gatsby ä¸»é¢˜

### eka May 4 ' 1912 åˆ†é’Ÿè¯»å–

#gatsby #beginners #webdev](/ekafyi/using-gatsby-themes-in-a-non-theme-starter-54c7)

### [](#2-create-raw-packagejson-endraw-)2ã€‚åˆ›å»º`package.json`

æˆ‘ä»¬å°†é€šè¿‡åœ¨*çš„æ‰€æœ‰ä¸‰ä¸ª*æ–‡ä»¶å¤¹ä¸­è¿è¡Œ`yarn init`æ¥åˆ›å»º`package.json`ã€‚æ‚¨å¯ä»¥å¡«å†™æˆ–è·³è¿‡å¤§å¤šæ•°é»˜è®¤å€¼ï¼Œä½†è¯·ç¡®ä¿å¡«å†™ä¸‹é¢çš„*å¿…å¡«*å†…å®¹ã€‚

#### [](#2a-root)2a)æ ¹

```
// eka-site-with-theme/package.json
{
  "name": "eka-site-with-theme",
  "private": true,
  "workspaces": [
    "example-site",
    "gatsby-theme-hello-world",
  ]
} 
```

å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬åœ¨`workspaces`æ•°ç»„ä¸­æ·»åŠ äº†æˆ‘ä»¬çš„*ç«™ç‚¹*å’Œ*ä¸»é¢˜*æ–‡ä»¶å¤¹ã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨æœ¬åœ°ä½¿ç”¨ä¸»é¢˜â€”â€”åœ¨æœ¬ä¾‹ä¸­åªæœ‰ä¸€ä¸ªä¸»é¢˜ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œè¯·é˜…è¯»[è¿™ç¯‡å…³äºçº±çº¿å·¥ä½œç©ºé—´çš„å¸–å­](https://github.com/gatsbyjs/gatsby/blob/beacac6215e7a527a937a121a482f0b60bd69126/docs/blog/2019-04-01-setting-up-yarn-workspaces-for-theme-development/index.md)ã€‚

`workspaces`å­—æ®µæ¥å—é€šé…ç¬¦ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰å¤šä¸ªæœ¬åœ°ä¸»é¢˜ï¼Œæ‚¨å¯ä»¥å°†å®ƒä»¬æ”¾åœ¨ä¸€ä¸ªåä¸º`packages`çš„æ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶å°†`"packages/*"`æ·»åŠ åˆ°æ•°ç»„ä¸­ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°åˆ—å‡ºä¸»é¢˜æ–‡ä»¶å¤¹ã€‚

#### [](#2b-site-raw-examplesite-endraw-)2b)åœ°ç‚¹(`example-site`)

```
// eka-site-with-theme/example-site/package.json
{
  "name": "example-site",
  "version": "1.0.0",
  "private": "true"
} 
```

è¿™ä¸ªæ–‡ä»¶å¤¹ä¸æ‰“ç®—å‘å¸ƒï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†`private`è®¾ç½®ä¸º`true`å¹¶çœç•¥å…¥å£ç‚¹(`main`)ã€‚

#### [](#2c-theme-raw-gatsbythemehelloworld-endraw-)2c)ä¸»é¢˜(`gatsby-theme-hello-world`)

```
// eka-site-with-theme/gatsby-theme-hello-world/package.json
{
  "name": "gatsby-theme-hello-world",
  "version": "1.0.0",
  "license": "MIT",
  "main": "index.js"
} 
```

æˆ‘ä»¬å¿…é¡»åœ¨æˆ‘ä»¬çš„ä¸»é¢˜åŒ…ä¸­æä¾›ä¸€ä¸ªå…¥å£ç‚¹(`main`)ï¼Œä»¥ä¾¿ Gatsby/Node å°è¯•è§£æè¿™ä¸ªåŒ…ã€‚ä¸è¦å¿˜è®°åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªç©ºçš„`index.js`ï¼›å¦åˆ™ï¼Œæˆ‘ä»¬å°†æ— æ³•ä½¿ç”¨è¿™ä¸ªä¸»é¢˜ä»æˆ‘ä»¬çš„ç½‘ç«™ã€‚çœç•¥`license`ä¸ä¼šå¯¼è‡´é”™è¯¯ï¼Œä½†ä¼šæŠ›å‡ºè­¦å‘Šã€‚

ç°åœ¨æˆ‘ä»¬å·²ç»åˆ›å»ºäº†æ‰€æœ‰ä¸‰ä¸ªåŒ…æ–‡ä»¶ï¼Œå›åˆ°æ ¹æ–‡ä»¶å¤¹å¹¶è¿è¡Œ`yarn workspaces info`ã€‚æ‚¨çš„å‘½ä»¤è¡Œåº”è¯¥ä¼šæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹:

```
# eka-site-with-theme/gatsby-theme-hello-world
**yarn workspaces v1.15.2**
{
  "example-site": {
    "location": "example-site",
    "workspaceDependencies": [
      "gatsby-theme-hello-world"
    ],
    "mismatchedWorkspaceDependencies": []
  },
  "gatsby-theme-hello-world": {
    "location": "gatsby-theme-hello-world",
    "workspaceDependencies": [],
    "mismatchedWorkspaceDependencies": []
  }
} 
```

åœ¨æ­¥éª¤ 3 åˆ° 5 ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨*ä¸»é¢˜*æ–‡ä»¶å¤¹ä¸­å·¥ä½œï¼Œåœ¨æ­¥éª¤ 6 å’Œ 7 ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨*ç«™ç‚¹*æ–‡ä»¶å¤¹ä¸­å·¥ä½œã€‚

### [](#3-install-raw-devdependencies-endraw-and-raw-peerdependencies-endraw-in-theme)3ã€‚åœ¨ä¸»é¢˜ä¸­å®‰è£…`devDependencies`å’Œ`peerDependencies`

æˆ‘ä»¬æ­£åœ¨å®‰è£…ä»¥ä¸‹è½¯ä»¶åŒ…ä½œä¸º`devDependencies`å’Œ`peerDependencies`:

*   ç›–èŒ¨æ¯”ï¼ˆå§“ï¼‰
*   ååº”
*   ååº”èŒƒå›´

```
# eka-site-with-theme/gatsby-theme-hello-world
yarn add gatsby react react-dom -D -P 
```

[`devDependencies`](https://yarnpkg.com/en/docs/dependency-types#toc-devdependencies) æ˜¯*å¼€å‘*(åˆ›å»º)ä¸»é¢˜æ‰€éœ€è¦çš„ä¾èµ–é¡¹ï¼Œè€Œ [`peerDependencies`](https://yarnpkg.com/en/docs/dependency-types#toc-peerdependencies) æ˜¯ä¸ºäº†ç¡®ä¿ç”¨æˆ·å®‰è£…æˆ‘ä»¬çš„ä¸»é¢˜æ—¶ä½¿ç”¨è¿™äº›ä¾èµ–é¡¹çš„ç›¸åŒå‰¯æœ¬ã€‚

### [](#4-add-dependencies-to-theme)4ã€‚å‘ä¸»é¢˜æ·»åŠ ä¾èµ–é¡¹

æˆ‘ä»¬æ­£åœ¨æ·»åŠ ä»¥ä¸‹ä¾èµ–é¡¹:

*   ç›–èŒ¨æ¯”æ’ä»¶é¡µé¢åˆ›å»ºè€…
*   gatsby-mdxï¼Œ@mdx-js/mdxï¼Œ@mdx-js/tagï¼Œ@mdx-js/react

#### [](#4a-raw-gatsbypluginpagecreator-endraw-)4a) `gatsby-plugin-page-creator`

é»˜è®¤æƒ…å†µä¸‹ï¼ŒGatsby ä»`src/pages`æ–‡ä»¶å¤¹ä¸­çš„ç»„ä»¶åˆ›å»ºé¡µé¢ã€‚è¿™å¯¹äºéä¸»é¢˜çš„ç«™ç‚¹æ¥è¯´å¾ˆå¥½ï¼Œä½†æ˜¯å½“æˆ‘ä»¬ä½¿ç”¨ä¸»é¢˜æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ç«™ç‚¹ä¹ŸåŒ…å«ä¸»é¢˜çš„`src/pages`æ–‡ä»¶å¤¹ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä½¿ç”¨`gatsby-plugin-page-creator`ã€‚è¿è¡Œä¸‹é¢ä¸€è¡Œæ¥å®‰è£…ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–°çš„`gatsby-config.js`æ–‡ä»¶å¹¶åœ¨é‚£é‡Œæ³¨å†Œæ’ä»¶ã€‚

```
# eka-site-with-theme/gatsby-theme-hello-world
yarn add gatsby-plugin-page-creator 
```

```
// eka-site-with-theme/gatsby-theme-hello-world/gatsby-config.js
module.exports = {
  plugins: [
    {
      resolve: "gatsby-plugin-page-creator",
      options: {
        path: `${__dirname}/src/pages`
      }
    }
  ]
}; 
```

#### [](#4b-raw-gatsbymdx-endraw-)4b) `gatsby-mdx`

[MDX](https://mdxjs.com/) æ˜¯ä¸€ç§æ–°çš„æ ¼å¼ï¼Œå¯ä»¥è®©ä½ åœ¨å‡ä»·æ–‡ä»¶ä¸­ä½¿ç”¨ JSXã€‚æˆ‘ä»¬å°†æ·»åŠ è¿™ä¸ªæ’ä»¶åŠå…¶ä¾èµ–é¡¹ï¼Œä»¥ä¾¿ Gatsby å¯ä»¥è¯»å– MDX æ–‡ä»¶ã€‚åƒå‰é¢çš„ä¾èµ–é¡¹ä¸€æ ·ï¼Œæˆ‘ä»¬å®‰è£…è½¯ä»¶åŒ…ï¼Œæ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œå¹¶å°†`gatsby-mdx`æ·»åŠ åˆ°`plugins`æ•°ç»„ä¸­ã€‚

```
# eka-site-with-theme/gatsby-theme-hello-world
yarn add gatsby-mdx @mdx-js/mdx @mdx-js/tag @mdx-js/react 
```

```
// eka-site-with-theme/gatsby-theme-hello-world/gatsby-config.js
module.exports = {
  plugins: [
    {
      resolve: "gatsby-plugin-page-creator",
      options: {
        path: `${__dirname}/src/pages`
      }
    },
    `gatsby-mdx`
  ]
}; 
```

ğŸ“**æ³¨:** `gatsby-mdx`åªæ˜¯ä¸€ä¸ªä¾‹å­ï¼›å¦‚æœä½ ç†Ÿæ‚‰å…¶ä»–æºå’Œè½¬æ¢å™¨æ’ä»¶(ä¾‹å¦‚`gatsby-source-filesystem`å’Œ`gatsby-transformer-remark`ï¼Œè¯·éšæ„æ›¿æ¢å®ƒä»¬ã€‚

### [](#5-add-pages-to-theme)5ã€‚å°†é¡µé¢æ·»åŠ åˆ°ä¸»é¢˜

ä¸»é¢˜æ˜¯å¸¸è§„çš„ Gatsby ç«™ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åƒå¾€å¸¸ä¸€æ ·å¼€å‘å®ƒã€‚

#### [](#5a-home-page)5a)é¦–é¡µ

é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»º`src/pages`æ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºå¯¼å‡ºä¸€ä¸ªå‘ˆç°æ ‡é¢˜æ–‡æœ¬çš„ç®€å•ç»„ä»¶çš„`index.js`ã€‚è¿™æ˜¯ä½¿ç”¨ React ç»„ä»¶åˆ›å»ºé¡µé¢çš„æ ‡å‡†æ–¹å¼ã€‚

```
# eka-site-with-theme/gatsby-theme-hello-world
# create src/pages folder
mkdir src && mkdir src/pages 

# create index.js 
touch src/pages/index.js 
```

```
// eka-site-with-theme/gatsby-theme-hello-world/src/pages/index.js

import React from "react";
export default () => <h1>Theme Home Page</h1>; 
```

#### [](#5b-hellotheme-page)5b)â€œä½ å¥½-ä¸»é¢˜â€é¡µé¢

ç¬¬äºŒï¼Œåœ¨`src/pages`ä¸­åˆ¶ä½œä¸€ä¸ªåä¸º`hello-theme.mdx`çš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä¸€äº›æ–‡å­—ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ MDX æ ¼å¼ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»å®‰è£…äº†`gatsby-mdx`ã€‚åœ¨å®é™…ç”¨ä¾‹ä¸­ï¼Œæ‚¨å¯ä»¥è‡ªç”±é€‰æ‹©æœ€é€‚åˆæ‚¨éœ€æ±‚çš„ã€‚

<figure>

```
# Hello world from theme

This content is created from the `gatsby-theme-hello-world` theme. 
```

<figcaption>eka-site-with-theme/gatsby-theme-hello-world/src/pages/hello-theme.mdx</figcaption>

</figure>

ç°åœ¨è®©æˆ‘ä»¬ä½œä¸ºä¸€ä¸ªå¸¸è§„ç«™ç‚¹è¿è¡Œæˆ‘ä»¬çš„ä¸»é¢˜ï¼Œæ£€æŸ¥æ˜¯å¦ä¸€åˆ‡æ­£å¸¸ã€‚

```
# eka-site-with-theme/gatsby-theme-hello-world
gatsby develop 
```

è¯·è®¿é—® http://localhost:8000 å¹¶æŸ¥çœ‹æˆ‘ä»¬çš„ç´¢å¼•é¡µé¢ã€‚ç„¶åå»[http://localhost:8000/Hello-theme](http://localhost:8000/hello-theme)çœ‹çœ‹æˆ‘ä»¬çš„â€œHello worldâ€å¸–å­ã€‚

[![Page with title Theme Home Page](../Images/e702639af13b020f87ce4470b6a56b18.png) ](https://res.cloudinary.com/practicaldev/image/fetch/s--rVdWQSb4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/vu7og9uonprv7i8cjrsy.png) [ ![Page with title Hello World from Theme](../Images/cf0c60b5f4386add6c8c4a3f0eeb4fcb.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--s59EhPQW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/pl2ih5grvgr4vh03ll7w.png)

#### [](#extra-the-raw-yarn-workspace-endraw-way)ğŸŒ®å·å¤–:`yarn workspace`æ–¹å¼

é™¤äº†åƒå¾€å¸¸ä¸€æ ·ä½¿ç”¨æ¥è‡ª*ä¸»é¢˜*æ–‡ä»¶å¤¹çš„`gatsby develop`ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ¥è‡ªå·¥ä½œåŒºæ ¹ç›®å½•çš„`yarn workspace`å‘½ä»¤ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å°†`gatsby develop`å‘½ä»¤æ·»åŠ åˆ°ä¸»é¢˜çš„`package.json`æ–‡ä»¶ä¸­ã€‚

```
// eka-site-with-theme/gatsby-theme-hello-world/package.json
{
  "name": "gatsby-theme-hello-world",
  // other things
  "scripts": {
    "develop": "gatsby develop"
  }
} 
```

ç°åœ¨è½¬åˆ°å·¥ä½œåŒºæ ¹æ–‡ä»¶å¤¹å¹¶è¿è¡Œè¿™ä¸ªå‘½ä»¤ã€‚

```
# from workspace root (eka-site-with-theme)
yarn workspace gatsby-theme-hello-world develop

# is equal to this
# in theme folder (eka-site-with-theme/gatsby-theme-hello-world)
yarn develop 
```

è¿™ä¹Ÿé€‚ç”¨äºä»»ä½•å…¶ä»–çš„`yarn`å‘½ä»¤ã€‚

ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªå·¥ä½œä¸»é¢˜ï¼Œæ˜¯æ—¶å€™åˆ›å»ºæˆ‘ä»¬çš„ç½‘ç«™å¹¶ä½¿ç”¨è¿™ä¸ªä¸»é¢˜äº†ï¼

### [](#6-add-dependencies-including-the-theme-to-site)6ã€‚å‘ç½‘ç«™æ·»åŠ ä¾èµ–é¡¹(åŒ…æ‹¬ä¸»é¢˜)

è½¬åˆ°æˆ‘ä»¬çš„*ç«™ç‚¹*æ–‡ä»¶å¤¹ï¼Œç„¶åå®‰è£…æˆ‘ä»¬çš„ä¾èµ–é¡¹:

*   ç›–èŒ¨æ¯”ï¼ˆå§“ï¼‰
*   ååº”
*   ååº”èŒƒå›´

```
# eka-site-with-theme/example-site
yarn add gatsby react react-dom 
```

æˆ‘ä»¬è¿˜æ·»åŠ äº†ä¸»é¢˜`gatsby-theme-hello-world`ï¼Œä½œä¸ºä¸€ä¸ªä¾èµ–é¡¹ã€‚å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æœ¬åœ°ä¸»é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åƒè¿™æ ·æŠŠå®ƒæ·»åŠ åˆ°`package.json`ä¸­:

```
// eka-site-with-theme/example-site/package.json
{
  "name": "example-site",
  "version": "1.0.0",
  "private": true,
  "dependencies": {
    "gatsby": "^2.4.2",
    "react": "^16.8.6",
    "react-dom": "^16.8.6",
    "gatsby-theme-hello-world": "*"
  }
} 
```

å°±åƒæ­¥éª¤ 4 ä¸­çš„æ’ä»¶ä¾èµ–ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿä»¥ç±»ä¼¼çš„æ–¹å¼å°†æˆ‘ä»¬çš„ä¸»é¢˜æ·»åŠ åˆ°`gatsby-config.js`ä¸­ã€‚é¦–å…ˆåœ¨æˆ‘ä»¬çš„*ç«™ç‚¹*æ–‡ä»¶å¤¹ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹:

```
// eka-site-with-theme/example-site/gatsby-config.js
module.exports = {
  __experimentalThemes: [`gatsby-theme-hello-world`]
}; 
```

ç°åœ¨å°è¯•è¿è¡Œåº”ç”¨ç¨‹åºã€‚ä¸€æ—¦åº”ç”¨ç¨‹åºè¿è¡Œï¼Œä½ åº”è¯¥èƒ½å¤Ÿè®¿é—® [http://localhost:8000](http://localhost:8000) å’Œ[http://localhost:8000/hello-theme](http://localhost:8000/hello-theme)ï¼Œå°±åƒæˆ‘ä»¬ä»ä¸»é¢˜ä¸­åšçš„é‚£æ ·ã€‚

### [](#7-create-a-post-in-site)7ã€‚åœ¨ç½‘ç«™ä¸­åˆ›å»ºå¸–å­

ä½œä¸ºä¸€ä¸ªç”¨æˆ·ï¼Œæˆ‘ä»¬æƒ³è¦æ·»åŠ æˆ‘ä»¬è‡ªå·±çš„ç½‘ç«™å†…å®¹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨`src/pages`ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ¥åšåˆ°è¿™ä¸€ç‚¹â€”â€”å§‘ä¸”ç§°ä¹‹ä¸º`hello-user.mdx`ã€‚è¿™ä¸€æ­¥ç±»ä¼¼äºä¸Šé¢çš„ç¬¬ 6 æ­¥ï¼Œä½†æ˜¯æˆ‘ä»¬ç°åœ¨æ˜¯ä»*ç«™ç‚¹*æ–‡ä»¶å¤¹ä¸­è¿›è¡Œçš„ã€‚

<figure>

```
# Hello world from user

This content is created from the example user site. 
```

<figcaption>eka-site-with-theme/example-site/src/pages/hello-user.mdx</figcaption>

</figure>

ç°åœ¨å†æ¬¡è¿è¡Œåº”ç”¨ç¨‹åºï¼Œå¹¶å‰å¾€[http://localhost:8000/hello-user](http://localhost:8000/hello-user)ã€‚ä½ å¯ä»¥çœ‹åˆ°ï¼Œé™¤äº†ä¸»é¡µå’Œâ€œhello-themeâ€é¡µé¢ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªåªå­˜åœ¨äºæˆ‘ä»¬ç½‘ç«™ä¸­çš„æ–°é¡µé¢ã€‚

[![Page with title Hello World from User](../Images/3fdbca6e7c6952cf9da880421a0ab50b.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--BGlZTphN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/q6ntqqnqntibxmtmj8hz.png)

### [](#8-add-a-ghost-optional)8ã€‚æ·»åŠ é‡å½±(å¯é€‰)

ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ï¼Œä¸»é¢˜å¼€å‘è€…å¯ä»¥é›†æˆä»»ä½•å¿…è¦çš„ç»„ä»¶ï¼Œå› æ­¤ç”¨æˆ·ä¸å¿…è‡ªå·±å®‰è£…å’Œé…ç½®ç»„ä»¶ã€‚(è€Œä¸”ï¼Œè¿™çœŸçš„åªæ˜¯ä¸€ä¸ªä½¿ç”¨æˆ‘éå¸¸ç€è¿·çš„ miukimiu/react-kawaii åº“çš„å€Ÿå£ã€‚)

è¿”å›åˆ°`gatsby-theme-hello-world`æ–‡ä»¶å¤¹ï¼Œè¿è¡Œ`yarn add react-kawaii`å®‰è£…è½¯ä»¶åŒ…ã€‚

æ‰“å¼€ç”¨æˆ·å‘å¸ƒæ–‡ä»¶`hello-user.mdx`å¹¶ä»`react-kawaii`æ·»åŠ ä¸€ä¸ªç»„ä»¶ã€‚

<figure>

```
import { Ghost } from "react-kawaii";

# Hello world from user

This content is created from the example user site.

<Ghost size={160} mood="happy" color="#f0f0f0" /> 
```

<figcaption>eka-site-with-theme/example-site/src/pages/hello-user.mdx</figcaption>

</figure>

ç°åœ¨å†æ¬¡è¿è¡Œ *example-site* appï¼Œè¿›å…¥[http://localhost:8000/hello-user](http://localhost:8000/hello-user)ã€‚ä½ åº”è¯¥çœ‹åˆ°ä½ çš„å¸–å­ä¸‹é¢æœ‰ä¸€ä¸ªé¬¼æ’å›¾ã€‚

[![Same page as Hello World from User above, but with ghost illustration](../Images/4d3aedd855a1ba43fc91e08cd9adf7e1.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--T415oxWw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/e139aup77dhjhyr95512.png)

å› æ­¤ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸåœ°æ„å»ºäº†ä¸€ä¸ªä¸»é¢˜ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„æ–°ç«™ç‚¹ä¸­ä½¿ç”¨äº†å®ƒã€‚è€¶ï¼ğŸ‰

* * *

## [](#notes-and-thoughts)ğŸ“ç¬”è®°å’Œæƒ³æ³•

å’Œå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘åœ¨åˆ†äº«æˆ‘çš„(ä¸»è§‚ï¼)å…³äºæˆ‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­æ‰€åˆ›é€ çš„ä¸œè¥¿çš„æƒ³æ³•ã€‚å¦‚æœä½ æœ‰ä»€ä¹ˆè¦è¡¥å……çš„ï¼Œè¯·éšä¾¿æ’è¯ã€‚

ğŸ¤” ***è¿™ä¸æ˜¯å·¥ç¨‹è¿‡åº¦å—ï¼Ÿ**T3ã€‘*

å¦‚æœä½ *åª*éœ€è¦åˆ›å»ºä¸€ä¸ªâ€œHello Worldâ€é¡µé¢ï¼Œæ˜¯çš„ï¼Œç»å¯¹éœ€è¦ï¼ç„¶è€Œï¼Œæˆ‘ç¡®å®å‘ç°æ½œåœ¨çš„ç”¨ä¾‹â€”â€”ä½ å¯ä»¥åœ¨æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« çš„[é“¾æ¥ä¸­æ‰¾åˆ°â€”â€”æ˜¯åˆç†çš„ã€‚æˆ‘åšè¿™ç§åŸºæœ¬çš„å®ç°æ˜¯ä¸ºäº†åœ¨è¿›å…¥æ›´å¤æ‚(å’Œæ›´ç°å®)çš„ç”¨æ³•ä¹‹å‰æ¢ç´¢åŸç†ã€‚](https://dev.to/ekafyi/learning-gatsby-themes-introduction-1gje)

â“ ***ä¸æ­¥éª¤ 3 æœ‰å…³â€”â€”æˆ‘ä»ç„¶ä¸æ˜ç™½ä¸»é¢˜çš„å¯¹ç­‰ä¾èµ–æ€§ã€‚**T3ã€‘*

å¦‚æœæˆ‘ç°æœ‰çš„ç«™ç‚¹ä½¿ç”¨ Gatsby 2 . 0 . 0 ç‰ˆæœ¬ï¼Œä½†æ˜¯ä¸»é¢˜ä½¿ç”¨ 2.1.1 ä½œä¸º devDependency *å’Œ* peerDependencyï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿå®ƒä¼šè¿«ä½¿æˆ‘çš„æ•´ä¸ªç½‘ç«™è¿è¡Œä¸»é¢˜çš„ç›–èŒ¨æ¯”å‰¯æœ¬å—ï¼Ÿè¿˜æ˜¯åªç”¨ä¸»é¢˜çš„éƒ¨åˆ†ï¼Ÿå¦‚æœæˆ‘çš„ç½‘ç«™ä½¿ç”¨å¦ä¸€ä¸ªä¸»é¢˜ï¼Œä¾‹å¦‚ä½¿ç”¨ 2.0.0 ä½œä¸º peerDepencencyï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ

æˆ‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­ä½¿ç”¨çš„è®¾ç½®ç”¨äº[ç›´æ’­-ç›–èŒ¨æ¯”ä¸»é¢˜](https://github.com/jlengstorf/livestream-gatsby-themes/blob/master/packages/gatsby-theme-livestream/package.json)å’Œ[ç›–èŒ¨æ¯”ä¸»é¢˜-ç¢³](https://github.com/carbon-design-system/gatsby-theme-carbon/blob/master/packages/gatsby-theme-carbon/package.json)ã€‚ä½†æ˜¯ï¼Œå…¶ä»–ä¸»é¢˜ä½¿ç”¨ä¸åŒçš„è®¾ç½®ï¼Œå¦‚[ç›–èŒ¨æ¯”-ä¸»é¢˜-æœ€å°åŒ–](https://github.com/ChristopherBiscardi/gatsby-starter-theme/blob/master/gatsby-theme-minimal/package.json)(ä»…`peerDependencies`)å’Œ[ç›–èŒ¨æ¯”-ä¸»é¢˜-ç¤ºä¾‹-ç»„ä»¶-æ‰©å±•](https://github.com/johno/gatsby-theme-example-component-extending)(æ—¢ä¸æ˜¯`dev`ä¹Ÿä¸æ˜¯`peerDependencies`)ã€‚å¦‚æœæœ‰äººèƒ½è§£é‡Šå…¶ä¸­çš„åŸç†ï¼Œæˆ‘å°†ä¸èƒœæ„Ÿæ¿€ã€‚

* * *

ä¼™è®¡ä»¬ï¼Œå°±è¿™æ ·å§ã€‚

æ¥ä¸‹æ¥:æˆ‘å°†ç»§ç»­å¼€å‘ä¸»é¢˜ï¼Œæ¼”ç¤º[ç»„ä»¶éšè—](https://www.gatsbyjs.org/blog/2019-04-29-component-shadowing/)ï¼Œå¹¶ä½¿ç”¨`gatsby-node.js`ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»ºé¡µé¢ã€‚

æ•¬è¯·å…³æ³¨ï¼Œæ„Ÿè°¢é˜…è¯»ï¼ğŸ™ŒğŸ¾