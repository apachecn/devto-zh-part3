# ä¸€ä¸ªåœ¨æ¨ç‰¹ä¸Šå‘å¸ƒå…³äº Vue çš„æ–°æ–‡ç« çš„æœºå™¨äºº

> åŸæ–‡:[https://dev . to/danielelkington/a-bot-that-tweets-new-dev-articles-about-vue-4p5a](https://dev.to/danielelkington/a-bot-that-tweets-new-dev-articles-about-vue-4p5a)

æ‰€ä»¥æˆ‘çˆ± [VueJS](https://vuejs.org/) ã€‚æˆ‘å–œæ¬¢ dev.to å…³äº Vue çš„æ–‡ç« ã€‚æˆ‘ä¸æƒ³é”™è¿‡ä»»ä½•ä¸€ä¸ªã€‚æˆ‘å¯ä»¥ä¸æ–­åˆ·æ–° dev.to ä¸Šçš„ [#vue æ ‡ç­¾](https://dev.to/t/vue)ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºåœ¨æˆ‘çš„ Twitter feed ä¸Šçœ‹åˆ°æ‰€æœ‰æ–°çš„ vue æ–‡ç« ä¼šæ›´æ–¹ä¾¿ã€‚æ‰€ä»¥æˆ‘å†™äº†æˆ‘çš„æ¨ç‰¹æœºå™¨äºº- [@TheVueDev](https://twitter.com/TheVueDev) ã€‚

# [](#basic-architecture-and-flow)åŸºæœ¬æ¶æ„å’Œæµç¨‹

æˆ‘å†³å®šçš„åŸºæœ¬æµç¨‹å¦‚ä¸‹

*   ç”¨ Typescript ç¼–å†™çš„ Azure å‡½æ•°æ¯åˆ†é’Ÿéƒ½åœ¨è¿è¡Œï¼Œ
*   è¯¥å‡½æ•°æŠ“å–[dev.to/t/vue/latest](https://dev.to/t/vue/latest)æ¥æ£€æŸ¥æ–°æ–‡ç« ï¼Œ
*   å¦‚æœå‘ç°æ–°æ–‡ç« ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨åœ¨æ¨ç‰¹ä¸Šå‘å¸ƒï¼

Azure åŠŸèƒ½æ˜¯å¾®è½¯ Azure çš„â€œæ— æœåŠ¡å™¨â€äº§å“ï¼Œå®ƒå…è®¸ä½ è¿è¡Œä¸€å°æ®µä»£ç æ¥å“åº”ä¸€äº›è§¦å‘ã€‚æœ‰ä¸€ä¸ªæ…·æ…¨çš„å…è´¹å±‚([æ¯æœˆ 100 ä¸‡æ¬¡å…è´¹æ‰§è¡Œï¼è¿™æ„å‘³ç€è¿™ä¸ªé¡¹ç›®éå¸¸ä¾¿å®œï¼Œå°½ç®¡ä¸æ˜¯å®Œå…¨å…è´¹çš„ï¼Œå› ä¸ºè¯¥åŠŸèƒ½éœ€è¦ä¸€ä¸ª Azure å­˜å‚¨å¸æˆ·æ¥å­˜å‚¨ä¸€äº›ä¸è¯¥åŠŸèƒ½ç›¸å…³çš„ä¸œè¥¿ã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿™ä¸ªé¡¹ç›®çš„æ€»æˆæœ¬è¿˜ä¸åˆ°æ¯æœˆ 1 ç¾å…ƒã€‚](https://azure.microsoft.com/en-us/pricing/details/functions/)

# [](#setting-up-twitter)è®¾ç½® Twitter

å»ºç«‹ Twitter è´¦æˆ·ç›¸å¯¹ç®€å•(ä½ åªéœ€è¦å‡†å¤‡å¥½å›ç­” Twitter ä¸ºäº†é˜²æ­¢æ»¥ç”¨è€Œæå‡ºçš„è®¸å¤šé—®é¢˜ï¼Œè¿™æ˜¯å¯ä»¥ç†è§£çš„)ã€‚åœ¨[twitter.com](http://twitter.com)ä¸ºè¿™ä¸ªæœºå™¨äººå»ºç«‹äº†ä¸€ä¸ª Twitter è´¦æˆ·åï¼Œæˆ‘å»äº†[developer.twitter.com](https://developer.twitter.com)ï¼ŒæŒ‰ç…§æç¤ºç”³è¯·äº†ä¸€ä¸ªå¼€å‘è€…è´¦æˆ·ã€‚æœ€åï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„â€œåº”ç”¨ç¨‹åºâ€ï¼Œå¡«å†™äº†ä¸€äº›æ›´å¤šçš„ç»†èŠ‚ï¼Œè¯·æ±‚äº†ä¸€äº›è®¿é—®ä»¤ç‰Œï¼Œç„¶åå‡ºç°äº†ä¸€ä¸ªç±»ä¼¼è¿™æ ·çš„é¡µé¢:
[![The Twitter developer page with some access tokens and secret keys to copy](../Images/91d7ad94c4b901bdc824c43a92629865.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--c6zVj0rm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/0chzhufxmibwequ1c9ej.png) 
æ²¡é”™ï¼Œæœ‰å››ä¸ªä»¤ç‰Œ/å¯†é’¥ï¼Œæˆ‘ä»¬éœ€è¦å…¨éƒ¨ï¼

# [](#the-function)è¯¥åŠŸèƒ½

æˆ‘æŒ‰ç…§ Azure æ–‡æ¡£ä¸­çš„[å¿«é€Ÿå…¥é—¨æŒ‡å—](https://docs.microsoft.com/en-us/azure/azure-functions/functions-create-first-function-vs-code)ç”¨ Visual Studio ä»£ç åˆ›å»ºäº†ä¸€ä¸ª Azure å‡½æ•°ï¼Œé€‰æ‹©â€œJavaScriptâ€ä½œä¸ºè¯­è¨€ã€‚ç„¶åè¿è¡Œ`tsc --init`æ·»åŠ  TypeScriptï¼Œå‡†å¤‡å¼€å§‹ç¼–ç ï¼

## [](#running-code-every-minute)æ¯åˆ†é’Ÿè¿è¡Œä»£ç 

å¯¹äºä½ åˆ›å»ºçš„æ¯ä¸ªå‡½æ•°ï¼Œä½ éœ€è¦æŒ‡å®šä»€ä¹ˆä¼šè§¦å‘å®ƒ(åœ¨è¿™é‡Œæ‰¾åˆ°æ‰€æœ‰é€‰é¡¹)ã€‚åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘æƒ³æ¯åˆ†é’Ÿè§¦å‘ä¸€æ¬¡å‡½æ•°ï¼Œè¿™å¯ä»¥é€šè¿‡å‡½æ•°çš„`function.json`æ–‡ä»¶ä¸­çš„ä»¥ä¸‹ä»£ç æ¥å®ç°:

```
{  "disabled":  false,  "bindings":  [  {  "schedule":  "0 * * * * *",  "type":  "timerTrigger",  "direction":  "in",  "name":  "everyMinuteTimer"  }  ]  } 
```

## [](#scraping-devto)åˆ®é™¤å¼€å‘åˆ°

æˆ‘è¦æ„Ÿè°¢ Sarthak Sharmaï¼Œä»–çš„ Vue CLI éå¸¸æ£’â€”â€”å¦‚æœä½ è¿˜æ²¡æœ‰çœ‹è¿‡çš„è¯ï¼Œè¯·æŸ¥çœ‹ä¸€ä¸‹ã€‚ä»–ç”¨æ¥æŠ“å– dev.to çš„ä»£ç ç»™äº†æˆ‘å¾ˆå¤šè¿™ä¸ªé¡¹ç›®çš„æŒ‡å¯¼ã€‚

[![sarthology image](../Images/96f0b51a24da3b688c38c2a4598cfe65.png)](/sarthology) [## ğŸğŸ’DevTo CLIğŸ’ğŸ:ç»™æˆ‘æœ€çˆ±çš„äººçš„æƒ…äººèŠ‚ç¤¼ç‰©

### sart hak Sharma 2 æœˆ 14 æ—¥ 192 åˆ†é’Ÿé˜…è¯»

#showdev #meta #opensource #productivity](/teamxenox/devto-cli-a-valentines-day-gift-to-my-favorite-people-56bd)

å’Œ Sarthak ä¸€æ ·ï¼Œæˆ‘ç”¨äº† [x å…‰åº“](https://github.com/matthewmueller/x-ray)å¸®åŠ©åˆ®ç—§ã€‚æ¯ä¸€åˆ†é’Ÿæˆ‘éƒ½æƒ³åŠ è½½ https://dev.to/t/vue/latest çš„å¹¶æŠ“å–æœ€æ–° VueJS æ–‡ç« çš„ç»†èŠ‚ã€‚åœ¨ Chrome devtools çš„å¸®åŠ©ä¸‹ï¼Œè·å–æ–‡ç« æ ‡é¢˜ã€ä½œè€…è¯¦ç»†ä¿¡æ¯å’Œæ–‡ç« é“¾æ¥ç­‰ä¿¡æ¯éå¸¸ç®€å•â€”â€”æŸ¥è¯¢é¡µé¢ä½¿ç”¨çš„è¯­æ³•ä¸ CSS éå¸¸ç›¸ä¼¼ã€‚

```
const xray = Xray()
const articleScrapeData = await xray(
  'https://dev.to/t/vue/latest',
  '#substories .single-article',
  [
    {
      title: '.index-article-link .content h3',
      author: 'h4 a',
      link: '.index-article-link@href',
      tags: ['.tags .tag'], // need the tags so we can strip them out of the title
      authorLink: '.small-pic-link-wrapper@href'
    }
  ]
) 
```

è¿™å°†è¿”å›é¡µé¢ä¸Šæ–‡ç« çš„æ•°ç»„ã€‚æˆ‘éœ€è¦æ¸…ç†ä¸€äº›æ•°æ®([å¦‚æœä½ æ„Ÿå…´è¶£ï¼Œè¿™æ˜¯ä»£ç ](https://github.com/danielelkington/twitter-vue-dev/blob/master/AutoTweetDevArticles/article.ts))ã€‚å½“ç„¶ï¼Œå¦‚æœä»–ä»¬æä¾›äº†ä½œè€…çš„ Twitter è´¦å·ï¼Œé‚£ä¹ˆåœ¨ Twitter ä¸Šå‘å¸ƒæ˜¯æœ‰æ„ä¹‰çš„ï¼Œæ‰€ä»¥æˆ‘ä»ä½œè€…é¡µé¢ä¸ŠæŠ“å–äº†è¿™ä¸ªè´¦å·ã€‚

```
 const socialLinks: string[] = await xray(article.authorLink, [
      '.profile-details .social a@href'
  ])
  const twitterLink = socialLinks.find(x => x.includes('twitter.com/'))
  if (twitterLink != null) {
    // twitterLink is in the form https://twitter.com/{blah}
    const twitterURL = new URL(twitterLink)
    const twitterHandle = '@' + twitterURL.pathname.substring(1)
  } 
```

å¯¹äºæ¯ç¯‡æ–‡ç« ï¼Œæˆ‘éƒ½å¯ä»¥åˆ›å»ºæ¨æ–‡ã€‚æˆ‘å†³å®š tweets å°†åŒ…å«æ–‡ç« æ ‡é¢˜ï¼Œç„¶åæ˜¯ä½œè€…çš„ twitter å¥æŸ„æˆ–åç§°ï¼Œæœ€åæ˜¯æ–‡ç« çš„é“¾æ¥(dev.to ç”¨æ¼‚äº®çš„å¡ç‰‡å¾ˆå¥½åœ°æ ¼å¼åŒ–äº†å®ƒ)ã€‚

```
const tweetContent =
`${article.title} { ${article.twitterHandle || article.authorName} } ${article.link}` // Yay for Template Literals! 
```

ç°åœ¨æˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯åœ¨æ¨ç‰¹ä¸Šå‘å¸ƒæ–‡ç« ï¼

## [](#the-dilemma)è¿›é€€ä¸¤éš¾

é—®é¢˜æ˜¯ï¼Œè¿™ä¸ªåŠŸèƒ½ä¸èƒ½æ¯åˆ†é’Ÿéƒ½å‘æ‰€æœ‰æˆ‘ä»¬æ‰¾åˆ°çš„â€œæœ€è¿‘çš„æ–‡ç« â€ï¼Œå¦åˆ™æˆ‘ä»¬æœ€ç»ˆä¼šå‘ä¸€å †é‡å¤çš„æ–‡ç« ã€‚æ›´å¤æ‚çš„é—®é¢˜æ˜¯ï¼Œdev.to ä¼¼ä¹æ²¡æœ‰æä¾›ä¸€ç§ç®€å•çš„æ–¹æ³•æ¥æŸ¥çœ‹ä¸€ç¯‡æ–‡ç« å‘å¸ƒçš„æ—¶é—´ï¼Œè€Œä¸æ˜¯æœ€è¿‘çš„ä¸€å¤©ã€‚æˆ‘æƒ³åˆ°äº†ä¸‰ç§å¯èƒ½çš„è§£å†³æ–¹æ¡ˆ:

1.  æ¯ 24 å°æ—¶åªè¿è¡Œä¸€æ¬¡è¯¥åŠŸèƒ½ï¼Œå¹¶åœ¨æ¨ç‰¹ä¸Šå‘å¸ƒæ˜¨å¤©çš„æ–‡ç« ã€‚é—®é¢˜æ˜¯ï¼Œå¦‚æœåŠŸèƒ½ç”±äºæŸç§åŸå› å¤±è´¥ï¼Œæˆ‘ä»¬å°†é”™è¿‡ä¸€å¤©ï¼Œå¦‚æœå®ƒçš„å·¥ä½œè¿½éšè€…éœ€è¦ç­‰å¾…é•¿è¾¾ 24 å°æ—¶çš„æ–°æ–‡ç« ï¼
2.  å®ç°æŸç§å­˜å‚¨æ¥è·Ÿè¸ªå·²ç»å‘å¸ƒçš„æ–‡ç« ã€‚ä½†æ˜¯å¯¹äºè¿™æ ·çš„é¡¹ç›®æ¥è¯´ï¼Œè¿™ä¼¼ä¹æœ‰ç‚¹å¤§æå°ç”¨äº†ã€‚ <sub><sup>(ä½ å¯èƒ½ä¼šè®¤ä¸º Typescript å¯¹äºè¿™æ ·çš„é¡¹ç›®æ¥è¯´ä¹Ÿæ˜¯å¤šä½™çš„ï¼Œä½†æˆ‘æƒ³ç”¨å®ƒæ¥å­¦ä¹ â˜ºï¸)</sup></sub>
3.  ä½¿ç”¨ Twitter API è·å–è¯¥å¸æˆ·å‘å¸ƒçš„æœ€æ–°æ–‡ç« ï¼Œä¸ dev.to ä¸Šæ‰¾åˆ°çš„æœ€æ–°æ–‡ç« è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶å‘å¸ƒä»»ä½•å°šæœªå‘å¸ƒçš„æ–‡ç« ã€‚

å¤‡é€‰æ¡ˆæ–‡ 3 ä¼¼ä¹æœ€ç›´æˆªäº†å½“ã€‚æŠ“å–[dev.to/t/vue/latest](https://dev.to/t/vue/latest)åªè¿”å›æœ€è¿‘çš„ 8 ç¯‡æ–‡ç« ï¼Œè€Œ Twitter API è¿”å›è´¦æˆ·æœ€è¿‘çš„ 200 æ¡æ¨æ–‡ï¼Œå› æ­¤è¯¥å‡½æ•°åº”è¯¥æ€»æ˜¯èƒ½å¤Ÿå‡†ç¡®åœ°ç¡®å®šä¸€ç¯‡æ–‡ç« æ˜¯å¦å·²ç»è¢«æ¨æ–‡ã€‚

## [](#using-the-twitter-api)ä½¿ç”¨ Twitter API

Omar Sinan å…³äºæ„å»º Twitter æœºå™¨äººçš„æ–‡ç« éå¸¸æœ‰å¸®åŠ©â€”â€”æ¥çœ‹çœ‹å§ï¼

## æ–‡ç« ä¸å†å¯ç”¨

å’Œ Omar ä¸€æ ·ï¼Œæˆ‘ç”¨ [Twit](https://github.com/ttezel/twit) åº“æ¥å¸®åŠ©å‘æ¨ç‰¹ã€‚å°†å®ƒè¿æ¥åˆ° [@TheVueDev](https://twitter.com/TheVueDev) å°±åƒä» Twitter åº”ç”¨é¡µé¢ç²˜è´´å››ä¸ªé”®å’Œä»¤ç‰Œä¸€æ ·ç®€å•(å½“ç„¶æ˜¯ä½œä¸ºç¯å¢ƒå˜é‡ï¼).

```
this.t = new Twit({
  consumer_key: process.env.twitter_consumer_key,
  consumer_secret: process.env.twitter_consumer_secret,
  access_token: process.env.twitter_access_token,
  access_token_secret: process.env.twitter_access_token_secret
}) 
```

å¦‚æœæˆ‘ä»¬çš„æ–‡ç« è¿˜æ²¡æœ‰è¢«å‘å¸ƒï¼Œæˆ‘ä»¬å°±æŠŠå®ƒä»¬å‘å¸ƒå‡ºå»ï¼

```
// Get recent tweets
const res = await this.t.get('statuses/user_timeline', {
  screen_name: 'TheVueDev'
})
const recentTweets = <any[]>res.data
// Determine if article has been tweeted yet
// Need to look at entities.urls.expanded_url because Twitter 
// automatically shortens the URL in the tweet itself.
if (recentTweets.find(x =>
  x.entities.urls.find((u: any) => u.expanded_url === articleLink)
  ) == null) {
  // Article hasn't yet been tweeted - tweet it!
  await this.t.post('statuses/update', { status: tweetContent })
} 
```

(æ­¤å¤„å¯æ‰¾åˆ°æ­¤ä»£ç çš„æ›´é«˜æ•ˆç‰ˆæœ¬[ã€‚)](https://github.com/danielelkington/twitter-vue-dev/blob/master/AutoTweetDevArticles/tweet.ts)

# [](#deployment)éƒ¨ç½²

ä½¿ç”¨ [Azure Functions extension](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurefunctions) ï¼Œåªéœ€ç‚¹å‡»å‡ ä¸‹æŒ‰é’®ï¼Œå°±å¯ä»¥åœ¨ Visual Studio ä»£ç å†…å°†è¯¥åŠŸèƒ½éƒ¨ç½²åˆ° Azureã€‚æ•´æ´ï¼

è¿™æ ·ï¼Œæˆ‘å°±æœ‰äº†ä¸€ä¸ªåŠŸèƒ½æ­£å¸¸çš„ Twitter æœºå™¨äººï¼Œç°åœ¨å¯ä»¥å¾ˆå®¹æ˜“åœ°äº†è§£æ‰€æœ‰å‡ºç°åœ¨ dev.to ä¸Šçš„æ–° VueJS æ–‡ç« äº†ï¼

[![A tweet from my Twitter bot](../Images/c10e4370b8ebe311962341be901c9292.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--CkGCVXGn--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/y0qnn82nsfn8z2rvd65t.png)

[è¿™æ˜¯ Twitter è´¦æˆ·](https://twitter.com/TheVueDev),[è¿™æ˜¯å®Œæ•´ä»£ç ](https://github.com/danielelkington/twitter-vue-dev)ï¼Œä¸€æ­¥ä¸€æ­¥çš„æŒ‡å¯¼ä½ éƒ¨ç½²ä½ è‡ªå·±çš„æœºå™¨äººæ¥å‘å¸ƒä½ é€‰æ‹©çš„ä»»ä½• dev.to æ ‡ç­¾ï¼

## ![GitHub logo](../Images/a73f630113876d78cff79f59c2125b24.png)[ã€danielelkingtonã€‘](https://github.com/danielelkington)/[ã€Twitter-view-devã€‘](https://github.com/danielelkington/twitter-vue-dev)

### ä¸€ä¸ªå­˜åœ¨äº Azure å‡½æ•°ä¸­çš„æœºå™¨äººï¼Œå®ƒå¯ä»¥å‘å¸ƒæ‰€æœ‰ dev.to VueJS æ–‡ç« 

<article class="markdown-body entry-content container-lg" itemprop="text">

# twitter æ£€è§†å™¨-dev

[![Logo](../Images/7fc12a9b2b76dbef0f606c138b6201b3.png)T2ã€‘](https://raw.githubusercontent.com/danielelkington/twitter-vue-dev/master/images/logo.png)

ä¸€ä¸ªå­˜åœ¨äº Azure å‡½æ•°ä¸­çš„æœºå™¨äººï¼Œå¯ä»¥å‘å¸ƒæ‰€æœ‰ [dev.to](https://dev.to) VueJS æ–‡ç« ã€‚æ‰¾åˆ°å®ƒ [@TheVueDev](https://twitter.com/TheVueDev) ã€‚

[dev.to æ–‡ç« è§£é‡Šè¿™æ˜¯å¦‚ä½•åˆ›å»ºçš„ã€‚](https://dev.to/danielelkington/a-bot-that-tweets-new-dev-articles-about-vue-4p5a)

åŒæ ·çš„ä»£ç å¯ä»¥ç”¨æ¥åˆ›å»ºä¸€ä¸ª Twitter botï¼Œå®ƒå¯ä»¥ä»ä»»ä½•æœ‰æ•ˆçš„ [dev.to](https://dev.to) æ ‡ç­¾å‘å¸ƒæ–°æ–‡ç« ã€‚

## éƒ¨ç½²

æŒ‰ç…§è¿™äº›è¯´æ˜æ¥åˆ›å»ºä½ è‡ªå·±çš„ Twitter æœºå™¨äººï¼Œä¸ºä½ é€‰æ‹©çš„æ ‡ç­¾å‘é€ [dev.to](https://dev.to) æ–‡ç« ã€‚è¿™å¯èƒ½ä¼šè®©ä½ æ¯æœˆèŠ±è´¹å‡ ç¾åˆ†çš„ Azure å­˜å‚¨è´¹ã€‚

### è®¾ç½® Twitter å¸æˆ·

1.  å»[twitter.com](https://twitter.com)ä¸ºä½ çš„æœºå™¨äººåˆ›å»ºä¸€ä¸ª Twitter è´¦æˆ·ã€‚

2.  ç™»å½•ä½ çš„æœºå™¨äººçš„ Twitter è´¦æˆ·ï¼Œè¿›å…¥[developer.twitter.com](https://developer.twitter.com)ï¼Œç‚¹å‡»â€œåº”ç”¨â€ï¼Œç„¶åæŒ‰ç…§æç¤ºç”³è¯·ä¸€ä¸ªå¼€å‘è€…è´¦æˆ·ã€‚

    *   å½“è¦æ±‚â€œé€‰æ‹©è¦å…³è”çš„ç”¨æˆ·é…ç½®æ–‡ä»¶â€æ—¶ï¼Œè¯·ç¡®ä¿é€‰æ‹©äº†æ‚¨çš„ bot å¸æˆ·ã€‚
    *   å¡«å†™å…³äºæ‚¨çš„å¼€å‘è€…å¸æˆ·ç”¨é€”çš„ä¿¡æ¯ï¼Œæ¥å—æ¡æ¬¾å¹¶â€¦

</article>

[View on GitHub](https://github.com/danielelkington/twitter-vue-dev)