# constateï¼ŒReact ä¸­çš„è½»é‡çº§çŠ¶æ€ç®¡ç†

> åŸæ–‡:[https://dev . to/Chris wcs/constate-light-weight-state-management-in-react-258 c](https://dev.to/chriswcs/constate-light-weight-state-management-in-react-258c)

### [](#introduction)ç®€ä»‹

ç°åœ¨é’©å­å·²ç»å‘å¸ƒäº†ï¼Œæˆ‘ç›¸ä¿¡æˆ‘ä»¬å°†ä¼šçœ‹åˆ°æ¨¡å¼çš„å‡ºç°ï¼Œç¤¾åŒºå°†ä¼šå‘ç°é’©å­å¯ä»¥è§£å†³é—®é¢˜å¹¶ç®€åŒ–ä»£ç ã€‚æœ¬æ–‡æ˜¯å¯¹ [constate](https://github.com/diegohaz/constate) çš„åŸºæœ¬ä»‹ç»ï¼Œconstate æ˜¯ä¸€ä¸ªåˆ©ç”¨é’©å­çš„è½»é‡çº§çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚è¯·åœ¨ä¸‹é¢éšæ„è¯„è®ºä½ å¯¹è¿™ä¸ªè¯é¢˜å’Œå›¾ä¹¦é¦†çš„çœ‹æ³•ã€‚è¯·ä¿æŒæ–‡æ˜è®¨è®ºï¼Œè°¢è°¢ï¼

### [](#simple-api-hooks)ç®€å•çš„ API +é’©å­

è¯¥åº“çš„ API éå¸¸ç®€å•ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªåä¸º createContainer çš„å‡½æ•°ï¼Œç„¶åæˆ‘ä»¬å°†ä½¿ç”¨å†…ç½®çš„é’©å­æ¥å®Œæˆå…¶ä½™çš„å·¥ä½œã€‚å®ƒåœ¨å¾ˆå¤šæ–¹é¢éƒ½ä¸æ˜¯å¾ˆå›ºæ‰§å·±è§ï¼Œè¿™ä½¿å¾—å®ƒå¯ä»¥çµæ´»åœ°é€‚åº”ç”¨æˆ·æƒ³è¦çš„é£æ ¼å’Œç»„ç»‡ã€‚ä¸‹é¢è¿™ä¸ªç®€å•(è€Œä¸”éå¸¸ç®€å•)çš„ä¾‹å­å±•ç¤ºäº†å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

```
import React from "react"
import createContainer from "constate"

// Our custom hook that returns what will be available in our context
function useText() {
    const [text, setText] = React.useState('hello')

    const changeLang = () => {
        setText('hola')
    }

    return {
        text,
        changeLang,
    }
}

// Our container
const TextContainer = createContainer(useText)

// we now use the useContext hook to pull out the Context
function TextButton() {
    const { changeLang } = React.useContext(TextContainer.Context)
    return <button onClick={changeLang}>Change</button> }

function TextBox() {
    const { text } = React.useContext(TextContainer.Context)
    return <h1>{text}</h1> }

// the Container has a provider on it that we need to wrap our components in
function App() {
    return (
        <TextContainer.Provider>
            <TextButton />
            <TextBox />
        </TextContainer.Provider>
    )
} 
```

### [](#the-todo-list-example)å¾…åŠäº‹é¡¹ç¤ºä¾‹

æ˜¯çš„ï¼Œæˆ‘åˆ—äº†ä¸€å¼ å¾…åŠäº‹é¡¹æ¸…å•ã€‚å¦‚æœè¿™è®©ä½ éš¾è¿‡ï¼Œæˆ‘é“æ­‰ğŸ˜©ã€‚ä»¥åæˆ‘ä¼šåšæ›´å¤šåŸåˆ›çš„ä¾‹å­ğŸ˜ã€‚ä¸æ­¤åŒæ—¶ï¼Œè®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹ã€‚

```
// This is the useTodos custom hook that will be passed to createContainer
import React from 'react';

const useTodos = () => {
    const [ todos, setTodos ] = React.useState([]);
    const [ val, setVal ] = React.useState('')

    const addTodo = () => {
        setTodos([ val, ...todos ]);
        setVal('');
    }

    const updateForm = (e) => {
        setVal(e.target.value);
    }

    return {
        todos, 
        val, 
        addTodo, 
        updateForm
    }
}

export default useTodos; 
```

æ³¨æ„ä¸Šé¢æˆ‘æ˜¯å¦‚ä½•ç”¨ä¸åŒçš„æ–¹å¼æ¥å¤„ç†å®ƒçš„ã€‚æˆ‘å¯ä»¥æœ‰ä¸€ä¸ªåŒ…å«æ‰€æœ‰çŠ¶æ€çš„ useState è°ƒç”¨ï¼Œæˆ–è€…å¦‚æœæˆ‘æƒ³è¦ç±»ä¼¼ Redux çš„ä¸œè¥¿ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨ useReducerã€‚è¿™æ˜¾ç¤ºäº†åº“æä¾›çš„çµæ´»æ€§ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå±•ç¤ºäº†å¦‚ä½•è®¿é—®çŠ¶æ€å’ŒåŠŸèƒ½ã€‚ä½¿ç”¨ææ„ï¼Œæˆ‘å¯ä»¥è·å¾—è¿™ä¸ªç»„ä»¶éœ€è¦çš„æ‰€æœ‰å€¼å’Œå‡½æ•°ã€‚å…¶ä»–ç»„ä»¶ä»¥åŒæ ·çš„æ–¹å¼è®¿é—®çŠ¶æ€ã€‚

```
import React from 'react';
import TodoContainer from './TodoContainer';

const TodoInput = () => {
    const {val, updateForm, addTodo} = React.useContext(TodoContainer.Context);
    return (
        <div>
            <input value={val} onChange={updateForm}/>
            <button onClick={addTodo}>ADD</button>
        </div>
    );
}

export default TodoInput; 
```

åœ¨è¿™é‡Œæ‰¾åˆ°å‰©ä½™çš„ä»£ç ã€‚è€ƒè™‘åœ¨æ‚¨çš„ä¸‹ä¸€ä¸ªé¡¹ç›®ä¸­æ£€æŸ¥ constate å¹¶æ¢ç´¢ hooksã€‚æ„Ÿè°¢æ‚¨èŠ±æ—¶é—´é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼

## ![GitHub logo](../Images/a73f630113876d78cff79f59c2125b24.png) [ ChrisWcs ](https://github.com/ChrisWcs) / [ä¾‹ _of_constate](https://github.com/ChrisWcs/examples_of_constate)

### constate å’Œ react æŒ‚é’©çš„ä½¿ç”¨ç¤ºä¾‹

<article class="markdown-body entry-content container-lg" itemprop="text">

## ä½¿ç”¨ constate è¿›è¡ŒçŠ¶æ€ç®¡ç†çš„ç¤ºä¾‹

è¿™ä¸ªé¡¹ç›®æ˜¯ç”¨ [Create React App](https://github.com/facebook/create-react-app) å¼•å¯¼çš„ã€‚

</article>

[View on GitHub](https://github.com/ChrisWcs/examples_of_constate)