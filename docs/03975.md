# æé«˜æ‚¨çš„ Ruby Skillz:ä½¿ç”¨æ•°ç»„

> åŸæ–‡:[https://dev . to/Molly/level-up-your-ruby-skillz-working-with-arrays-hnn](https://dev.to/molly/level-up-your-ruby-skillz-working-with-arrays-hnn)

å½“æˆ‘åˆšå¼€å§‹å·¥ä½œæ—¶ï¼Œæœ‰ä¸€ä½é«˜çº§å·¥ç¨‹å¸ˆå’Œæˆ‘ä¸€èµ·å·¥ä½œï¼Œä»–æ˜¯å¤„ç†é˜µåˆ—çš„å¥‡æ‰ã€‚ä»–æ•™ä¼šäº†æˆ‘åœ¨å¤„ç†æ•°ç»„æ—¶ç¼–å†™ç®€æ´æ˜äº†çš„ä»£ç çš„æ‰€æœ‰æœ€ä½³æŠ€å·§ã€‚ä»¥ä¸‹æ˜¯æˆ‘è®¤ä¸ºæœ€æœ‰ç”¨çš„æ–¹æ³•ï¼Œæˆ‘è®¤ä¸ºä»ä¸€å¼€å§‹å°±åº”è¯¥æ”¾åœ¨ Ruby å·¥å…·ç®±ä¸­ã€‚

*   [T2`each`](#each)
*   [T2`map`](#map)
*   [T2`flat_map`](#flat_map)
*   [T2`select`](#select)
*   [T2`detect`](#detect)
*   [T2`reject`](#reject)
*   [T2`count`](#count)
*   [T2`partition`](#partition)
*   [T2`with_index`](#with_index)
*   [T2`chaining`](#chaining)

å¦‚æœä½ æƒ³ç›´æ¥è·³åˆ°æ²¡æœ‰è§£é‡Šçš„ä»£ç ï¼Œæ£€æŸ¥åº•éƒ¨çš„[å¤‡å¿˜å•](#cheatsheet)ï¼

# [`each`T4ã€‘](https://ruby-doc.org/core-2.6.0.preview2/Array.html#method-i-each)

åœ¨æˆ‘ä»¬æ·±å…¥ä¸Šé¢çš„ä¸€äº›æ›´å¥½çš„æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ä»æœ€åŸºæœ¬çš„å¼€å§‹ï¼Œ`each`ã€‚ [`each`](https://ruby-doc.org/core-2.6.0.preview2/Array.html#method-i-each) ä¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªç»™å®šå…ƒç´ è°ƒç”¨ä¸€æ¬¡ blockã€‚å½“å®ƒå®Œæˆæ—¶ï¼Œå®ƒå°†**è¿”å›åŸæ¥çš„æ•°ç»„ã€‚æœ€åä¸€éƒ¨åˆ†å¾ˆå…³é”®ï¼Œä¹Ÿå¾ˆå®¹æ˜“å¿˜è®°ã€‚å³ä½¿æ˜¯æˆ‘ä»¬è¿™äº›å’Œ Ruby ä¸€èµ·å·¥ä½œäº†ä¸€æ®µæ—¶é—´çš„äººï¼Œæœ‰æ—¶ä¹Ÿä¼šå¿˜è®°è¿™ä¸€ç‚¹ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ã€‚** 

```
result = [1, 2, 3].each do |number|
  puts 'hi'
end 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯¥ä»£ç åœ¨æ§åˆ¶å°ä¸­è¿è¡Œæ—¶å°†äº§ç”Ÿä»¥ä¸‹ç»“æœã€‚æ³¨æ„:åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œirb ä»…ä»…æ„å‘³ç€æˆ‘åœ¨ä¸€ä¸ª Ruby æ§åˆ¶å°ä¸­ã€‚

```
irb:> result = [1, 2, 3].each do |number|
>   puts "hi #{number}"
> end
hi 1
hi 2
hi 3
=> [1, 2, 3] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬æ‰“å°â€œhiâ€åŠ ä¸Šé‚£ä¸ªæ•°å­—ã€‚ç„¶åï¼Œåœ¨æˆ‘ä»¬éå†å®Œæ•´ä¸ªæ•°ç»„åï¼Œæˆ‘ä»¬çš„åŸå§‹æ•°ç»„è¢«è¿”å›ã€‚

è¯·è®°ä½ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ä¸Šé¢çš„`do/end`å—ç¬¦å·ï¼Œä½†æ˜¯æ‚¨ä¹Ÿå¯ä»¥ä¸ºæ‚¨çš„å—ä½¿ç”¨æ‹¬å·è¯­æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

```
irb:> result = [1, 2, 3].each{|number| puts "hi #{number}"}
hi 1
hi 2
hi 3
=> [1, 2, 3] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æ‚¨æ‰€è§ï¼Œä¸ç®¡è¯­æ³•å¦‚ä½•ï¼Œç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚æˆ‘å°†åœ¨æœ¬æŒ‡å—ä¸­ç»§ç»­ä½¿ç”¨`do/end`è¯­æ³•ï¼Œå› ä¸ºæˆ‘è®¤ä¸ºå®ƒä½¿ä»£ç å’Œé€»è¾‘æ›´å®¹æ˜“ç†è§£ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰è¿™äº›æ–¹æ³•éƒ½å¯ä»¥ä½¿ç”¨æ‹¬å·è¯­æ³•ã€‚

# [`map`T4ã€‘](https://ruby-doc.org/core-2.6.3/Array.html#method-i-map)

åœ¨æ—©æœŸï¼Œå½“æˆ‘åˆšæ¥è§¦ Ruby æ—¶ï¼Œæ¯æ¬¡æˆ‘æƒ³æ„å»ºä¸€ä¸ªæ•°ç»„æ—¶ï¼Œæˆ‘éƒ½ä¼šè¿™æ ·åš:

```
result = []
[1, 2, 3, 4].each do |number|
  result << number + 2
end
# result = [3, 4, 5, 6] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘å¾ˆå¿«äº†è§£åˆ°æœ‰ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•ï¼Œé‚£å°±æ˜¯ä½¿ç”¨`map`ã€‚ [`map`](https://ruby-doc.org/core-2.6.3/Array.html#method-i-map) è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯å¯¹åŸå§‹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡è¯¥å—ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­:

```
result = [1, 2, 3, 4].map do |number|
  number + 2
end
# result = [3, 4, 5, 6] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬å°†åŸå§‹æ•°ç»„ä¸­çš„æ¯ä¸ªæ•°å­—åŠ  2ï¼Œç„¶åå°†è¿™äº›ç»“æœç»„åˆæˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œè¯¥æ•°ç»„å°†è¢«è¿”å›ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬çš„ä»£ç æ›´ç®€æ´äº†ã€‚

# [`flat_map`T4ã€‘](https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-flat_map)

`map`éå¸¸é€‚åˆæ”¶é›†ä¸€ç»„ç»“æœï¼Œä½†æ˜¯å½“æ‚¨æƒ³è¦æ˜ å°„åµŒå¥—æ•°ç»„æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿè¿™æ—¶å€™`flat_map`å°±æ´¾ä¸Šç”¨åœºäº†ã€‚å¦‚æœä½ å‘ç°è‡ªå·±æœ‰ä¸€ç»„åµŒå¥—æ•°ç»„ï¼Œé‚£ä¹ˆä½ å¯èƒ½æƒ³æ£€æŸ¥ä¸€ä¸‹`flat_map`ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨æœ‰è¿™æ ·çš„ä»£ç ï¼ŒåŒ…å«å‡ ä¸ªåµŒå¥—æ•°ç»„ã€‚

```
result = []
[1, 2, 3].each do |number|
  ['a', 'b', 'c'].each do |letter|
    result << "#{number}:#{letter}"
  end
end
# result = ["1:a", "1:b", "1:c", "2:a", "2:b", "2:c", "3:a", "3:b", "3:c"] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªå•çº§æ•°ç»„ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œä½†æ˜¯æˆ‘ä»¬æ€æ ·æ‰èƒ½æŠŠå®ƒæ”¶ç´§å‘¢ï¼Ÿæˆ‘ä»¬è¯•è¯•ç”¨`map`ã€‚

```
result = [1, 2, 3].map do |number|
  ['a', 'b', 'c'].map do |letter|
    "#{number}:#{letter}"
  end
end
# result = [["1:a", "1:b", "1:c"], ["2:a", "2:b", "2:c"], ["3:a", "3:b", "3:c"]] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å—¯ï¼Œé‚£ä¸å®Œå…¨æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚æˆ‘ä»¬æƒ³è¦ä¸€ä¸ªæ‰å¹³çš„å•å±‚æ•°ç»„ï¼Œè€Œ`map`æ­£åœ¨åˆ›å»ºä¸€ä¸ªåµŒå¥—æ•°ç»„ã€‚ä¸ºäº†å±•å¹³åµŒå¥—æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`flat_map`ã€‚

```
result = [1,2,3].flat_map do |number|
  ['a', 'b', 'c'].map do |letter|
    "#{number}:#{letter}"
  end
end
# result = ["1:a", "1:b", "1:c", "2:a", "2:b", "2:c", "3:a", "3:b", "3:c"] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

[`flat_map`](https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-flat_map) çš„å·¥ä½œæ–¹å¼ä¸`map`ç±»ä¼¼ï¼Œå®ƒå°†ä½ çš„ç¨‹åºå—çš„ç»“æœæ”¶é›†åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä½†ä½œä¸ºå¥–åŠ±ï¼Œå®ƒä¼šå°†å®ƒå±•å¹³ã€‚åœ¨å¹•åï¼Œ`flat_map`å°†[æ‰€æœ‰çš„å†…éƒ¨æ•°ç»„è¿æ¥æˆä¸€ä¸ªæ•°ç»„ã€‚ä½¿ç”¨`flat_map`è¿”å›æˆ‘ä»¬æƒ³è¦çš„å•çº§æ•°ç»„ã€‚](https://ruby-doc.org/core-2.6.3/Array.html#method-i-concat)

# [`select`T4ã€‘](https://ruby-doc.org/core-2.6.3/Array.html#method-i-select)

ç±»ä¼¼äº`map`çš„ä¾‹å­ï¼Œå½“æˆ‘å¼€å§‹æ—¶ï¼Œå¦‚æœæˆ‘æƒ³æœ‰æ¡ä»¶åœ°ä»ä¸€ä¸ªæ•°ç»„ä¸­é€‰æ‹©å…ƒç´ ï¼Œä¾‹å¦‚ï¼Œé€‰æ‹©æ‰€æœ‰çš„å¶æ•°ï¼Œæˆ‘ä¼šè¿™æ ·åš:

```
result = []
[1, 2, 3, 4].each do |number|
  result << number if number.even?
end
# result = [2, 4] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ç§æ›´ç®€æ´çš„æ–¹æ³•ï¼Œé‚£å°±æ˜¯ä½¿ç”¨`select`ã€‚ [`select`](https://ruby-doc.org/core-2.6.3/Array.html#method-i-select) è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„åŒ…å«ç»™å®šå—è¿”å›çœŸå€¼çš„æ‰€æœ‰å…ƒç´ ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·é‡å†™ä¸Šé¢çš„ä»£ç å—ï¼

```
result = [1, 2, 3, 4].select do |number|
  number.even?
end
# result = [2,4] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [`detect`T4ã€‘](https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-detect)

ç°åœ¨æˆ‘ä»¬è¦æŠŠå®ƒæå‡ä¸€ä¸ªæ¡£æ¬¡ã€‚å¦‚æœä¸å¸Œæœ›ä»æ•°ç»„ä¸­è¿”å›æ‰€æœ‰å¶æ•°ï¼Œè€Œåªå¸Œæœ›æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¶æ•°ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿä¸ºæ­¤ä½ å¯ä»¥ä½¿ç”¨`detect`ã€‚ [`detect`](https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-detect) å°†è¿”å›å—è¯„ä¼°ä¸ºçœŸçš„ç¬¬ä¸€ä¸ªæ¡ç›®ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬è¿è¡Œä¸ä¸Šé¢ç±»ä¼¼çš„ä»£ç å—ï¼Œä½†æ˜¯ç”¨`detect`æ›¿æ¢`select`ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åªå¾—åˆ°ç¬¬ä¸€ä¸ªå¶æ•°ã€‚

```
result = [1, 2, 3, 4].detect do |number|
  number.even?
end
# result = 2 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°å­—(æˆ‘ä»¬çš„æ¡ç›®)è€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚

ä½†æ˜¯å¦‚æœæˆ‘ä»¬çš„å—ä»æ¥æ²¡æœ‰è¯„ä¼°ä¸ºçœŸä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå¦‚æœæ•°ç»„ä¸­æ²¡æœ‰å¶æ•°å‘¢ï¼Ÿåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`detect`å°†è¿”å› nilã€‚

```
result = [1, 3, 5, 7].detect do |number|
  number.even?
end
# result = nil 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ€»è€Œè¨€ä¹‹ï¼Œ`detect`å°†è¿”å›å—ä¸­ç¬¬ä¸€ä¸ªæ±‚å€¼ä¸ºçœŸçš„æ¡ç›®ï¼Œæˆ–è€…å¦‚æœå—ä¸­æ²¡æœ‰æ¡ç›®æ±‚å€¼ä¸ºçœŸï¼Œå®ƒå°†è¿”å›é›¶ã€‚

# [`reject`T4ã€‘](https://ruby-doc.org/core-2.6.3/Array.html#method-i-reject)

ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹`select`çš„é€†ï¼Œä¹Ÿå°±æ˜¯`reject`ã€‚ [`reject`](https://ruby-doc.org/core-2.6.3/Array.html#method-i-reject) å°†è¿”å›æ‚¨çš„å—è¯„ä¼°ä¸ºå‡çš„æ‰€æœ‰æ¡ç›®ã€‚æ‰€ä»¥ä¸è¿™æ ·åš:

```
result = []
[1, 2, 3, 4].each do |number|
  result << number if !number.even?
end
# result = [1, 3] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬å¯ä»¥ç®€åŒ–ä¸Šé¢çš„ä»£ç ï¼Œæ”¹ä¸ºè¿™æ ·åš:

```
result = [1, 2, 3, 4].reject do |number|
  number.even?
end
# result = [1, 3] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸€æ¬¡æˆ‘ä»¬å°†è¿”å›æ¯ä¸ªä¸æ˜¯å¶æ•°çš„æ•°å­—ï¼Œå› æ­¤é‚£äº›åœ¨`number.even?`å¤„çš„æ•°å­—å°†è¿”å› falseã€‚

# [`partition`T4ã€‘](https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-partition)

æˆ‘ä»¬åˆšåˆšçœ‹åˆ°äº†åœ¨ Ruby ä¸­ä½¿ç”¨`select`å’Œ`reject`è¿‡æ»¤æ•°ç»„çš„ä¸¤ç§æ–¹æ³•ã€‚ä½†æ˜¯å¦‚æœä½ æƒ³æŠŠä½ çš„æ•°ç»„åˆ†æˆä¸¤ä¸ªæ•°ç»„ï¼Œä¸€ä¸ªæ˜¯å¶æ•°æ•°ç»„ï¼Œä¸€ä¸ªæ˜¯å¥‡æ•°æ•°ç»„ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå®ç°è¿™ä¸€ç‚¹çš„ä¸€ä¸ªæ–¹æ³•æ˜¯åš:

```
even = [1, 2, 3, 4].select do |number|
  number.even?
end
# even = [2, 4]
odd = [1, 2, 3, 4].reject do |number|
  number.even?
end
# odd = [1, 3] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•ï¼Œä½ å¯ä»¥ä½¿ç”¨`partition`ï¼ä¸ºäº†è¿™ä¸€ä¸ªæŠ“ç´§ä½ çš„åº§ä½ã€‚ [`partition`](https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-partition) å°†è¿”å›ä¸¤ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªåŒ…å«å—è¯„ä¼°ä¸ºçœŸçš„åŸå§‹æ•°ç»„çš„å…ƒç´ ï¼Œç¬¬äºŒä¸ªåŒ…å«å…¶ä½™çš„å…ƒç´ ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æŠŠä¸Šé¢å†™çš„ä¸œè¥¿ç®€åŒ–æˆ:

```
result = [1, 2, 3, 4].partition do |number|
  number.even?
end
# result = [[2, 4], [1, 3]] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æ‚¨æ‰€è§ï¼Œ`partition`å°†è¿”å›ä¸¤ä¸ªæ•°ç»„ï¼Œä¸€ä¸ªæ˜¯å¶æ•°ï¼Œä¸€ä¸ªæ˜¯å¥‡æ•°ã€‚å¦‚æœæˆ‘ä»¬æƒ³ç»™æˆ‘ä»¬çš„`even`å’Œ`odd`å˜é‡èµ‹å€¼ï¼Œæˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯

```
even = result.first
odd = result.last 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶è€Œï¼Œæ­£å¦‚ä½ å¯èƒ½çŒœåˆ°çš„ï¼Œæœ‰ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•ï¼æˆ‘ä»¬å¯ä»¥å®Œå…¨å»æ‰å•ä¸ªçš„`result`å˜é‡ï¼Œå†™æˆè¿™æ ·çš„ä¸œè¥¿

```
even, odd = [1, 2, 3, 4].partition do |number|
  number.even?
end
# even = [2, 4] and odd = [1, 3] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸ªè¯­æ³•ä¼šè‡ªåŠ¨å°†ç¬¬ä¸€ä¸ªæ•°ç»„åˆ†é…ç»™`even`ï¼Œå°†ç¬¬äºŒä¸ªæ•°ç»„åˆ†é…ç»™`odd`ã€‚åœ¨å¤„ç†åµŒå¥—æ•°ç»„æ—¶ï¼Œå¯ä»¥éšæ—¶ä½¿ç”¨è¿™ç§æ•°ç»„èµ‹å€¼è¯­æ³•ã€‚è¿™æ˜¯ä¸€ä¸ªå¦‚ä½•åˆ†è§£ 3 ä¸ªæ•°ç»„çš„ä¾‹å­ã€‚

```
irb:> a, b, c = [[1], [2], [3]]
=> [[1], [2], [3]]
irb:> a
=> [1]
irb:> b
=> [2]
irb:> c
=> [3] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [`count`T4ã€‘](https://ruby-doc.org/core-2.6.3/Array.html#method-i-count)

é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šè®¡ç®—æ•°ç»„ä¸­å…ƒç´ çš„æ•°é‡ã€‚

```
irb:> [1, 1, 2, 2, 3, 3].count
=> 6 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯ï¼Œæ‚¨çŸ¥é“å®ƒè¿˜èƒ½åšæ›´å¤šçš„äº‹æƒ…å—ï¼Ÿå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œå¯ä»¥é€šè¿‡`count`è¿›è¡Œè®ºè¯ã€‚å¦‚æœä½ ä¼ é€’ [`count`](https://ruby-doc.org/core-2.6.3/Array.html#method-i-count) ä¸€ä¸ªå‚æ•°ï¼Œå®ƒä¼šè®¡ç®—è¿™ä¸ªå‚æ•°åœ¨ä½ çš„æ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚

```
irb:> [1, 1, 2, 2, 3, 3].count(1)
=> 2
irb:> ['a', 'a', 'b', 'c'].count('c')
=> 1 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿˜å¯ä»¥é€šè¿‡ [`count`](https://ruby-doc.org/core-2.6.3/Array.html#method-i-count) ä¸€æŒ¡ï¼ğŸ˜²å½“ä¼ é€’ç»™ block æ—¶ï¼Œ`count`å°†è¿”å› block è¯„ä¼°ä¸ºçœŸçš„æ¡ç›®æ•°ã€‚

```
irb:> [1, 1, 2, 2, 3, 3].count do |number|
  number.odd?
end
=> 4 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬è®¡ç®—äº†æ•°ç»„ä¸­çš„æ¯ä¸ªå¥‡æ•°ï¼Œè¿”å›çš„ç»“æœæ˜¯ 4ã€‚

# [`with_index`T4ã€‘](https://ruby-doc.org/core-2.6.0.rc1/Enumerator.html#method-i-with_index)

æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œæˆ‘æƒ³è°ˆè°ˆç”¨ç´¢å¼•éå†æ•°ç»„ã€‚é€šå¸¸ï¼Œå½“æˆ‘ä»¬æƒ³çŸ¥é“æˆ‘ä»¬åœ¨ä¸€ä¸ªå…ƒç´ æ•°ç»„ä¸­çš„ä½ç½®æ—¶ï¼Œæˆ‘ä»¬ä¼šè¿™æ ·åšã€‚

```
irb:> index = 0
irb:> ['a', 'b', 'c'].each do |letter|
  puts index
  index += 1
end
0
1
2 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯ï¼Œæœ‰æ›´å¥½çš„åŠæ³•ï¼ä½ å¯ä»¥ä½¿ç”¨ [`with_index`](https://ruby-doc.org/core-2.6.0.rc1/Enumerator.html#method-i-with_index) å’Œ`each`ï¼Œæˆ–è€…æˆ‘ä¸Šé¢åˆ—å‡ºçš„ä»»ä½•æ–¹æ³•ï¼Œæ¥å¸®åŠ©ä½ è·Ÿè¸ªä½ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚è¿™é‡Œæœ‰ä¸€äº›ä½ å¦‚ä½•ä½¿ç”¨å®ƒçš„ä¾‹å­ã€‚(è®°ä½:æ•°ç»„ç´¢å¼•ä» 0 å¼€å§‹ğŸ˜ƒ)

```
irb:> ['a', 'b', 'c'].each.with_index do |letter, index|
  puts index
end
0
1
2 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åªæ˜¯ç®€å•åœ°è¿­ä»£æ•°ç»„ï¼Œå¹¶æ‰“å°å‡ºæ¯ä¸ªå…ƒç´ çš„ç´¢å¼•ã€‚

```
result = ['a', 'b', 'c'].map.with_index do |letter, index|
  "#{letter}:#{index}"
end
# result = ["a:0", "b:1", "c:2"] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨`map`æ–¹æ³•å°†ç´¢å¼•å’Œæ•°ç»„ä¸­çš„å­—æ¯ç»„åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚

```
result = ['a', 'b', 'c'].select.with_index do |letter, index|
  index == 2
end
# result = ["c"] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸ªä¾‹å­æœ‰ç‚¹å¤æ‚ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ç´¢å¼•æ¥å¸®åŠ©æˆ‘ä»¬é€‰æ‹©æ•°ç»„ä¸­ç´¢å¼•ç­‰äº 2 çš„å…ƒç´ ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå…ƒç´ æ˜¯â€œcâ€ã€‚

# [](#-raw-chaining-endraw-)`chaining`

æˆ‘æƒ³ç•™ç»™ä½ ä»¬çš„æœ€åä¸€ç‚¹çŸ¥è¯†æ˜¯ï¼Œä¸Šé¢ä»»ä½•è¿”å›ä¸€ä¸ªæ•°ç»„çš„æ–¹æ³•(é™¤äº†`count`å’Œ`detect`)éƒ½å¯ä»¥é“¾æ¥åœ¨ä¸€èµ·ã€‚å¯¹äºè¿™äº›ä¾‹å­ï¼Œæˆ‘å°†ä½¿ç”¨æ‹¬å·ç¬¦å·ï¼Œå› ä¸ºæˆ‘è®¤ä¸ºä»å·¦å‘å³æ¯”ä»ä¸Šå‘ä¸‹æ›´å®¹æ˜“é˜…è¯»é“¾æ¥æ–¹æ³•ã€‚

ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥è¿™æ ·åš:

```
result = [1, 2, 3, 4].map{|n| n + 2}.select{|n| n.even?}.reject{|n| n == 6}.map{|n| "hi #{n}"} 
# result = ["hi 4"] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ ¹æ®æˆ‘ä»¬åœ¨ä¸Šé¢å­¦åˆ°çš„çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™é‡Œæ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ã€‚
1) `map`å°†ä¸ºæˆ‘ä»¬çš„æ¯ä¸ªæ•°ç»„å…ƒç´ åŠ  2 å¹¶è¿”å›`[3, 4, 5, 6]`
2) `select`å°†åªä»æ•°ç»„ä¸­é€‰æ‹©å¶æ•°å¹¶è¿”å›`[4, 6]`
3) `reject`å°†åˆ é™¤ä»»ä½•ç­‰äº 6 çš„æ•°å­—ï¼Œå‰©ä¸‹çš„æ˜¯`[4]`
4)æˆ‘ä»¬æœ€ç»ˆçš„`map`å°†åœ¨ 4 å‰é¢åŠ ä¸Šâ€œhiâ€å¹¶è¿”å›`["hi 4"]`

# [](#you-made-it)ä½ åšåˆ°äº†ï¼ï¼ï¼ï¼

[![](../Images/e146c406bec34266db04db4b207b313b.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--4QjOOMLx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/0hw597r707r9a3koalyf.gif) 
æ­å–œä½ ï¼Œä½ ä¸€è·¯èµ°åˆ°äº†ç»ˆç‚¹ï¼å¸Œæœ›æ‚¨åœ¨ç¼–å†™ Ruby ä»£ç æ—¶ä¼šå‘ç°è¿™äº›æ•°ç»„æ–¹æ³•å¾ˆæœ‰ç”¨ã€‚å¦‚æœæœ‰ä»»ä½•ä¸æ¸…æ¥šçš„åœ°æ–¹ï¼Œè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ã€‚è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å†™æ•™ç¨‹ï¼Œæ‰€ä»¥æˆ‘æ¬¢è¿ä»»ä½•åé¦ˆğŸ¤—

å¦‚æœä½ æƒ³è¦æ‰€æœ‰è¿™äº›æ²¡æœ‰å†—é•¿è§£é‡Šçš„ä»£ç ç¤ºä¾‹ï¼Œè¯·æŸ¥çœ‹[è¿™ä»½ç”±](https://paper.dropbox.com/doc/Ruby-Array-Methods--AcuxIuoFBAtO4Q1CxBDuNrVsAg-cRF8GIgVFnC3zhfINk7Wy) [@lukewduncan](https://dev.to/lukewduncan) å¤§æ–¹æ•´ç†çš„å¤‡å¿˜å•ï¼