# åˆ›å»ºçµæ´»çš„ç»„ä»¶

> åŸæ–‡:[https://dev.to/selbekk/creating-flexible-components-p7k](https://dev.to/selbekk/creating-flexible-components-p7k)

åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶å¾ˆéš¾ã€‚å¼„æ¸…æ¥š API æ˜¯ä¸€ä»¶ç—›è‹¦çš„äº‹ï¼Œå†³å®šç‰¹æ€§å¹¶ä¸å®¹æ˜“ï¼Œåªæ˜¯ç²—åˆ¶æ»¥é€ ä»£ç ä¹Ÿä¸é€‚åˆèƒ†å°çš„äººã€‚

è¿™ç¯‡åšå®¢æ–‡ç« å°†å¸¦ä½ äº†è§£æˆ‘ä»¬å¦‚ä½•åˆ›å»ºä¸€ä¸ªå¯é‡ç”¨çš„è¾“å…¥ç»„ï¼Œè¿™ä½¿å¾—ç»„åˆè¡¨å•åŸŸå˜å¾—å®¹æ˜“ã€‚æˆ‘ä¼šè§£é‡Šä»€ä¹ˆæ˜¯è¾“å…¥ç»„ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒåšä»€ä¹ˆï¼Œå¹¶é€æ­¥å®ç°å®ƒã€‚å½“æˆ‘ä»¬å®Œæˆæ—¶ï¼Œæ‚¨å°†èƒ½å¤Ÿåˆ›å»ºæ‚¨è‡ªå·±çš„ç»„ä»¶â€”â€”å¹¶ä¸”æœ‰å¸Œæœ›å¯¹ä»¥åç¼–å†™ç»„ä»¶æ„Ÿåˆ°æ›´åŠ å®‰å…¨ã€‚

è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ­£åœ¨åˆ›å»ºçš„ç»„ä»¶åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚æ‚¨å¯èƒ½ä¸éœ€è¦åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨è¿™ä¸ªç‰¹å®šçš„ç»„ä»¶ï¼Œä½†æ˜¯æ‚¨å°†æ¥è‚¯å®šä¼šä½¿ç”¨å…¶ä¸­çš„ä¸€äº›æŠ€æœ¯ã€‚

## [](#so-whats-an-input-group)é‚£ä¹ˆä»€ä¹ˆæ˜¯è¾“å…¥ç»„å‘¢ï¼Ÿ

æˆ‘ä¸è®¤ä¸ºä½ ä¼šåœ¨ä»»ä½•åœ°æ–¹æ‰¾åˆ°æ•™ç§‘ä¹¦çš„å®šä¹‰ï¼Œä½†å¯¹æˆ‘æ¥è¯´ï¼Œè¾“å…¥ç»„æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒæ˜¾ç¤ºæŸç§å½¢å¼çš„è¾“å…¥ï¼Œåˆ›å»ºä¸€ä¸ªç›¸å…³çš„æ ‡ç­¾ï¼Œæ˜¾ç¤ºä¸€ä¸ªé”™è¯¯æ¶ˆæ¯(å¦‚æœæœ‰çš„è¯)ï¼Œå¹¶å¤„ç†å°½å¯èƒ½å¤šçš„å¯è®¿é—®æ€§é—®é¢˜ï¼Œè€Œç”¨æˆ·ä¸å¿…è€ƒè™‘å®ƒã€‚åŸºæœ¬ä¸Šè¡¨å•è¾“å…¥éœ€è¦çš„æ‰€æœ‰ä¸œè¥¿ï¼Œé™¤äº†å®ƒè‡ªå·±ã€‚

> ä¸€ä¸ªè¾“å…¥ç»„æ˜¯ä¸€ä¸ªç»„ä»¶
> <cite>å…‹é‡Œæ–¯æ‰˜å¤«Â·å¡å°”è´å…‹</cite>

è¿™å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦åˆ›é€ çš„â€”â€”ä¸€æ­¥ä¸€æ­¥ï¼Œä¸€ç‚¹ä¸€ç‚¹ã€‚æ‰€ä»¥è®©æˆ‘ä»¬å¼€å§‹å§ï¼

## [](#step-1-show-some-kind-of-form-input)ç¬¬ä¸€æ­¥:æ˜¾ç¤ºæŸç§è¡¨å•è¾“å…¥

é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸º`InputGroup`çš„ç»„ä»¶ï¼Œå®ƒå‘ˆç°æˆ‘ä»¬ä¼ é€’ç»™å®ƒçš„ä»»ä½•å­ç»„ä»¶:

```
function InputGroup(props) {
  return (
    <div>{props.children}</div>
  );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»ä½•å½¢å¼çš„è¾“å…¥ä¼ é€’ç»™æˆ‘ä»¬çš„ç»„ä»¶:

```
<InputGroup>
  <input />
</InputGroup> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¥½å§ï¼Œè¿™å¹¶ä¸éš¾ï¼Œæ˜¯å§ï¼Ÿè¿˜å’Œæˆ‘åœ¨ä¸€èµ·å—ï¼Ÿ

## [](#step-2-create-a-related-label)ç¬¬äºŒæ­¥:åˆ›å»ºç›¸å…³æ ‡ç­¾ï¼

æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå‘ç»„ä»¶ä¼ é€’ä¸€ä¸ªæ ‡ç­¾æ–‡æœ¬ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª`label`é“å…·:

```
function InputGroup(props) {
  return (
    <div>
      <label>{props.label}</label>
      {props.children}
    </div>
  );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œæˆ‘ä»¬è¦ç¡®ä¿æ ‡ç­¾ä»¥æŸç§æ–¹å¼é™„åŠ åˆ°è¾“å…¥ä¸Šã€‚æˆ‘ä»¬ä¸ºæ­¤ä½¿ç”¨äº†`htmlFor`å±æ€§ã€‚æˆ‘ä»¬æ¥å— ID ä½œä¸ºé“å…·ï¼Œç„¶åå°†å®ƒåº”ç”¨äºæ ‡ç­¾:

```
function InputGroup(props) {
  return (
    <div>
      <label htmlFor={props.id}>{props.label}</label>
      {props.children}
    </div>
  );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æœ‰ç‚¹çƒ¦äººâ€”â€”æˆ‘ä»¬éœ€è¦å°† ID ä¼ é€’ç»™æˆ‘ä»¬çš„`InputGroup`å’Œæˆ‘ä»¬çš„è¾“å…¥ã€‚è®©æˆ‘ä»¬å°†å…¶è‡ªåŠ¨åº”ç”¨åˆ°è¾“å…¥:

```
function InputGroup(props) {
  return (
    <div>
      <label htmlFor={props.id}>
        {props.label}
      </label>
      {React.Children.map(
        props.children, 
        child => React.cloneElement(child, { id: props.id })
      )}
    </div>
  );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä»€ä¹ˆï¼Œ`React.Children`ï¼Ÿ`React.cloneElement`ï¼Ÿè¿™äº› API å¾ˆå°‘ä½¿ç”¨ï¼Œä½†æ˜¯å®ƒä»¬éå¸¸å¼ºå¤§ã€‚åŸºæœ¬ä¸Šå‘ç”Ÿçš„äº‹æƒ…æ˜¯:ä¸ºæ¯ä¸ªä¼ å…¥è¿™ä¸ªç»„ä»¶çš„å­ç»„ä»¶åˆ›å»ºä¸€ä¸ªå‰¯æœ¬ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªé¢å¤–çš„`id`é“å…·ã€‚

> è®©æˆ‘ä»¬æŠŠå­©å­æ˜ å°„æˆä¸€ä¸ªæ•°ç»„ã€‚è¯¦è§[æ–‡æ¡£](https://reactjs.org/docs/react-api.html#reactchildren)ã€‚
> 
> åˆ›å»ºä¸€ä¸ª React å…ƒç´ çš„å‰¯æœ¬ï¼Œå¹¶è®©æˆ‘ä»¬ç”¨è‡ªå·±çš„ç‰ˆæœ¬è¦†ç›–ä»»ä½•ä¼ å…¥çš„å±æ€§ã€‚è¯¦è§[æ–‡æ¡£](https://reactjs.org/docs/react-api.html#cloneelement)ã€‚

æœ‰äº†è¿™ä¸ªï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸€æ¬¡ä¼ å…¥æˆ‘ä»¬çš„ IDï¼Œå¹¶ä¸ºè¡¨å•æ ‡ç­¾æä¾›ä¸€ä¸ªå¯è®¿é—®çš„æ ‡ç­¾ã€‚

```
<InputGroup id="first-name" label="First name">
  <input />
</InputGroup> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#bonus-skip-the-id-altogether)å¥–åŠ±:å®Œå…¨è·³è¿‡ ID

å¾ˆæœ‰å¯èƒ½ï¼Œä½ å¹¶ä¸çœŸæ­£å…³å¿ƒ IDã€‚æˆ‘ä»¬åœ¨è¿™é‡Œéœ€è¦ä¸€ä¸ªæ ‡ç­¾çš„äº‹å®æ˜¯æ ‡ç­¾å’Œè¾“å…¥å·¥ä½œæ–¹å¼çš„å®ç°ç»†èŠ‚ã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥å®Œå…¨è·³è¿‡ä¼ é€’å®ƒï¼Œä¸æ˜¯å¾ˆå¥½å—ï¼Ÿ

äº‹å®è¯æ˜ï¼Œè¿™æ˜¯å¾ˆæœ‰å¯èƒ½çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªéšæœºçš„å­—ç¬¦ä¸²ç”Ÿæˆå™¨æ¥åˆ›å»ºä¸€ä¸ª IDï¼Œå¦‚æœæ²¡æœ‰æä¾› IDï¼Œå°±ç”¨å®ƒæ¥åˆ›å»ºä¸€ä¸ª IDã€‚

```
import uuid from 'uuid/v4';

function InputGroup(props) {
  const id = React.useMemo(() => props.id ||Â 'input-'+ uuid(), [props.id])
  return (
    <div>
      <label htmlFor={id}>
        {props.label}
      </label>
      {React.Children.map(
        props.children, 
        child => React.cloneElement(child, { id })
      )}
    </div>
  );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨`React.useMemo`é’©å­æ¥é¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶åˆ›å»ºæ–°çš„ idã€‚æˆ‘ä»¬å°†`props.id`ä¼ é€’ç»™å®ƒçš„ä¾èµ–æ•°ç»„ï¼Œç¡®ä¿æˆ‘ä»¬åªåœ¨ id å±æ€§ç”±äºæŸç§åŸå› æ”¹å˜æ—¶æ‰é‡æ–°åˆ›å»º IDã€‚

è¿˜è¦æ³¨æ„ï¼Œå¦‚æœå‡ºäºæŸç§åŸå› éœ€è¦ï¼Œæˆ‘ä»¬è®©æ¶ˆè´¹è€…è®¾ç½®è‡ªå·±çš„ IDã€‚è¿™æ˜¯ç»„ä»¶ API è®¾è®¡çš„ä¸€ä¸ªé‡è¦åŸåˆ™:

> å…è®¸æ¶ˆè´¹è€…è¦†ç›–ä»»ä½•è‡ªåŠ¨ç”Ÿæˆçš„å€¼ï¼

## [](#step-3-add-error-handling)ç¬¬ä¸‰æ­¥:æ·»åŠ é”™è¯¯å¤„ç†

å¤§å¤šæ•°è¡¨å•éƒ½å®ç°äº†æŸç§éªŒè¯ã€‚æœ‰å¾ˆå¤šå¾ˆæ£’çš„éªŒè¯åº“(æˆ‘ç”šè‡³åˆ›å»ºäº†è‡ªå·±çš„-[calidization](https://github.com/selbekk/calidation)ï¼)ï¼Œç•™ç»™è¯»è€…ä¸€ä¸ªé€‰æ‹©ã€‚æˆ‘ä»¬å°†è¦æ·»åŠ çš„æ˜¯ä¸€ç§åœ¨æˆ‘ä»¬çš„`InputGroup`ç»„ä»¶ä¸­æ˜¾ç¤ºéªŒè¯é”™è¯¯çš„æ–¹æ³•ã€‚

æˆ‘ä»¬ä»æ·»åŠ ä¸€ä¸ª`error`é“å…·å¼€å§‹ï¼Œå¹¶å°†å…¶æ¸²æŸ“åˆ°æˆ‘ä»¬çš„`children` :
ä¸‹é¢

```
function InputGroup(props) {
  const id = React.useMemo(() => props.id ||Â 'input-'+ uuid(), [props.id])
  return (
    <div>
      <label htmlFor={id}>
        {props.label}
      </label>
      {React.Children.map(
        props.children, 
        child => React.cloneElement(child, { id })
      )}
      {props.error && (
        <div>{props.error}</div>
      )}
    </div>
  );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å¾ˆç®€å•ï¼Œä½†æ˜¯è®©æˆ‘ä»¬æŠŠæ¸¸æˆå‘å‰æ¨è¿›ä¸€ç‚¹ç‚¹ã€‚ä¸ºäº†å¸®åŠ©å±å¹•é˜…è¯»å™¨å’Œå…¶ä»–è¾…åŠ©æŠ€æœ¯ï¼Œæˆ‘ä»¬åº”è¯¥å°†è¾“å…¥å­—æ®µæ ‡è®°ä¸ºæ— æ•ˆã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è¡¨å•è¾“å…¥:
ä¸Šè®¾ç½®`aria-invalid`å±æ€§æ¥åšåˆ°è¿™ä¸€ç‚¹

```
function InputGroup(props) {
  const id = React.useMemo(() => props.id ||Â 'input-'+ uuid(), [props.id])
  const isInvalid = props['aria-invalid'] ||Â String(!!props.error);
  return (
    <div>
      <label htmlFor={id}>
        {props.label}
      </label>
      {React.Children.map(
        props.children, 
        child => React.cloneElement(child, { id, 'aria-invalid': isInvalid })
      )}
      {props.error && (
        <div>{props.error}</div>
      )}
    </div>
  );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œï¼Œæˆ‘ä»¬å°†è¡¨å•è¾“å…¥çš„`aria-invalid`å±æ€§è®¾ç½®ä¸ºâ€œtrue â€,å¦‚æœä¼ é€’äº†ä¸€ä¸ªé false çš„`error`å±æ€§ï¼Œå¦‚æœé”™è¯¯ä¸ºç©ºæˆ–æœªå®šä¹‰ï¼Œåˆ™è®¾ç½®ä¸ºâ€œfalseâ€ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªå±æ€§å¼ºåˆ¶è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå› ä¸ºè¿™æ˜¯ DOM æ‰€æœŸæœ›çš„ã€‚

æœ€åï¼Œæˆ‘ä»¬è¿˜è®©æ¶ˆè´¹è€…è‡ªå·±ä¼ å…¥`aria-invalid`æ¥è¦†ç›–è¿™ä¸ªå€¼ã€‚

## [](#step-4-make-it-flexible)ç¬¬å››æ­¥:è®©å®ƒçµæ´»ğŸ§˜â€â™‚ï¸

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªç›¸å½“å¯é çš„è¾“å…¥ç»„ç»„ä»¶ã€‚å®ƒå¤„ç†å¯è®¿é—®æ€§é—®é¢˜ï¼Œæ˜¾ç¤ºè¾“å…¥æ ‡ç­¾å’Œé”™è¯¯ï¼Œè®©æˆ‘ä»¬ä¼ é€’ä»»ä½•æƒ³è¦çš„è¾“å…¥ã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿˜æœ‰å·¥ä½œè¦åšã€‚

ç”±äºæˆ‘ä»¬ä¸çŸ¥é“äººä»¬å°†å¦‚ä½•ä½¿ç”¨æˆ‘ä»¬çš„ç»„ä»¶ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›è®©äººä»¬è¦†ç›–ä¸€äº›ä¸œè¥¿ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œ`label`å’Œ`error`å…ƒç´ å¯èƒ½éœ€è¦è¢«åˆ‡æ¢å‡ºæ¥ï¼Œæˆ–è€…ä»¥ç¨å¾®ä¸åŒçš„æ–¹å¼å‘ˆç°ã€‚ä¼¼ä¹æ˜¯æˆ‘ä»¬èƒ½åšçš„äº‹ï¼

```
function InputGroup(props) {
  const id = React.useMemo(() => props.id ||Â 'input-'+ uuid(), [props.id])
  const isInvalid = props['aria-invalid'] ||Â String(!!props.error);

  const label = typeof props.label === 'string' ? 
    <label htmlFor={id}>{props.label}</label> :
    React.cloneElement(props.label, { htmlFor: id });

  const error = typeof props.error === 'string' ?
    <div>{props.error}</div> :
    props.error;

  return (
    <div>
      {label}
      {React.Children.map(
        props.children, 
        child => React.cloneElement(child, { id, 'aria-invalid': isInvalid })
      )}
      {props.error && error}
    </div>
  );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬åœ¨ä¸Šé¢å®ç°çš„ API å…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–ä¸€äº› JSX ä¼ é€’ç»™æˆ‘ä»¬çš„æ ‡ç­¾å’Œé”™è¯¯å±æ€§ã€‚å¦‚æœæˆ‘ä»¬ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²å€¼ï¼Œé»˜è®¤çš„ç”¨æˆ·ç•Œé¢è¢«æ¸²æŸ“ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¼ é€’ä¸€äº› JSXï¼Œæˆ‘ä»¬è®©æ¶ˆè´¹è€…å†³å®šå®ƒçœ‹èµ·æ¥æ€ä¹ˆæ ·ã€‚ç”¨æ³•å¯èƒ½æ˜¯è¿™æ ·çš„:

```
<InputGroup
  label={<MyCustomLabelComponent>First name</MyCustomLabelComponent>}
  error="some error occurred"
>
  <input />
</InputGroup> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å…è®¸è¿™ç§å®šåˆ¶ä½¿æ‚¨çš„ç»„ä»¶å¯¹äºå¤§å¤šæ•°ç”¨ä¾‹è¶³å¤Ÿçµæ´»ï¼ŒåŒæ—¶ä¿æŒä¸€ä¸ªå°çš„å¯é¢„æµ‹çš„ APIã€‚

## ç¬¬äº”æ­¥:è®©å®ƒæ›´åŠ çµæ´»

è¿™ä¸ªç»„ä»¶è¿˜æœ‰æœ€åä¸€ä¸ªå‡è®¾ï¼Œæˆ‘å¾ˆæƒ³å»æ‰ã€‚å‡è®¾æˆ‘ä»¬åªä¼ å…¥ä¸€ä¸ªå­©å­ï¼Œè¿™ä¸ªå­©å­æ˜¯ä¸€ä¸ªè¡¨å•è¾“å…¥ã€‚æˆ‘ä»¬å¯èƒ½æƒ³è¦å‡ ä¸ªè¾“å…¥ï¼Œæˆ–è€…è¾“å…¥å‘¨å›´çš„ä¸€äº›æ–‡æœ¬ï¼Œæˆ–è€…åªæ˜¯ä¸€äº›éœ€è¦å‘ˆç°çš„è‡ªå®šä¹‰ UIã€‚è®©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

```
function InputGroup(props) {
  const id = React.useMemo(() => props.id ||Â 'input-'+ uuid(), [props.id])
  const isInvalid = props['aria-invalid'] ||Â String(!!props.error);

  const label = typeof props.label === 'string' ? 
    <label htmlFor={id}>{props.label}</label> :
    React.cloneElement(props.label, { htmlFor: id });

  const error = typeof props.error === 'string' ?
    <div>{props.error}</div> :
    props.error;

  return (
    <div>
      {label}
      {props.children({ id, 'aria-invalid': isInvalid })}
      {props.error && error}
    </div>
  );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ç°åœ¨ç”¨æˆ‘ä»¬çš„å¢å¼ºé“å…·è°ƒç”¨`props.children`ã€‚è¿™è¢«ç§°ä¸ºâ€œæ¸²æŸ“é“å…·â€æ¨¡å¼ï¼Œä½ å¯ä»¥åœ¨[æ–‡æ¡£](https://reactjs.org/docs/render-props.html)ä¸­è¯»åˆ°æ›´å¤šã€‚è¿™å¯¼è‡´äº†è¿™æ ·çš„ç”¨æ³•:

```
<InputGroup label="Amount">
  {inputProps => (
    <div>
      $ <input {...inputProps} />
    </div>
  )}
</InputGroup> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å®Œå…¨æ§åˆ¶ UI çš„å‘ˆç°æ–¹å¼ã€‚æˆ‘ä»¬å°†ä¸ºè¡¨å•è¾“å…¥æä¾›çš„é“å…·ä½œä¸ºå­å‡½æ•°çš„å‚æ•°ï¼Œå¹¶è®©æ¶ˆè´¹è€…å°†å®ƒä»¬æ”¾åœ¨æ­£ç¡®çš„å…ƒç´ ä¸Šã€‚

ä¸è¿‡è¿™ç§æ–¹æ³•ä¹Ÿæœ‰ç¼ºç‚¹â€”â€”è¯­æ³•çœ‹èµ·æ¥å¾ˆç³Ÿç³•ï¼Œæ¶ˆè´¹è€…éœ€è¦æ‰‹åŠ¨ä¼ æ’­é“å…·ã€‚è€ƒè™‘è¿™å¯¹äºä½ çš„é¡¹ç›®æ˜¯å¦æ˜¯ä¸€ä¸ªå¥½çš„æ¨¡å¼ã€‚

## [](#summary)æ€»ç»“

ä¸º React ç»„ä»¶åˆ›å»ºä¸€ä¸ªå¥½çš„ã€å¯é çš„ API ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ã€‚ç»„ä»¶åº”è¯¥å¯ä»¥è¢«ä¸åŒçš„æ¶ˆè´¹è€…é‡ç”¨ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰çš„ä¸œè¥¿éƒ½åº”è¯¥æ˜¯å¯è®¿é—®çš„ï¼Œç»„ä»¶åšçš„ä»»ä½•äº‹æƒ…éƒ½åº”è¯¥æ˜¯å¯é‡å†™çš„ã€‚

è¿™ç¯‡æ–‡ç« ç»å†äº†å‡ ç§â€œåˆ°è¾¾é‚£é‡Œâ€çš„æ–¹æ³•ã€‚è¿™è‚¯å®šä¼šä½¿äº‹æƒ…å˜å¾—æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯å®ƒè®©ä½ å¯ä»¥åˆ›å»ºéå¸¸çµæ´»çš„ uiï¼Œè€Œä¸å¿…æ¯å‘¨éƒ½ç»™ç»„ä»¶æ·»åŠ æ–°çš„é“å…·ã€‚

å¦‚æœä½ æƒ³ç©è¿™ä¸ª APIï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ª CodeSandbox ä¸­è¿™æ ·åš:

[https://codesandbox.io/embed/23nqr6kr6y](https://codesandbox.io/embed/23nqr6kr6y)

æ„Ÿè°¢é˜…è¯»ï¼