# ä¸€åˆ‡éƒ½æ˜¯å‡½æ•°

> åŸæ–‡ï¼š<https://dev.to/korenmiklos/everything-is-a-function-4171>

å¤§å¤šæ•°ç§‘å­¦å®¶å¼€å§‹ä»¥ä¸€ç§[è¿‡ç¨‹é£æ ¼](https://en.wikipedia.org/wiki/Procedural_programming)ç¼–ç¨‹ã€‚æˆ‘å½“ç„¶æœ‰ã€‚ç¨‹åºç¼–ç¨‹å¯¹ç§‘å­¦å®¶æ¥è¯´æ˜¯å¾ˆè‡ªç„¶çš„ï¼Œå› ä¸ºå®ƒè¯»èµ·æ¥å°±åƒä¸€ä¸ªå®éªŒçš„ç²¾ç¡®çš„ T2 åè®®ã€‚*åšè¿™ä¸ª*ã€‚ç„¶ååšé‚£ä»¶äº‹ã€‚

[![](img/ebd9d5775c7239ac6fe3608a533a8761.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--BWxXzc1L--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2A5UdOie2kHbfcSgd51cZmoA.jpeg)

> æ±‰æ–¯Â·é›·å°¼å°”æ–¯åœ¨ [Unsplash](https://unsplash.com/search/photos/lab-test?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) æ‹æ‘„çš„ç…§ç‰‡

æˆ‘æ²¡è§è¿‡æœ‰äººç”¨ [Clojure](https://clojure.org/) ã€ [Erlang](https://www.erlang.org/) ã€ [Haskell](https://www.haskell.org/) æˆ–è€…å…¶ä»–å‡½æ•°å¼è¯­è¨€åšæ•°æ®åˆ†æã€‚

```
output = function(inputs) 
```

å¥‡æ€ªï¼Œå› ä¸ºä»”ç»†æƒ³æƒ³ï¼Œ**æ•°æ®åˆ†æä¸­çš„ä¸€åˆ‡éƒ½æ˜¯å‡½æ•°**ã€‚æ•°æ®æ¸…ç†ä»æ‚ä¹±çš„æ•°æ®æ˜ å°„åˆ°æ•´æ´çš„æ•°æ®ã€‚ç»Ÿè®¡ä¼°è®¡é‡ä»æ ·æœ¬æ˜ å°„åˆ°å®æ•°ã€‚å¯è§†åŒ–ä»æ•°æ®æ˜ å°„åˆ°å½©è‰²ä½å›¾ã€‚å¯¹äºæ•°æ®åˆ†æï¼Œæˆ‘ä»¬å‡ ä¹ä¸“é—¨ç¼–å†™ä¸éœ€è¦ç”¨æˆ·äº¤äº’çš„ä»£ç ï¼Œå¹¶ä¸”éå¸¸é€‚åˆå‡½æ•°å¼èŒƒä¾‹ã€‚

å‡½æ•°å¼ç¼–ç¨‹çš„ä¼ ç»Ÿå®šä¹‰æ˜¯â€œæ²¡æœ‰å‰¯ä½œç”¨â€ä½ åªèƒ½ä»è¾“å…¥ä¸­è®¡ç®—è¾“å‡ºã€‚ä½ ä¸èƒ½ä¾èµ–ä»»ä½•å…¶ä»–ä¿¡æ¯ï¼Œä¹Ÿä¸èƒ½ä¼ é€’ä»»ä½•å…¶ä»–ä¿¡æ¯ã€‚è¿™ä¸ªéå¸¸ä¸¥å¯†çš„å­¦ç§‘å¯¹ç§‘å­¦éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒæ›´å®¹æ˜“ [**äº‰è®ºæ­£ç¡®æ€§**](https://en.wikipedia.org/wiki/Referential_transparency) ã€‚ä¾‹å¦‚ï¼Œå¤šå…ƒå›å½’çš„æ™®é€šæœ€å°äºŒä¹˜ä¼°è®¡ï¼Œ

[![](img/e3efc81967bc1512b3c7e0361adf0672.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--GNhzlZ3d--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AT4wr_Wr3xGLlFoZhvO7txg.png)

æ˜¯ä¸€ä¸ªæ•°å­¦å‡½æ•°ï¼Œä½ å¯ä»¥ç”¨é“…ç¬”å’Œçº¸æ¥æè¿°å®ƒã€‚æœ±è‰å¨…çš„ç­‰ä»·ç‰©ï¼Œ

```
function OLS(X, Y)  
    return inv(X' * X) * X' * Y  
end 
```

ç‹¬ç«‹äºæ‚¨åœ¨ä»£ç ä¸­çš„å…¶ä»–åœ°æ–¹æ‰€åšçš„å·¥ä½œã€‚(é¡ºä¾¿è¯´ä¸€å¥ï¼Œ`X\Y`ç”¨ Julia æ¥å†™è¿™ä¸ªæ¯”è¾ƒå¥½ã€‚)

æ­¤å¤–ï¼Œå°†è®¡ç®—è‡ªåŠ¨åŒ–ä¸ºä¸€ä¸ªå‡½æ•°é“¾ä¹Ÿæ›´å®¹æ˜“ã€‚å¦‚æœ`f(X,Y)`æ˜¯å¤šå…ƒç³»æ•°çš„ä¼°è®¡é‡ï¼Œ`g(b,X)`æ˜¯é¢„æµ‹è§„åˆ™ï¼Œé‚£ä¹ˆ`g(f(X,Y),X)`å°±æ˜¯ä½ æ‹Ÿåˆçš„æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚ä¾é çº¯å‡½æ•°ä½¿å¾—æ•°æ®ç§‘å­¦è¿‡ç¨‹æ›´å…·å¯å¤åˆ¶æ€§ã€‚

#### åŠŸèƒ½é“¾æ–¹æ³•çš„ä¸€äº›ç°æœ‰å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ

æ‚¨å¯ä»¥é€šè¿‡ç®¡é“æ“ä½œç¬¦å°†å°å·¥å…·é“¾æ¥åˆ°ä¸€ä¸ªç±»ä¼¼ Unix çš„ shell [ä¸­ã€‚è¯¥å·¥å…·ä» STDIN è¯»å–æ•°æ®ï¼Œå¹¶å†™å…¥ STDOUTï¼Œå¹¶ä¸”(å¸Œæœ›)ä¸ä¼šè§¦åŠä¸­é—´çš„ä»»ä½•å†…å®¹ã€‚ä½œä¸ºä¸€åæ•°æ®ç§‘å­¦å®¶ï¼Œæ‚¨å¯ä»¥ä¸“æ³¨äºæ­£ç¡®å®ç°åŠŸèƒ½ï¼Œè€Œä¸æ˜¯æ‹…å¿ƒå¦‚ä½•è·å¾—æ•°æ®ä»¥åŠè°ç”¨å®ƒåšä»€ä¹ˆã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘æ˜¯æ¥è‡ªå‘½ä»¤è¡Œ](http://swcarpentry.github.io/shell-novice/04-pipefilter/index.html)çš„[æ•°æ®ç§‘å­¦çš„å¿ å®ç²‰ä¸](https://medium.com/wunderlist-engineering/is-yelp-international-an-excuse-to-roll-data-with-the-command-line-415dc04499a3)

ä¸€ä¸ªæ›´å¥½çš„ä¾‹å­æ˜¯ r çš„`%>%`ç®¡é“(Julia æœ‰ä¸€ä¸ªç±»ä¼¼çš„[ç®¡é“æ“ä½œå‘˜](https://docs.julialang.org/en/v1.1/base/base/#Base.:%7C%3E))ã€‚)æ®æˆ‘ä» R åŒäº‹é‚£é‡Œäº†è§£ï¼Œç°åœ¨å¤§å¤šæ•°æƒ¯ç”¨ä»£ç éƒ½ä½¿ç”¨è¿™ç§è¯­æ³•ã€‚

```
x  %>%  log()  %>%  diff()  %>%  exp()  %>%  round(1) 
```

åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œç”šè‡³åƒ Stata do-files è¿™æ ·çš„è„šæœ¬è¯­è¨€ä¹Ÿå¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå‡½æ•°é“¾ã€‚Stata çš„ä¸€ä¸ªä¸¥æ ¼é™åˆ¶æ˜¯ä¸€æ¬¡åªèƒ½å¯¹ä¸€ä¸ªæ•°æ®å¸§è¿›è¡Œè®¡ç®—ã€‚ä¸è¿‡ï¼Œè¿™ç§é™åˆ¶æœ‰å·¨å¤§çš„å¥½å¤„ã€‚æ‚¨å¯ä»¥ç¼–å†™ä»æ•°æ®å¸§çš„ä¸€ç§çŠ¶æ€æ˜ å°„åˆ°ä¸‹ä¸€ç§çŠ¶æ€çš„å‡½æ•°ä»£ç ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œ

```
generate y = log(x)  
replace y = 0 if x < 0 
```

æ˜¯ä¸¤ä¸ªå‡½æ•°çš„é“¾ã€‚æ˜“äºé˜…è¯»ï¼Œæ˜“äºè°ƒè¯•ã€‚è¿™å’Œç†ŠçŒ«æ³•åˆ™æ˜¯ä¸€æ ·çš„

```
df['y'] = math.log(df['x'])  
df['y'][df['x'] < 0] = 0 
```

å‘ƒï¼Œä»€ä¹ˆï¼Ÿè¿™çœ‹èµ·æ¥æ›´å¤æ‚ï¼Œå› ä¸ºæˆ‘ä»¬è¦æ§åˆ¶æ›´å¤§èŒƒå›´çš„çŠ¶æ€ã€‚æˆ‘ä»¬æƒ³è¦ä½¿ç”¨ä»€ä¹ˆæ—¥å¿—å‡½æ•°ï¼Ÿæˆ‘ä»¬é€‰æ‹©å“ªä¸ªæ•°æ®å¸§ï¼Ÿæˆ‘ä»¬è¦æ”¹å˜å“ªä¸ªæ•°æ®å¸§ï¼Ÿ

#### ä»€ä¹ˆæ˜¯æ²¡æœ‰åŠŸèƒ½çš„ï¼Ÿ

ç¬”è®°æœ¬å’Œå…¶ä»– REPL ä¸æ˜¯ï¼Œä¹”å°”Â·æ–¯æ³¢å°”æ–¯åŸºå’Œ T2 éå¸¸è®¨åŒå®ƒä»¬ã€‚å½“æ‚¨åœ¨å•å…ƒæ ¼ä¹‹é—´ä¸Šä¸‹ç§»åŠ¨ï¼Œä¿å­˜å·¥ä½œç©ºé—´ä¸­çš„å„ç§å˜é‡æ—¶ï¼Œæ‚¨ä¼šå¼„ä¸æ¸…ä»€ä¹ˆæ˜¯å½“å‰è®¡ç®—çš„è¾“å…¥ã€‚æˆ‘æœ‰æ—¶ä¼šåœ¨ ipython ç¬”è®°æœ¬ä¸Šåˆ°å¤„ç©ï¼Œä½†æˆ‘æ€»æ˜¯æœ‰ç½ªæ¶æ„Ÿã€‚

RStudio and tidyverse çš„ Jenny Bryan ä¹Ÿå¯¹å‰¯ä½œç”¨å‘è¡¨äº†çœ‹æ³•ã€‚

> ![](img/7917ffa81b11202eec21f8c98adf6dde.png)![](img/3d4383f99d235701ea007b358b6b2a59.png)Hadley Wickham@ Hadley Wickham![](img/4d9c44713c216584b3d48ff3455cbb68.png)å”¯ä¸€è®© [@JennyBryan](https://twitter.com/JennyBryan) ğŸ˜¤ğŸ˜ ğŸ¤¯ã€‚è€Œæ˜¯ç”¨ projects+here::here()[# rstats](https://twitter.com/hashtag/rstats)2017 å¹´ 12 æœˆ 11 æ—¥ä¸Šåˆ 00:50[![Twitter reply action](img/269095962147c28351274afdd5486a48.png)](https://twitter.com/intent/tweet?in_reply_to=940021008764846080)[![Twitter retweet action](img/771160ecf06ae3d4d7a7815c29c819c2.png)](https://twitter.com/intent/retweet?tweet_id=940021008764846080)304[![Twitter like action](img/c077611ab2a5e0b4cd0c826ee7ae1e48.png)](https://twitter.com/intent/like?tweet_id=940021008764846080)990

#### æ›´å¥½çš„æ•°æ®ç§‘å­¦æ„¿æœ›æ¸…å•(æˆ–æ–°å¹´å†³å¿ƒ)

1.  åœ¨ Python ä¸­å®ç°ç®¡é“è¿ç®—ç¬¦ã€‚æˆ‘çŸ¥é“è¿™å¾ˆéš¾ï¼Œä½†æ˜¯æˆ‘ä»¬èƒ½ä¸èƒ½åªè®¨è®º Python çš„ *tidyverse* ï¼Ÿ
2.  å†™çº¯åŠŸèƒ½çš„ Stata ä»£ç ã€‚ä»çº¯æ•°æ®æ“ä½œä»£ç ä¸­åˆ†ç¦»å‡ºè¾“å…¥/è¾“å‡ºç”šè‡³æ¨¡å‹ä¼°è®¡ã€å›¾å½¢ã€‚
3.  æ¢ç´¢çœŸæ­£çš„å‡½æ•°å¼è¯­è¨€çš„æ•°æ®ç§‘å­¦åº“ã€‚æˆ‘çŸ¥é“ï¼ŒSQL æ˜¯å‡½æ•°å¼çš„ï¼Œä½†æ˜¯è¯»èµ·æ¥å¾ˆå¤æ‚ã€‚
4.  æ›´ä¸€èˆ¬åœ°è¯´ï¼Œç•™æ„å‰¯ä½œç”¨ã€‚æˆ‘éœ€è¦è¿™ä¸ªå…¨å±€å‚æ•°å—ï¼Ÿæˆ‘éœ€è¦æŠŠè¿™ä¸ªå†™åˆ°ç£ç›˜ä¸Šå—ï¼Ÿç›®æ ‡æ˜¯ç¼–å†™å°½å¯èƒ½çº¯çš„å‡½æ•°ã€‚