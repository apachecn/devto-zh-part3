# ä¿®å¤æ‚¬æŒ‚ç›–èŒ¨æ¯” 2 å»ºç«‹åœ¨ Netlify

> åŸæ–‡:[https://dev . to/kevinmeyvaert/fixing-hang-Gatsby-2-builds-on-netlify-3ip 5](https://dev.to/kevinmeyvaert/fixing-hanging-gatsby-2-builds-on-netlify-3ip5)

å‡ å¹´æ¥ï¼Œæˆ‘ä¸€ç›´åœ¨åšä¸€ä¸ªéŸ³ä¹èŠ‚ç½‘ç«™ï¼Œä½œä¸ºä¸€ä¸ªå® ç‰©é¡¹ç›®ã€‚å»å¹´ï¼Œæˆ‘å†³å®šä½¿ç”¨ [JAM Stack](https://jamstack.org/) æ¥é‡å»ºæ•´ä¸ªç³»ç»Ÿã€‚[å¿ƒæ»¡æ„è¶³](https://www.contentful.com/) + [ç›–èŒ¨æ¯”](https://www.gatsbyjs.org/) + [Netlify](https://www.netlify.com/) ã€‚å®ƒå¾ˆæ£’ï¼Œå¾ˆå¿«ï¼Œå¯æ‰©å±•ï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œå®Œå…¨å…è´¹ã€‚

å‡ ä¸ªæœˆå‰ï¼Œç›–èŒ¨æ¯”å‘å¸ƒäº†ä»–ä»¬çš„ v2ï¼Œæˆ‘æ¸´æœ›æ›´æ–°ç½‘ç«™ï¼Œä½¿ç”¨æ‰€æœ‰æ–°çš„èŠ±å“¨ä¸œè¥¿ã€‚ç„¶è€Œï¼Œåœ¨å‡çº§åä¸ä¹…ï¼Œå½“é€šè¿‡ Netlify è¿›è¡Œæ„å»ºæ—¶ï¼Œæ„å»ºå¡åœ¨â€œç¼“å­˜èŠ‚ç‚¹ç‰ˆæœ¬ vx.x.xâ€æ­¥éª¤ï¼Œå¹¶æœ€ç»ˆè¶…æ—¶ã€‚

[![This was no fun](../Images/05c1645979c504a1dcbbe00d64f0dac1.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--E-bVX9zM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/779lew7lm5s4s3yyfv2z.png)

æˆ‘åšäº†å¤§çº¦ 40 æ¬¡æäº¤ï¼Œå¯¹ä»£ç åšäº†è½»å¾®çš„ä¿®æ”¹ï¼Œæ¢å¤äº†ä¾èµ–å…³ç³»ï¼Œå°è¯•äº†ä¸åŒçš„èŠ‚ç‚¹ç‰ˆæœ¬ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•æ•ˆæœã€‚åœ¨æˆ‘æµªè´¹äº†æ•´ä¸ªå‘¨æœ«è¯•å›¾è§£å†³è¿™ä¸ªé—®é¢˜åï¼Œæˆ‘å†³å®šåœæ­¢å°è¯•ã€‚

æˆ‘æ˜¯é‚£ç§å›ºæ‰§çš„å¼€å‘è€…ã€‚æˆ‘å¿…é¡»è‡ªå·±è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ğŸ¤¦ğŸ»â€â™‚ï¸ä¸æ­¤åŒæ—¶ï¼Œå‡ ä¸ªæœˆè¿‡å»äº†ï¼Œæˆ‘çœŸçš„ä¸å¾—ä¸å¼€å§‹ç€æ‰‹ 2019 å¹´ç‰ˆç½‘ç«™çš„å·¥ä½œã€‚å°±è¿™ä¸€æ¬¡ï¼Œæˆ‘ä¸å¾—ä¸å‘¼å«æ”¯æ´éª‘å…µã€‚

æœ€åï¼Œæˆ‘å¾—åˆ°äº† Netlify support çš„ Chris & Dennis çš„å¸®åŠ©(å¤§å£°å–Šå‡ºæ¥ï¼Œä½ è®©æˆ‘å¼€å¿ƒ)ã€‚ä»–ä»¬ç»™æˆ‘æŒ‡å‡ºäº†å‡ ä¸ªæœˆå‰åœ¨ Gatsby v2 æµ‹è¯•ç‰ˆæœŸé—´åœ¨ Github ä¸Šè®°å½•çš„ä¸€ä¸ªé—®é¢˜â€”â€”ä»–ä»¬åœ¨é‚£é‡Œè§£å†³äº†ä¸€ä¸ª bugï¼Œè¿™ä¸ªé—®é¢˜ä»ç„¶åœ¨æœ€æ–°ç‰ˆæœ¬ä¸­ã€‚

çœ‹èµ·æ¥ã€‚å¤±è´¥çš„æ„å»ºæ˜¯ç”± Gatsby åœ¨æ„å»ºæœŸé—´äº§ç”Ÿçš„ Jest worker å­çº§å¼•èµ·çš„ã€‚ä½†æ˜¯å½“çˆ¶ Jest worker é€€å‡ºæ—¶ï¼Œå­ Jest worker ä¼šç»§ç»­å­˜åœ¨ï¼Œå¯¼è‡´ Netlify ä¸Šçš„æ„å»ºè¶…æ—¶ã€‚

## [](#solution)è§£

TLï¼›DR
*ä¸è¦åœ¨ componentWillMount ä¸Šä½¿ç”¨ setTimeoutã€‚*ä½†æ˜¯å½“ä½ è¿™ä¹ˆåšçš„æ—¶å€™ï¼Œç¡®ä¿ä½ åªåœ¨è¿è¡Œæ—¶æ‰§è¡Œå®ƒã€‚(æŠŠå®ƒåŒ…åœ¨ä¸€ä¸ªçª—å£é‡Œï¼== 'æœªå®šä¹‰'æ£€æŸ¥)

[![I know I know](../Images/930a492af2944ad2ee09ce6c42334cc1.png)T2](https://res.cloudinary.com/practicaldev/image/fetch/s--iEMGkbPZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/ygpo53660t7kg6puiywg.png)

è¿˜æœ‰ã€‚æ ¹æœ¬ä¸è¦ä½¿ç”¨ componentWillMountã€‚åƒæ‰€æœ‰é…·å­©å­ä¸€æ ·ç”¨é’©å­ã€‚ğŸ˜ğŸ†’

[![Hooks are so cool omgwtfbbq](../Images/91ad9e6e3a1c11ba745f95662635bd98.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--fk92A3YK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/2kpw9ixuu7zx87paf4ap.png)

åæ­£è¿™ä¸ªé—®é¢˜è®©æˆ‘æŸå¤±äº†å¾ˆå¤šæ—¶é—´ï¼Œç»™äº†æˆ‘ç¬¬ä¸€æ ¹ç™½å‘ã€‚æˆ‘å¸Œæœ›å†™è¿™ç¯‡æ–‡ç« èƒ½åœ¨ä¸ä¹…çš„å°†æ¥å¸®åŠ©åˆ°æŸäººã€‚

PS:å½“åœ¨ componentWillMount ä¸­ä½¿ç”¨æŸäº› firebase æˆ– aws-amplify å‡½æ•°æ—¶ä¹Ÿä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬ä¹Ÿä½¿ç”¨ setTimeoutsã€‚