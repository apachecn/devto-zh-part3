# ç”¨é›†åˆåˆ é™¤ JS ä¸­å¯¹è±¡æ•°ç»„çš„é‡å¤é¡¹

> åŸæ–‡ï¼š<https://dev.to/marinamosti/removing-duplicates-in-an-array-of-objects-in-js-with-sets-3fep>

å‰å‡ å¤©åœ¨å·¥ä½œä¸­ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªæˆ‘è®¤ä¸ºåœ¨å¤„ç†æ¥è‡ª API çš„æ•°æ®æ—¶å¾ˆå¸¸è§çš„é—®é¢˜ã€‚

æˆ‘ä»æˆ‘çš„å¼‚æ­¥ http è°ƒç”¨ä¸­å¾—åˆ°ä¸€ä¸ª`array of objects`(åœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯åœ°å€)ï¼Œä½†æ˜¯ç”±äº*ä¸é‡è¦çš„åŸå› *ï¼Œè¿™ä¸ªæ•°ç»„è¿”å›äº†å¯èƒ½é‡å¤çš„å¯¹è±¡(æ‰€ä»¥æ˜¯ä¸¤ä¸ªç›¸åŒçš„`id`)ã€‚

æˆ‘çš„ç¬¬ä¸€ååº”æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå¾ªç¯éå† addresses æ•°ç»„ï¼Œå¹¶å¯¹æ¯ä¸ªæ•°ç»„æ‰§è¡Œä¸€ä¸ª`.findIndex`æ“ä½œæ¥åˆ›å»ºæˆ‘çš„â€œå‰¯æœ¬â€ã€‚å¦‚æœâ€œå‰¯æœ¬â€æ²¡æœ‰åœ°å€ï¼Œé‚£ä¹ˆæˆ‘ä¼šæ¨é€ã€‚æœ€ç»ˆä»£ç æ˜¯å¯è¯»çš„ï¼Œä½†æ˜¯æˆ‘æƒ³è¦ä¸€ç§æ›´ç®€å•æ›´ç›´æ¥çš„æ–¹å¼ã€‚

æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªç‰¹æ®Šçš„é—®é¢˜ï¼

æ—¢ç„¶æˆ‘ä»¬å·²ç»è§£å†³äº†è¿™ä¸ªé—®é¢˜ğŸ˜‹ï¼Œæˆ‘æƒ³å±•ç¤ºè¿™ä¸ªä½¿ç”¨äº† [JavaScript `Set`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set) çš„è§£å†³æ–¹æ¡ˆã€‚

```
const addresses = [...]; // Some array I got from async call

const uniqueAddresses = Array.from(new Set(addresses.map(a => a.id)))
 .map(id => {
   return addresses.find(a => a.id === id)
 }) 
```

è®©æˆ‘ä»¬æ¥å‰–æä¸€ä¸‹è¿™ä¸€å›¢ä¹±éº»:

1.  `Array.from(new Set())`æˆ‘è¦åˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆï¼Œæˆ‘æƒ³ç”¨`Array.from`æŠŠå®ƒå˜å›ä¸€ä¸ªæ•°ç»„ï¼Œè¿™æ ·æˆ‘ä»¥åå¯ä»¥é‡æ–°æ˜ å°„å®ƒã€‚
2.  `new Set(addresses.map(a => a.id))` Set åªå…è®¸**ä¸­æœ‰å”¯ä¸€çš„**å€¼ï¼Œæ‰€ä»¥æˆ‘è¦ç»™å®ƒä¼ é€’æ¯ä¸ªå¯¹è±¡çš„ idã€‚å¦‚æœå¾ªç¯è¯•å›¾å†æ¬¡æ·»åŠ ç›¸åŒçš„å€¼ï¼Œå®ƒå°†è¢«å…è´¹å¿½ç•¥ã€‚
3.  ä½¿ç”¨æ­¥éª¤ 1 ä¸­å¾—åˆ°çš„ id æ•°ç»„ï¼Œæˆ‘å¯¹å®ƒè¿è¡Œä¸€ä¸ªæ˜ å°„å‡½æ•°ï¼Œå¹¶ä»åŸå§‹åœ°å€æ•°ç»„ä¸­è¿”å›å®é™…åœ°å€

å°±æ˜¯è¿™æ ·ï¼ç®€å•æ˜äº†ï¼Œè€Œä¸”æˆ‘å¾ˆä¹æ„å­¦ä¹ /ä½¿ç”¨`Set`ğŸ˜

* * *

éå¸¸æ„Ÿè°¢æˆ‘çš„ bae [Natalia Tepluhina](https://twitter.com/N_Tepluhina) å¥¹å¿å—å¹¶å¸®åŠ©æˆ‘æƒ³å‡ºäº†è¿™ä¸ªç–¯ç‹‚çš„æƒ³æ³•ï¼Œå¥¹ä»¤äººæ•¬ç•çš„è§£å†³æ–¹æ¡ˆå±•ç¤ºåœ¨â¤ï¸ä¸‹é¢ğŸ‘©â€ğŸ’»

```
const arr = [
  { id: 1, name: "test1" },
  { id: 2, name: "test2" },
  { id: 2, name: "test3" },
  { id: 3, name: "test4" },
  { id: 4, name: "test5" },
  { id: 5, name: "test6" },
  { id: 5, name: "test7" },
  { id: 6, name: "test8" }
];

const filteredArr = arr.reduce((acc, current) => {
  const x = acc.find(item => item.id === current.id);
  if (!x) {
    return acc.concat([current]);
  } else {
    return acc;
  }
}, []); 
```