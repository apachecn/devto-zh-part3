# ğŸŒå¼€å‘äººå‘˜çš„ç”¨æˆ·æ¥è‡ªå“ªé‡Œï¼Ÿ

> åŸæ–‡:[https://dev.to/biros/where-are-dev-users-coming-from-4l53](https://dev.to/biros/where-are-dev-users-coming-from-4l53)

æ‚¨å¯èƒ½å·²ç»çŸ¥é“ï¼Œdev.to æœ‰ä¸€ä¸ªè·å–æ–‡ç« å’Œç”¨æˆ·çš„ APIã€‚

è®©æˆ‘ä»¬ç”¨æˆ‘æœ€å–œæ¬¢çš„ HTTP å®¢æˆ·ç«¯æ¥è¯•è¯•å§ï¼Œ [httpie](https://httpie.org/) :

```
http https://dev.to/api/users/1 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
{  "github_username":  "benhalpern",  "id":  1,  "joined_at":  "Dec 27, 2015",  "location":  "Brooklyn, NY",  "name":  "Ben Halpern",  "profile_image":  "https://res.cloudinary.com/practicaldev/image/fetch/s--DOU9qJSH--/c_fill,f_auto,fl_progressive,h_320,q_auto,w_320/https://thepracticaldev.s3.amazonaws.com/uploads/user/profile_image/1/f451a206-11c8-4e3d-8936-143d0a7e65bb.png",  "summary":  "A Canadian software developer who thinks heâ€™s funny.",  "twitter_username":  "bendhalpern",  "type_of":  "user",  "username":  "ben",  "website_url":  "http://benhalpern.com"  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘é¦–å…ˆæ³¨æ„åˆ°çš„æ˜¯`id`ä¼¼ä¹æ˜¯è‡ªåŠ¨é€’å¢çš„ã€‚
ç»è¿‡ä¸€äº›å°è¯•ï¼Œæˆ‘å¾ˆå¿«å‘ç° dev.to:ä¸Šçš„ç”¨æˆ·æ€»æ•°å¤§çº¦åœ¨`119000`å·¦å³ã€‚
è¿™ç»™äº†æˆ‘æ”¶é›†æ‰€æœ‰ç”¨æˆ·å…¬å¼€æ•°æ®å¹¶å°è¯•ä½¿ç”¨å®ƒä»¬çš„æƒ³æ³•ã€‚

è®©æˆ‘ä»¬è¯•è¯•è¿™ä¸ªå‘½ä»¤:

```
for i in {1..119000}; do http https://dev.to/api/users/$i >> users.dev.to.json && echo "," >> users.dev.to.json && echo "https://dev.to/api/users/$i"; done 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨åå°è¿è¡Œäº†å‡ ä¸ªå°æ—¶åï¼Œæˆ‘ç»ˆäºè·å¾—äº†æˆ‘çš„ JSON æ–‡ä»¶ä¸­çš„æ‰€æœ‰ç”¨æˆ·ã€‚

æœ€åï¼Œæˆ‘ä½¿ç”¨ [NoSQLBooster](https://nosqlbooster.com/home) åœ¨ mongodb é›†åˆä¸­å¯¼å…¥ JSON æ–‡ä»¶ã€‚

ç”¨æˆ·æ¡£æ¡ˆä¸­çš„ä¿¡æ¯ä¸å¤šï¼Œä½†æœ‰ä¸¤æ¡å€¼å¾—ä¸€çœ‹:`joined_at`å’Œ`location`ã€‚æœ‰ä¸€ä¸ªå›¾è¡¨æ˜¾ç¤ºæ³¨å†Œéšæ—¶é—´çš„è¿›å±•å¯èƒ½ä¼šéå¸¸æœ‰è¶£ã€‚ä¹Ÿè®¸æœ‰ä¸€å¤©æˆ‘ä¼šè¿™æ ·åšï¼Œä½†ç°åœ¨ï¼Œè®©æˆ‘ä»¬è®¡ç®—ä¸€äº›ç”¨æˆ·ä½ç½®çš„ç»Ÿè®¡æ•°æ®ã€‚

æˆ‘ä½¿ç”¨äº†ä¸¤ä¸ªæŸ¥è¯¢æ¥è®¡ç®—ç»Ÿè®¡æ•°æ®ã€‚è¿™ä¸ªå¸®åŠ©æˆ‘å¾—åˆ°äº†äººä»¬ä½ç½®çš„å¤§è¶‹åŠ¿:

```
db.getCollection("users.dev.to").aggregate(
    {"$group": {_id: "$location", count:{$sum:1}}}
).sort("-count") 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åï¼Œæˆ‘ä½¿ç”¨å¦ä¸€ä¸ªæŸ¥è¯¢æ¥è·å¾—æ¯ä¸ªä½ç½®çš„äººæ•°:

```
db.getCollection("users.dev.to").find({"location": /\bdublin\b/i}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç»“è®ºå¦‚ä¸‹:

å¤§å¤šæ•°ç”¨æˆ·(90%)æ²¡æœ‰å¡«å†™ä»–ä»¬çš„ä½ç½®ã€‚
16.3%çš„å¡«å……ä½ç½®çš„ç”¨æˆ·æ¥è‡ª`USA`ã€‚
5.8%æ¥è‡ª`India`ã€‚4.9%æ¥è‡ª`UK`ã€‚
4%æ¥è‡ª`Japan`ã€‚3.8%æ¥è‡ª`Germany`ã€‚

è®©æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢çš„å®Œæ•´ç»Ÿè®¡æ•°æ®:

| # | å›½å®¶ | åœ°åŒºæˆ–åŸå¸‚ | #åœ°åŒºæˆ–åŸå¸‚ | #å›½å®¶ | % |
| --- | --- | --- | --- | --- | --- |
| one | ç¾åˆ©åšåˆä¼—å›½ |  |  | One thousand eight hundred and fifty | 16.32% |
|  |  | åŒ…æ‹¬çº½çº¦ | Two hundred and five |  |  |
|  |  | åŒ…å« CA | One hundred and ninety-four |  |  |
|  |  | Incl NY | One hundred and forty-seven |  |  |
|  |  | åŒ…æ‹¬æ—§é‡‘å±± | One hundred and thirty-seven |  |  |
|  |  | åŒ…æ‹¬å‘é€ | One hundred and nineteen |  |  |
|  |  | åŒ…æ‹¬è¥¿é›…å›¾ | One hundred and seventeen |  |  |
|  |  | åŒ…æ‹¬æ´›æ‰çŸ¶ | One hundred and seven |  |  |
|  |  | åŒ…æ‹¬èŠåŠ å“¥ | One hundred and one |  |  |
|  |  | åŒ…æ‹¬åç››é¡¿ | Eighty-one |  |  |
|  |  | åŒ…å« FL | seventy-eight |  |  |
|  |  | åŒ…æ‹¬ PA | sixty-eight |  |  |
|  |  | åŒ…å« MA | Sixty-seven |  |  |
|  |  | åŒ…å« AZ | Thirty-eight |  |  |
|  |  | åŒ…å« MI | Thirty-four |  |  |
|  |  | åŒ…å«å“¦ | Thirty |  |  |
| Two | å°åº¦ |  |  | Six hundred and sixty | 5.82% |
|  |  | åŒ…æ‹¬ç­åŠ ç½—å°” | One hundred and seven |  |  |
|  |  | åŒ…æ‹¬å¾·é‡Œ | One hundred and three |  |  |
| three | è‹±å›½ |  |  | Five hundred and fifty-one | 4.86% |
|  |  | åŒ…æ‹¬ä¼¦æ•¦ | Two hundred and fifty-eight |  |  |
|  |  | åŒ…æ‹¬è‹±å›½ | Thirty-five |  |  |
|  |  | åŒ…æ‹¬è‹æ ¼å…° | Thirty-three |  |  |
|  |  | åŒ…æ‹¬å¨å°”å£« | seven |  |  |
| four | æ—¥æœ¬ |  |  | Four hundred and fifty-one | 3.98% |
|  |  | åŒ…æ‹¬ä¸œäº¬ | Two hundred and forty-two |  |  |
| five | å¾·å›½ |  |  | Four hundred and twenty-eight | 3.77% |
|  |  | åŒ…æ‹¬æŸæ— | One hundred and twenty-eight |  |  |
| six | å·´è¥¿ |  |  | Three hundred and one | 2.65% |
| seven | æ³•å›½ |  |  | Two hundred and ninety-four | 2.59% |
|  |  | åŒ…æ‹¬å·´é» | Ninety-eight |  |  |
| eight | åŠ æ‹¿å¤§ |  |  | Two hundred and fifty-seven | 2.27% |
|  |  | åŒ…æ‹¬å¤šä¼¦å¤š | One hundred and seven |  |  |
| nine | å°¼æ—¥åˆ©äºš |  |  | One hundred and eighty-seven | 1.65% |
|  |  | åŒ…æ‹¬æ‹‰å„æ–¯ | Ninety-seven |  |  |
| Ten | è·å…° |  |  | One hundred and fifty-four | 1.36% |
|  |  | åŒ…æ‹¬é˜¿å§†æ–¯ç‰¹ä¸¹ | Sixty-two |  |  |
| Eleven | è¥¿ç­ç‰™ |  |  | One hundred and ten | 0.97% |
| Twelve | é˜¿æ ¹å»· |  |  | One hundred and nine | 0.96% |
| Thirteen | æ„å¤§åˆ© |  |  | One hundred and two | 0.90% |
| Fourteen | å°åº¦å°¼è¥¿äºš |  |  | Ninety-two | 0.81% |
| Fifteen | ä¿„ç½—æ–¯ |  |  | eighty-nine | 0.78% |
| Sixteen | å¢¨è¥¿å“¥ |  |  | Eighty-six | 0.76% |
| Seventeen | è²å¾‹å®¾ |  |  | eighty-five | 0.75% |
| Eighteen | æ³¢å…° |  |  | Eighty-one | 0.71% |
| Nineteen | ä¹Œå…‹å…° |  |  | Seventy-five | 0.66% |
| Twenty | è‘¡è„ç‰™ |  |  | Sixty-three | 0.56% |
| Twenty-one | å—é |  |  | Fifty-seven | 0.50% |
| Twenty-two | å·´åŸºæ–¯å¦ |  |  | fifty-six | 0.49% |
| Twenty-three | ç«é¸¡ |  |  | Fifty-five | 0.49% |
| Twenty-four | æ¯”åˆ©æ—¶ |  |  | Fifty-three | 0.47% |
| Twenty-five | åŸƒåŠ |  |  | fifty-two | 0.46% |
| Twenty-six | å­ŸåŠ æ‹‰å›½ |  |  | Fifty | 0.44% |
| Twenty-seven | å“¥ä¼¦æ¯”äºš |  |  | Forty-six | 0.41% |
| Twenty-eight | ç½—é©¬å°¼äºš |  |  | Forty-five | 0.40% |
| Twenty-nine | è‚¯å°¼äºš |  |  | Forty-five | 0.40% |
| Thirty | ç‘å£« |  |  | Forty-five | 0.40% |
| Thirty-one | å¥¥åœ°åˆ© |  |  | Forty-three | 0.38% |
| Thirty-two | ä¸­å›½ |  |  | Forty | 0.35% |
| Thirty-three | æŒªå¨ |  |  | Thirty-eight | 0.34% |
| Thirty-four | çˆ±å°”å…° |  |  | Thirty-three | 0.29% |
|  | **ä¸»è¦åœ°ç‚¹æ€»æ•°**(å¦‚ä¸Šæ‰€åˆ—) |  |  | **6683** | **58.94%** |
|  | **å…¶ä»–åœ°ç‚¹**(æœªåˆ—å‡º) |  |  | **4656** | **41.06%** |
|  | **æ€»ä½ç½®** |  |  | **11339** | **100.00%** |
|  | *T2`<null>`* |  |  | *90260* | *80.80%* |
|  | *T2`<empty>`* |  |  | *10108* | *9.05%* |
|  | **æ€»è®¡** |  |  | **111707** | **100%** |

> æ³¨:è¿™äº›æ•°å­—æ˜¯ä¸€ä¸ªæœˆå‰çš„ï¼Œä½†å®ƒä»¬å¾ˆå¥½åœ°æ¦‚è¿°äº†è¶‹åŠ¿ã€‚

æ„Ÿè°¢é˜…è¯»ï¼