# ç”¨ç›’å­æ¨¡å‹ç¡®å®šå†…å®¹å®½åº¦

> åŸæ–‡:[https://dev . to/wgao 19/content-width-determination-with-the-box-model-5mb](https://dev.to/wgao19/content-width-determination-with-the-box-model-5mb)

æˆ‘æ­£åœ¨åšä¸€ä¸ªè¿™æ ·çš„è®¾è®¡ï¼Œå®ƒåŒ…å«ä¸€äº›åƒè¿™æ ·æ’åˆ—åœ¨ä¸€ä¸ªè§’ä¸Šçš„å¾½ç« ã€‚è¿™äº›å¾½ç« çš„å†…å®¹æ˜¯ä¸å›ºå®šçš„ï¼Œæ‰€ä»¥æˆ‘ä¸çŸ¥é“æ¯ä¸ªå¾½ç« çš„ç¡®åˆ‡å®½åº¦ã€‚ç„¶è€Œï¼Œè®¾è®¡è¦æ±‚å®ƒä»¬å…·æœ‰çµæ´»çš„å®½åº¦ã€‚

[![](../Images/867bd497b55b349f5c1a9a576ae25f24.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--hydGnFls--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://d2mxuefqeaa7sj.cloudfront.net/s_46691719D9A10FD85475E1AE5C9BBC1C5717457E8F6BBDBAEABA998CE95A0357_1551847907593_image.png)

æˆ‘åšäº†åŸºæœ¬çš„ CSSï¼Œç»“æœæ˜¯è¿™æ ·çš„:

[![](../Images/3827d9f323daa56c9d08bbd7fe70089b.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--0QG1EmwD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://d2mxuefqeaa7sj.cloudfront.net/s_46691719D9A10FD85475E1AE5C9BBC1C5717457E8F6BBDBAEABA998CE95A0357_1551847870786_image.png)

åœ¨æˆ‘çœ‹æ¥ï¼Œå®ƒä»¬çœ‹èµ·æ¥å¾ˆæ•´æ´ï¼Œä½†æ˜¯è®¾è®¡å¸ˆåšæŒè®©å®ƒä»¬å„è‡ªè®¾å®šè‡ªå·±çš„å®½åº¦ğŸ˜

[https://codepen.io/wgao19/embed/VRzLvm?height=600&default-tab=result&embed-version=2](https://codepen.io/wgao19/embed/VRzLvm?height=600&default-tab=result&embed-version=2)

## [](#intuition-from-the-specs)ç›´è§‰æ¥è‡ªè§„èŒƒ

æˆ‘å†æ¬¡å†³å®šåœ¨è§„èŒƒä¸­å¯»æ‰¾ç­”æ¡ˆã€‚å¹¸è¿çš„æ˜¯ï¼Œç”±äºæˆ‘å·²ç»é˜…è¯»äº†è§„èŒƒçš„è®¸å¤šéƒ¨åˆ†ï¼Œæˆ‘å¤§è‡´çŸ¥é“åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°â€”â€”æŸ¥çœ‹[CSS å¦‚ä½•ç¡®å®šå†…å®¹å®½åº¦](https://www.w3.org/TR/CSS2/visudet.html#Computing_widths_and_margins)ã€‚

è¿™é‡Œæœ‰åä¸ªéäººç±»è¯­è¨€çš„ä¾‹å­ğŸ™ˆè¯·æ€äº†æˆ‘ã€‚

1.  å†…è”ã€éæ›¿æ¢å…ƒç´ 
2.  å†…åµŒï¼Œæ›¿æ¢çš„å…ƒç´ 
3.  æ­£å¸¸æµç¨‹ä¸­çš„å—çº§éæ›¿æ¢å…ƒç´ 
4.  å—çº§ï¼Œæ­£å¸¸æµç¨‹ä¸­è¢«æ›¿æ¢çš„å…ƒç´ 
5.  æµ®åŠ¨ã€ä¸å¯æ›¿æ¢çš„å…ƒç´ 
6.  æµ®åŠ¨ã€æ›¿æ¢çš„å…ƒç´ 
7.  ç»å¯¹å®šä½ã€ä¸å¯æ›¿æ¢çš„å…ƒç´ 
8.  ç»å¯¹å®šä½ï¼Œæ›¿æ¢å…ƒç´ 
9.  'å†…åµŒå—'ï¼Œæ­£å¸¸æµç¨‹ä¸­çš„éæ›¿æ¢å…ƒç´ 
10.  å†…åµŒå—'ï¼Œæ›¿æ¢æ­£å¸¸æµç¨‹ä¸­çš„å…ƒç´ 

å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œä¸€è¾¹çœ‹ CSS è§„èŒƒä¸€è¾¹æ³¨å†Œâ€œåŒä¹‰è¯åº“â€ï¼Œæˆ‘ä»¬æ¥äº¤æ¢å­—å…¸å§:æ¯å½“æˆ‘çœ‹åˆ°â€œç”¨æˆ·ä»£ç†â€çš„æ—¶å€™ï¼Œæˆ‘å°±ä¼šæƒ³åˆ°â€œæµè§ˆå™¨â€ã€‚ç°åœ¨è½®åˆ°ä½ äº†..

æ— è®ºå¦‚ä½•ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œè¿™ 10 ä¸ªæ¡ˆä¾‹æ˜¯åœ¨â€œéæ›¿ä»£â€å’Œâ€œæ›¿ä»£â€å…ƒç´ ä¹‹é—´äº¤æ›¿å‡ºç°çš„ã€‚æˆ‘å¯¹â€œæ›¿æ¢â€å…ƒç´ çš„åŒä¹‰è¯æ˜¯â€œimgâ€ã€‚æˆ‘ç°åœ¨ä¸å…³å¿ƒå›¾åƒï¼Œè¿™ä½¿æˆ‘çš„ç›®æ ‡å‡åŠã€‚æˆ‘çš„å…ƒç´ ä¸æ˜¯â€œå†…è”çš„â€ï¼Œä¹Ÿä¸æ˜¯â€œæµ®åŠ¨çš„â€ï¼Œä¸æ˜¯â€œç»å¯¹å®šä½çš„â€ï¼Œä¹Ÿä¸æ˜¯â€œå†…è”å—çš„â€ã€‚ç„¶åæˆ‘æ‰¾åˆ°äº†æˆ‘çš„ç®±å­ï¼

> **10.3.3 å—çº§ï¼Œæ­£å¸¸æµç¨‹ä¸­ä¸å¯æ›¿æ¢çš„å…ƒç´ **
> 
> åœ¨å…¶ä»–å±æ€§çš„å·²ç”¨å€¼ä¸­ï¼Œå¿…é¡»åŒ…å«ä»¥ä¸‹çº¦æŸ:
> [â€˜å·¦è¾¹ç©ºç™½â€™](https://www.w3.org/TR/CSS2/box.html#propdef-margin-left)+[+](https://www.w3.org/TR/CSS2/box.html#propdef-border-left-width)[â€˜å·¦è¾¹ç©ºç™½â€™](https://www.w3.org/TR/CSS2/box.html#propdef-padding-left)+[â€˜å®½åº¦â€™](https://www.w3.org/TR/CSS2/visudet.html#propdef-width)+[â€˜å³è¾¹ç©ºç™½â€™](https://www.w3.org/TR/CSS2/box.html#propdef-padding-right)+[â€˜å³è¾¹ç©ºç™½â€™](https://www.w3.org/TR/CSS2/box.html#propdef-border-right-width)+[â€˜å³è¾¹ç©ºç™½â€™](https://www.w3.org/TR/CSS2/box.html#propdef-margin-right)=åŒ…å«å—çš„[çš„å®½åº¦](https://www.w3.org/TR/CSS2/visudet.html#containing-block-details)

ä¹ä¸€çœ‹ï¼Œè¿™ä¸ªç­‰å¼ä¼¼ä¹æ˜¯ä¸€ä¸ªåŒä¹‰åå¤ã€‚ä½†æ˜¯è¿™é‡ŒçœŸæ­£èµ·ä½œç”¨çš„æ˜¯:æœ‰æ—¶ä¼šæœ‰å†²çªçš„(CSS çš„æœ¯è¯­:è¿‡åº¦çº¦æŸçš„)å€¼ï¼Œæœ‰æ—¶æ²¡æœ‰è¶³å¤Ÿçš„å€¼ã€‚æœ¬èŠ‚æè¿°åº”å¦‚ä½•å¤„ç†è¿™äº›æƒ…å†µï¼Œä»¥æ»¡è¶³è¯¥ç­‰å¼:

> å¦‚æœâ€œwidthâ€ä¸æ˜¯â€œautoâ€ï¼Œå¹¶ä¸”â€œborder-left-widthâ€+â€œpadding-leftâ€+â€œwidthâ€+â€œpadding-rightâ€+â€œborder-right-widthâ€(åŠ ä¸Šä»»ä½•ä¸æ˜¯â€œautoâ€çš„â€œmargin-leftâ€æˆ–â€œmargin-rightâ€)å¤§äºåŒ…å«å—çš„å®½åº¦ï¼Œåˆ™å¯¹äºä»¥ä¸‹è§„åˆ™ï¼Œâ€œmargin-leftâ€æˆ–â€œmargin-rightâ€çš„ä»»ä½•â€œautoâ€å€¼éƒ½è¢«è§†ä¸ºé›¶ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ`width`ä¸æ˜¯`auto`ï¼Œå¹¶ä¸”æ‰€éœ€çš„æ€»ç©ºé—´å¤§äºç°æœ‰çš„ç©ºé—´ï¼Œé‚£ä¹ˆä»»ä½•`auto`éƒ½ä¸º 0ã€‚

> å¦‚æœä¸Šè¿°æ‰€æœ‰å€¼éƒ½æœ‰ä¸€ä¸ªéâ€œè‡ªåŠ¨â€çš„è®¡ç®—å€¼ï¼Œåˆ™è¿™äº›å€¼è¢«ç§°ä¸ºâ€œè¿‡åº¦çº¦æŸâ€ï¼Œå…¶ä¸­ä¸€ä¸ªä½¿ç”¨çš„å€¼å¿…é¡»ä¸å…¶è®¡ç®—å€¼ä¸åŒã€‚å¦‚æœåŒ…å«å—çš„[â€˜æ–¹å‘â€™](https://www.w3.org/TR/CSS2/visuren.html#propdef-direction)å±æ€§çš„å€¼ä¸ºâ€˜ltrâ€™ï¼Œåˆ™å¿½ç•¥æŒ‡å®šçš„å€¼[â€˜margin-rightâ€™](https://www.w3.org/TR/CSS2/box.html#propdef-margin-right)ï¼Œå¹¶è®¡ç®—è¯¥å€¼ä»¥ä½¿ç­‰å¼æˆç«‹ã€‚å¦‚æœ[â€˜æ–¹å‘â€™](https://www.w3.org/TR/CSS2/visuren.html#propdef-direction)çš„å€¼æ˜¯â€˜RTLâ€™ï¼Œè¿™ç§æƒ…å†µä¼šå‘ç”Ÿåœ¨[â€˜å·¦è¾¹è·â€™](https://www.w3.org/TR/CSS2/box.html#propdef-margin-left)ä¸Šã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæŒ‡å®šäº†æ‰€æœ‰è¿™äº›å€¼ï¼Œé‚£ä¹ˆå…¶ä¸­ä¸€ä¸ªæŒ‡å®šçš„å€¼å°†æ”¾å¼ƒå®ƒçš„çº¦æŸï¼Œåªå ç”¨å‰©ä½™çš„ç©ºé—´ã€‚æ ¹æ®ä½ æ˜¯ä»å·¦åˆ°å³è¿˜æ˜¯ä»å³åˆ°å·¦é˜…è¯»ï¼Œåé¢çš„é‚£ä¸€é¢çš„`margin`æˆä¸ºè¿™ä¸ªå€™é€‰ã€‚

> å¦‚æœæ°å¥½æœ‰ä¸€ä¸ªå€¼è¢«æŒ‡å®šä¸ºâ€œauto â€,åˆ™å®ƒçš„å·²ç”¨å€¼éµå¾ªç­‰å¼ã€‚

å®Œå…¨è¯´å¾—é€šï¼Œå¯¹å§ï¼Ÿ

> å¦‚æœ[â€˜å®½åº¦â€™](https://www.w3.org/TR/CSS2/visudet.html#propdef-width)è®¾ç½®ä¸ºâ€˜è‡ªåŠ¨â€™ï¼Œä»»ä½•å…¶ä»–â€˜è‡ªåŠ¨â€™å€¼å˜ä¸ºâ€˜0â€™ï¼Œå¹¶ä¸”[â€˜å®½åº¦â€™](https://www.w3.org/TR/CSS2/visudet.html#propdef-width)éµå¾ªç”±æ­¤äº§ç”Ÿçš„ç­‰å¼ã€‚

æˆ‘å¯¹è¿™ä¸€è¡Œçš„ç†è§£æ˜¯: **`width`æœ‰ä¸€ä¸ª`auto`ä¼˜å…ˆäºå…¶ä»–`auto`å€¼**ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ‰€æœ‰äººéƒ½æ˜¯`auto`ï¼Œé‚£ä¹ˆ`width`å°±å æ®äº†æ•´ä¸ªå‰©ä½™ç©ºé—´ï¼Œå…¶ä»–äººéƒ½å˜æˆäº† 0ã€‚åŒæ ·ï¼Œè¿™æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºæˆ‘å®é™…ä¸Šä¸å¸Œæœ›è¿™äº›å¡«å……å’Œç©ºç™½å‡ºç°ï¼Œé™¤éæˆ‘æŒ‡å®šå®ƒä»¬ã€‚

[![](../Images/f1cdf507f2dcffb5da566e0b02e32815.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--nLz4LjFw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://d2mxuefqeaa7sj.cloudfront.net/s_46691719D9A10FD85475E1AE5C9BBC1C5717457E8F6BBDBAEABA998CE95A0357_1552186422509_image.png)

ç”±æ­¤å¯è§ï¼Œå¦‚æœå‘¨å›´æœ‰æŒ‡å®šçš„å€¼ï¼Œ`width`å°†ä¼šè‡ªæˆ‘è°ƒæ•´ï¼ŒåŒæ—¶ä»ç„¶æ¯”å…¶ä»–`auto`å€¼å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œä»è€Œå æ®æ•´ä¸ªå‰©ä½™ç©ºé—´ã€‚

[![](../Images/f4128a870b95b4591e530af524599de1.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--rYK6rsPZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://d2mxuefqeaa7sj.cloudfront.net/s_46691719D9A10FD85475E1AE5C9BBC1C5717457E8F6BBDBAEABA998CE95A0357_1552186896507_image.png)

è¿™æ˜¯è¿™ä¸¤å¹…æ’å›¾çš„ä»£ç ç¬”é“¾æ¥ã€‚

[https://codepen.io/wgao19/embed/WmOYve?height=600&default-tab=result&embed-version=2](https://codepen.io/wgao19/embed/WmOYve?height=600&default-tab=result&embed-version=2)

æœ€åï¼Œ

> å¦‚æœ[ã€å·¦è¾¹è·ã€‘](https://www.w3.org/TR/CSS2/box.html#propdef-margin-left)å’Œ[ã€å³è¾¹è·ã€‘](https://www.w3.org/TR/CSS2/box.html#propdef-margin-right)éƒ½ä¸ºâ€œè‡ªåŠ¨â€ï¼Œåˆ™å®ƒä»¬çš„ä½¿ç”¨å€¼ç›¸ç­‰ã€‚è¿™å°†ä½¿å…ƒç´ ç›¸å¯¹äºåŒ…å«å—çš„è¾¹ç¼˜æ°´å¹³å±…ä¸­ã€‚

è¿™é‡Œæ˜¯æ¯ä¸ªäººéƒ½åœ¨ä½¿ç”¨çš„`margin: 0 auto`æŠ€å·§ğŸ™‚

å‰©ä¸‹çš„ 9 ä¸ªéƒ¨åˆ†è¦ä¹ˆæœ‰ç€ç›¸ä¼¼çš„ç²¾ç¥ï¼Œè¦ä¹ˆéµå¾ªç€ä¸€ç§æœåŠ¡äºä¸Šä¸‹æ–‡çš„é€»è¾‘ã€‚

## [](#a-few-solutions-to-the-problem)å‡ ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ³•

`display: inline` on children è‡ªç”±è®¾ç½®å®½åº¦ï¼Œä½†ä¹Ÿä½¿å®ƒä»¬å‡ºç°åœ¨åŒä¸€è¡Œä¸Šã€‚

**æµ®åŠ¨å…ƒç´ **

ä¹Ÿä¸ºé‚£äº›å­èŠ‚ç‚¹è‡ªç”±è®¾ç½®å®½åº¦ï¼Œä½†æ˜¯æˆ‘éœ€è¦ä¸ºçˆ¶èŠ‚ç‚¹è®¾ç½®ä¸€ä¸ªç‰¹å®šçš„å®½åº¦ã€‚
çˆ¶å®½åº¦éœ€è¦å¼ºåˆ¶æ¯ä¸ªå…ƒç´ æ¢è¡Œã€‚
å¦åˆ™å­èŠ‚ç‚¹ä»ç„¶ä¼šå‡ºç°åœ¨åŒä¸€è¡Œï¼Œè¿™ä¸ä¼šäº§ç”Ÿæƒ³è¦çš„è®¾è®¡ã€‚
ç„¶è€Œï¼Œè¿™å¹¶ä¸åƒæ˜¯ä¸€ä¸ªæ•´æ´çš„å®ç°ï¼Œæ‰€ä»¥æˆ‘å¯¹æ­¤å¹¶ä¸æ»¡æ„ã€‚

[https://codepen.io/wgao19/embed/pYwQVR?height=600&default-tab=result&embed-version=2](https://codepen.io/wgao19/embed/pYwQVR?height=600&default-tab=result&embed-version=2)

å¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯å°†å®ƒä»¬åŒ…è£…åœ¨ä¸€ä¸ªé¢å¤–çš„`block` div ä¸­ï¼Œç„¶åå°†å…·æœ‰`float: right`æˆ–`display: inline`çš„å‰ªè¾‘æ”¾å…¥å…¶ä¸­ï¼Œè¿™ç»™äº†å®ƒä»¬è‡ªç”±çš„å®½åº¦ã€‚ä½†æˆ‘ä¹Ÿä¸å–œæ¬¢é‚£æ ·ã€‚

**Flexbox åˆ›å»ºçµæ´»å®½åº¦çš„è¡Œ**

æˆ‘æœ€ç»ˆé€‰æ‹©äº†`flex-box`ï¼Œ[ç¬”å](https://codepen.io/wgao19/pen/XGNOXe)ã€‚
é˜…è¯» flexbox è§„æ ¼æ¯”æˆ‘æƒ³è±¡çš„æ›´æ–°é²œã€‚
æ‰€ä»¥æˆ‘ä¼šè·Ÿè¿›ä¸€ä¸ªä¸“é—¨é’ˆå¯¹å®ƒçš„å¸–å­:ã€‘

[https://codepen.io/wgao19/embed/XGNOXe?height=600&default-tab=result&embed-version=2](https://codepen.io/wgao19/embed/XGNOXe?height=600&default-tab=result&embed-version=2)

é‚£ä¹ˆï¼Œå›å¤´è§

## [](#links)é“¾æ¥

*   [CSS 2 - 10 å¯è§†åŒ–æ ¼å¼æ¨¡å‹è¯¦æƒ…](https://www.w3.org/TR/CSS2/visudet.html)