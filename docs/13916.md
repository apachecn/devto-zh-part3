# ç¬¬ 014 é›†-ç”¨ Vuex-ASP.NET æ ¸å¿ƒé›†ä¸­å‰ç«¯çŠ¶æ€:ä» 0 åˆ°è¿‡åº¦æ€ä¼¤

> åŸæ–‡:[https://dev.to/joaofbantunes/episode-014-é›†ä¸­-å‰ç«¯-çŠ¶æ€-ä» 0 åˆ°è¿‡æ€-1](https://dev.to/joaofbantunes/episode-014---centralizing-frontend-state-with-vuex---aspnet-core-from-0-to-overkill-1dhe)

åœ¨è¿™ä¸€é›†é‡Œï¼Œæˆ‘ä»¬ç»§ç»­åœ¨å‰ç«¯ç©ï¼Œé€šè¿‡ä½¿ç”¨ Vuex é›†ä¸­æ‰€æœ‰çŠ¶æ€ï¼Œåˆ©ç”¨æœ€è¿‘å¯èƒ½æ›´æµè¡Œçš„æ¨¡å¼ï¼Œå› ä¸ºå®ƒä»¬ä¸ React å’Œ Redux ä¸€èµ·ä½¿ç”¨ã€‚

å¯¹äºæ¼”ç»ƒï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹ä¸‹ä¸€ä¸ªè§†é¢‘ï¼Œä½†å¦‚æœæ‚¨å–œæ¬¢å¿«é€Ÿé˜…è¯»ï¼Œè¯·è·³åˆ°ä¹¦é¢ç»¼åˆã€‚

[https://www.youtube.com/embed/OtQVABhGPgQ](https://www.youtube.com/embed/OtQVABhGPgQ)

æ•´ä¸ªç³»åˆ—çš„æ’­æ”¾åˆ—è¡¨æ˜¯[è¿™é‡Œæ˜¯](https://www.youtube.com/playlist?list=PLN0oN9Azm_MMAjk3nhRnmHdr1l0160Dhs)ã€‚
T3ã€‘

## [T1ã€‘ç®€ä»‹](#intro)

åœ¨ä¸Šä¸€é›†ä¸­ï¼Œæˆ‘ä»¬å¼€å§‹ä½¿ç”¨ Vue.js æ„å»ºå‰ç«¯ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåº”ç”¨ç¨‹åºæ²¡æœ‰ä¸åç«¯é€šä¿¡ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¿å­˜åœ¨ç»„ä»¶å®ä¾‹ä¸­ã€‚åœ¨è¿™ä¸€é›†é‡Œï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰è¿æ¥å‰ç«¯å’Œåç«¯ï¼Œä½†æ˜¯ä½ å°†æ”¹å˜æˆ‘ä»¬å¤„ç†æ•°æ®çš„æ–¹å¼ï¼Œé€šè¿‡ä½¿ç”¨ä¸€ç§çŠ¶æ€ç®¡ç†æ¨¡å¼å°†æ‰€æœ‰ä¸œè¥¿é›†ä¸­åœ¨ä¸€ä¸ªå­˜å‚¨ä¸­ï¼Œæ­£å¦‚åœ¨ [Vuex](https://vuex.vuejs.org/) æ–‡æ¡£ä¸­æ‰€æè¿°çš„ã€‚

Vuex å’Œ Vue.js ä¸€èµ·ç”¨ï¼Œå°±åƒ [Redux](https://redux.js.org/) å’Œ [React](https://reactjs.org/) ä¸€èµ·ç”¨ï¼Œ [NgRx](https://ngrx.io/) å’Œ [Angular](https://angular.io/) ä¸€èµ·ç”¨ä¸€æ ·(è¿˜æœ‰æ›´å¤šå¤‡é€‰æ–¹æ¡ˆï¼Œä½†æˆ‘è®¤ä¸ºè¿™äº›æ˜¯æœ€çŸ¥åçš„)ã€‚

æ­£å¦‚æˆ‘æåˆ°çš„ï¼Œåœ¨å‰ç«¯ä½¿ç”¨å­˜å‚¨çš„ç›®æ ‡ä¸ä»…æ˜¯æ‹¥æœ‰ä¸€ä¸ªå¤„ç†æ•°æ®è¾“å…¥å’Œè¾“å‡ºçš„å•ç‚¹ï¼Œè€Œä¸”è¿˜è¦é¿å…ç›¸åŒçš„æ•°æ®åˆ†æ•£åœ¨ç»„ä»¶ä¸­ï¼Œä»è€Œå¯¼è‡´å„ç§é—®é¢˜ï¼Œä»¥ç¡®ä¿ä¸€åˆ‡ä¿æŒåŒæ­¥ã€‚é€šè¿‡ä¿æŒæ•°æ®çš„é›†ä¸­ï¼Œæ‰€æœ‰æ„Ÿå…´è¶£çš„ç»„ä»¶éƒ½å¯ä»¥çœ‹åˆ°æ¯ä¸€ä¸ªå˜åŒ–ï¼Œç„¶åèƒ½å¤Ÿç›¸åº”åœ°æ›´æ–°å®ƒä»¬çš„ UIã€‚

å¯¹äºåº”ç”¨ç¨‹åºçš„å½“å‰çŠ¶æ€ï¼Œå®ƒçœŸçš„å¾ˆå°å¾ˆç®€å•ï¼Œä½¿ç”¨å•†åº—æ˜¯å¤šä½™çš„ï¼Œä½†æ˜¯è€ƒè™‘åˆ°æˆ‘ä»¬æ­£åœ¨æ„å»ºçš„é¡¹ç›®ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥é¢„æœŸåº”ç”¨ç¨‹åºå°†ä¼šå¢é•¿ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä»ä¸€å¼€å§‹å°±ä¸ºæ­¤åšå¥½å‡†å¤‡ã€‚

## [](#vuex-core-concepts)Vuex æ ¸å¿ƒæ¦‚å¿µ

è®©æˆ‘ä»¬å…ˆå¿«é€Ÿæµè§ˆä¸€ä¸‹ Vuex çš„æ ¸å¿ƒæ¦‚å¿µï¼Œè¿™äº›æ¦‚å¿µåœ¨[é¡¹ç›®çš„ä¸»é¡µ](https://vuex.vuejs.org/)ä¸­æœ‰å¾ˆå¥½çš„è®°å½•ã€‚

### [](#state)çŠ¶æ€

çŠ¶æ€æ˜¯åŒ…å«æ‰€æœ‰åº”ç”¨ç¨‹åºçº§æ•°æ®çš„å•ä¸ªå¯¹è±¡ã€‚è¿™æ˜¯æˆ‘ä»¬è·å–æ•°æ®ä»¥ä¾›ç»™ç»„ä»¶çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯æ‰€æœ‰æ›´æ”¹å¿…é¡»åˆ°è¾¾çš„åœ°æ–¹ï¼Œå°½ç®¡ç»„ä»¶ä¸ä¼šç›´æ¥æ›´æ”¹çŠ¶æ€ï¼Œè€Œæ˜¯é€šè¿‡ä½¿ç”¨çªå˜ã€‚

### [](#mutations)çªå˜

çªå˜æ˜¯æ”¹å˜çŠ¶æ€çš„æ–¹å¼ã€‚çªå˜åƒäº‹ä»¶ä¸€æ ·å·¥ä½œï¼Œæœ‰ä¸€ä¸ªç±»å‹/åç§°å’Œä¸€ä¸ªå…³è”çš„å¤„ç†ç¨‹åºã€‚å½“æˆ‘ä»¬æƒ³è¦åšå‡ºæ”¹å˜æ—¶ï¼Œæˆ‘ä»¬åšä¸€ä¸ªè°ƒç”¨å¤„ç†ç¨‹åºçš„`store.commit('mutation-type')`(æˆ–è€…å¦‚æœæˆ‘ä»¬æƒ³è¦å°†æ•°æ®ä¼ é€’ç»™çªå˜å¤„ç†ç¨‹åºï¼Œå°±åš`store.commit('mutation-type', somePayload)`)ã€‚

### [](#getters)å¸æ‚

Getters ç±»ä¼¼äºçŠ¶æ€çš„æ•°æ®åº“è§†å›¾ã€‚å¦‚æœæˆ‘ä»¬åªæ˜¯ä½¿ç”¨æ¥è‡ªå­˜å‚¨çš„æ•°æ®ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦ä½¿ç”¨å®ƒä»¬(å› ä¸ºåœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬ä¸ä¼šä½¿ç”¨å®ƒä»¬)ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦ä¸€äº›æ´¾ç”Ÿçš„ä¿¡æ¯ï¼Œå¹¶åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ getters æ¥é›†ä¸­è¿™ä¸ªè‡ªå®šä¹‰çš„çŠ¶æ€è§†å›¾ã€‚

### [](#actions)åŠ¨ä½œ

åŠ¨ä½œçš„è°ƒç”¨å’Œè®¾ç½®æ–¹å¼ä¸çªå˜ç›¸ä¼¼ï¼Œä½†ç”¨é€”ä¸åŒã€‚ä»ç»„ç»‡çš„è§’åº¦æ¥çœ‹ï¼Œçªå˜ä¸åº”è¯¥çœŸçš„æœ‰é€»è¾‘ï¼Œåªåº”è¯¥æ”¹å˜ç»™å®š(å¯é€‰)è¾“å…¥çš„çŠ¶æ€ã€‚å¦ä¸€æ–¹é¢ï¼ŒåŠ¨ä½œå¯èƒ½æœ‰é€»è¾‘å¹¶å¯¼è‡´å‰¯ä½œç”¨ï¼Œæ¯”å¦‚è°ƒç”¨ APIã€‚åŠ¨ä½œä¸ä¼šç›´æ¥æ”¹å˜çŠ¶æ€ï¼Œå®ƒä»¬å¿…é¡»ä¸ºæ­¤è°ƒç”¨çªå˜ã€‚æ­¤å¤–ï¼Œåœ¨è°ƒç”¨ API çš„ä¸Šä¸‹æ–‡ä¸­éå¸¸é‡è¦çš„æ˜¯ï¼Œå½“åŠ¨ä½œå…è®¸å¼‚æ­¥ä»£ç æ—¶ï¼Œçªå˜å¿…é¡»æ˜¯åŒæ­¥çš„ã€‚

### [](#modules)æ¨¡å—

æ­£å¦‚æˆ‘å‰é¢æåˆ°çš„ï¼ŒçŠ¶æ€æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰æ•°æ®çš„å•ä¸€å¯¹è±¡ã€‚éšç€åº”ç”¨ç¨‹åºçš„å¢é•¿ï¼ŒçŠ¶æ€ä¹Ÿéšä¹‹å¢é•¿ï¼Œå•†åº—å¯èƒ½ä¼šå¼€å§‹è¿‡åº¦å¢é•¿ï¼Œå¹¶ä¸”åœ¨å¼€å‘æ—¶å˜å¾—éš¾ä»¥æ¨ç†ã€‚æ¨¡å—å…è®¸æˆ‘ä»¬åˆ†å‰²å­˜å‚¨(åŒ…æ‹¬å®ƒçš„æ‰€æœ‰éƒ¨åˆ†:çŠ¶æ€ã€çªå˜ã€åŠ¨ä½œï¼Œ...)æ‰èƒ½æœ‰æ›´å¥½çš„ç»„ç»‡ã€‚

## [](#replace-storets)æ›¿æ¢ store.ts

å¦‚æœä½ è¿˜è®°å¾—ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œå½“æˆ‘ä»¬æ­å»ºåº”ç”¨ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬æœ‰æœºä¼šé€‰æ‹©æˆ‘ä»¬æƒ³è¦çš„ç‰¹æ€§ï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯ Vuexã€‚é‰´äºæ­¤ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®çš„`src`æ–‡ä»¶å¤¹ä¸­æœ‰ä¸€ä¸ª`store.ts`æ–‡ä»¶ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å¤šä¸ªæ–‡ä»¶ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç»„ç»‡å•†åº—ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåä¸º`store`çš„æ–°æ–‡ä»¶å¤¹ï¼Œå°†ç°æœ‰çš„`store.ts`æ–‡ä»¶ç§»åˆ°é‚£é‡Œï¼Œå¹¶å°†å…¶é‡å‘½åä¸º`index.ts`ã€‚

## [](#creating-the-state)åˆ›å»ºçŠ¶æ€

è®©æˆ‘ä»¬æœ€ç»ˆè¿›å…¥ä»£ç ï¼æˆ‘ä»¬å°†ä»å®šä¹‰æˆ‘ä»¬çš„çŠ¶æ€å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯å®ƒçš„æ¨¡å‹ã€‚è¯·è®°ä½ï¼Œæˆ‘æ­£åœ¨åšçš„ä¸€äº›äº‹æƒ…å¹¶ä¸æ˜¯çœŸæ­£å¿…è¦çš„ï¼Œä½†æˆ‘æ­£åœ¨ä½¿ç”¨ TypeScriptï¼Œå¹¶å°½å¯èƒ½ä½¿ä¸€åˆ‡éƒ½æ˜¾å¼ï¼Œæ‰€ä»¥è¿™æ®µä»£ç æœ€ç»ˆæ¯”é€šå¸¸çš„ Vue.js ç¤ºä¾‹æ›´åŠ å†—é•¿ï¼Œè¿™äº›ç¤ºä¾‹é€šå¸¸ä¸ä½¿ç”¨ TypeScript(å¹¶ä¸”ç”±æ›´æœ‰èƒ½åŠ›çš„å‰ç«¯å¼€å‘äººå‘˜åˆ›å»ºğŸ˜›).

åœ¨`store`æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª`state.ts`æ–‡ä»¶ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åŸºæœ¬ä¸Šå®šä¹‰äº†çŠ¶æ€æ¨¡å‹ã€‚

`store/state.ts`

```
export interface Group {
    id: number;
    name: string;
    rowVersion: string;
}

export interface RootState {
    groups: Group[];
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`Group`å‹å·ä¸æˆ‘ä»¬ä¹‹å‰è§è¿‡å¤ªå¤šæ¬¡çš„å‹å·ç›¸åŒï¼Œä½†æˆ‘ä¸æƒ³åœ¨å•†åº—é‡Œæåˆ°è¿™äº›å‹å·ã€‚`RootState`å°†ä»£è¡¨æˆ‘ä»¬è®¨è®ºè¿‡çš„å•ä¸€çŠ¶æ€æ ‘å¯¹è±¡ã€‚ç°åœ¨æˆ‘ä»¬æ‰€æœ‰çš„æ˜¯ç»„çš„é›†åˆï¼Œæœ€ç»ˆæˆ‘ä»¬ä¼šæ·»åŠ æ›´å¤šçš„ä¸œè¥¿ã€‚

ç°åœ¨æˆ‘ä»¬æœ‰äº†çŠ¶æ€çš„æ¨¡å‹ï¼Œè®©æˆ‘ä»¬åœ¨`store/index.ts`æ–‡ä»¶ä¸­ä½¿ç”¨å®ƒä»¬ã€‚åœ¨ç¼–è¾‘å®ƒä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆçœ‹çœ‹å·²ç»å­˜åœ¨çš„ä¸œè¥¿ï¼Œå®ƒä»¬æ˜¯ç”± Vue CLI æ­å»ºçš„ã€‚

`store/index.ts`

```
import Vue from 'vue';
import Vuex from 'vuex';

Vue.use(Vuex);

export default new Vuex.Store({
  state: {

  },
  mutations: {

  },
  actions: {

  },
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åªå‘ç”Ÿäº†å‡ ä»¶äº‹ï¼Œæ‰€ä»¥ç†è§£èµ·æ¥åº”è¯¥å¾ˆç®€å•ï¼Œä½†æ€»è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨`Vue.use(Vuex)`å‘Šè¯‰ Vue ä½¿ç”¨ Vuexï¼Œç„¶åæˆ‘ä»¬å¯¼å‡ºä¸€ä¸ª`Vuex.Store`çš„æ–°å®ä¾‹ï¼Œä¼ å…¥ä¸€ä¸ªé…ç½®å¯¹è±¡ã€‚åŒæ ·ï¼Œåœ¨`src`æ–‡ä»¶å¤¹çš„`main.ts`æ–‡ä»¶ä¸­ï¼Œå­˜å‚¨è¢«å¯¼å…¥å¹¶ä¼ é€’ç»™`Vue`æ„é€ å‡½æ•°ã€‚

æˆ‘æƒ³åœ¨ç¼–è¾‘åçš„ç‰ˆæœ¬ä¹‹å‰æ˜¾ç¤ºåŸå§‹ç‰ˆæœ¬ï¼Œå› ä¸ºæ‚¨ä¼šæ³¨æ„åˆ°æˆ‘å°†`Vuex.Store`æ„é€ å‡½æ•°å‚æ•°æå–åˆ°äº†ä¸€ä¸ªå˜é‡ä¸­ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥å£°æ˜å®ƒçš„ç±»å‹å¹¶åœ¨åˆ›å»ºå¯¹è±¡æ—¶å¾—åˆ°ä¸€äº›æç¤ºã€‚

`store/index.ts`

```
import Vue from 'vue';
import Vuex, { StoreOptions } from 'vuex';
import { RootState } from './state';

Vue.use(Vuex);

export const options: StoreOptions<RootState> = {
    state: {
        groups = [
            { id: 1, name: 'Sample Group', rowVersion: 'aaa' },
            { id: 2, name: 'Another Sample Group', rowVersion: 'bbb' }
        ]
    },
    mutations: {},
    actions: {}    
};

export default new Vuex.Store(options); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å®é™…ä¸Šæ²¡æœ‰å¤ªå¤šå˜åŒ–ï¼Œå°±åƒå‰é¢æåˆ°çš„ï¼Œæˆ‘ä»¬å°†`Vuex.Store`æ„é€ å‡½æ•°å‚æ•°æå–åˆ°ä¸€ä¸ªå˜é‡ä¸­ï¼Œå°†å…¶ç±»å‹å£°æ˜ä¸º`StoreOptions<RootState>`ï¼Œç„¶åç”¨ä¸€äº›æ•°æ®åˆå§‹åŒ–çŠ¶æ€ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç«‹å³åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°ä¸€äº›ä¸œè¥¿ã€‚

## [](#accessing-the-state-from-the-components)ä»ç»„ä»¶ä¸­è®¿é—®çŠ¶æ€

ä»ç»„ä»¶è®¿é—®çŠ¶æ€ç›¸å½“ç®€å•ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šä¸€é›†ä¸­çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨`Groups.vue`ä¸­è¿›è¡Œä¿®æ”¹ï¼Œå› ä¸ºå®ƒæ˜¯æˆ‘ä»¬çš„æ™ºèƒ½ç»„ä»¶ï¼Œå¹¶å°†æ•°æ®ä¼ é€’ç»™å®ƒçš„å­ç»„ä»¶ã€‚

`Groups.vue`

```
<template>
  <GroupList v-bind:groups="groups" v-on:update="onUpdate" v-on:remove="onRemove" v-on:add="onAdd"/>
</template>
<script lang="ts">
import { Component, Vue } from 'vue-property-decorator';
import GroupList from '@/components/groups/GroupList.vue';
import { GroupViewModel } from '@/components/groups/models';
import { types } from '@/store/modules/groups/actions';

@Component({
  components: {
    GroupList
  }
})
export default class Groups extends Vue {
  private get groups(): GroupViewModel[] {
      return this.$store.state.groups;
  }

  private onUpdate(group: GroupViewModel): void {
    // TODO: use store
  }

  private onRemove(groupId: number): void {
    // TODO: use store
  }

  private onAdd(group: GroupViewModel): void {
    // TODO: use store
  }
}
</script> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸»è¦çš„å˜åŒ–æ˜¯æˆ‘ä»¬æ‹¥æœ‰çš„`groups`å±æ€§ï¼Œç°åœ¨å·²ç»å˜æˆäº†ä¸€ä¸ªè®¿é—®å•†åº—çš„ getterã€‚ä½ ä¸éœ€è¦ç‰¹åˆ«ä½¿ç”¨ä¸€ä¸ª getterï¼Œæˆ‘å°±æ˜¯è¿™ä¹ˆåšçš„ï¼Œä½†æ˜¯è¯·è®°ä½ï¼Œå¦‚æœä½ åªæ˜¯ç”¨å­˜å‚¨ä¸­çš„å€¼åˆå§‹åŒ–ä¸€ä¸ªå±æ€§ï¼Œå¦‚æœçŠ¶æ€æ”¹å˜äº†ï¼Œæˆ‘ä»¬ä¸ä¼šçœ‹åˆ°å®ƒã€‚

```
// if we initialized the property like this and later the state changed
// we wouldn't see it reflected in the UI
private groups: GroupViewModel[] = this.$store.state.groups; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#using-mutations-to-change-state)åˆ©ç”¨çªå˜æ¥æ”¹å˜çŠ¶æ€

ç°åœ¨æˆ‘ä»¬æœ‰äº†çŠ¶æ€ï¼Œå¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨å®ƒï¼Œä½†æ˜¯æˆ‘ä»¬ç¼ºå°‘æ”¹å˜ç»„çš„èƒ½åŠ›ï¼Œå°±åƒæˆ‘ä»¬çš„äº‹ä»¶å¤„ç†ç¨‹åº(`onUpdate`)ä¸€æ ·ã€‚`onRemove`å’Œ`onAdd`ä¸èƒ½åƒä»¥å‰ä¸€æ ·ç›´æ¥æ“ä½œæ•°æ®ï¼Œå› ä¸ºå®ƒä¸å†æ˜¯ç»„ä»¶çš„æœ¬åœ°æ•°æ®ã€‚ä¸ºäº†é‡æ–°è·å¾—æ”¹å˜çŠ¶æ€çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨çªå˜ã€‚

ä¸ºæ­¤ï¼Œè®©æˆ‘ä»¬å›åˆ°`store/index.ts`å¹¶åˆ›å»ºçªå˜ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ä¸åœ¨`Groups.vue`äº‹ä»¶å¤„ç†ç¨‹åºä¸­ç›¸åŒçš„é€»è¾‘ã€‚

`store/index.ts`

```
// ...

let currentId: number = 0;

export const options: StoreOptions<RootState> = {
    // ...
    mutations: {
        add(state: GroupsState, group: Group): void {
            group.id = ++currentId;
            state.groups = [...state.groups, group];
        },
        update(state: GroupsState, group: Group): void {
            const index = state.groups.findIndex(g => g.id === group.id);
            state.groups = [...state.groups.slice(0, index), group, ...state.groups.slice(index + 1, state.groups.length)];
        },
        remove(state: GroupsState, groupId: number): void {
            state.groups = state.groups.filter(g => g.id !== groupId);
        },
    },
    // ...
};
// ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šåªæ˜¯æŠŠé€»è¾‘ä»ä¸€ä¸ªåœ°æ–¹ç§»åˆ°äº†å¦ä¸€ä¸ªåœ°æ–¹ã€‚ä¸€ä¸ªç»†å¾®çš„åŒºåˆ«æ˜¯ï¼Œ`add`ã€`update`å’Œ`remove`å‡½æ•°ä¸åƒç»„ä»¶é‚£æ ·ç›´æ¥æ“ä½œæŸäº›å±æ€§ï¼Œè€Œæ˜¯æ¥æ”¶çŠ¶æ€ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œçªå˜çš„æœ‰æ•ˆè½½è·ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚`currentId`å˜é‡ä¸æ˜¯å¾ˆå¤§ï¼Œä½†è¿™åªæ˜¯ä¸€ä¸ªä¸´æ—¶çš„è§£å†³æ–¹æ¡ˆï¼Œç›´åˆ°æˆ‘ä»¬è¿æ¥åˆ° web API(åœ¨ä¸‹ä¸€é›†)ï¼Œæ‰€ä»¥æˆ‘ä¸ä¼šæ‰“æ‰°ã€‚

ç°åœ¨æˆ‘ä»¬éœ€è¦ä»ç»„ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºä¸­è°ƒç”¨çªå˜ã€‚

`Groups.vue`

```
// ...

private onUpdate(group: GroupViewModel): void {
  this.$store.commit('update', group);
}

private onRemove(groupId: number): void {
  this.$store.commit('remove', groupId);
}

private onAdd(group: GroupViewModel): void {
  this.$store.commit('add', group);
}

// ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­æ£€æŸ¥åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸ä¹‹å‰ç›¸åŒçš„åŠŸèƒ½ï¼Œç°åœ¨ä½¿ç”¨å•†åº—ã€‚

## [](#using-actions-to-cause-side-effects)åˆ©ç”¨åŠ¨ä½œå¼•èµ·å‰¯ä½œç”¨

è™½ç„¶æˆ‘ä»¬ç°åœ¨ä¸éœ€è¦åŠ¨ä½œï¼Œå› ä¸ºæˆ‘ä»¬ä¸ä¼šå¼•èµ·å‰¯ä½œç”¨ï¼Œä¹Ÿå°±æ˜¯å‘ API å‘å‡ºè¯·æ±‚ï¼Œä½†æˆ‘ä»¬ä¼šåˆ›å»ºå®ƒä»¬ä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚æˆ‘ä»¬è¿˜å°†åœ¨åˆ›å»ºåŠ¨ä½œæ—¶å¯¹çŠ¶æ€å’Œçªå˜è¿›è¡Œä¸€äº›è°ƒæ•´ã€‚

`store/index.ts`

```
// ...

export const options: StoreOptions<RootState> = {
    state: {
        groups: []
    },
    mutations: {
        setGroups(state: GroupsState, groups: Group[]): void {
            state.groups = [...groups];
        },
        // ...
    },
    actions: {
        loadGroups({ commit }): void {
            // TODO: fetch groups from the api
            const groups = [
                { id: 1, name: 'Sample Group', rowVersion: 'aaa' },
                { id: 2, name: 'Another Sample Group', rowVersion: 'bbb' }
            ];
            commit('setGroups', groups);
        },
        add({ commit }, group: Group): void {
            // TODO: make the api request before committing to the store
            commit('add', group);
        },
        update({ commit }, group: Group): void {
            // TODO: make the api request before committing to the store
            commit('update', group);
        },
        remove({ commit }, groupId: number): void {
            // TODO: make the api request before committing to the store
            commit('remove', groupId);
        }
    }
    // ...
};

// ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é¦–å…ˆæ˜¯çŠ¶æ€çš„å˜åŒ–å’Œçªå˜ã€‚çŠ¶æ€ç°åœ¨ç”¨ä¸€ä¸ªç©ºçš„ç»„é›†åˆåˆå§‹åŒ–ï¼Œå› ä¸ºè¿™äº›é›†åˆåº”è¯¥æ¥è‡ª APIã€‚å¯¹äºçªå˜ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª`setGroups`å‡½æ•°ï¼Œè¿™å°†å…è®¸æˆ‘ä»¬ä½¿ç”¨æ¥è‡ª API çš„å“åº”æ¥åˆå§‹åŒ–æ•°æ®ã€‚

ç°åœ¨çš„è¡ŒåŠ¨ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ä» TODOs çœ‹åˆ°æ˜¯éå¸¸ä¸å®Œæ•´çš„ã€‚

`loadGroups`åŠ¨ä½œæœ€ç»ˆå°†ä» API ä¸­è·å–æ•°æ®ï¼Œç„¶åå°†å…¶ä¼ é€’ç»™`setGroups`å˜å¼‚æ¥å­˜å‚¨å®ƒã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ­£åœ¨ç”¨ç›¸åŒçš„ç¡¬ç¼–ç æ•°æ®åˆå§‹åŒ–è¿™äº›ç»„ã€‚å…¶ä»–åŠ¨ä½œæœ€ç»ˆä¹Ÿä¼šè°ƒç”¨ APIï¼Œå¹¶æ ¹æ®å“åº”ä½¿ç”¨çªå˜æ¥å­˜å‚¨æ•°æ®ï¼Œä½†æ˜¯ç°åœ¨åªæ˜¯ç®€å•åœ°ä½¿ç”¨æ¥æ”¶åˆ°çš„æœ‰æ•ˆè½½è·ç›´æ¥è°ƒç”¨çªå˜ã€‚

ç°åœ¨æˆ‘ä»¬å¯¹`Groups.vue`åšä¸€äº›å°çš„è°ƒæ•´æ¥åˆ©ç”¨åŠ¨ä½œã€‚

`Groups.vue`

```
// ...

export default class Groups extends Vue {
    private get groups(): GroupViewModel[] {
        return this.$store.state.groups;
    }

    public mounted(): void {
        this.$store.dispatch('loadGroups');
    }

    private onUpdate(group: GroupViewModel): void {
        this.$store.dispatch('update', group);
    }

    private onRemove(groupId: number): void {
        this.$store.dispatch('remove', groupId);
    }

    private onAdd(group: GroupViewModel): void {
        this.$store.dispatch('add', group);
    }
}

// ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œåœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯æˆ‘ä»¬ç°åœ¨è°ƒç”¨äº†`dispatch`è€Œä¸æ˜¯`commit`ï¼Œå¯¼è‡´åŠ¨ä½œè€Œä¸æ˜¯çªå˜è¢«è°ƒç”¨ã€‚æˆ‘è¿˜æ·»åŠ äº†ä¸€ä¸ª`mounted`ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå®ƒåœ¨ç»„ä»¶å®ä¾‹æŒ‚è½½æ—¶è¢«è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ–°åˆ›å»ºçš„å…ƒç´ å®ä¾‹æ”¾ç½®åˆ°ä½ä¹‹å‰ã€‚åœ¨è¿™ä¸ªé’©å­ä¸­ï¼Œæˆ‘ä»¬è°ƒåº¦ load groups åŠ¨ä½œï¼Œæ‰€ä»¥å½“æˆ‘ä»¬åŠ è½½ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸€äº›æ•°æ®ã€‚ä¹Ÿè®¸ä¸€ä¸ªæ›´å¥½çš„åœ°æ–¹æŠŠè¿™ä¸ªè¡ŒåŠ¨è°ƒåº¦å°†æ˜¯ä¸€ä¸ª[å¯¼èˆªè­¦å«](https://router.vuejs.org/guide/advanced/navigation-guards.html)ï¼Œä½†å¯¹äºè¿™äº›ç»„ä»¶å®‰è£…çš„åˆå§‹æµ‹è¯•å·²ç»è¶³å¤Ÿå¥½äº†ã€‚

## [](#organizing-the-store-with-modules)ç”¨æ¨¡å—ç»„ç»‡å•†åº—

ä¸ºäº†æ›´å¥½åœ°ç»„ç»‡æˆ‘ä»¬çš„å•†åº—ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒåˆ†æˆå‡ ä¸ªæ¨¡å—ã€‚æ­¤å¤–ï¼Œå½“æˆ‘ä»¬åœ¨ä¸€ä¸ªç»„ç»‡æ³¨é‡Šä¸­æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†çªå˜å’ŒåŠ¨ä½œç§»åŠ¨åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚

åœ¨`store`æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„`modules`æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºäº†ä¸€ä¸ª`groups`æ–‡ä»¶å¤¹ï¼Œè¿™æ˜¯æˆ‘ä»¬ç›®å‰ä»…æœ‰çš„æ¨¡å—ã€‚ç°åœ¨è®©æˆ‘ä»¬å¼€å§‹åˆ›å»ºä¸€äº›æ–‡ä»¶ï¼Œå³ä¸€ä¸ªç”¨äºçŠ¶æ€æ¨¡å‹ï¼Œä¸€ä¸ªç”¨äºçªå˜ï¼Œä¸€ä¸ªç”¨äºåŠ¨ä½œï¼Œæœ€åä¸€ä¸ªç”¨äºåŒ…å«æ¨¡å—ã€‚

### [](#state)çŠ¶æ€

å¯¹äºçŠ¶æ€ï¼Œæˆ‘ä»¬å°†æ‹¥æœ‰ä¸åœ¨`store/state.ts`ä¸­ç›¸åŒçš„çŠ¶æ€ï¼Œä½†æ˜¯æˆ‘ä»¬å°†æ‹¥æœ‰ä¸€ä¸ª`GroupsState`ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª`RootState`ï¼Œå®ƒæ˜¯ç‰¹å®šäºæ¨¡å—çš„ã€‚

`store/modules/groups/state.ts`

```
export interface Group {
    id: number;
    name: string;
    rowVersion: string;
}

export interface GroupsState {
    groups: Group[];
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨`store/state.ts`ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠ`RootState`ä¿ç•™ä¸ºä¸€ä¸ªç©ºæ¥å£(å°½ç®¡ TSLint ä¸å–œæ¬¢å®ƒ)ï¼Œå› ä¸ºæˆ‘ä»¬å°†åœ¨ä¸€äº›å£°æ˜ä¸­ä½¿ç”¨å®ƒï¼Œè¿™æ ·å½“æˆ‘ä»¬æƒ³è¦å‘å…¨å±€çŠ¶æ€æ·»åŠ ä¸€äº›ä¸œè¥¿æ—¶ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦æœç´¢é‚£äº›å£°æ˜ä¸­çš„æ¯ä¸€ä¸ª`{}`ã€‚

`store/state.ts`

```
export interface RootState {
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#mutations)çªå˜

çªå˜ç§»åŠ¨åˆ°å®ƒä»¬è‡ªå·±çš„æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°†å¯¼å‡ºå®ƒä»¬çš„å¯¹è±¡å£°æ˜ä¸º`MutationTree<GroupsState>`ã€‚

`store/modules/groups/mutations.ts`

```
import { GroupsState, Group } from './state';
import { MutationTree } from 'vuex';

let currentId: number = 2;

export const mutations: MutationTree<GroupsState> = {
    setGroups(state: GroupsState, groups: Group[]): void {
        state.groups = [...groups];
    },
    add(state: GroupsState, group: Group): void {
        group.id = ++currentId;
        state.groups = [...state.groups, group];
    },
    update(state: GroupsState, group: Group): void {
        const index = state.groups.findIndex(g => g.id === group.id);
        state.groups = [...state.groups.slice(0, index), group, ...state.groups.slice(index + 1, state.groups.length)];
    },
    remove(state: GroupsState, groupId: number): void {
        state.groups = state.groups.filter(g => g.id !== groupId);
    },
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#actions)åŠ¨ä½œ

å£°æ˜ä¸º`ActionTree<GroupsState, RootState>`çš„åŠ¨ä½œçš„æ–°æ–‡ä»¶ã€‚

`store/modules/groups/actions.ts`

```
import { ActionTree } from 'vuex';
import { GroupsState, Group } from './state';
import { RootState } from '@/store/state';

export const types = {
    LOAD_GROUPS: 'groups/loadGroups',
    ADD_GROUP: 'groups/add',
    UPDATE_GROUP: 'groups/update',
    REMOVE_GROUP: 'groups/remove'
};

export const actions: ActionTree<GroupsState, RootState> = {
    loadGroups({ commit }): void {
        // TODO: fetch groups from the api
        const groups = [
            { id: 1, name: 'Sample Group', rowVersion: 'aaa' },
            { id: 2, name: 'Another Sample Group', rowVersion: 'bbb' }
        ];
        commit('setGroups', groups);
    },
    add({ commit }, group: Group): void {
        // TODO: make the api request before committing to the store
        commit('add', group);
    },
    update({ commit }, group: Group): void {
        // TODO: make the api request before committing to the store
        commit('update', group);
    },
    remove({ commit }, groupId: number): void {
        // TODO: make the api request before committing to the store
        commit('remove', groupId);
    }
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#module)æ¨¡å—

æœ€åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºå°†åˆ©ç”¨æ‰€æœ‰å…¶ä»–æ¨¡å—çš„`index.ts`æ–‡ä»¶æ¥åŒ…è£…æˆ‘ä»¬çš„æ¨¡å—ã€‚

`store/modules/groups/index.ts`

```
import { Module } from 'vuex';
import { GroupsState } from './state';
import { RootState } from '@/store/state';
import { actions } from './actions';
import { mutations } from './mutations';

export const groups: Module<GroupsState, RootState> = {
    namespaced: true,
    actions,
    mutations,
    state: {
        groups: []
    }
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ç±»ä¼¼äºæˆ‘ä»¬åœ¨`store/index.ts`ä¸­æ‰€åšçš„ï¼Œä¸åŒä¹‹å¤„åœ¨äºå®ƒæ˜¯ä¸€ä¸ªå•ç‹¬çš„æ¨¡å—(å£°æ˜ä¸º`Module<GroupsState, RootState>`)å¹¶ä»å…¶ä»–æ–‡ä»¶ä¸­å¯¼å…¥å®ƒçš„éƒ¨åˆ†ã€‚

æ³¨æ„`namespaced`å±æ€§ï¼Œè¿™æ„å‘³ç€è¦è®¿é—®å­˜å‚¨çš„è¿™ä¸ªæ¨¡å—éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ä¸€ä¸ªåç§°ç©ºé—´ã€‚å¦‚æœè¿™æ˜¯å‡çš„ï¼Œå³ä½¿æˆ‘ä»¬å°†å•†åº—åˆ†æˆæ¨¡å—è¿›è¡Œç»„ç»‡ï¼Œä¸ºäº†è®¿é—®å®ƒï¼Œæˆ‘ä»¬å¯ä»¥åƒæ¨¡å—èŒƒå›´å†…çš„æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯å…¨å±€çš„ä¸€æ ·æ“ä½œã€‚

è¦æ€»ç»“å­˜å‚¨ä¸­çš„æ›´æ”¹ï¼Œæˆ‘ä»¬å¿…é¡»åŒ…æ‹¬æ¨¡å—ã€‚

`store/index.ts`

```
import Vue from 'vue';
import Vuex, { StoreOptions, ActionContext, MutationTree, ActionTree } from 'vuex';
import { RootState } from './state';
import { groups } from './modules/groups';

Vue.use(Vuex);

const options: StoreOptions<RootState> = {
  state: {},
  modules: {
    groups
  }
};

export default new Vuex.Store(options); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#adjust-the-component)è°ƒæ•´ç»„ä»¶

å‡è®¾æˆ‘ä»¬ç”¨`namespaced: true`é…ç½®äº†æ¨¡å—ï¼Œæˆ‘ä»¬éœ€è¦å¯¹`Groups.vue`åšä¸€äº›å°çš„è°ƒæ•´ã€‚

`Groups.vue`

```
// ...

export default class Groups extends Vue {
    private get groups(): GroupViewModel[] {
        return this.$store.state.groups.groups; 
    }

    public mounted(): void {
        this.$store.dispatch('groups/loadGroups');
    }

    private onUpdate(group: GroupViewModel): void {
        this.$store.dispatch('groups/update', group);
    }

    private onRemove(groupId: number): void {
        this.$store.dispatch('groups/remove', groupId);
    }

    private onAdd(group: GroupViewModel): void {
        this.$store.dispatch('groups/add', group);
    }
}

// ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨`groups` getter ä¸­æœ‰ä¸€ä¸ªé¢å¤–çš„`groups`å±æ€§è®¿é—®ï¼Œç”¨äºè¿›å…¥æ¨¡å—ã€‚åœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­ï¼Œ`groups/*`ä½œä¸ºå‰ç¼€è¢«æ·»åŠ åˆ°åŠ¨ä½œåç§°ä¸­(åœ¨æºä»£ç ä¸­ï¼Œæˆ‘å°†è¿™äº›å­—ç¬¦ä¸²ç§»åŠ¨åˆ°å¸¸é‡ä¸­ï¼Œä½†æ˜¯åœ¨è¿™é‡Œä¸ºäº†æ›´æ¸…æ¥šèµ·è§ï¼Œæˆ‘ç›´æ¥ä½¿ç”¨äº†è¿™äº›å€¼)ã€‚

## [](#using-annotations-to-access-store-elements)ä½¿ç”¨æ³¨é‡Šæ¥è®¿é—®å­˜å‚¨å…ƒç´ 

ä¸ºäº†æŒ‡å‡ºä»ç»„ä»¶è®¿é—®å•†åº—çš„ä¸åŒæ–¹å¼ï¼Œæœ‰ä¸€ä¸ªåä¸º [vuex-class](https://github.com/ktsn/vuex-class) çš„åº“æä¾›äº†ä¸€äº›ç»‘å®šåŠ©æ‰‹ã€‚

å®‰è£…å®Œåº“(`npm install --save vuex-class`)åï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ”¹`Groups.vue`æ¥ä½¿ç”¨è¿™äº›ç»‘å®šã€‚

`Groups.vue`

```
// ...

import { Component, Vue } from 'vue-property-decorator';
import GroupList from '@/components/groups/GroupList.vue';
import { GroupViewModel } from '@/components/groups/models';
import { types } from '@/store/modules/groups/actions';
import { State, namespace } from 'vuex-class';

const groupsModule = namespace('groups');

@Component({
  components: {
    GroupList
  }
})
export default class Groups extends Vue {
    @groupsModule.State('groups') private groups!: GroupViewModel[];
    @groupsModule.Action('loadGroups') private loadGroups!: () => void;

    public mounted(): void {
        this.loadGroups();
    }

    // ...
}

// ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸å…¶ä»–æ–¹æ³•ç›¸æ¯”ï¼Œè¿™æ ·ä½¿ç”¨å®ƒå¯èƒ½æ²¡æœ‰å¤ªå¤§çš„ä¼˜åŠ¿ï¼Œè¿™åªæ˜¯ä¸€ä¸ªåå¥½é—®é¢˜ã€‚

## [](#outro)å…¶ä»–

æœ€åï¼Œä»ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬è®©åº”ç”¨ç¨‹åºåƒä»¥å‰ä¸€æ ·å·¥ä½œï¼Œä½†æ˜¯æˆ‘ä»¬é€šè¿‡é›†ä¸­å‰ç«¯çŠ¶æ€ä¸ºæœªæ¥çš„å·¥ä½œå¥ å®šäº†åŸºç¡€ã€‚å°±ç›®å‰è€Œè¨€ï¼Œæˆ‘ä»¬çœ‹ä¸åˆ°å¤ªå¤§çš„ä»·å€¼ï¼Œä½†éšç€åº”ç”¨ç¨‹åºçš„å¢é•¿ï¼Œæˆ‘ä»¬åº”è¯¥ä¼šå¼€å§‹çœ‹åˆ°å®ƒã€‚åœ¨ä¸‹ä¸€é›†ï¼Œæˆ‘ä»¬å°†æœ€ç»ˆè¿æ¥å‰ç«¯å’Œåç«¯ã€‚

å¸–å­ä¸­çš„é“¾æ¥:

*   vista . js
*   [Vuex](https://vuex.vuejs.org/)
*   [ååº”](https://reactjs.org/)
*   [è¿˜åŸ](https://redux.js.org/)
*   [è§’åº¦](https://angular.io/)
*   [NgRx](https://ngrx.io/)
*   [Vue è·¯ç”±å™¨å¯¼èˆªä¿æŠ¤è£…ç½®](https://router.vuejs.org/guide/advanced/navigation-guards.html)
*   vuex-class

è¿™ä¸ªå¸–å­çš„æºç æ˜¯[è¿™é‡Œ](https://github.com/AspNetCoreFromZeroToOverkill/WebFrontend/tree/episode014)ã€‚

æ¬¢è¿éšæ—¶æå‡ºåé¦ˆæ„è§ã€‚å¦‚æœä½ è§‰å¾—è¿™æœ‰ç”¨ï¼Œæˆ‘æ„Ÿè°¢ä½ çš„åˆ†äº«ğŸ™‚

è°¢è°¢ä½ çš„æ¥è®¿ï¼Œcyazï¼