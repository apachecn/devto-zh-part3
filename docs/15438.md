# ä½¿ç”¨ Node.jsã€Express å’Œ Multer å°†å›¾åƒå’Œè§†é¢‘æµå¼ä¼ è¾“åˆ° Google äº‘å­˜å‚¨

> åŸæ–‡:[https://dev . to/nick Parsons/streaming-images-videos-to-Google-cloud-storage-with-node-js-express-and-multer-113d](https://dev.to/nickparsons/streaming-images-videos-to-google-cloud-storage-with-node-js-express-and-multer-113d)

[![](../Images/8bdd51061841d5ee3a737aa7e7d16fb6.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--NC-xvZzP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AZ68F4SMRusBjJ7Q8ox4Waw.jpeg)

### [](#the-problem)**é—®é¢˜**ğŸ˜’

æˆ‘çš„ä»»åŠ¡æ˜¯è½¬æ¢ä»£ç ï¼Œä¸»è¦æ˜¯ä¸Šä¼ é«˜åˆ†è¾¨ç‡å›¾åƒå’Œå¤§å‹è§†é¢‘æ–‡ä»¶ã€‚å®ƒå¿…é¡»é«˜åº¦å¯é ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œä¸å†ä¾èµ– AWS S3ã€‚æˆ‘ä¸ä¼šè¯¦ç»†è®¨è®º S3 ä¸å…¶ä»–å­˜å‚¨æä¾›å•†çš„å¯¹æ¯”ï¼Œä½†æˆ‘ä¼šè¯´ï¼Œå½“æˆ‘é€‰æ‹©ä½¿ç”¨äº‘å­˜å‚¨æ—¶ï¼Œè°·æ­Œçš„åŸºç¡€è®¾æ–½éå¸¸é€‚åˆæˆ‘â€”â€”æ¼‚äº®çš„ç”¨æˆ·ç•Œé¢ã€ä»¤äººæƒŠå¹çš„æ–‡ä»¶æµè§ˆå™¨å’Œå‡ åä¸ªé€‰é¡¹ï¼Œä¸ S3 ç›¸æ¯”ï¼Œå®ƒä»¬å®é™…ä¸Šæ˜¯æœ‰æ„ä¹‰çš„(å¯¹æˆ‘æ¥è¯´)ã€‚

æœ‰ä¸€ä¸ªé—®é¢˜â€¦â€¦è°·æ­Œå‡ ä¹æ²¡æœ‰ä¸Šä¼ å›¾ç‰‡åˆ°äº‘å­˜å‚¨çš„ä¾‹å­ã€‚è€Œä¸”ï¼Œå¦‚æœä»–ä»¬çœŸçš„æœ‰ï¼Œå¯¹æˆ‘æ¥è¯´ä»–ä»¬ä¼¼ä¹å·²ç»è¿‡æ—¶äº†ã€‚åœ¨ä»¤äººå¤´ç–¼çš„é—®é¢˜å’Œæ•°å°æ—¶ç ”ç©¶ StackOverflowã€æŸ¥çœ‹ SDKs æºä»£ç ç­‰ä¹‹åã€‚ç°åœ¨ï¼Œæˆ‘å¯ä»¥è¯´æˆ‘å·²ç»å®Œæˆäº†ä»»åŠ¡â€¦â€¦æˆ‘ç»ˆäºå¯ä»¥*ç”¨ Express.js å’Œ Multer ä¸Šä¼ å›¾ç‰‡äº†ï¼Œæˆ‘å¾ˆé«˜å…´åˆ†äº«è®©è¿™ä¸€åˆ‡å·¥ä½œçš„ä»£ç ã€‚*

### [](#requirements)è¦æ±‚ğŸ“œ

1.  ä¸Šä¼ **ä»»ä½•**åª’ä½“æ–‡ä»¶(éŸ³é¢‘ã€è§†é¢‘ã€å›¾åƒç­‰ã€‚)
2.  ä¹ ä¿— **UUID** ä¸ºå
3.  å°†é€‚å½“çš„**æ‰©å±•å**æ·»åŠ åˆ°æœ«å°¾
4.  è·å– **MIME** ç±»å‹ä»¥ä¼ é€’ç»™ Google äº‘å­˜å‚¨
5.  å°†å¯¹è±¡ ACL è®¾ç½®ä¸º" **public"** ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹

### [](#solution)**è§£**ğŸš¨

[Express](http://expressjs.com/) ï¼Œ [Multer](https://www.npmjs.com/package/multer) ï¼ŒNode.js çš„ [Google äº‘å­˜å‚¨](https://www.npmjs.com/package/@google-cloud/storage)åŒ…ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹:

#### [](#1-route-file)1ã€‚è·¯ç”±æ–‡ä»¶ğŸš“