# uniform:react åº”ç”¨ç¨‹åºçš„æƒå¨è¡¨å•åº“

> åŸæ–‡:[https://dev . to/italomlp/un forma-the-definitive-form-library-for-react-apps-35lh](https://dev.to/italomlp/unform-the-definitive-form-library-for-react-apps-35lh)

æˆ‘ä»¬æ‰€æœ‰äººï¼ŒReact å¼€å‘äººå‘˜â€”â€”ç”šè‡³æ˜¯å·²ç»å¬è¯´è¿‡ React ç”Ÿæ€ç³»ç»Ÿçš„ javascript å¼€å‘äººå‘˜â€”â€”éƒ½çŸ¥é“ä¸€ä»¶äº‹:React åº”ç”¨ç¨‹åºä¸­çš„è¡¨å•çœŸçš„å¾ˆéº»çƒ¦è€Œä¸”å†—é•¿(å°±åƒ [Formik çš„å¼€å‘äººå‘˜æ‰€è¯´çš„ä¸€æ ·](https://github.com/jaredpalmer/formik))ã€‚

æˆ‘ä»¬æœ‰ [Redux Forms](https://github.com/erikras/redux-form/) ã€Formik å’Œè®¸å¤šå…¶ä»–åº“æ¥ä½¿è¡¨å•åœ¨ React ä¸­å‘ç”Ÿã€‚ä½†æ˜¯ç¬¬ä¸€æ¬¡æ²¡æœ‰è¯´æœæˆ‘...ä¸ºä»€ä¹ˆï¼Ÿæˆ‘ä¸åŒæ„åœ¨ Redux ä¸­ä¿æŒè¡¨å•çŠ¶æ€(æˆ‘ä»¬å¯ä»¥ç»§ç»­åšæœ‹å‹å—ï¼Ÿ).ç¬¬äºŒä¸ªéå¸¸å¼ºå¤§...ä½†æ˜¯(å¦‚æœåé¢æœ‰â€œä½†æ˜¯â€å°±æ²¡å…³ç³»äº†)ç”±äºéå¸¸å¼ºå¤§ï¼Œå®ƒå¯¹äºç®€å•çš„è¡¨å•å˜å¾—éå¸¸å†—é•¿æˆ–å¤æ‚(å¯¹äºå¤§è¡¨å•ä¹Ÿæœ‰æ€§èƒ½é—®é¢˜ï¼Œå°†åœ¨å¦ä¸€ç¯‡æ–‡ç« ä¸­è®¨è®º)ã€‚è¿™äº›åº“ä¸­çš„å¤§å¤šæ•°éƒ½ä½¿ç”¨è¾“å…¥å­—æ®µçš„å—æ§ç»„ä»¶ã€‚å¦‚æœæ‚¨è¦å¤„ç†å¤§å‹è¡¨å•å’Œ/æˆ–éœ€è¦é«˜æ€§èƒ½ï¼Œé‚£ä¹ˆåœ¨é¡¹ç›®ä¸­åŒ…å«å®ƒå¹¶ä¸æ€»æ˜¯æ›´å¥½çš„äº‹æƒ…ã€‚

æˆ‘ä»¬èƒ½åšä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºè¿™å‡ ç‚¹ï¼Œä½äºå·´è¥¿çš„ä¸€ä¸ªåä¸º [Rocketseat](https://rocketseat.com.br/) çš„ç”Ÿæ´»æ–¹å¼/å…¬å¸/ç¤¾åŒºè®©[å˜å¾—ç»Ÿä¸€](https://github.com/Rocketseat/unform):

## ![GitHub logo](../Images/a73f630113876d78cff79f59c2125b24.png) [ç«ç®­åº§](https://github.com/Rocketseat) / [æœªå®šå‹](https://github.com/Rocketseat/unform)

### é«˜åº¦å¯æ‰©å±•çš„ ReactJS & React Native formsï¼ğŸš€

<article class="markdown-body entry-content container-lg" itemprop="text">

[![Unform](../Images/b1ba64e59cbc86ead058642b8632716d.png)T2ã€‘](https://camo.githubusercontent.com/c1abe5344f2db0df1eefb99431ad017de75b3318/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f676f6c64656e2d77696e642f756e666f726d2f756e666f726d2e737667)

### é«˜åº¦å¯æ‰©å±•çš„ ReactJS & React Native formsï¼<g-emoji class="g-emoji" alias="rocket" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png">ğŸš€</g-emoji>

[![npm](../Images/35993b4da2f1c3e70f44c43e7d14e240.png) ](https://www.npmjs.com/package/@unform/core) [ ![Coverage Status](../Images/27ee58bf9de743a06a7b79b0503a39c2.png)](https://coveralls.io/github/Rocketseat/unform?branch=master)

## æ¦‚è§‚

Unform æ˜¯ä¸€ä¸ªæ³¨é‡æ€§èƒ½çš„åº“ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ‚¨åœ¨ ReactJS & React Native ä¸­åˆ›å»ºæ¼‚äº®çš„è¡¨å•ï¼Œå¹¶å…·æœ‰ä¸å—æ§åˆ¶çš„ç»„ä»¶æ€§èƒ½å’Œ React é’©å­çš„åŠŸèƒ½ã€‚

*   **[å…¥é—¨](https://unform.dev/)T3ã€‘**
*   **[æ–‡æ¡£](https://unform.dev/guides/basic-form)**
*   **[ä¸ºä»€ä¹ˆ un formatï¼Ÿ](https://unform.dev/why-unform)T3ã€‘**
*   **[å¸¸è§é—®é¢˜](https://unform.dev/faq)**

æƒ³åœ¨ç©¿åˆ¶æœå‰æµ‹è¯•ä¸€ä¸‹å—ï¼Ÿ

*   **[ReactJS æ¸¸ä¹åœº](https://codesandbox.io/embed/agitated-tdd-uf177?autoresize=1&expanddevtools=1&fontsize=14&hidenavigation=1&theme=dark)T3ã€‘**
*   **[ååº”è¿‡æ¥åŸç”Ÿæ¸¸ä¹åœº](https://snack.expo.io/@diego3g/1e9fb3)**

ã€React Native Web æˆ– Expo Web ä¸æ”¯æŒï¼Œè¯·ä½¿ç”¨ Expo é›¶é£Ÿä¸­çš„ iOS/Android è®¾å¤‡

## è´¡çŒ®çš„

æ„Ÿè°¢æ‚¨å¯¹æ”¹è¿›è¿™ä¸ªåŒ…æ„Ÿå…´è¶£ã€‚æˆ‘ä»¬é¼“åŠ±æ¯ä¸ªäººéƒ½æ¥å¸®åŠ©æ”¹å–„è¿™ä¸ªé¡¹ç›®çš„ä¸€äº›æ–°åŠŸèƒ½ï¼Œé”™è¯¯ä¿®å¤å’Œæ€§èƒ½é—®é¢˜ã€‚è¯·èŠ±ä¸€ç‚¹æ—¶é—´é˜…è¯»æˆ‘ä»¬çš„æŒ‡å—ï¼Œè¿™æ ·è¿™ä¸ªè¿‡ç¨‹ä¼šæ›´å¿«æ›´å®¹æ˜“ã€‚

### æŠ•ç¨¿æŒ‡å—

èŠ±ç‚¹æ—¶é—´é˜…è¯»ä¸€ä¸‹æˆ‘ä»¬çš„[æŠ•ç¨¿æŒ‡å—](https://raw.githubusercontent.com/Rocketseat/unform/master//.github/CONTRIBUTING.md)ï¼Œè¿™æ ·ä½ å°±èƒ½äº†è§£å¦‚ä½•æäº¤é—®é¢˜ã€æäº¤å’Œåˆ›å»ºæ‹‰å¼è¯·æ±‚ã€‚

### è¡ŒåŠ¨å®ˆåˆ™

æˆ‘ä»¬æœŸå¾…ä½ â€¦

</article>

[View on GitHub](https://github.com/Rocketseat/unform)

è®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„å®é™…æ•ˆæœå§ï¼

> ä½ å¯ä»¥åœ¨[https://github.com/italomlp/unform-example](https://github.com/italomlp/unform-example)æŸ¥çœ‹è¿™ä¸ªä¾‹å­çš„æºä»£ç 

## [](#1-what-we-will-need)1ã€‚æˆ‘ä»¬éœ€è¦ä»€ä¹ˆï¼Ÿ

*   [NodeJS å’Œ NPM](https://nodejs.org/) (LTS ç‰ˆï¼Ÿ)
*   [çº±çº¿](https://yarnpkg.com/)(è¿™æ˜¯å¯é€‰çš„ï¼Œä½†é€Ÿåº¦æ›´å¿«)
*   [åˆ›å»º React åº”ç”¨](https://github.com/facebook/create-react-app)
*   [æœªæ ¼å¼åŒ–](https://github.com/Rocketseat/unform)
*   [æ˜¯](https://github.com/jquense/yup)(ç”¨äºéªŒè¯)
*   [React Datepicker](https://github.com/Hacker0x01/react-datepicker/) (ç”¨äº Datepicker å’Œæ¼”ç¤ºç¬¬ä¸‰æ–¹ç»„ä»¶é›†æˆçš„ç»„ä»¶)
*   æµè§ˆå™¨(æˆ‘ç”¨è°·æ­Œæµè§ˆå™¨)
*   ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨(æˆ‘ä½¿ç”¨ [VS ä»£ç ](https://code.visualstudio.com/)
*   ç»ˆç«¯(æˆ‘ç”¨ [Oh My Zsh](https://github.com/robbyrussell/oh-my-zsh)

## [](#2-init-a-react-app)2ã€‚åˆå§‹åŒ–ä¸€ä¸ªååº”åº”ç”¨ç¨‹åº

```
yarn create react-app form-example 
```

æˆ–è€…

```
npx create-react-app form-example 
```

æˆ–è€…åœ¨ create-react-app å‚¨å­˜åº“ä¸­æè¿°çš„å¦ä¸€ç§æ–¹å¼

ä½ ä¼šçœ‹åˆ°ä¸‹é¢çš„ç»“æœ:
[![create-react-app result](../Images/f62bc96a1e45ccc416f0f94aee80f09e.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--R0Ue3-8w--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/H1kUi3B.png)

ç„¶åæˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç è¿è¡Œæˆ‘ä»¬çš„é¡¹ç›®:

```
cd form-example/
yarn start 
```

å¹¶åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°å¦‚ä¸‹:
[![create-react-app start](../Images/565ded4710ff0fb05c98423fcaa06948.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--hD1GFy3R--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/IA62CgZ.png)

## [](#3-clean-src-folder-and-install-dependencies)3ã€‚æ¸…ç† src æ–‡ä»¶å¤¹å¹¶å®‰è£…ä¾èµ–é¡¹

åˆ›å»º app åï¼Œæˆ‘ä»¬ä¼šæœ‰è¿™æ ·çš„æ–‡ä»¶å¤¹ç»“æ„:
[![react-app folder structure](../Images/37e6585f73f53fc7e345a2e07959cb0e.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--BZVgw-ty--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/nKSK5r5.png)

é¦–å…ˆï¼Œæˆ‘å°†åˆ é™¤`src/App.test.js`ã€`src/App.css`ã€`src/logo.svg`å’Œ`src/serviceWorker.js`æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸ä¼šåœ¨è¿™ç¯‡æ–‡ç« ä¸­ä½¿ç”¨å®ƒä»¬ã€‚

```
rm src/App.test.js src/App.css src/logo.svg src/serviceWorker.js 
```

ç„¶åæˆ‘ä»¬éœ€è¦å®‰è£…æˆ‘ä»¬çš„ä¾èµ–é¡¹ã€‚å¯¹äºéªŒè¯ç›®çš„æ¥è¯´ï¼Œ`yup`æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©(å¹¶ä¸”æ˜¯æ¥è‡ª unform å›¢é˜Ÿçš„å»ºè®®)ã€‚è€Œ`react-datepicker`æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„ç»„ä»¶ï¼Œç”¨æ¥æ¼”ç¤º Unform å’Œ third libs ä¹‹é—´çš„é›†æˆã€‚

```
yarn add @rocketseat/unform yup react-datepicker 
```

æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹ç¼–ç äº†ã€‚

## [](#4-make-the-form)4ã€‚åˆ¶ä½œè¡¨æ ¼

å¦‚æœä½ çœ‹çœ‹ä½ çš„æµè§ˆå™¨ï¼Œä½ ä¼šå‘ç°è¿™ä¸ªåº”ç”¨ç¨‹åºä¸å†ç¼–è¯‘äº†ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¿…é¡»å°†æˆ‘ä»¬çš„`src/index.js`æ”¹ä¸º:

```
import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import App from './App';

ReactDOM.render(<App />, document.getElementById('root')); 
```

è¿˜æœ‰æˆ‘ä»¬çš„`src/App.js`åˆ°:

```
import React from 'react';

function App() {
  return (
    <div>
      <h1>Contact form</h1>
    </div>
  );
}

export default App; 
```

Unform çš„ä½¿ç”¨éå¸¸ç®€å•:æˆ‘ä»¬å¯¼å…¥ä¸€äº›ä¸œè¥¿å¹¶åœ¨æˆ‘ä»¬çš„ JSX ä¸­ä½¿ç”¨å®ƒä»¬ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ã€‚

```
// ...
import { Input, Form } from "@rocketseat/unform";

function App() {
  return (
    <div>
      <h1>Contact form</h1>
      <Form>
        <Input name="fullname" label="Full name" />
        <Input name="phone" label="Phone" />
        <Input name="email" label="Email" />

        <button type="submit">Save</button>
      </Form>
    </div>
  );
} 
```

è¿™ä¸ªå¾ˆå¥½ç”¨...

#### [](#but-how-can-we-get-the-data)ä½†æ˜¯æˆ‘ä»¬æ€ä¹ˆæ‰èƒ½å¾—åˆ°æ•°æ®å‘¢ï¼Ÿ

ç®€å•:å‘è¡¨å•ç»„ä»¶ä¼ é€’ä¸€ä¸ªå¥æŸ„æäº¤å‡½æ•°ã€‚

```
// ...
const handleSubmit = data => {
    console.log(data);
};

return (
  <div>
    <h1>Contact form</h1>
    <Form onSubmit={handleSubmit}>
    {/* ... */} 
```

å¾ˆå¥½ã€‚ç»“æœæ˜¯:
[![unform working](../Images/a6928f1213998dd342ef9ea0b0bc3ab2.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--IwKi3yVw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/pAQqtR4.png)

#### [](#but-if-i-want-nested-fields)ä½†æ˜¯ï¼Œå¦‚æœæˆ‘æƒ³è¦åµŒå¥—å­—æ®µå‘¢ï¼Ÿ

é…·ï¼Œåªéœ€ä½¿ç”¨`Scope`ç»„ä»¶æ¥åŒ…è£…åµŒå¥—å­—æ®µã€‚å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘æ·»åŠ äº†è¿™æ ·çš„åœ°å€å­—æ®µ:

```
import { Input, Form, Scope } from "@rocketseat/unform"; // added Scope component import

// ...
<Form onSubmit={handleSubmit} >
  {/* other Input components */}

  <Scope path="address">
    <Input name="city" label="City" />
    <Input name="state" label="State" />
  </Scope>
  {/* ... */}
</Form> 
```

ç»„ä»¶ç”¨æ¥å‘Šè¯‰ React:â€œå˜¿ï¼Œæˆ‘çš„å­©å­æ˜¯æˆ‘æ‰€ä»£è¡¨çš„å¯¹è±¡çš„å±æ€§â€ã€‚å¹¶å°†ç»“æœå½’çº³ä¸º:
[![unform scope](../Images/90939fa59a5bfa55ea37fd4945c7658a.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--jD4eI_Cg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/0eJHTDd.png)

#### [](#and-if-i-want-to-populate-the-form-with-initial-values)å¦‚æœæˆ‘æƒ³ç”¨åˆå§‹å€¼å¡«å……è¡¨å•å‘¢ï¼Ÿ

ä½ å¯ä»¥ã€‚åªéœ€å°†ä¸€ä¸ªå¯¹è±¡ä¼ é€’ç»™`Form`ç»„ä»¶çš„`initialData`é“å…·:

```
// ...
const initialData = {
  fullname: "Italo Menezes",
  phone: "999999999",
  email: "italo@email.com",
  address: {
    city: "Rio de Janeiro",
    state: "Rio de Janeiro"
  }
};

// ...

<Form onSubmit={handleSubmit} initialData={initialData}>
  {/* ... */}
</Form> 
```

#### [](#ok-ok-but-validation-sometimes-is-a-pain-how-can-i-make-it-with-unform)Ok okã€‚ä½†æ˜¯è®¤å¯æœ‰æ—¶æ˜¯ä¸€ç§ç—›è‹¦ã€‚æ€ä¹ˆæ‰èƒ½ç”¨ Unform åšå‡ºæ¥ï¼Ÿ

å¯¹äºéªŒè¯ï¼Œæˆ‘ä»¬é›†æˆäº†`Yup`ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå¯¹è±¡æ¨¡å¼éªŒè¯å™¨ã€‚å½“æˆ‘è¯´â€œç®€å•â€çš„æ—¶å€™ä¸è¦è¯¯è§£æˆ‘ã€‚å®ƒéå¸¸å¼ºå¤§ã€‚æˆ‘çš„æ„æ€æ˜¯ï¼ŒæƒåŠ›å¹¶ä¸æ€»æ˜¯é‚£ä¹ˆå¤æ‚ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ã€‚

é€šè¿‡å¯¹è±¡æ¨¡å¼éªŒè¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå¯¹è±¡å±æ€§å£°æ˜è§„åˆ™ï¼Œä½¿å®ƒä»¬æˆä¸ºå…·æœ‰æœ€å°æˆ–æœ€å¤§é•¿åº¦çš„å­—ç¬¦ä¸²ï¼ŒåŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œç­‰ç­‰ã€‚

æˆ‘ä»¬å°†é€šè¿‡ä»¥ä¸‹è§„åˆ™éªŒè¯æˆ‘ä»¬çš„è¡¨å•:

*   å…¨åå¿…é¡»è‡³å°‘æœ‰ 5 ä¸ªå­—ç¬¦ã€‚å¿…éœ€çš„ã€‚
*   ç”µè¯å·ç å¿…é¡»æ˜¯æ•°å­—ï¼Œå¹¶ä¸”æ­£å¥½æœ‰ 9 ä¸ªæ•°å­—ã€‚å¿…éœ€çš„ã€‚
*   ç”µå­é‚®ä»¶å¿…é¡»æ˜¯ç”µå­é‚®ä»¶æ ¼å¼(å¦‚æ­¤æ˜æ˜¾)ã€‚ä¸éœ€è¦ã€‚
*   åŸå¸‚ä¸æ˜¯å¿…éœ€çš„ã€‚
*   è¯¥å·ä¸æ˜¯å¿…éœ€çš„ã€‚

æ‰€ä»¥ï¼Œç”¨ Yupï¼Œè®©æˆ‘ä»¬åˆ›å»ºè¿™ä¸ªå¯¹è±¡æ¨¡å¼:

```
const schema = Yup.object().shape({
  fullname: Yup.string()
    .min(5, "The FULL name is only this?")
    .required("Full name is required."),
  phone: Yup.string()
    .matches(/^[0-9]{9}$/g, "Is this a phone number?")
    .required("Phone is required."),
  email: Yup.string().email("Is this an email?"),
  address: Yup.object().shape({
    city: Yup.string().notRequired(),
    state: Yup.string().notRequired()
  })
}); 
```

å¹¶å°†å…¶æ·»åŠ åˆ°`Form`ç»„ä»¶:
ä¸­çš„`schema`é“å…·

```
<Form onSubmit={handleSubmit} schema={schema}>
  {/* ... */}
</Form> 
```

### [](#stop-lets-add-a-simple-css-this-project-is-becoming-very-ugly)åœï¼è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªç®€å•çš„ CSSã€‚è¿™ä¸ªé¡¹ç›®å˜å¾—å¾ˆéš¾çœ‹ï¼

å°†`src/index.css`çš„ä»£ç æ›¿æ¢ä¸º:

```
body {
  padding: 10px;
}

input {
  display: block;
  margin-bottom: 10px;
}

label {
  display: block;
}

span {
  display: block;
  font-size: 10px;
  color: red;
  margin-bottom: 15px;
} 
```

### [](#coming-back-to-validations)è¿”å›éªŒè¯...

å¦‚æœæ‚¨ç°åœ¨è¿è¡Œå®ƒï¼Œå¹¶åœ¨æ²¡æœ‰è¾“å…¥å€¼çš„æƒ…å†µä¸‹å•å‡» saveï¼Œæ‚¨å°†å¾—åˆ°è¿™ä¸ª:
[![yup validations](../Images/7fc80ab624a120e6f6901dd1a0d82ee6.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--O33c4ij7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/bwBeHGr.png)

#### [](#ok-all-fine-till-now-and-if-i-need-to-use-my-own-input-field-in-the-form)Okã€‚åˆ°ç›®å‰ä¸ºæ­¢éƒ½å¾ˆå¥½ã€‚å¦‚æœæˆ‘éœ€è¦åœ¨è¡¨å•ä¸­ä½¿ç”¨æˆ‘è‡ªå·±çš„è¾“å…¥å­—æ®µå‘¢ï¼Ÿ

Rocketseat çš„å¼€å‘äººå‘˜ä¹Ÿè€ƒè™‘åˆ°äº†è¿™ä¸€ç‚¹ï¼Œå¹¶åˆ¶ä½œäº†ä¸€ä¸ªåä¸º`useField`çš„é’©å­æ¥ä¸å…¶ä»–ç»„ä»¶ä¸€èµ·ä½¿ç”¨ã€‚

æˆ‘ä»¬å°†ä½¿ç”¨æœ€åˆæ·»åŠ åˆ°æˆ‘ä»¬é¡¹ç›®ä¸­çš„`react-datepicker`ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦åŒ…è£…å®ƒå¹¶åƒè¿™æ ·æ·»åŠ `useField`:

```
import React, { useEffect, useState, useRef } from "react"; // add the hooks

import { Input, Form, Scope, useField } from "@rocketseat/unform"; // useField hook
import * as Yup from "yup";

import ReactDatepicker from "react-datepicker"; // react datepicker component
import "react-datepicker/dist/react-datepicker.css"; // react datepicker css

// ...

const Datepicker = ({ name, label }) => {
  const ref = useRef(null); // for ref manipulation purposes
  const { fieldName, registerField, defaultValue, error } = useField(name); // the name of the prop in form object is used here
  const [selectedDate, setSelectedDate] = useState(defaultValue); // the state of our datepicker component

  useEffect(() => {
    registerField({ // here, we're registering the field in the whole form
      name: fieldName,
      ref: ref.current,
      path: "props.selected", // this is the path to selected date in ReactDatepicker (wich is the selected prop)
      clearValue: pickerRef => { // for reset purposes
        pickerRef.clear();
      }
    });
  }, [fieldName]);

  return (
    <>
      {/* the label is like label in Unform Input component */}
      {!!label && <label htmlFor="datepicker">{label}</label>}
      <ReactDatepicker
        id="datepicker"
        name={fieldName}
        selected={selectedDate}
        onChange={date => setSelectedDate(date)}
        ref={ref}
      />
      {/* the error is like error in Unform Input component */}
      {error && <span>{error}</span>}
    </>
  );
};

// ...
  <Form onSubmit={handleSubmit} schema={schema}>
    {/* ... */}
    <Datepicker name="birthDate" label="Birth date" />
    {/* ... */} 
  </Form> 
```

å¥½äº†ï¼Œæˆ‘åœ¨ä»£ç ä¸­æ·»åŠ äº†æ³¨é‡Šï¼Œå¸Œæœ›ä½ ç†è§£ã€‚

æ‰€ä»¥ï¼Œè¿™å°±å¯¼è‡´äº†è¿™ä¸ª:
[![with datepicker](../Images/2a13219eed7cfc82ed3fdd4ce86edc78.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--RN5MMqZV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/3zqNcES.png) 
[![result with datepicker](../Images/98ae3ac676dfba62d9b43f5541d7c66f.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--LJ7xyi6v--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/vaJx1VM.png)

> å¦‚æœä½ å¯¹ React hooks ä¸ç†Ÿæ‚‰ï¼Œæˆ‘æ¨èä¸€æœ¬é˜…è¯»:
> Hooks ä¸€ç¥:[https://reactjs.org/docs/hooks-overview.html](https://reactjs.org/docs/hooks-overview.html)

#### [](#and-finally-if-i-want-to-reset-values-after-submit)æœ€åï¼Œå¦‚æœæˆ‘æƒ³åœ¨æäº¤åé‡ç½®å€¼å‘¢ï¼Ÿ

`Form`çš„`onSubmit`å‡½æ•°æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡åªæœ‰ä¸€ä¸ªå±æ€§åŠ©æ‰‹ï¼Œå«åš`resetForm`ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨:

```
const handleSubmit = (data, { resetForm }) => {
  console.log(data);
  resetForm();
}; 
```

* * *

æˆ‘ä»¬ç»“æŸäº†ã€‚ä½ å¯ä»¥åœ¨ Github çš„ Unform åº“ä¸­çœ‹åˆ°æ›´å¤šçš„ä¾‹å­å’Œæ–‡æ¡£ã€‚Unform è¿˜åœ¨å®ƒçš„åˆå§‹ç‰ˆæœ¬ä¸­ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå¾ˆæ£’çš„ç¤¾åŒºå’Œæˆ‘ä»æœªè§è¿‡çš„æœ€å¥½çš„å¼€å‘è€…ã€‚

å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œåˆ†äº«å¹¶ç»™å®ƒä¸€ä¸ªâ¤ï¸.è¿˜æœ‰ï¼Œä½ å¯ä»¥åœ¨ Github å’Œç¤¾äº¤åª’ä½“ä¸Šå…³æ³¨æˆ‘ã€‚æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œå†è§ï¼