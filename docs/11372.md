# ä¸€ä¸ªåœ¨æ¨ç‰¹ä¸Šå‘å¸ƒä» icanhazdadjoke.com è·å–çš„æ•°æ®çš„ Python ç¨‹åº

> åŸæ–‡:[https://dev . to/highcenburg/a-python-program-which-tweets-from-the-icanhazdadjokecom-API-3197](https://dev.to/highcenburg/a-python-program-which-tweets-from-the-icanhazdadjokecom-api-3197)

*å°é¢ç…§ç‰‡ç”±[https://icons8.com/](https://icons8.com/)*
[https://w.soundcloud.com/player/?url=https://soundcloud.com/mrmindful/mindful-vibes-episode-10-jazz-hop-mix&auto_play=false&color=%23000000&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true](https://w.soundcloud.com/player/?url=https://soundcloud.com/mrmindful/mindful-vibes-episode-10-jazz-hop-mix&auto_play=false&color=%23000000&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true)

è¿™ä¸ªç¨‹åºçš„ç›®çš„æ˜¯è®©æˆ‘é€šè¿‡ twitter åœ¨æˆ‘çš„ facebook è´¦æˆ·ä¸Šå‘å¸ƒçš„ç¬‘è¯è‡ªåŠ¨åŒ–ã€‚è™½ç„¶æˆ‘è¿˜æ²¡æœ‰å¼„æ¸…æ¥š AWS Lambdaï¼Œä½†æˆ‘ç›¸ä¿¡æˆ‘ä¼šå¾ˆå¿«åˆ°è¾¾é‚£é‡Œã€‚

è¿™ä¸ªç¨‹åºæ˜¯é€šè¿‡ IDLE è¿è¡Œçš„ï¼Œæ ¹æ®[ç»´åŸºç™¾ç§‘](https://g.co/kgs/iQ9hDM)çš„è¯´æ³•ï¼Œè¿™ä¸ªç¨‹åºä» 1.5.2b1 å¼€å§‹å°±å’Œ Mac OS X Python æ†ç»‘åœ¨ä¸€èµ·äº†

æˆ‘ä»¬ä»â€œ[Twitter API](https://projects.raspberrypi.org/en/projects/getting-started-with-the-twitter-api)å…¥é—¨â€å¼€å§‹å­¦ä¹ ï¼Œç„¶ååœ¨æ•´ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬ç»§ç»­è°ƒç”¨[icanhazdadjockole API](https://icanhazdadjoke.com)ã€‚

åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘å­¦åˆ°äº† 4 ä»¶äº‹:

*   å¦‚ä½•åº”ç”¨å’Œåˆ›å»ºè¯¥åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„ Twitter API é”®

*   å¦‚ä½•ä½¿ç”¨ Twython é€šè¿‡ Python å‘é€æ¨æ–‡

*   å¦‚ä½•è°ƒç”¨ API &

*   å¦‚ä½•åœ¨æœç´¢å¼•æ“ä¸Šæœç´¢æ­£ç¡®çš„é—®é¢˜ä»¥è·å¾—æ­£ç¡®çš„ç­”æ¡ˆ

#### [](#first-we-apply-for-a-twitter-developer-account-with-the-help-of-this-upon-completing-the-application-we-will-receive-an-email-confirmation-from-twitter-to-confirm-our-email-address-then-we-wait-for-our-application-to-be-approved-we-can-check-the-status-at-developertwittercom)é¦–å…ˆï¼Œæˆ‘ä»¬å€ŸåŠ©[è¿™ä¸ª](https://projects.raspberrypi.org/en/projects/getting-started-with-the-twitter-api/3)ç”³è¯·ä¸€ä¸ª Twitter å¼€å‘è€…è´¦å·ã€‚å®Œæˆç”³è¯·åï¼Œæˆ‘ä»¬å°†æ”¶åˆ° Twitter çš„ç”µå­é‚®ä»¶ç¡®è®¤ï¼Œä»¥ç¡®è®¤æˆ‘ä»¬çš„ç”µå­é‚®ä»¶åœ°å€ã€‚ç„¶åæˆ‘ä»¬ç­‰å¾…æˆ‘ä»¬çš„ç”³è¯·è¢«æ‰¹å‡†ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ developer.twitter.com çš„[æŸ¥çœ‹çŠ¶æ€ã€‚](https://developer.twitter.com)

#### [](#after-getting-approved-for-the-developer-account-we-login-to-developertwittercom-to-get-our-application-registered-to-get-our-api-keys)è·å¾—å¼€å‘è€…è´¦æˆ·æ‰¹å‡†åï¼Œæˆ‘ä»¬ç™»å½•åˆ° developer.twitter.comæ³¨å†Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä»¥è·å¾—æˆ‘ä»¬çš„ API å¯†é’¥ã€‚

[![](../Images/d569692f8253dacaa563d7dec1c3b378.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--V11jpRgJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/50a39k8s2a11qz2l82zt.png)

[![](../Images/8297b0513a1eb7fcce3712c7cdd18481.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--0dyBVaiZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/8utkkl7igx2i16j7oo4v.png)

[![](../Images/3d4fc114b5fb594916b117a82dbed8c9.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ltXmh91---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/fjiyzahgleta6a9xifu2.png)

[![](../Images/e42a2d891f5e9d3b0b3ce17af7ef29c3.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--rU9xgEKd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/3wtexpx58ro4s0np4o7p.png)

[![](../Images/262959e39120600f4d8e5503e4ad5877.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--N1ZzjNvI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/gywdbkispkhw02925slu.png)

##### [](#review-the-developer-terms-and-click-create)æŸ¥çœ‹å¼€å‘è€…æ¡æ¬¾ï¼Œç‚¹å‡»åˆ›å»ºã€‚

[![](../Images/26beb1719759ed03e4da619c1f8bfbec.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--kUKqIeO0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/4kltiwvxhgfhqbng4u2m.png)

#### [](#click-on-keys-and-tokens-to-view-your-keys-and-access-tokens-then-click-create-under-access-token-amp-access-token-secret)ç‚¹å‡»å¯†é’¥å’Œä»¤ç‰ŒæŸ¥çœ‹æ‚¨çš„å¯†é’¥å’Œè®¿é—®ä»¤ç‰Œï¼Œç„¶åç‚¹å‡»è®¿é—®ä»¤ç‰Œ&ä¸‹çš„åˆ›å»ºè®¿é—®ä»¤ç‰Œå¯†ç ã€‚

[![](../Images/1ed6d1c75b3fcb2352ea3bb71b0cb916.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--H8Ija0RF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/z0inajk61abjlnm6g22x.png)

[![](../Images/953fc2c92201a2bbb988979587350693.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--x7UXDqHb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/q8f5xd17798lnuk7qwgn.png)

### [](#coding-the-program-and-sending-our-first-tweet)**ç¼–å†™ç¨‹åºå¹¶å‘é€æˆ‘ä»¬çš„ç¬¬ä¸€æ¡æ¨æ–‡**

#### åœ¨ç©ºé—²æ—¶åˆ›å»ºä¸€ä¸ª auth.py æ–‡ä»¶ï¼Œå°†ä½ çš„å¯†é’¥ç²˜è´´åˆ°é‡Œé¢ï¼Œç„¶åç‚¹å‡»ä¿å­˜

```
consumer_key = 'ENTER_YOUR_CONSUMER_KEY'
consumer_secret = 'ENTER_YOUR_CONSUMER_SECRET'
access_token = 'ENTER_YOUR_ACCESS_TOKEN'
access_token_secret = 'ENTER_YOUR_ACCESS_TOKEN'
```

#### [](#create-another-file-and-import-twython-from-twython-and-the-requests-module)åˆ›å»ºå¦ä¸€ä¸ªæ–‡ä»¶ï¼Œä» twython å’Œ requests æ¨¡å—å¯¼å…¥ Twython

```
from twython import Twython
import requests
```

#### [](#also-import-the-variables-from-authpy)ä¹Ÿä» auth.py å¯¼å…¥å˜é‡

```
from auth import (
    consumer_key,
    consumer_secret,
    access_token,
    access_token_secret
)
```

å°†æ­¤å¦å­˜ä¸º twitter.py

#### [](#create-a-connection-with-the-twitter-api-using-twython)ä½¿ç”¨ Twython åˆ›å»ºä¸ Twitter API çš„è¿æ¥

```
twitter = Twython(
    consumer_key,
    consumer_secret,
    access_token,
    access_token_secret
)
```

#### [](#well-use-the-updatestatus-function-of-twitters-api-to-send-a-tweet)æˆ‘ä»¬å°†ä½¿ç”¨ Twitter API çš„

```
update_status()
```

å‡½æ•°æ¥å‘é€ä¸€æ¡æ¨æ–‡

```
message = "Hello world!"
twitter.update_status(status=message)
print('Tweeted: ' % message)
```

#### [](#now-we-run-the-module-by-using-f5-or-from-tweetpy-gt-run-gt-run-module)ç°åœ¨æˆ‘ä»¬é€šè¿‡ä½¿ç”¨ F5 æˆ–è€…ä» tweet.py - >è¿è¡Œ- >è¿è¡Œæ¨¡å—æ¥è¿è¡Œæ¨¡å—ã€‚

ä»æ‰‹æœºä¸ŠæŸ¥çœ‹:
[![](../Images/038dc844175a5fbf53b677be410de13a.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--sBq1DDeH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/59xvt797h0kc2jmi5u0m.jpg)

ä» CLI æŸ¥çœ‹:
[![](../Images/547f543e228eaee6c2c8aca05723107d.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--MtXqgAB5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/3sywi3aacy03uejeuknx.png)

ä»æµè§ˆå™¨æŸ¥çœ‹:
[![](../Images/afb8d50b7f9dbdfeaa186daa2c6e23c3.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--XltKZAex--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/zlk04q3jla5z79y0ph57.png)

### [](#calling-the-icanhazdadjoke-api)**è°ƒç”¨ icanhazdaddjoke API**

å¹¸è¿çš„æ˜¯ï¼Œ **GET** æ–¹æ³•å¯ä»¥åœ¨æ²¡æœ‰è®¤è¯çš„æƒ…å†µä¸‹è°ƒç”¨*icanhazdaddjoke*ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œè¯·é˜…è¯»ä»–ä»¬çš„æ–‡æ¡£[è¿™é‡Œ](https://icanhazdadjoke.com/api)

```
url = 'https://icanhazdadjoke.com/'
headers = {'Accept': 'application/json'}
joke_msg = requests.get(url, headers=headers).json().get('joke')
print(joke_msg)
```

å›åº”æ˜¯:ğŸ™ŒğŸ™ŒğŸ™Œ
[![](../Images/cf640c5f3d82b3f02adcf4df1ff9fe0b.png)T3ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--NUAqeKkX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/oxa9xnkvlpdostt15pw7.png)

### [](#now-we-play-around-the-codes)ç°åœ¨ï¼Œæˆ‘ä»¬æ¥ç©è½¬ä»£ç ã€‚

#### [](#designing-the-code-structure)è®¾è®¡ä»£ç ç»“æ„

æˆ‘ä»¬å¸Œæœ›åœ¨æˆ‘ä»¬çš„ twitter è´¦æˆ·ä¸Šå‘å¸ƒ*icanhazdaddjoke*çš„è¾“å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ **url** å˜é‡æ¥è°ƒç”¨ä»–ä»¬çš„ APIã€‚æˆ‘ä»è¾“å‡ºå¼€å§‹ï¼Œå›åˆ°è°ƒç”¨ APIã€‚

**æˆ‘ä»¬ä»¥è¿™æ®µä»£ç ç»“æŸ:**

```
url = 'https://icanhazdadjoke.com/'
headers = {'Accept': 'application/json'}
joke_msg = requests.get(url, headers=headers).json().get('joke')
twitter.update_status(status=joke_msg)
print("Tweeted: " + joke_msg)
```

è¾“å‡ºæ˜¯:ğŸ˜±ğŸ˜±ğŸ˜±

CLI:
[![](../Images/2041c3a68ef830c6fb85564ed58bf3b1.png)T3ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--rCih7Tqj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/yj1bp6f5yzx0oms8zghz.png)

æµè§ˆå™¨:
[![](../Images/7558ba7a7af5ad16fda7372eb04c82db.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--aCdsUbnd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/qnb0cxt3ghrq25zhxxnw.png)

ç§»åŠ¨:
[![](../Images/75ba0762517ce43ee0dfcd0cdb673558.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--mvf45fnL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/9abw67tyoquum7e2saw2.jpg)

ğŸ™ŒğŸ˜±ğŸ™ŒğŸ˜±ğŸ™Œ

**ä¸‹ä¸€æ­¥å°†æ˜¯å¼€å‘ AWS Lambdaï¼Œè®©æ¯å¤©ä¸¤æ¬¡çš„æ¨æ–‡è‡ªåŠ¨åŒ–ï¼Œç„¶åå¿˜æ‰å®ƒã€‚**