# python+Marvell+graph QL = pymarvell QL

> [https://dev . to/novvum/python-Marvell SQL-pymarvell QL-3ia 7](https://dev.to/novvum/python-marvel-graphql-pymarvelql-3ia7)å›¾å½¢

# ä»‹ç»ğŸŒ‹

éšç€ã€Šå¤ä»‡è€…è”ç›Ÿã€‹Endgame çš„å‘å¸ƒï¼Œç°åœ¨æ˜¯æ„å»º PyMarvelQL çš„æœ€ä½³æ—¶æœºï¼Œè¿™ä¸ªç¨‹åºå…è®¸æ‚¨ä½¿ç”¨ GraphQL æŸ¥è¯¢æ¼«å¨æ•°æ®åº“ã€‚

PyMarvelQL å…è®¸æ‚¨å‘æ¼«å¨çš„ REST API å‘é€ GraphQL æŸ¥è¯¢ï¼Œä»¥è·å–æœ‰å…³è§’è‰²ã€æ¼«ç”»ç³»åˆ—ã€æ•…äº‹ã€åˆ›ä½œè€…ç­‰æ›´å¤šä¿¡æ¯ã€‚

[![Alt text of image](../Images/3acd5ace2b36fde8541e4b37674ddbc8.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--z8-2o-ZL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AABLw585PPvYD3vFQyvwEeQ.gif)

# å°è¯•ä¸€ä¸‹ğŸ˜²

ä»¥ä¸‹æ˜¯å¯¹åç§°ä»¥ Captain å¼€å¤´çš„å­—ç¬¦çš„æŸ¥è¯¢ã€‚æŸ¥è¯¢ getCharacter()æ¥å—å‚æ•° nameStartsWithï¼Œè¯¥å‚æ•°å¯ä»¥è®¾ç½®ä¸ºæ‚¨æƒ³è¦çš„ä»»ä½•å€¼ã€‚åœ¨æŸ¥è¯¢ä¸­ï¼Œæ‚¨å¯ä»¥åŒ…å«ä»»ä½•è¦ä»æ¼«å¨ API è·å–çš„å­—æ®µã€‚å¯ç”¨çš„æŸ¥è¯¢å’Œå‚æ•°åŸºäºæ¼«å¨ API æ–‡æ¡£ã€‚

å¦‚æœä½ æƒ³ä¸‹è½½è¿™ä¸ªå·¥å…·ï¼Œè¯·åˆ°è¿™ä¸ª [Github åº“ã€‚](https://github.com/Novvum/MarvelQL/tree/master/packages/python)

# å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ğŸ—

PyMarvelQL æ˜¯ç”¨ 5 ä¸ªå·¥å…·æ„å»ºçš„â€”â€”Graphene 2.1ã€Python 3.7ã€Flaskã€flask-graphql å’Œ Marvelousã€‚çƒ§ç“¶å’ŒçŸ³å¢¨çƒ¯æ˜¯è¿™ä¸ªé¡¹ç›®çš„ä¸»è¦å·¥å…·ã€‚flask-graphQl ç”¨äºæ‰˜ç®¡æœ¬åœ° graphQl æœåŠ¡å™¨ï¼ŒGraphene ç”¨äºåˆ›å»ºå…è®¸ç”¨æˆ·ä»æ¼«å¨æ•°æ®åº“æŸ¥è¯¢ JSON æ•°æ®çš„ GraphQL è§£æå™¨å’Œå¯¹è±¡ç±»å‹ã€‚

# çƒ§ç“¶å’Œçƒ§ç“¶-GraphQL ğŸ§ª

Flask æ˜¯ python çš„ä¸€ä¸ª web æ¡†æ¶ï¼Œå®ƒä¸ºæ‚¨æä¾›äº†å·¥å…·ã€åº“å’ŒæŠ€æœ¯ï¼Œå…è®¸æ‚¨æ„å»º web åº”ç”¨ç¨‹åºè¿™ä¸ªé¡¹ç›®ä¾èµ– Flask æ¥æ”¯æŒåœ¨æµè§ˆå™¨ä¸­è¿è¡Œ GraphiQLã€‚å®ƒä½¿ç”¨ flask-graphql åŒ…ä¸­çš„ GraphQLView å‘ flask åº”ç”¨ç¨‹åºæ·»åŠ /graphql ç«¯ç‚¹ã€‚è¿™æ˜¯ flask-graphql çš„å®‰è£…æ–‡ä»¶çš„æ ·å­ã€‚

[![Alt text of image](../Images/f11dce2e13740927f247535b1d1be209.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--hDDL0DB9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2ANtEVlqNULDqGXMZhcpI9ag.png)

å¯¼èˆªåˆ°/graphql ç«¯ç‚¹ï¼Œè®¿é—® graphql æ¸¸ä¹åœºï¼ŒæŸ¥è¯¢æ¼«ç”»ã€äººç‰©ã€åˆ›ä½œè€…å’Œäº‹ä»¶ã€‚

# ç¥å¥‡çš„ğŸ¦¸

â€œç¥å¥‡æ˜¯ä¸€ä¸ªæ¼«å¨çš„ python API åŒ…è£…å™¨â€ã€‚PyMarvelQL ä½¿ç”¨ Marvel è°ƒç”¨ä¸€ä¸ªæ¼«å¨ç«¯ç‚¹ï¼Œå¹¶æ£€ç´¢ä¸€ä¸ª JSON å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«è§£æå™¨æ‰€éœ€çš„æ‰€æœ‰æ•°æ®ã€‚PyMarvelQL é™„å¸¦äº†æˆ‘ä»¬çš„ API å¯†åŒ™ï¼Œä½†æ˜¯æ‚¨å¯ä»¥é€šè¿‡è®¿é—®æ¼«å¨çš„ç½‘ç«™æ¥æ³¨å†Œè‡ªå·±çš„å¯†åŒ™ã€‚è·å¾— API é”®åï¼Œæ‚¨å¯ä»¥åƒè¿™æ ·è·å– JSON å¯¹è±¡:

[![Alt text of image](../Images/5c99c592b986adf709e00f16e7419544.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ZNmN75q4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AavcU_DY4oKYZLFQqEQecDw.png)

å˜é‡ m åŒ…å«ä¸€ä¸ªäº†ä¸èµ·çš„ API å®ä¾‹ï¼Œå®ƒä»æ¼«å¨æ•°æ®åº“ä¸­è·å–æ•°æ®ï¼Œä»æ¼«å¨æ•°æ®åº“ä¸­è·å–æ•°æ®ã€‚å¦‚ä¸Šæ‰€ç¤ºï¼Œå‡½æ•° accessData æ ¹æ®å˜é‡åè¿”å›ä¸€ä¸ª JSON å¯¹è±¡ã€‚

# çŸ³å¢¨çƒ¯-Python 2.1ğŸ‘Œ

Graphene-Python æ˜¯ä¸€ä¸ªç”¨äºåœ¨ Python ä¸­è½»æ¾æ„å»º GraphQL APIs çš„åº“ï¼Œå…¶ä¸»è¦ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªç®€å•ä½†å¯æ‰©å±•çš„ APIï¼Œä½¿å¼€å‘äººå‘˜çš„ç”Ÿæ´»æ›´åŠ è½»æ¾ã€‚â€œçŸ³å¢¨çƒ¯çš„ä¸»è¦ç‰¹æ€§ä¹‹ä¸€æ˜¯å®ƒå…è®¸æˆ‘ä»¬åˆ›å»ºè§£æå™¨æ–¹æ³•å’Œå¯¹è±¡ç±»å‹ã€‚PyGraphQL ä¸­çš„è§£æå™¨æ–¹æ³•å°† JSON æ•°æ®è¿”å›ç»™æŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼Œå½“è·å–æ¼«å¨å­—ç¬¦æ—¶ï¼Œè°ƒç”¨ accessData å‡½æ•°(å¦‚ä¸Šæ‰€è¿°), JSON å¯¹è±¡å­˜å‚¨åœ¨å˜é‡ characters ä¸­ã€‚ç„¶åï¼Œä½¿ç”¨è¿™ä¸¤ä¸ªå‡½æ•°è¿”å›æ•°æ®:

[![Alt text of image](../Images/37a7231fd362c004495e0269129bae36.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--PpT1Zj-m--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AC-hFWME7L0GZirxLMtqCyQ.png)
[![Alt text of image](../Images/66e05a197ea68d135bf5e2ef83a119cd.png)T6ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--rVjva1Jj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2Az3xaYTdqlYuwqju9JozZKw.png)

è¿™äº›åŠ©æ‰‹å‡½æ•°å°†å¯¹è±¡ä½œä¸ºå­—ç¬¦ä¸²è¯»å–ï¼Œå¹¶å°†æŸ¥è¯¢ä½œä¸ºå¯¹è±¡è¿”å›ã€‚ObjectType å¯¹äºè¿”å›è¢«æŸ¥è¯¢çš„æ•°æ®ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ã€‚æ­£å¦‚ Graphene æ–‡æ¡£ä¸­æ‰€è¿°ï¼Œâ€œå®ƒæ˜¯å…³äºæ‚¨çš„æ•°æ®çš„å”¯ä¸€æƒå¨ä¿¡æ¯æ¥æºã€‚å®ƒåŒ…å«æ‚¨æ­£åœ¨æŸ¥è¯¢çš„æ•°æ®çš„åŸºæœ¬å­—æ®µå’Œè¡Œä¸ºã€‚

åˆ›å»º ObjectType æ—¶ï¼Œå¿…é¡»åˆ›å»ºä¸ API æ–‡æ¡£ä¸­æ˜¾ç¤ºçš„å®Œå…¨ç›¸åŒçš„â€œå­—æ®µå’Œè¡Œä¸ºâ€ã€‚è¿™å°†ç¡®ä¿æ­£ç¡®è¿”å›æ•°æ®ã€‚

[![Alt text of image](../Images/a6110f851c819dc019ef806d74ec4223.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--7UTVnpqC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2A0AFRp6MQu9SbiKc4HomW8A.png)

ä¾‹å¦‚ï¼Œ[æ¼«å¨ API æ–‡æ¡£](https://developer.marvel.com/<br>%0A)åˆ—å‡ºäº†åˆ›å»ºè€…å¯¹è±¡æ‹¥æœ‰çš„å­—æ®µ..æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒæ˜¾ç¤ºäº†å­—æ®µæ˜¯ä»€ä¹ˆæ•°æ®ç±»å‹ã€‚ä½¿ç”¨è¿™äº›ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡ç±»å‹ï¼Œå¦‚ä¸‹æ‰€ç¤º:

[![Alt text of image](../Images/e122e277a7ac4c856351647c7bcd8138.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--IKokSy-_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AJ7yzmvgy7gL8yioAbQPQxw.png)

å¦‚ä¸Šæ‰€ç¤ºï¼ŒObjectType ç±»ä¼¼äºæ¼«å¨åˆ›å»ºä»–ä»¬çš„ Creator ç±»çš„æ–¹å¼ã€‚ä¸»è¦åŒºåˆ«åœ¨äºæ¯ä¸ªå­—æ®µçš„æ•°æ®ç±»å‹æ˜¯ç”¨ Graphene å‡½æ•°å£°æ˜çš„:String()ã€List()å’Œ field()ã€‚æ‰€æœ‰ä¸åŒçŸ³å¢¨çƒ¯åŠŸèƒ½çš„è¯¦ç»†è§£é‡Šå¯åœ¨å…¶[æ–‡æ¡£ä¸­æ‰¾åˆ°ã€‚](https://docs.graphene-python.org/en/latest/types/scalars/)

# è”ç³»æˆ‘ä»¬

å¦‚æœä½ å–œæ¬¢ PyMarvelQLï¼Œè¯·åœ¨ twitter ä¸Šå…³æ³¨æˆ‘ä»¬ [(@novvumio)](https://twitter.com/novvumio) ç»™æˆ‘ä»¬ä¸€é¢—æ˜ŸğŸŒŸåœ¨ [Github ä¸Šï¼](https://github.com/Novvum/MarvelQL/tree/master/packages/python)å¦‚æœæ‚¨å‘ç°ä»»ä½•é—®é¢˜ï¼Œæˆ‘ä»¬å¾ˆä¹æ„è§£å†³ï¼ä½ å¯ä»¥åœ¨è¿™é‡Œæäº¤ä»–ä»¬[ã€‚](https://github.com/Novvum/MarvelQL/issues)