# ä¹¦å‘†å­çš„ç¯®çƒ

> åŸæ–‡:[https://dev.to/teckert/basketball-for-nerds-5bf0](https://dev.to/teckert/basketball-for-nerds-5bf0)

> å—åˆ° Gayle Laakmann McDowell çš„[ç ´è§£ç¼–ç é‡‡è®¿](https://www.amazon.com/Cracking-Coding-Interview-Programming-Questions/dp/0984782850/ref=sr_1_1?ie=UTF8)ä¸­ä¸€ä¸ªé—®é¢˜çš„å¯å‘ã€‚
> ä¹Ÿå‘è¡¨åœ¨æˆ‘çš„[åšå®¢](https://thomaseckert.dev/posts/basketball-for-nerds)ä¸Šã€‚

å‡è®¾ä¸€ä¸ªæœ‹å‹å‘ä½ æŒ‘æˆ˜ï¼Œè®©ä½ åœ¨ç¯®çƒåœºä¸Šé€‰æ‹©ä¸¤ç§æ¸¸æˆä¸­çš„ä¸€ç§:

1.  ä½ åªæœ‰ä¸€æ¬¡æœºä¼šæŠ•ç¯®ã€‚
2.  ä½ æœ‰ä¸‰æ¬¡æœºä¼šæŠ•ä¸¤æ¬¡æˆ–æ›´å¤šæ¬¡ã€‚

ä½ æƒ³èµ¢ï¼Œä½ çŸ¥é“æŠ•ç¯®çš„ç¡®åˆ‡æ¦‚ç‡ã€‚å“ªåœºæ¯”èµ›ä½ èƒœç®—æ›´å¤§ï¼Ÿ

## [](#chance-of-winning-game-one)èµ¢å¾—ç¬¬ä¸€åœºæ¯”èµ›çš„æœºä¼š

è¿™ä¸ªæ¸¸æˆåŒ…æ‹¬ä¸€æ¬¡å°„é—¨æœºä¼šã€‚å› ä¸ºå·²çŸ¥å‡ºæ‰‹çš„å¯èƒ½æ€§æ˜¯`p`ï¼Œæ‰€ä»¥èƒœç®—çš„å‡ ç‡ä¹Ÿæ˜¯`p`ã€‚è®©æˆ‘ä»¬æŠŠè¿™ä¸ªå†™æˆ

```
s_1(p) = p 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å…¶ä¸­`s_1(p)`æ˜¯èµ¢å¾—ç¬¬ä¸€å±€çš„å¯èƒ½æ€§ã€‚

## [](#chance-of-winning-game-two)èµ¢å¾—ç¬¬äºŒåœºæ¯”èµ›çš„æœºä¼š

åœ¨è¿™é‡Œï¼Œæ•°å­¦å˜å¾—æ›´åŠ æ£˜æ‰‹ã€‚å› ä¸ºä½ å¿…é¡»è®©*è‡³å°‘ä¸‰æ¬¡å‡ºæ‰‹ä¸­çš„ä¸¤æ¬¡*ï¼Œæ‰€ä»¥æœ‰å››ç§æ–¹æ³•å¯ä»¥èµ¢å¾—è¿™åœºæ¸¸æˆ:

| ç¬¬ä¸€ | ç¬¬äºŒ | ç¬¬ä¸‰ |
| --- | --- | --- |
| ğŸ€ | ğŸ€ |  |
|  | ğŸ€ | ğŸ€ |
| ğŸ€ |  | ğŸ€ |
| ğŸ€ | ğŸ€ | ğŸ€ |

ä¸‰æªå…¨éƒ¨å‘½ä¸­çš„æ¦‚ç‡æ˜¯ç¬¬ä¸€æªå‘½ä¸­çš„æ¦‚ç‡*ä¹˜ä»¥*ç¬¬äºŒæªå‘½ä¸­çš„æ¦‚ç‡*ä¹˜ä»¥*ç¬¬ä¸‰æªå‘½ä¸­çš„æ¦‚ç‡`p^3`ã€‚

ä¸‰æŠ•ä¸¤ä¸­çš„æ¦‚ç‡æ˜¯ä¸¤æŠ•æ¦‚ç‡`p^2`ä¹˜ä»¥ä¸€æŠ•ä¸ä¸­æ¦‚ç‡`1 - p`ã€‚è¿™ç§æƒ…å†µæœ‰ä¸‰ç§å¯èƒ½ã€‚å¦‚æ­¤ç»¼åˆèµ·æ¥ï¼Œè¿™å°±æ˜¯`3p^2(1 - p)`ã€‚

æˆ‘ä»¬æŠŠæŠ•ä¸­æ‰€æœ‰çƒçš„æ¦‚ç‡åŠ ä¸Šä¸‰æŠ•ä¸¤ä¸­çš„æ¦‚ç‡ï¼Œå¾—åˆ°

```
s_2(p) = p^3 + 3p^2(1 - p) = 3p^2 - 2p^3 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#playing-the-game)ç©æ¸¸æˆ

ç°åœ¨æ˜¯å†³å®šç©å“ªä¸€ä¸ªæ¸¸æˆçš„æ—¶å€™äº†ã€‚èµ¢å¾—æ¯åœºæ¯”èµ›çš„æœºä¼šå–å†³äº`p`ï¼Œæˆ‘ä»¬è®°å¾—è¿™æ˜¯ä¸€æ¬¡å°„é—¨çš„å¯èƒ½æ€§ã€‚æˆ‘ä»¬å†™ç‚¹ Python æ¥æ ¹æ®`p`æ˜¯ä»€ä¹ˆæ¥é€‰æ‹©ç©å“ªä¸ªæ¸¸æˆå§ã€‚

ä¸ºäº†å½¢è±¡åŒ–è¿™ä¸ªå‡½æ•°ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨`matplotlib`å’Œ`numpy`ã€‚æˆ‘ä»¬è¿è¡Œ`pip install matplotlib`ï¼Œå¹¶åœ¨ä»£ç ä¸­ç¼–å†™

```
import matplotlib.pyplot as plt
import numpy as np 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—èµ¢å¾—ç¬¬ä¸€å±€(å•æ†)çš„å¯èƒ½æ€§ã€‚è¿™ä¸ªå‡½æ•°å°†åªè¿”å›å®ƒçš„è¾“å…¥ï¼Œä½†æ˜¯æŠŠå®ƒå†™ä¸‹æ¥ä½œä¸ºä¸€ä¸ªå‡½æ•°å°†ä¼šé˜æ˜æˆ‘ä»¬çš„æ„å›¾ã€‚æˆ‘ä»¬è¿˜å°†æ›´å¥½åœ°è¡¨è¾¾æˆ‘ä»¬çš„å‘½åçº¦å®šï¼Œè¿™é‡Œç§°ä¹‹ä¸º`p`ã€`single_shot_probability`å’Œ`s_1`ã€`one_shot_win_probability`ã€‚

```
def one_shot_win_probability(single_shot_probability: float) -> float:
    """
    Calculates the probability of winning a game with one chance to make one shot
    from the probability of making a single shot. 
    """
    return single_shot_probability 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªè®¡ç®—`s_2`çš„å‡½æ•°å«åš`two_of_three_shot_win_probability`ã€‚

```
def two_of_three_shot_win_probability(single_shot_probability: float) -> float:
    """
    Calculates the probability of winning a game with three chances to make 
    at least two shots from the probability of making a single shot.
    """
    return 3*single_shot_probability**2 - 2*single_shot_probability**3 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œè®©æˆ‘ä»¬å¿«é€Ÿåˆ‡å…¥ Pythonã€‚`two_of_three_shot_win_probability`æ˜¯å‡½æ•°çš„å†—é•¿åç§°ã€‚æœ‰æ—¶å€™é‚£æ˜¯åˆé€‚çš„ã€‚æˆ‘è®¤ä¸ºåœ¨ä¸€ä¸ªåœºæ™¯ä¸­ï¼Œä»£ç åº“ä¸­çš„æ‰€æœ‰ç¨‹åºå‘˜éƒ½çŸ¥é“è¿™äº›å‡½æ•°çš„æ„å›¾ï¼Œè¿™å°±å¤ªå†—é•¿äº†*ã€‚å®ƒæ¯”æˆ‘é€šå¸¸å†™çš„æ›´å†—é•¿ï¼Œä¹Ÿè®¸åœ¨ä¸€ä¸ªä¸“ä¸šçš„ä»»æ„ç¯®çƒæ¸¸æˆæ¦‚ç‡å…¬å¸çš„ä»£ç åº“ä¸­ï¼Œä»£ç çœ‹èµ·æ¥åƒè¿™æ ·:* 

 *```
def win_2_by_3_prob(p):
    # Win if 2/3 shots made.
    return 3*p**2 - 2*p**3 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è§é¬¼ï¼Œå¦‚æœä½ åªéœ€è¦ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œä½ å¯ä»¥æŠŠå®ƒå†™æˆ lambda:

```
win2by3 = lambda p : 3*p**2 - 2*p**3 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®¡ç®— 2/3 æ¸¸æˆçš„ä¸‰ç§æ–¹æ³•éƒ½åšåŒæ ·çš„äº‹æƒ…ï¼Œè¿™æ˜¯ç¼–ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œå†³å®šä½ å°†å¦‚ä½•å†™å®ƒã€‚

æ—¢ç„¶æˆ‘ä»¬å·²ç»æœ‰äº†è®¡ç®—èµ¢å¾—ä»»ä½•ä¸€åœºæ¯”èµ›çš„æ¦‚ç‡çš„å‡½æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”»å‡ºè¿™ä¸¤ä¸ªå‡½æ•°ä¸å•æ¬¡æŠ•ç¯®çš„æ¦‚ç‡çš„å…³ç³»ã€‚è®©æˆ‘ä»¬ä»¥ 0.01 ä¸ºæ­¥é•¿ä» 0 åˆ° 1 æ”¹å˜è¿™ç§å¯èƒ½æ€§ï¼Œå¹¶ä½¿ç”¨`matplotlib`ç»˜å›¾ã€‚

```
p_range = np.linspace(0, 1, 100)
one_shot_probs = [one_shot_win_probability(p) for p in p_range]
two_by_three_shot_probs = [two_of_three_shot_win_probability(p) for p in p_range]

plt.plot(p_range, one_shot_probs, label="One of One to Win")
plt.plot(p_range, two_by_three_shot_probs, label="Two of Three to Win")
plt.ylabel("Probability of Winning Game")
plt.xlabel("Probability of Making a Single Shot")
plt.legend()
plt.show() 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ€»ä¹‹ï¼Œæˆ‘ä»¬å¾—åˆ°ä»£ç 

```
import matplotlib.pyplot as plt
import numpy as np

def one_shot_win_probability(single_shot_probability: float) -> float:
    """
    Calculates the probability of winning a game with one chance to make one shot
    """
    return single_shot_probability

def two_of_three_shot_win_probability(single_shot_probability: float) -> float:
    """
    Calculates the probability of winning a game with three chances to make 
    at least two shots from the probability of making a single shot.
    """
    return 3 * single_shot_probability ** 2 - 2 * single_shot_probability ** 3

p_range = np.linspace(0, 1, 100)
one_shot_probs = [one_shot_win_probability(p) for p in p_range]
two_by_three_shot_probs = [two_of_three_shot_win_probability(p) for p in p_range]

plt.plot(p_range, one_shot_probs, label="One of One to Win")
plt.plot(p_range, two_by_three_shot_probs, label="Two of Three to Win")
plt.ylabel("Probability of Winning Game")
plt.xlabel("Probability of Making a Single Shot")
plt.legend()
plt.show() 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿è¡Œè¿™æ®µä»£ç ç»™æˆ‘ä»¬æä¾›äº†æƒ…èŠ‚

[![A plot of the likelihood of winning each game.](../Images/cde5d42b45362e9b1f659a313661bcd1.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Zu1yczN---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/69npj31c7id8klctcwyr.png)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœå•æ¬¡å‡ºæ‰‹çš„æ¦‚ç‡å°äº 0.5ï¼Œé‚£ä¹ˆç¬¬ä¸€åœºæ¯”èµ›å°±æ˜¯æœ€ä½³é€‰æ‹©ã€‚å¦‚æœè¿™ä¸ªæ¦‚ç‡å¤§äº 0.5ï¼Œç¬¬äºŒåœºæ¯”èµ›æ˜¯æœ€å¥½çš„ã€‚å¦‚æœæˆ‘ä»¬æŠ•ä¸­ä¸€çƒçš„æ¦‚ç‡æ­£å¥½æ˜¯ 0.5ï¼Œé‚£ä¹ˆæˆ‘ä»¬èµ¢å¾—ä»»ä½•ä¸€åœºæ¯”èµ›çš„æœºä¼šéƒ½æ˜¯ä¸€æ ·çš„ã€‚

é‚£ä¹ˆä½ ä¼šç©å“ªä¸ªæ¸¸æˆå‘¢ï¼Ÿ*