# åœ¨ JavaScript å’Œ PHP ä¸­æ­£ç¡®ä½¿ç”¨ JSON

> åŸæ–‡:[https://dev . to/web deasy/using-JSON-rightly-in-JavaScript-and-PHP-3moe](https://dev.to/webdeasy/using-json-correctly-in-javascript-and-php-3moe)

## [](#updated-version-is-available-click)*[æ›´æ–°ç‰ˆæœ¬å¯ç”¨(ç‚¹å‡»)ï¼](https://webdeasy.de/en/using-json-in-javascript-and-php/)ğŸ”¥*

JSON æ˜¯ web åº”ç”¨ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•åœ¨ JavaScript(å®¢æˆ·ç«¯)å’Œ PHP(æœåŠ¡å™¨ç«¯)ä¹‹é—´æ­£ç¡®åœ°äº¤æ¢å’Œå­˜å‚¨ JSON æ•°æ®ã€‚

## [](#table-of-contents)ç›®å½•

*   [åœ¨ PHP ä¸­è¯»å–å¹¶ä¿å­˜ JSON](#json-in-php)
    *   [è¯»å– JSON](#read-json)
    *   [ä¿å­˜ JSON](#save-json)
*   [å°† JSON ä» PHP å‘é€åˆ° JavaScript](#send-json)
*   [JavaScript ä¸­çš„ JSON](#json-in-js)
*   [ç»“è®º](#conclusion)

JSON ä»£è¡¨ JavaScript Object Notationï¼Œæ˜¯ä¸€ç§éå¸¸ç®€å•å’Œç´§å‡‘çš„æ•°æ®æ ¼å¼ï¼Œç”¨äºå­˜å‚¨å’Œå‘é€æ•°æ®ã€‚ç”¨æˆ·(å®¢æˆ·æœº)å’ŒæœåŠ¡å™¨ä¹‹é—´ç»å¸¸äº¤æ¢æ•°æ®ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶ JSON çš„æ•°æ®ä¼ è¾“å’Œå­˜å‚¨ã€‚

```
{
  "ceos": [
    {
      "id": "1",
      "name": "Steve Jobs"
    },
    {
      "id": "2",
      "name": "Bill Gates"
    },
    {
      "id": "3",
      "name": "Paul Allen"
    }
  ]
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ˜¯ JSON çš„ä¸€ä¸ªä¾‹å­ã€‚å…·æœ‰å±æ€§ id å’Œåç§°çš„ä¸‰ä¸ªæ¡ç›®å­˜å‚¨åœ¨ ceos ç±»åˆ«ä¸­ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªå·¥å…·æ¥éªŒè¯å’Œæ ¼å¼åŒ–æ‚¨çš„ JSONã€‚

å› ä¸ºæˆ‘æƒ³åœ¨è¿™é‡Œæ›´æ·±å…¥åœ°ç ”ç©¶ JavaScript å’Œ PHP çš„ä½¿ç”¨ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥åœ¨æœ¬æ–‡ä¸­æŸ¥çœ‹ JSON çš„ç¡®åˆ‡ç»“æ„ã€‚

## [](#reading-and-saving-json-in-php)åœ¨ PHP ä¸­è¯»å–å¹¶ä¿å­˜ JSON

### [](#read-json)é˜…è¯» JSON

åŸåˆ™ä¸Šï¼ŒJSON æ•°æ®å¯ä»¥éå¸¸å®¹æ˜“åœ°å­˜å‚¨ã€‚ä¸€ä¸ªç®€å•çš„æ–‡æœ¬æ–‡ä»¶è¶³ä»¥åœ¨é‚£é‡Œå­˜å‚¨æ•°æ®ã€‚å½“æ¶‰åŠå°‘é‡æ•°æ®æ—¶ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„å¥½çš„è§£å†³æ–¹æ¡ˆã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨æœ‰å¤§é‡æ•°æ®ï¼Œæˆ–è€…æ˜¯åŠ¨æ€æ·»åŠ çš„æ•°æ®(å¦‚è”ç³»äººè¡¨å•)ï¼Œå»ºè®®å°†æ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚

ä½†æ˜¯è¿™é‡Œæˆ‘ä»¬ä»å°‘é‡çš„æ•°æ®å¼€å§‹ï¼Œåœ¨æœåŠ¡å™¨ç«¯æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º *storage.json* çš„æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹(å†…å®¹ä¸ä¸Šé¢çš„ä¾‹å­ç›¸åŒï¼Œåªæ˜¯ç¼©å°äº†):

```
{"heroes":[{"id":"1","name":"Steve Jobs"},{"id":"2","name":"Bill Gates"},{"id":"3","name":"Paul Allen"},{"id":"4","name":"Sundar Pichai"}]} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸‹é¢å‡ è¡Œå¯ä»¥ç”¨æ¥è¯»å…¥å’Œè¾“å‡ºæ–‡ä»¶:

```
<?php 
$file = file_get_contents("storage.json");
print_r($file);
?> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ— æ ¼å¼è¾“å‡ºä¸ºæˆ‘ä»¬æä¾›äº†æ–‡ä»¶çš„ç®€å•æ–‡æœ¬å†…å®¹:

```
{"heroes":[{"id":"1","name":"Steve Jobs"},{"id":"2","name":"Bill Gates"},{"id":"3","name":"Paul Allen"},{"id":"4","name":"Sundar Pichai"}]} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¯¹äºè¿™ç§å½¢å¼çš„æ•°æ®ï¼Œæˆ‘ä»¬æ— èƒ½ä¸ºåŠ›ã€‚æˆ‘ä»¬å¯ä»¥ç¼–å†™è‡ªå·±çš„è§£æå™¨å°†å®ƒè½¬æ¢æˆä¸€ä¸ªå¯¹è±¡æˆ–æ•°ç»„ã€‚ä½†è¿™è¦å®¹æ˜“å¾—å¤šã€‚

PHP ä¸ºæˆ‘ä»¬æä¾›äº†å‡½æ•° [json_decode()](https://www.php.net/manual/de/function.json-decode.php) æ¥å°† json å­—ç¬¦ä¸²è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ã€‚

```
<?php 
$file = file_get_contents("storage.json");
$json_decoded = json_decode($file);
print_r($json_decoded);
?> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

JSON å­—ç¬¦ä¸²å·²ç»è¢«è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥åƒå¯¹å¾… PHP ä¸­çš„å…¶ä»–å¯¹è±¡ä¸€æ ·å¯¹å¾…å®ƒã€‚è¿™ä¸ªè¾“å‡ºçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:

```
stdClass Object
(
    [heroes] => Array
        (
            [0] => stdClass Object
                (
                    [id] => 1
                    [name] => Steve Jobs
                )

            [1] => stdClass Object
                (
                    [id] => 2
                    [name] => Bill Gates
                )

            [2] => stdClass Object
                (
                    [id] => 3
                    [name] => Paul Allen
                )

            [3] => stdClass Object
                (
                    [id] => 4
                    [name] => Sundar Pichai
                )

        )

) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚å‰æ‰€è¿°ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨æ™®é€šçš„å¯¹è±¡æ“ä½œç¬¦æ¥æ˜¾ç¤ºæˆ–æ”¹å˜å¯¹è±¡çš„å€¼:

```
<?php 
$file = file_get_contents("storage.json");
$json_decoded = json_decode($file);

echo $json_decoded->heroes[0]->name;    // Output: Steve Jobs

$json_decoded->heroes[0]->name = "CEO Steve Jobs";

echo $json_decoded->heroes[0]->name;    // Output: CEO Steve Jobs
?> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#savejson)è¨ç»´æ°æ£®

ä¸€æ—¦æˆ‘ä»¬æ ¹æ®éœ€è¦è°ƒæ•´äº†æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥å†æ¬¡ä¿å­˜å®ƒã€‚

```
<?php 
$filename = "storage.json";
$file = file_get_contents($filename);
$json_decoded = json_decode($file);

$json_decoded->heroes[0]->name = "CEO Steve Jobs";

$json_encoded = json_encode($json_decoded);
file_put_contents($filename, $json_encoded);
?> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å› ä¸ºæˆ‘ä»¬åœ¨è¯»å– JSON å­—ç¬¦ä¸²æ—¶å¯¹å®ƒè¿›è¡Œäº†è§£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»åœ¨ä¿å­˜å®ƒä¹‹å‰å†æ¬¡å¯¹å®ƒè¿›è¡Œç¼–ç ã€‚è¿™æ˜¯åœ¨ PHP ä¸­é€šè¿‡ [json_encode()](https://www.php.net/manual/de/function.json-encode.php) å®Œæˆçš„ã€‚ä¹Ÿæ˜¯è¿™æ ·ã€‚å¾ˆç®€å•ï¼Œä¸æ˜¯å—ï¼Ÿ

## [](#send-json-from-php-to-javascript)ä» PHP å‘é€ JSON åˆ° JavaScript

ä¸ºäº†åœ¨å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®ï¼Œæˆ‘å–œæ¬¢ä½¿ç”¨ [jQuery](https://jquery.com/) ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå®ƒå‘æˆ‘ä»¬çš„ server.php å‘å‡ºä¸€ä¸ª Ajax è¯·æ±‚ï¼Œå¹¶è·å¾—è¿”å›çš„æ•°æ®ã€‚

*index.html*T2ã€‘

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>JSON in JavaScript and PHP</title>
</head>

<body>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        $.getJSON('server.php', {}, function(data) {
            console.log(data);
        });
    </script>
</body>

</html> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*server.php*T2ã€‘

```
<?php
$file = file_get_contents("storage.json");
exit($file);
?> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ§åˆ¶å°è¾“å‡ºçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:
[![JSON Console Log](../Images/b5ed5f4994b9b7b3d8900466e3106750.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--mP6yNySm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://webdeasy.de/wp-content/uploads/2019/05/json-console-log.png)

è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨ JavaScript ä¸­æ­£å¸¸è®¿é—®æœ€åˆæ¥è‡ªæˆ‘ä»¬çš„ *storage.json* çš„æ•°æ®ã€‚

## JavaScript ä¸­çš„ JSON

å¦‚æœæˆ‘ä»¬ç°åœ¨åœ¨ JavaScript ä¸­æœ‰ä¸€ä¸ª JSON å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [JSON.parse()](https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse) å‡½æ•°å°†å…¶è½¬æ¢ä¸º JavaScript å¯¹è±¡ã€‚çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:

```
var json = '{"heroes":[{"id":"1","name":"CEO Steve Jobs"},{"id":"2","name":"Bill Gates"},{"id":"3","name":"Paul Allen"},{"id":"4","name":"Sundar Pichai"}]}';

var obj = JSON.parse(json);
console.log(obj); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¾“å‡ºä¸æˆ‘ä»¬çš„ storage.json.
[![JSON Console Log](../Images/b5ed5f4994b9b7b3d8900466e3106750.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--mP6yNySm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://webdeasy.de/wp-content/uploads/2019/05/json-console-log.png) çš„è¾“å‡ºç›¸åŒ

åè¿‡æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ [JSON.stringify()](https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify) å°†ä¸€ä¸ª JavaScript å¯¹è±¡è½¬æ¢æˆ JSONã€‚

```
var json = '{"heroes":[{"id":"1","name":"CEO Steve Jobs"},{"id":"2","name":"Bill Gates"},{"id":"3","name":"Paul Allen"},{"id":"4","name":"Sundar Pichai"}]}';

var obj = JSON.parse(json);

var jsonAgain = JSON.stringify(obj);
console.log(jsonAgain); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ§åˆ¶å°è¾“å‡ºåˆæ˜¯æˆ‘ä»¬çš„ json å­—ç¬¦ä¸²ï¼Œå®ƒä¹Ÿåœ¨å˜é‡ JSON ä¸­ã€‚

```
{"heroes":[{"id":"1","name":"CEO Steve Jobs"},{"id":"2","name":"Bill Gates"},{"id":"3","name":"Paul Allen"},{"id":"4","name":"Sundar Pichai"}]} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#conclusion)ç»“è®º

æˆ‘ä»¬å·²ç»è®¨è®ºäº† JavaScript å’Œ PHP æœ€é‡è¦çš„ JSON å‡½æ•°ã€‚JSON åªæ˜¯ä¸€ç§éå¸¸ç®€å•ç´§å‡‘çš„æ•°æ®æ ¼å¼ã€‚æ­£å¦‚æ‚¨ç°åœ¨çœ‹åˆ°çš„ï¼Œåœ¨ JavaScript å’Œ PHP ä¸­çš„ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ã€‚

å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä¼šå¾ˆé«˜å…´ä½ èƒ½åœ¨æˆ‘çš„[åšå®¢](https://webdeasy.de/en/web-development-server-administration-tutorials/)ä¸Šçœ‹åˆ°æ›´å¤šæ–‡ç« ï¼Œå¹¶åœ¨[æ¨ç‰¹](https://twitter.com/WebDEasy)ä¸Šå…³æ³¨æˆ‘ï¼:)

å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ï¼:)