# æœ‰è§’åº¦çš„ææ–™ä¸»é¢˜

> åŸæ–‡:[https://dev.to/codingcatdev/angular-material-theming-32km](https://dev.to/codingcatdev/angular-material-theming-32km)

> åŸå¸–:[https://ajonp . com/courses/angular material/angular-material-theming/](https://ajonp.com/courses/angularmaterial/angular-material-theming/)

[https://www.youtube.com/embed/V3WiBs-igaY](https://www.youtube.com/embed/V3WiBs-igaY)

> æˆ‘å¯¹è¿™èŠ‚è¯¾/è§†é¢‘æœ‰ç‚¹èµ¶ï¼Œæ‰€ä»¥å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·è·³åˆ°[æ¾å¼›é¢‘é“](https://bit.ly/ajonp-slack-invite)

# [](#angular-material-theming)æ£±è§’åˆ†æ˜çš„æè´¨ä¸»é¢˜åŒ–

ğŸŒæ¼”ç¤º:[https://ajonp-lesson-10.firebaseapp.com/kitchensink](https://ajonp-lesson-10.firebaseapp.com/kitchensink)

Angular Material æ˜¯å®˜æ–¹æ”¯æŒçš„ç»„ä»¶ï¼Œç”¨äºåœ¨ Angular ä¸­å®ç° Google çš„æè´¨è®¾è®¡ç³»ç»Ÿã€‚
æ£±è§’åˆ†æ˜çš„ææ–™æœ‰ 4 ä¸ªé¢„è®¾ä¸»é¢˜

*   æ·±ç´«è‰²-ç¥ç€è‰²
*   é›ç²‰è‰²
*   ç²‰çº¢-è“ç°è‰²
*   ç´«è‰²-ç»¿è‰²æˆ‘ä»¬å°†çœ‹çœ‹å¦‚ä½•åˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„ä¸»é¢˜ï¼Œå¹¶å°†å®ƒåŒ…å«åœ¨æˆ‘ä»¬çš„é»˜è®¤æ ·å¼ä¸­ï¼Œç„¶åä½¿ç”¨å®ƒä¸ºæˆ‘ä»¬çš„æ¯ä¸ªç»„ä»¶æ ·å¼æä¾›æ··éŸ³ã€‚

> æˆ‘å¬åˆ°çš„å…³äº Angular Material ä¸­çš„ä¸»é¢˜çš„æœ€å¤§æŠ±æ€¨å¯èƒ½æ˜¯è¦æ±‚ä½¿ç”¨ sass å‡½æ•°æ„å»ºä¸€å¥—å…¨æ–°çš„ cssï¼Œè¿™ä¼šä½¿ style.css æ–‡ä»¶è†¨èƒ€ã€‚è¯·æŸ¥çœ‹ [Ionic CSS å˜é‡](https://beta.ionicframework.com/docs/theming/color-generator)æ¥æ¯”è¾ƒè¿™æ˜¯å¦‚ä½•å®ç°çš„ã€‚æˆªè‡³å‘ç¨¿æ—¶ï¼Œè¿™ä»ç„¶æ˜¯ GitHub ä¸Šçš„ä¸€ä¸ª[æœªå†³é—®é¢˜](https://github.com/angular/material2/issues/4352)

## [](#lesson-steps)ä¸Šè¯¾æ­¥éª¤

1.  [å¨æˆ¿æ°´æ§½ç»„ä»¶](#kitchen-sink-component)
2.  [è§’åº¦æŸ”æ€§å¸ƒå±€](#angular-flex-layout)
3.  [æ£±è§’åˆ†æ˜çš„ç´ æä¸»é¢˜åˆ›ä½œ](#angular-material-theme-creation)
4.  [ä¸»é¢˜é€‰æ‹©è§’åº¦æœåŠ¡](#theme-selection-angular-service)
5.  [è¨æ–¯ Mixins](#sass-mixins)
6.  [å·¥å…·](#tools)

# [](#kitchen-sink-component)å¨æˆ¿æ°´æ§½ç»„ä»¶

åœ¨è‹±è¯­ä¸­(å¯èƒ½åªæœ‰ç¾å›½)ï¼Œæˆ‘ä»¬è¯´â€œé™¤äº†å¨æˆ¿çš„æ°´æ§½ä»¥å¤–çš„ä»»ä½•ä¸œè¥¿â€ï¼Œåœ¨ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨â€œå¨æˆ¿æ°´æ§½â€æ¥æŒ‡ä»£æˆ‘ä»¬åœ¨ä¸€ä¸ªç½‘ç«™ä¸Šå¯èƒ½ä½¿ç”¨çš„ä»»ä½•ä¸œè¥¿ã€‚å¯¹äºæˆ‘ä»¬çš„ä¾‹å­ï¼Œæˆ‘ä»¬å°†ä»[Angular Material kitchen sink](https://github.com/angular/material2/blob/b21cfb73261e5c334280a185762ffcc475348b76/src/universal-app/kitchen-sink/kitchen-sink.ts)ä¸­æå–ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çªå‡ºæ˜¾ç¤ºæ‰€æœ‰å¯èƒ½çš„ç»„ä»¶ä»¥åŠä¸»é¢˜å¯¹å®ƒä»¬çš„å½±å“ã€‚

è¿™äº›ç»„ä»¶å¯ä»¥åœ¨[material.angular.io/components](https://material.angular.io/components/categories)ä¸Šæ‰¾åˆ°ï¼Œä¹Ÿæœ‰ä¸€äº›æ¥è‡ªç»„ä»¶å¼€å‘å·¥å…·åŒ…(CDK)ã€‚

## [](#clone-repo)å…‹éš†å›è´­

é€šå¸¸æˆ‘ä¼šæä¾›ä¸€ä¸ªæŒ‡å—æ¥å»ºç«‹æ•´ä¸ªäº‹æƒ…(å¦‚æœä½ æƒ³è·Ÿç€åšï¼Œæˆ‘åœ¨è§†é¢‘ä¸­å±•ç¤ºäº†è¿™ä¸€ç‚¹)ï¼Œä½†ä¸ºäº†ç®€åŒ–äº‹æƒ…ï¼Œæˆ‘å»ºè®®ä½ åªå¤åˆ¶ç¬¬ 10 è¯¾çš„å›è´­(æˆ–å‰å®ƒï¼Œç„¶åå¤åˆ¶ä½ çš„)ï¼Œå¹¶åœ¨è¿™æ¬¡æ¼”ç»ƒä¸­æ£€æŸ¥å®ƒã€‚

```
git clone https://github.com/AJONPLLC/lesson-10-angular-material-theming 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä½ æƒ³ç»§ç»­ï¼Œä½ å¯ä»¥ä»ç¬¬ 9 è¯¾å¼€å§‹ï¼Œå’Œæˆ‘ä¸€èµ·æ›´æ–°ã€‚

```
git clone https://github.com/AJONPLLC/lesson-9-angular-material-router-outlet 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [](#angular-flexlayout)è§’åº¦ä¼¸ç¼©å¸ƒå±€

angular FLex-Layout(FX Layout)æä¾›äº†ä¸€ä¸ªæ›¿ä»£æ‰‹å·¥åˆ›å»º flexlayout çš„ css çš„å¥½æ–¹æ³•ã€‚å®ƒä¸ Bootstrap çš„ Flex éå¸¸ç›¸ä¼¼ï¼Œä½†æˆ‘è§‰å¾—å®ƒä¼¼ä¹æ›´å¼ºå¤§ã€‚

è¿™æ˜¯ tburleson çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­:

<video controls=""><source src="https://res.cloudinary.com/ajonp/video/upload/v1547729145/ajonp-ajonp-com/10-lesson-angular-material-theming/fxlayoutExample.webm" type="video/webm"> <source src="https://res.cloudinary.com/ajonp/video/upload/v1547729145/ajonp-ajonp-com/10-lesson-angular-material-theming/fxlayoutExample.mov" type="video/mp4"></video> 

## [](#toolbar)å·¥å…·æ 

åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å·¥å…·æ ä¸­çš„`nogrow`é€‰é¡¹ï¼Œè¿™æ ·æè´¨å›¾æ ‡å°±å¯ä»¥ä½¿ç”¨`fxFlex="nogrow"`ä¿æŒå‘å³ç§»åŠ¨ã€‚

sidenav.component.html

```
<mat-sidenav-container>
  <mat-sidenav opened="false" mode="over" #snav>
    <mat-nav-list>
      <mat-list-item>
        <h4
          matLine
          routerLink="/welcome"
          [routerLinkActiveOptions]="{ exact: true }"
          routerLinkActive="active-link"
        >
          Home
        </h4>
      </mat-list-item>
      <mat-list-item>
        <h4
          matLine
          routerLink="/kitchensink"
          [routerLinkActiveOptions]="{ exact: true }"
          routerLinkActive="active-link"
        >
          Kitchen Sink
        </h4>
      </mat-list-item>
      <mat-list-item>
        <h4 matLine routerLink="/books" routerLinkActive="active-link">
          Books
        </h4>
      </mat-list-item>
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content>
    <mat-toolbar color="primary">
      <button
        type="button"
        aria-label="Toggle sidenav"
        mat-icon-button
        (click)="snavToggle(snav)"
      >
        <mat-icon>menu</mat-icon>
      </button>
      <span fxFlex>
        <a class="home-link" routerLink=".">{{ title }}</a>
      </span>
      <span fxFlex="nogrow">
        <button mat-icon-button [matMenuTriggerFor]="menu">
          <mat-icon>format_color_fill</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="pickColor('')">
            <div class="color-swatch color-swatch-primary" mat-menu-item></div>
          </button>
          <button mat-menu-item (click)="pickColor('green')">
            <div class="color-swatch color-swatch-green" mat-menu-item></div>
          </button>
          <button mat-menu-item (click)="pickColor('pink')">
            <div class="color-swatch color-swatch-pink" mat-menu-item></div>
          </button>
          <button mat-menu-item (click)="pickColor('purple')">
            <div class="color-swatch color-swatch-purple" mat-menu-item></div>
          </button>
          <button mat-menu-item (click)="pickColor('yellow')">
            <div class="color-swatch color-swatch-yellow" mat-menu-item></div>
          </button>
          <button mat-menu-item (click)="pickColor('warn')">
            <div class="color-swatch color-swatch-warn" mat-menu-item></div>
          </button>
        </mat-menu>
      </span>
    </mat-toolbar>
    <router-outlet></router-outlet>
  </mat-sidenav-content>
</mat-sidenav-container> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#kitchensink)Kitchensink

åœ¨æˆ‘ä»¬çš„ kitchensink ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ª`<span fxFlex>`åŒ…è£…æ¯ä¸ªç»„ä»¶ï¼Œç„¶åç”¨`<div style="max-width: 80%" fxLayout="column" fxLayoutAlign="center center">`åŒ…è£…æ•´ä¸ªç»„ä»¶ï¼Œè¿™å°†å…è®¸æ‰€æœ‰å†…å®¹éƒ½ä½äºä¸­å¿ƒï¼Œå¹¶ä¸”æ¯ä¸ª`fxFlex`é¡¹ç›®éƒ½ä½äº flexbox ä¸­ã€‚æ‚¨å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ html ä¸­å‘ˆç°æ—¶ï¼Œæ¯ä¸ª span éƒ½æœ‰æ ·å¼`flex: 1 1 1e-09px;box-sizing: border-box;`ã€‚

# [](#angular-material-theme-creation)æ£±è§’åˆ†æ˜çš„æè´¨ä¸»é¢˜åˆ›ä½œ

æ‚¨å¯ä»¥ä½¿ç”¨@angular/material åŒ…é™„å¸¦çš„ 4 ä¸ªé¢„æ„å»ºä¸»é¢˜ï¼Œåªéœ€å°†å®ƒä»¬å¯¼å…¥ style.css å³å¯

`@import "~@angular/material/prebuilt-themes/indigo-pink.css";`
`@import "~@angular/material/prebuilt-themes/deeppurple-amber.css";`
`@import "~@angular/material/prebuilt-themes/pink-bluegrey.css";`

## [](#custom-theme)è‡ªå®šä¹‰ä¸»é¢˜

æˆ‘æ›´å–œæ¬¢ç›´æ¥æ·»åŠ å®ƒä»¬ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åˆ›å»ºè‡ªå·±çš„å“ç‰Œé¢œè‰²ã€‚å¦‚æœä½ ä¸å…è®¸ä½ çš„å“ç‰Œçš„èº«ä»½æ˜¾ç¤ºå‡ºæ¥ï¼Œä½ å°±ä¸èƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„ç‹¬ç‰¹çš„ç½‘ç«™(ä½ çŸ¥é“æˆ‘åœ¨è¯´ä»€ä¹ˆè¥é”€ï¼).

æˆ‘æ‰¾åˆ°çš„æœ€å¥½çš„ç½‘ç«™æ˜¯[æè´¨è®¾è®¡è°ƒè‰²æ¿ç”Ÿæˆå™¨](http://mcg.mbitson.com)ä¸åƒ[è°·æ­Œçš„æè´¨é¢œè‰²å·¥å…·](https://material.io/tools/color/)ï¼ŒDPG å…è®¸ä½ ç›´æ¥å¯¼å‡ºåˆ° sass å˜é‡ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªæœ‰è§’åº¦çš„æè´¨ä¸»é¢˜æ—¶æ‰€éœ€è¦çš„ã€‚

ç¡®ä¿å½“æ‚¨é€‰æ‹©ä¸‹è½½(å‘ä¸‹ç®­å¤´)æ—¶ï¼Œæ‚¨é€‰æ‹© ANGULAR JS 2(æè´¨ 2)ã€‚
[![Download Design Palette Generator](../Images/8e4a0accb5314c36214fd7f01eb8bd9f.png)T3ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--7kHvY0QI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/ajonp/image/upload/f_auto%2Cfl_lossy%2Cq_auto/v1547730945/ajonp-ajonp-com/10-lesson-angular-material-theming/Screen_Shot_2019-01-17_at_8.14.48_AM.jpg)

## [](#update-theme-file)æ›´æ–°ä¸»é¢˜æ–‡ä»¶

ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ‰€æœ‰è¿™äº›è‡ªå®šä¹‰å˜é‡æ¥åˆ›å»ºæ–°çš„ä¸»é¢˜ã€‚sass å˜é‡åº”è¯¥å®šä¹‰è°ƒè‰²æ¿ä¸­æ¯ç§é¢œè‰²çš„å…¨å…‰è°±å’Œå¯¹æ¯”åº¦ã€‚

è¯·ç¡®ä¿ä½ åŒ…å«äº†æ‰€æœ‰çš„ç´ æå’Œä¸»é¢˜å‡½æ•°ï¼Œå°†å®ƒä»¬æ·»åŠ åˆ°ä»»ä½•ä¸»é¢˜æ–‡ä»¶çš„é¡¶éƒ¨ã€‚ä½ åº”è¯¥åœ¨ä»»ä½•é¡¹ç›®ä¸­åªä½¿ç”¨ä¸€æ¬¡ï¼Œæ‰€ä»¥å¦‚æœè¿™åœ¨ä½ ä½¿ç”¨å„ç§`mixins`å’Œ`include`ç‰¹æ€§çš„æ ·å¼æ–‡ä»¶ä¸­æ›´æœ‰æ„ä¹‰ï¼Œè¯·ä»¥å¯¹ä½ çš„é¡¹ç›®æœ‰æ„ä¹‰çš„æ–¹å¼æ¥åšã€‚

```
@import '~@angular/material/theming';
@include mat-core(); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#sass-variables)è¨æ–¯å˜é‡

angular-material-router-theme . scss

```
$md-purple: (
  50: #ffffff,
  100: #d3cbe7,
  200: #b2a5d5,
  300: #8974be,
  400: #775fb4,
  500: #674ea7,
  600: #5a4492,
  700: #4d3b7d,
  800: #403168,
  900: #342754,
  A100: #f9f7fd,
  A200: #b7a2ec,
  A400: #7c5dcb,
  A700: #7256b9,
  contrast: (
    50: #000000,
    100: #000000,
    200: #000000,
    300: #000000,
    400: #ffffff,
    500: #ffffff,
    600: #ffffff,
    700: #ffffff,
    800: #ffffff,
    900: #ffffff,
    A100: #000000,
    A200: #000000,
    A400: #ffffff,
    A700: #ffffff
  )
); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸ºæˆ‘ä»¬çš„æ–°è°ƒè‰²æ¿åˆ›å»º Sass å˜é‡ï¼Œè¿™é‡Œ mat-palette å‡½æ•°è¿”å›é¢œè‰²ä¿¡æ¯å’Œæ˜ å°„ï¼Œå¹¶å°†å…¶åˆ†é…ç»™`$angular-material-router-app-purple`ã€‚

```
$angular-material-router-app-purple: mat-palette($md-purple); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#new-material-theme)æ–°ææ–™ä¸»é¢˜

ä¸€æ—¦ä½ æœ‰äº†ä¸€ä¸ªæ–°çš„è°ƒè‰²æ¿ï¼Œæ˜¯æ—¶å€™åˆ›å»ºä¸€ä¸ªæ–°çš„ Sass å˜é‡`$angular-material-router-app-theme-purple`æ¥å­˜æ”¾ä½ çš„å…¨éƒ¨ä¸»é¢˜ä¿¡æ¯äº†ã€‚

```
$angular-material-router-app-theme-purple: mat-dark-theme(
  $angular-material-router-app-purple,
  $angular-material-router-app-accent,
  $angular-material-router-app-warn
); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯·æ³¨æ„ï¼Œæˆ‘ä½¿ç”¨äº†é»˜è®¤çš„å¼ºè°ƒå’Œè­¦å‘Šï¼Œä½†ä½ ä¹Ÿå¯ä»¥æŠŠå®ƒä»¬å˜æˆä½ å–œæ¬¢çš„ä»»ä½•é¢œè‰²ã€‚ç„¶åæ¯å½“ä½ ä½¿ç”¨`color="warn"`æ—¶ï¼Œå®ƒå¯èƒ½æ˜¯ç´«è‰²æˆ–ç°è‰²è€Œä¸æ˜¯çº¢è‰²ï¼Œè¯·åœ¨ä»»ä½•ä¸»é¢˜ä¸­åˆ‡æ¢å˜é‡ã€‚

## [](#style-class-update)æ ·å¼ç±»æ›´æ–°

æ­¤æ—¶ï¼Œæˆ‘ä»¬åªåˆ›å»ºäº†ä¸€å † Sass å˜é‡ï¼Œè¿™äº›å˜é‡æ²¡æœ‰åŒ…å«åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†æŠŠå®ƒä»¬åŒ…å«åœ¨å‘¨å›´çš„ç±»ä¸­ï¼Œè¿™å¯ä»¥åœ¨`style.scss`æ–‡ä»¶ä¸­å®Œæˆï¼Œè¿™åº”è¯¥æ˜¯ç”± Angular CLI ç”Ÿæˆçš„ï¼Œæˆ–è€…å¦‚æœæ‚¨å…‹éš†äº† repoï¼Œå®ƒå·²ç»åœ¨`styles`æ–‡ä»¶å¤¹ä¸­ã€‚

### [](#import-scss-theme-file)å¯¼å…¥ SCSS ä¸»é¢˜æ–‡ä»¶

é¦–å…ˆï¼Œé€šè¿‡å¯¼å…¥ scss `@import 'angular-material-router-theme.scss';`ï¼Œç¡®ä¿åŒ…å«äº†ä¿å­˜æ‰€æœ‰å˜é‡çš„æ–°ä¸»é¢˜æ–‡ä»¶ã€‚

æ‚¨å¯ä»¥åœ¨ä»»ä½•ç»„ä»¶ä¸­è¿™æ ·åšï¼Œä»¥ä½¿ç”¨ Sass å˜é‡ã€‚

### [](#include-theme-into-class-variable)å°†ä¸»é¢˜åŒ…å«åˆ°ç±»å˜é‡ä¸­

ç°åœ¨æˆ‘ä»¬å°†åœ¨è¿™ä¸ªç±»ä¸­åŒ…å«æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„æ•´ä¸ªä¸»é¢˜(css)ã€‚

```
...
.angular-material-router-app-theme-purple {
  $theme: $angular-material-router-app-theme-purple;
  @include angular-material-theme($theme);
}
... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#sidenav-color-selector)ä¾§å¯¼èˆªé¢œè‰²é€‰æ‹©å™¨

ç°åœ¨æˆ‘ä»¬å·²ç»å®šä¹‰äº†æ‰€æœ‰çš„ä¸»é¢˜é¢œè‰²ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–°ä¾§å¯¼èˆªæŒ‰é’®ç‚¹å‡»æ ·å¼æ¥åŒ…å«æ­£ç¡®çš„èƒŒæ™¯é¢œè‰²ï¼Œè¿™å°†ä¸ºæ¯ä¸ªèœå•é¡¹åˆ†é…é¢œè‰²ï¼Œå¹¶ä½¿ç”¨ 50%çš„`border-radius`ä½¿å…¶æˆä¸ºä¸€ä¸ªåœ†å½¢ã€‚

sidenav.component.scss

```
 .color-swatch {
  position: relative;
  width: 36px;
  height: 36px;
  margin: 6px;
  border-radius: 50%;
  overflow: hidden;
}

.color-swatch-primary {
  background-color: mat-color($angular-material-router-app-primary, 500);
}
.color-swatch-primary:hover {
  background-color: mat-color(
    $angular-material-router-app-primary,
    500
  ) !important;
}
.color-swatch-green {
  background-color: mat-color($angular-material-router-app-green, 500);
}
.color-swatch-green:hover {
  background-color: mat-color(
    $angular-material-router-app-green,
    500
  ) !important;
}
.color-swatch-pink {
  background-color: mat-color($angular-material-router-app-pink, 500);
}
.color-swatch-pink:hover {
  background-color: mat-color(
    $angular-material-router-app-pink,
    500
  ) !important;
}
.color-swatch-purple {
  background-color: mat-color($angular-material-router-app-purple, 500);
}
.color-swatch-purple:hover {
  background-color: mat-color(
    $angular-material-router-app-purple,
    500
  ) !important;
}
.color-swatch-yellow {
  background-color: mat-color($angular-material-router-app-yellow, 500);
}
.color-swatch-yellow:hover {
  background-color: mat-color(
    $angular-material-router-app-yellow,
    500
  ) !important;
}
.color-swatch-warn {
  background-color: mat-color($angular-material-router-app-warn, 500);
}
.color-swatch-warn:hover {
  background-color: mat-color(
    $angular-material-router-app-warn,
    500
  ) !important;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [](#theme-selection-angular-service)ä¸»é¢˜é€‰æ‹©è§’åº¦æœåŠ¡

ä½ å¯ä»¥é˜…è¯» [Angular Services](https://angular.io/tutorial/toh-pt4) ä»¥åŠä¸ºä»€ä¹ˆä½ åº”è¯¥ä½¿ç”¨å®ƒä»¬ã€‚

## [](#create-colorpicker-service)åˆ›å»ºæ‹¾è‰²å™¨æœåŠ¡

æˆ‘å–œæ¬¢åœ¨ä¸€ä¸ªåä¸º`core`çš„æ–‡ä»¶å¤¹ä¸­åˆ›å»ºæˆ‘æ‰€æœ‰çš„æœåŠ¡ï¼Œæˆ‘ä¹Ÿä¼šç»å¸¸æŠŠå…¶ä»–çš„ä¸œè¥¿æ¯”å¦‚æ¨¡å‹æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚

```
ng g s core/services/color-picker.service 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨è¿™é¡¹æœåŠ¡ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å˜é‡`initialClass`ä¸­ä¸ºåº”ç”¨ç¨‹åºè®¾ç½®ä¸€ä¸ªåˆå§‹ç±»ï¼Œå¦‚æœæ‚¨è·Ÿéšè¯¾ç¨‹è§†é¢‘ï¼Œå®ƒæ˜¾ç¤ºäº†å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨æœ¬åœ°å­˜å‚¨ã€‚è¿™å…è®¸äººä»¬è®¾ç½®ä¸»é¢˜ï¼Œè€Œä¸éœ€è¦åœ¨åˆ·æ–°æ—¶é€‰æ‹©ã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆåœ¨é‚£é‡ŒæŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œæˆ‘ä»¬å°±æ·»åŠ åˆå§‹ç±»ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬è®¾ç½®çš„`BehaviorSubject`ã€‚ä½ ä¹Ÿä¼šæ³¨æ„åˆ°æˆ‘ä»¬æ­£åœ¨æ›´æ–°ä¸€ä¸ªå«åš`OverlayContainer`çš„ä¸œè¥¿ï¼Œå®ƒæ¥è‡ªäº[æè´¨ CDK](https://material.angular.io/cdk/overlay/overview) ï¼Œå…è®¸è®¸å¤šæµ®åŠ¨é¢æ¿æ‹¥æœ‰é£æ ¼ã€‚

color-picker.service.ts

```
import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
import { OverlayContainer } from '@angular/cdk/overlay';

@Injectable({
  providedIn: 'root'
})
export class ColorPickerService {
  initialClass = 'angular-material-router-app-theme';
  colorClass$: BehaviorSubject<string> = new BehaviorSubject(this.initialClass);
  constructor(private overlayContainer: OverlayContainer) {
    const storageClass = localStorage.getItem('color-picker');
    console.log(storageClass);
    if (storageClass) {
      overlayContainer.getContainerElement().classList.add(storageClass);
      this.colorClass$.next(storageClass);
    } else {
      overlayContainer.getContainerElement().classList.add(this.initialClass);
    }
  }
  getColorClass() {
    return this.colorClass$;
  }
  setColorClass(className: string) {
    this.overlayContainer.getContainerElement().classList.forEach(css => {
      this.overlayContainer.getContainerElement().classList.remove(css);
    });
    this.overlayContainer.getContainerElement().classList.add(className);
    this.colorClass$.next(className);
    localStorage.setItem('color-picker', className);
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#update-app-for-theme-class)æ›´æ–°ä¸»é¢˜ç±» App

ç°åœ¨æˆ‘ä»¬å·²ç»å¤„ç†å¥½äº†æ‰€æœ‰çš„åº•å±‚é¡¹ç›®ï¼Œæˆ‘ä»¬éœ€è¦å®æ—¶æ›´æ–°åº”ç”¨ç¨‹åºçš„ç±»ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘å–œæ¬¢åœ¨è¿œç¦»åº”ç”¨ç¨‹åºç»„ä»¶çš„æ¨¡å—ä¸­åˆ›å»ºæ‰€æœ‰ä¸œè¥¿ï¼Œå› ä¸ºå®ƒä½¿è¿™éƒ¨åˆ†çœ‹èµ·æ¥éå¸¸å¹²å‡€ã€‚

ä½ åªè¦æ·»åŠ `[ngClass]="themeClass | async"`å°±å¯ä»¥å°†è¡Œä¸ºä¸»ä½“æ·»åŠ åˆ°æ•´ä¸ª app ä¸­ã€‚è¿™å°†æŠŠæœ€åä¸€ä¸ªå¯è§‚å¯Ÿåˆ°çš„å­—ç¬¦ä¸²ä½œä¸ºç±»åï¼Œå¹¶åœ¨æœåŠ¡å¹¿æ’­æ—¶èµ‹å€¼ã€‚

app.component.html

```
<div [ngClass]="themeClass | async"><app-sidenav></app-sidenav></div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬å½“ç„¶éœ€è¦é€šè¿‡ä½¿ç”¨ä¾èµ–æ³¨å…¥æ·»åŠ æ–°çš„`color-service`æ¥æ›´æ–°æˆ‘ä»¬çš„`app.component.ts`æ–‡ä»¶ï¼Œä»è€Œå‘Šè¯‰æˆ‘ä»¬çš„ html è¿™æ˜¯ä»å“ªé‡Œæ¥çš„ã€‚

app.component.ts

```
import { ColorPickerService } from './core/services/color-picker.service';
import { Component, OnInit } from '@angular/core';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.scss']
})
export class AppComponent implements OnInit {
  title = 'angular-material-router-outlet';
  themeClass;
  constructor(private colorPicker: ColorPickerService) {
    this.themeClass = this.colorPicker.getColorClass();
  }
  ngOnInit(): void {}
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [](#sass-mixins)è¨æ–¯ç±³è¾›

åœ¨é‚£äº›ä¸å…è®¸ä½¿ç”¨`color`æŒ‡ä»¤çš„é¡¹ç›®ä¸Šåˆ›å»ºé¢œè‰²çš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯åŸºäºæˆ‘ä»¬å½“å‰ä¸»é¢˜çš„é¢œè‰²åˆ›å»ºä¸€ä¸ªæ··åˆã€‚ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„ kitchensink `mat-grid-list`ä¸­æ²¡æœ‰æä¾›é¢œè‰²ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æä¾›ä¸€ä¸ª mixin å°†å®ƒæ·»åŠ åˆ°èƒŒæ™¯ä¸­ã€‚

## [](#add-mixin-to-theme)ç»™ä¸»é¢˜æ·»åŠ  Mixin

angular-material-router-theme . scss

```
@mixin mat-grid-mixin($theme) {
  $primary: map-get(
    $map: $theme,
    $key: primary
  );

  mat-grid-tile {
    background-color: mat-color($primary, 500);
    color: mat-contrast($primary, 500);
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“æ¯ä¸ªä¸»é¢˜ç±»è¢«é€‰ä¸­æ—¶ï¼ŒåŒ…å« mixin `@include mat-grid-mixin($theme);`æ›´æ–°ã€‚ç°åœ¨ä»»ä½•å¸¦æœ‰ mat-grid-tile çš„ä¸œè¥¿éƒ½å°†è·å¾—å½“å‰ä¸»è¦ä¸»é¢˜é¢œè‰²çš„èƒŒæ™¯è‰²ã€‚ä½ å¯ä»¥ä» sass å‡½æ•°`map-get`ä¸­å¾—åˆ°ä»»ä½•ä½ æƒ³è¦çš„å¯†é’¥ï¼Œå¹¶åœ¨`mat-color`å’Œ`mat-contrast`å‡½æ•°ä¸­ä½¿ç”¨å®ƒã€‚

```
.angular-material-router-app-theme-purple {
  $theme: $angular-material-router-app-theme-purple;
  @include angular-material-theme($theme);
  @include mat-grid-mixin($theme);
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#create-mixin-outside-of-theme)åœ¨ä¸»é¢˜ä¹‹å¤–åˆ›å»º Mixin

æ¯”æ–¹è¯´ï¼Œåœ¨æˆ‘ä»¬çš„ kitchensink ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æƒ³è®©æ‰€æœ‰æŒ‰é’®ä»æ ‡å‡†åŠå¾„åˆ‡æ¢

[![normal radius button](../Images/d5199690ab270b9ad6327928fd6248a0.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--k0lmo6Ay--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/ajonp/image/upload/f_auto%2Cfl_lossy%2Cq_auto/v1547733899/ajonp-ajonp-com/tools/npukfpxtcqygtpsqe9qq.jpg)

åˆ°æ›´åœ†çš„åŠå¾„

[![45px radius](../Images/4d4ac36034bbdc13d7808dbfde80cb2d.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--xZbLCidi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/ajonp/image/upload/f_auto%2Cfl_lossy%2Cq_auto/v1547733933/ajonp-ajonp-com/tools/pffvf8nus5pegm0r8qu3.jpg)

æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªæ–°çš„ mixin æ–‡ä»¶

è§’åº¦æŒ‰é’®å¤§åŠå¾„ scss

```
@mixin angular-button-large-radius {
  .mat-raised-button,
  .mat-stroked-button,
  .mat-flat-button {
    border-radius: 45px;
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é‚£å°±æŠŠè¿™ä¸ªå†™è¿›æˆ‘ä»¬çš„ kitchensink sass å§ã€‚

```
@import '../../../styles/angular-button-large-radius.scss';

@include angular-button-large-radius; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [](#tools)å·¥å…·

## [](#tools-used-in-lesson)ä¸Šè¯¾ä½¿ç”¨çš„å·¥å…·

*   [è§’åº¦æŸ”æ€§å¸ƒå±€](https://github.com/angular/flex-layout)
*   [æè´¨è®¾è®¡è°ƒè‰²æ¿ç”Ÿæˆå™¨](http://mcg.mbitson.com)
*   [è¨æ–¯æŒ‡å—](https://sass-lang.com/guide)
*   [è§’å½¢ææ–™ä¸»é¢˜åŒ–](https://material.angular.io/guide/theming)
*   [è§’çŠ¶ææ–™ Kitchensink](https://github.com/angular/material2/blob/b21cfb73261e5c334280a185762ffcc475348b76/src/universal-app/kitchen-sink/kitchen-sink.ts)

## [](#additional-tools)é™„åŠ å·¥å…·

*   [tburleson å¸ƒå±€æ¼”ç¤º](https://tburleson-layouts-demos.firebaseapp.com/#/docs)
*   [ç‰©æ–™ IO](https://material.io/)
*   [SketchApp](https://www.sketchapp.com/)
*   [æè´¨è‰å›¾æ’ä»¶](https://material.io/tools/theme-editor/)
*   [ç¦»å­ CSS å˜é‡](https://beta.ionicframework.com/docs/theming/color-generator)