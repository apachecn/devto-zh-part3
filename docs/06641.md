# æˆ‘å¦‚ä½•ç¼–å†™ä¸–ç•Œä¸Šæœ€å¿«çš„è®°å¿†åº“

> åŸæ–‡:[https://dev . to/the kashey/how-I-write-the-world-fast-memo ization-library-34io](https://dev.to/thekashey/how-i-wrote-the-world-s-fastest-memoization-library-34io)

æœ‰å¦‚æ­¤å¤šçš„è®°å¿†åº“ï¼Œä»¥è‡³äºå·²ç»å¾ˆéš¾å°†å®ƒä»¬å…¨éƒ¨è®°å¿†å¹¶æ‰¾åˆ°æœ€å¿«çš„ä¸€ä¸ªã€‚ä¸å¼€ç©ç¬‘ï¼Œæ˜¨å¤©çš„è®°å¿†åº“çš„ä¸€åŠæ˜å¤©ä¼šæ›´å¿«ï¼Œæ‰€ä»¥ï¼Œå¦‚æœä½ æ­£åœ¨å¯»æ‰¾æœ€å¥½çš„ï¼Œé€‰æ‹©ä¸€ä¸ªå¹¶ä¸å®¹æ˜“ã€‚

ä½†æ˜¯é€Ÿåº¦ä¸æ˜¯ä½ éœ€è¦çš„ã€‚æ‰€ä»¥æˆ‘åˆå†™äº†ä¸€ä¸ªåº“ï¼Œé€Ÿåº¦ä¸å¿«ã€‚éƒ½æ˜¯å› ä¸ºä¸€ä»¶äº‹...

> æ‰€ä»¥ï¼Œæˆ‘ä¸ºä»€ä¹ˆåˆå†™äº†ä¸€ä¸ªï¼Ÿä¸ºä»€ä¹ˆç°æœ‰çš„æ²¡æœ‰...ä¸æ˜¯ä»€ä¹ˆï¼Ÿ

# [](#memozation)å¤‡å¿˜å½•

è¿™æ˜¯å‡å°‘æˆ–å®Œå…¨è·³è¿‡ä¸å¿…è¦è®¡ç®—çš„å¸¸è§æ¨¡å¼ã€‚å·¥ä½œéå¸¸ç®€å•â€”â€”

> ä½ æœ‰ä¸€ä¸ªå‡½æ•°ã€‚ä½ ç”¨ä¸€äº›å‚æ•°è°ƒç”¨ than å‡½æ•°ã€‚ä¸‹ä¸€æ¬¡ä½ åšåŒæ ·çš„äº‹æƒ…â€”â€”åªæ˜¯é‡å¤ä½¿ç”¨å·²çŸ¥çš„ç»“æœã€‚å› ä¸ºğŸ˜‰ä½ æ‹¿åˆ°äº†ã€‚

æ‰€æœ‰çš„å›¾ä¹¦é¦†éƒ½åšå¾—å¾ˆå¥½ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯ 1)å®ƒä»¬å¦‚ä½•å¤„ç†å‡½æ•° arity(å‚æ•°çš„æ•°é‡)ï¼Œ2)å®ƒä»¬å¯ä»¥å­˜å‚¨å¤šå°‘ç»“æœï¼Œ3)å®ƒä»¬çš„é€Ÿåº¦æœ‰å¤šå¿«ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`lodash.memoize`åªâ€œçœ‹åˆ°â€ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ`memoizerific`ä½¿ç”¨ ES5 `Maps`æ¥å­˜å‚¨æ•°æ®ï¼Œè€Œ`fast-memoize` *ä½¿ç”¨ stringifies* æ¥å­˜å‚¨æ‰€æœ‰å‚æ•°ï¼Œå¹¶ä½¿ç”¨ JSON ä½œä¸ºç¼“å­˜é”®ã€‚

é€Ÿåº¦ä¹Ÿä¸ä¸€æ ·ã€‚`Ramda`æ¯”æ²¡æœ‰è®°å¿†çš„ä»£ç **å¿« 100 å€**ï¼Œ`lodash`æ¯”`ramda`å¿« 100 å€**ï¼Œ`nano-memoize` **æ¯”`lodash`å¿« 100 å€**ã€‚**

å®ƒä»¬éƒ½ä¸€æ ·å¿«ï¼Œå¾ˆå¤šæ—¶å€™å®ƒä»¬å¯ä»¥â€œè·³è¿‡â€è°ƒç”¨çœŸæ­£çš„å‡½æ•°ã€‚å¦‚æœæ¯”â€œçœŸå®â€å‡½æ•°å¿« 1.000.000 å€çš„`nano-memoize`ï¼Œèƒ½å¤Ÿå¤„ç†æ¯ç§’é’Ÿçš„è°ƒç”¨â€”â€”å®ƒåªæ˜¯å¿«äº† 2 å€ã€‚ç»å¸¸ä¼šå‡ºç° 0xï¼Œç”šè‡³æ˜¯è´Ÿçš„ç»“æœã€‚

> ä¸éœ€è¦**é€Ÿåº¦**ã€‚ä½ éœ€è¦**è®°å¿†**ã€‚

é€Ÿåº¦æ¯”è¾ƒåˆšåˆšä»¥ä¸Šï¼Œ1000 å€çš„ä»·å€¼ï¼Œæ˜¯ä¸ºæ–æ³¢çº³å¥‘æ•°è®¡ç®—ã€‚å®ƒéå¸¸é€‚åˆè®°å¿†çš„æƒ…å†µï¼Œæ‰€æœ‰è¿™äº›åº“éƒ½éå¸¸æ“…é•¿è®°å¿†åŸºäºç®€å•å‚æ•°çš„å‡½æ•°ç»“æœï¼Œå¹¶ä¸”èƒ½å¤Ÿæ ¹æ®éœ€è¦è®°å¿†å‡½æ•°è°ƒç”¨çš„ä»»æ„å¤šçš„*å˜é‡*ã€‚æ­£å¦‚æˆ‘æ‰€è¯´çš„ï¼Œè¿™å¯¹äºæ–æ³¢é‚£å¥‘æ•°è®¡ç®—æ¥è¯´æ˜¯å¾ˆæ£’çš„ï¼Œä½†æ˜¯å¯¹äºå…¶ä»–ä»»åŠ¡æ¥è¯´å´æ‰“ç ´äº†æ‰€æœ‰çš„å†…å­˜é™åˆ¶ï¼Œå› ä¸ºé•¿ç¼“å­˜çš„å¤§å°é€šå¸¸æ˜¯ä¸å—é™åˆ¶çš„ï¼Œè€Œâ€œå†…å­˜â€æœ‰éå¸¸ä¸¥æ ¼çš„é™åˆ¶ã€‚

> ä½ æ²¡æœ‰æ— å°½çš„è®°å¿†ã€‚ä¹Ÿä¸éœ€è¦ã€‚

# [](#the-one-memoization)ä¸€ä¸ªäººçš„è®°å¿†

å…³äºè¿™ä¸ªé—®é¢˜çš„ç¬¬ä¸€ä¸ªç”µè¯(å¯¹æˆ‘æ¥è¯´)æ˜¯ç”± Alex Reardon å†™çš„ä¸€ä¸ªåä¸º`memoize-one`çš„åº“æ‰“çš„ã€‚ä¸»è¦æ„å›¾å¾ˆæ¸…æ¥šâ€”â€”å®ƒçºªå¿µä¸€ä¸ªï¼Œè€Œä¸”åªæœ‰ä¸€ä¸ªç»“æœã€‚å› ä¸ºä½ å¯èƒ½ä¸éœ€è¦æ›´å¤šã€‚ä½ å‡ ä¹ä¸éœ€è¦æ›´å¤šã€‚

â€œä»€ä¹ˆéƒ½ä¸åšï¼Œå¦‚æœå’Œä»¥å‰ä¸€æ ·â€â€”â€”å…¶å®æ˜¯ React/Redux world å”¯ä¸€éœ€è¦çš„ã€‚åªæœ‰ä¸­æ–­æ›´æ–°çš„èƒ½åŠ›ï¼Œæ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨(æ¯”å¦‚å†…å­˜åŒ–ç¼“å­˜ä¸­çš„å†…å­˜æ³„æ¼)

è€Œä¸»è¦çš„*ç‰¹æ€§*ï¼ŒReact å¯èƒ½éœ€è¦ä» memoization åº“æ¥æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼Œä¸æ˜¯é€Ÿåº¦ã€‚é€Ÿåº¦ä¹Ÿå¾ˆé‡è¦ï¼Œä½†æ˜¯**è¯¯æŠ¥**æ›´é‡è¦ã€‚**è®°å¿†ä¸è¯¥è¿™ä¹ˆå¿«**ã€‚åº”è¯¥æ˜¯**å¯é **å¯ç”¨ã€‚

> è¿™å¹¶ä¸ä¸€å®šä¼šå¼•èµ·ååº”ï¼Œä½†æ˜¯é€šå¸¸éœ€è¦é€‚å½“çš„è®°å¿†ï¼Œå¹¶ä¸”å¯¹äºååº”ç”Ÿæ€ç³»ç»Ÿæ¥è¯´é€šå¸¸æ˜¯æœ‰é—®é¢˜çš„ã€‚
> PS:è€Œ useMemo è§£å†³äº†è¿™ä¸ªã€‚è¿™ç¯‡æ–‡ç« å‘è¡¨ä¸¤å¹´åã€‚

# [](#ok-memoization)å¥½äº†ï¼Œè®°å¿†åŒ–

å¯¹äºæ¯ä¸€ç§æƒ…å†µï¼Œä½ å¿…é¡»å†™ä¸€ä¸ªâ€œç‰¹æ®Šçš„â€ä»£ç æ¥æ­£ç¡®åœ°è®°å¿†ä½ éœ€è¦çš„ä¸œè¥¿ã€‚æœ‰æ—¶å€™å¾ˆç®€å•ï¼Œæœ‰æ—¶å€™ä¸ç®€å•ã€‚å›é¡¾æˆ‘è‡ªå·±çš„ç»å†(å“¦ï¼Œæˆ‘åœ¨è¿™æ–¹é¢æœ‰é—®é¢˜),ä½ éœ€è¦ä¸€ä¸ªç‰¹æ®Šçš„å¿ƒæ€ï¼Œå’Œç‰¹å®šçš„*å·¥ç¨‹æ–¹æ³•*æ¥æ­£ç¡®åœ°åšè¿™ä»¶äº‹ã€‚

ç®€è€Œè¨€ä¹‹â€”â€”æ‰€æœ‰ç°ä»£åº“éƒ½ä¾èµ–äºä¸å¯å˜ç»“æ„å’Œç»“æ„åŒ–æ•°æ®å…±äº«æ¥åŠ é€Ÿå’Œç®€åŒ–æ¯”è¾ƒï¼Œè€Œä¸”ï¼ŒåŸºæœ¬ä¸Šï¼Œä½ ä½¿ç”¨è®°å¿†åº“æ‰€éœ€è¦çš„ä¸€åˆ‡â€”â€”å°±æ˜¯æä¾›*é€‚å½“çš„*å‚æ•°ã€‚æ˜¾ç„¶â€”â€”ä¸ºäº†ç»™é€‰æ‹©å™¨æä¾›åˆé€‚çš„å‚æ•°ï¼Œä½ å¿…é¡»çŸ¥é“ä½ çš„æ•°æ®ç»“æ„æ˜¯å¦‚ä½•æ„æˆçš„ï¼Œå¦‚æœæ²¡æœ‰*ç±»å‹*æˆ–è€…æ˜¯åŸºäºå¤–æ¥ä»£ç åº“ï¼Œè¿™å¯èƒ½ä¼šæ˜¯ä¸ªé—®é¢˜ã€‚

```
const mapStateToProps = state => ({
   todos: state.todos.filter(todo => todo.active)
}); 
```

è¿™æ˜¯ä¸€ä¸ªç®€å•çš„`mapStateToProps`ï¼Œåœ¨æ¯æ¬¡`state`å˜æ›´æ—¶éƒ½ä¼šè¢«è°ƒç”¨ï¼Œæ¯æ¬¡éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªç»å¯¹å”¯ä¸€çš„`todos`(`.filter`è¿”å›ä¸€ä¸ªæ´¾ç”Ÿæ•°ç»„)ï¼Œå¯¼è‡´è¿æ¥çš„`component`æ›´æ–°ï¼Œå¹¶ä¸¢å¼ƒç”Ÿå‘½å‘¨æœŸæŒ‚é’©ã€‚

å¾ˆå®¹æ˜“â€œä¿®å¤â€å®ƒâ€”â€”åªéœ€ç”¨**ä»»ä½•**è®°å¿†åº“åŒ…è£…ã€‚

```
const filterTodos = anyMemoization(todos => todos.filter(todo => todo.active));
const mapStateToProps = state => ({
   todos: filterTodos(state.todos)
}); 
```

ç°åœ¨ï¼Œå®ƒåªä¼šå¯¹`state.todos`å¯¹è±¡çš„å˜åŒ–åšå‡º*ååº”*-*ref ç­‰å¼*é€šå¸¸å°±æ˜¯è¿™æ ·äº§ç”Ÿçš„ã€‚ä½†æ˜¯è®©æˆ‘ä»¬æŠŠå®ƒå˜å¾—å¤æ‚ä¸€ç‚¹:)

```
const filterTodos = memoize(todos => todos.filter(todo => todo.active));

const getTodos = todos => todos.map(todo => todo.text)

const mapStateToProps = state => ({
   activeTodosText: getTodos(filterTodos(state.todos))
}); 
```

è¿™ä¸€ä¸ªä»ç„¶ä¼šåœ¨`state.todos`ç‰©ä½“å˜åŒ–æ—¶*å¯¹*åšå‡ºååº”ã€‚è¿™æ˜¯æ¯ä¸ªäººå¯¹è¿™æ®µä»£ç çš„æœŸæœ›ã€‚æ”¹å˜ todos -äº§ç”Ÿä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚

ä½†æ˜¯ä»”ç»†çœ‹çœ‹â€”â€”å®ƒå®é™…ä¸Šåº”è¯¥å¦‚ä½•è¡¨ç°ï¼Ÿé•¿è¯çŸ­è¯´- **å®ƒåº”è¯¥åªå¯¹`.active`åˆ°**çš„å˜åŒ–åšå‡ºååº”ã€‚ğŸ¤¯
å®ƒåº”è¯¥å°½å¯èƒ½é•¿æ—¶é—´åœ°ä¿æŒè®°å¿†ã€‚è¿™å°±æ˜¯ç›®æ ‡ã€‚

> ä½ èƒ½ç”¨ä»»ä½•å½¢å¼çš„è®°å¿†åº“æ¥å®ç°è¿™ä¸ªå—ï¼Ÿå—¯ï¼Œæ²¡æœ‰ã€‚

## [](#meanwhile-in-mobx-lands)ä¸æ­¤åŒæ—¶ï¼Œåœ¨ MobX é¢†åœ°

æˆ‘ä¸€ç›´å–œæ¬¢ MobX çš„ä¸€ç‚¹â€”â€”æ‡’æƒ°ã€‚ä¸æ˜¯å›¾ä¹¦é¦†æ‡’ï¼Œæ˜¯æˆ‘çš„ã€‚æˆ‘å¯ä»¥å·æ‡’ï¼Œå†™ä¸€æ®µä»£ç ï¼Œè¿™æ ·å°±å¯ä»¥äº†ã€‚

æ‚¨ä¸å¿…è€ƒè™‘â€” *â€œå“¦ï¼Œå½“è¿™ä¸ªäº‹ä»¶è¢«è°ƒåº¦æ—¶ï¼ŒRedux å°†è§¦å‘æ‰€æœ‰çš„ ConnectedComponentsï¼ŒmapStateToProps æ‰€æœ‰çš„ä¸œè¥¿ï¼Œå¹¶å¯èƒ½é‡æ–°ç»˜åˆ¶åº”ç”¨ç¨‹åºçš„ä¸€åŠï¼Œè¿™éƒ½æ˜¯ç”±äºæˆ‘çš„ä¸€ä¸ªé€‰æ‹©å™¨åœ¨æ¯æ¬¡è¿è¡Œæ—¶äº§ç”Ÿä¸€ä¸ªå”¯ä¸€çš„å€¼â€*ã€‚å“¦ï¼Œæˆ‘è®¨åŒå®ƒï¼

ä½ çŸ¥é“â€”â€”ç”±äºä½çº§ä¼˜åŒ–ï¼Œé™¤äº†ä½ ä¹‹å¤–ï¼Œæ²¡æœ‰äººå¿…é¡»æä¾›ï¼Œä½†æ²¡æœ‰æä¾›â€”â€”Vue å’Œ Angular(æ•°æ®æ¨¡å‹)å¼€ç®±åå¯ä»¥å¿«å¾—å¤šã€‚æˆ‘æ˜¯è¯´ React/Redux å¯èƒ½å¾ˆçƒ‚ã€‚è¿˜æœ‰ MobXâ€”â€”çŸ³å¤´ï¼

è¿˜æœ‰ä¸€ä»¶äº‹ Redux ä¸å¤Ÿä»¤äººæ„‰å¿«â€”â€”reducersã€‚é‚£ 10 ä¸‡è¡Œé•¿çš„ç¼©å‡å™¨ï¼Œå……æ»¡äº†å¯¹è±¡`spread`å’Œå¯¹è±¡`rest`æ“ä½œç¬¦ã€‚
å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬æœ‰`immer`å’Œ immer è®©è¿™ä¸€åˆ»å˜å¾—æ›´åŠ æ„‰å¿«å’Œæ„‰å¿«ã€‚å®ƒå¸¦æ¥äº†é€æ˜åº¦ï¼Œæ¶ˆé™¤äº†æ‘©æ“¦ã€‚

```
return {
  ...state,
  x: {
    ...state.x,
    y,
  }

// vs
produce(state, draft => {
 draft.x.y = y;
}); 
```

å“¦ï¼Œ**æˆ‘å¤šä¹ˆå¸Œæœ›**ä¹Ÿèƒ½æœ‰**ä¸€æ ·çš„è®°å¿†åŒ–**çš„ç¥å¥‡ä½“éªŒã€‚

# [](#so-what-about-memoization)é‚£ä¹ˆè®°å¿†åŒ–å‘¢ï¼Ÿ

TLï¼›DR -æœ‰ä¸€ä¸ªæˆ‘åˆ›å»ºçš„åº“ï¼Œmemoization åº“ï¼Œå®ƒä¸ MobX å’Œ immer å…±äº«ä¸€äº›ä¸œè¥¿ã€‚å®ƒåªæ˜¯å·¥ä½œï¼Œè§£å†³ä½ çš„é—®é¢˜ã€‚

> ä¸çŸ¥ä½•æ•…ã€‚ç¥å¥‡åœ°ã€‚éšå½¢çš„ã€‚

æ­£å¦‚æˆ‘åœ¨å¼€å§‹æ‰€è¯´çš„â€”â€”æˆ‘å·²ç»å»ºç«‹äº†æœ€æ…¢çš„è®°å¿†åº“ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€å¿«çš„è®°å¿†åº“ã€‚æˆ‘æŠŠå®ƒå«åšâ€”â€”`memoize-state`ã€‚

## ![GitHub logo](../Images/a73f630113876d78cff79f59c2125b24.png) [å¡è¥¿](https://github.com/theKashey) / [è®°å¿†çŠ¶æ€](https://github.com/theKashey/memoize-state)

### å›½å®¶ç®¡ç†çš„ç¥å¥‡è®°å¿†ã€‚âœ¨ğŸ§ 

<article class="markdown-body entry-content container-lg" itemprop="text">

# è®°å¿†çŠ¶æ€

[![CircleCI status](../Images/1b019aa2bbbd8f5447ff414ded1b0866.png)](https://circleci.com/gh/theKashey/memoize-state/tree/master)[![coverage-badge](../Images/ea07ec3931e3a91c9f22058d2440e03e.png)](https://codecov.io/github/thekashey/memoize-state)[![version-badge](../Images/e576975643557332f1378b9a73720e07.png)](https://www.npmjs.com/package/memoize-state)[![npm downloads](../Images/c88f06865601e4fcbb001a6be4977433.png)](https://www.npmjs.com/package/react-focus-on)[![bundle size](../Images/52755cd31e43460ff37af3462cf23212.png)](https://bundlephobia.com/result?p=react-focus-on)[![Greenkeeper badge](../Images/6b44aee9d8a85f106581a4c18f2d6949.png)](https://greenkeeper.io/)

> ç¼“å­˜(åˆåè®°å¿†åŒ–)æ˜¯ä¸€ç§éå¸¸å¼ºå¤§çš„ä¼˜åŒ–æŠ€æœ¯â€”â€”ç„¶è€Œï¼Œå®ƒåªæœ‰åœ¨ç»´æŠ¤ç¼“å­˜æœ¬èº«å¹¶ä¸”æŸ¥æ‰¾ç¼“å­˜ç»“æœæ¯”å†æ¬¡æ‰§è¡Œè®¡ç®—æœ¬èº«æ›´ä¾¿å®œæ—¶æ‰æœ‰æ„ä¹‰[ä½ ä¸éœ€è¦ WASM æ¥åŠ é€Ÿ JS](http://mrale.ph/blog/2018/02/03/maybe-you-dont-need-rust-to-speed-up-your-js.html)

**æå¿«çš„åŸºäºä½¿ç”¨è·Ÿè¸ªçš„é€‰æ‹©å’Œè®°å¿†åº“**ï¼Œå®ƒæ€»æ˜¯æœ‰æ•ˆ....

é˜…è¯»æˆ‘æ˜¯å¦‚ä½•ç¼–å†™ä¸–ç•Œä¸Šæœ€å¿«çš„è®°å¿†åº“çš„

**é‡é€‰**ï¼ŸMemoize-oneï¼Ÿå¤§å¤šæ•°è®°å¿†åº“åªè®°å¾—ä½ æä¾›çš„å‚æ•°ï¼Œè€Œä¸æ˜¯ä½ åœ¨é‡Œé¢åšäº†ä»€ä¹ˆã€‚æœ‰æ—¶å€™ä¸å®¹æ˜“è¾¾åˆ°å¾ˆé«˜çš„ç¼“å­˜å‘½ä¸­ç‡ã€‚æœ‰æ—¶ä½ å¿…é¡»*æ€è€ƒ*å¦‚ä½•å°†è®¡ç®—æ°å½“åœ°åˆ†è§£åˆ°*å¯è®°å¿†çš„*éƒ¨åˆ†ã€‚

**æˆ‘ä¸æƒ³å»æƒ³æ€ä¹ˆç”¨è®°å¿†åŒ–ï¼Œæˆ‘è¦ç”¨è®°å¿†åŒ–ï¼**

å»ºç«‹è®°å¿†çŠ¶æ€æ˜¯ä¸ºäº†è®°å¿†æ›´å¤æ‚çš„æƒ…å†µï¼Œç”šè‡³æ˜¯é‚£äº›é‡æ–°è®¡ç®—æ›´å¿«çš„æƒ…å†µï¼Œè€Œä¸æ˜¯å› ä¸ºä¸€æ¬¡å»‰ä»·çš„è®¡ç®—å°±å¯ä»¥å¯¼è‡´â€¦

</article>

[View on GitHub](https://github.com/theKashey/memoize-state)

*   **å®ƒå¾ˆæ…¢**,å› ä¸ºå®ƒåˆ©ç”¨ ES6 `Proxy`æ¥è§‚å¯Ÿå†…å­˜åŒ–çš„å‡½æ•°æ­£åœ¨åšä»€ä¹ˆï¼Œå¹¶ä½¿ç”¨å¤æ‚çš„ç®—æ³•æ¥ç®¡ç†ç»“æœã€‚å®ƒæ¯”æ™®é€šçš„è®°å¿†åº“å¤š 100 å€ç”šè‡³ 1000 å€çš„ä»£ç æ¥æ‰§è¡Œè¿™ä¸ªæ“ä½œï¼Œå¹¶ä¸”éœ€è¦æ›´å¤šçš„æ“ä½œæ¥å®Œæˆã€‚
*   **å®ƒä¹‹æ‰€ä»¥å¿«é€Ÿ**æ˜¯å› ä¸ºå½“å®ƒå¿…é¡»å†³å®šæ˜¯è¿”å›è®°å¿†å€¼è¿˜æ˜¯åˆ·æ–°è®°å¿†å€¼æ—¶ï¼Œå®ƒä¸ä¼šåƒå…¶ä»–è®°å¿†åº“é‚£æ ·æ¯”è¾ƒ*å‚æ•°*ï¼Œä½†å®ƒåªèƒ½æ¯”è¾ƒ**ä½¿ç”¨çš„å‚æ•°éƒ¨åˆ†**ï¼Œåªæœ‰*çš„ä¸œè¥¿*ç”¨äºäº§ç”Ÿç»“æœï¼Œè¿™ä½¿å®ƒæˆä¸ºâ€¦â€¦

> â€œè¯·å°½å¯èƒ½å¤šåœ°è®°ä½æ¡ˆä¾‹â€

è€Œä¸”ï¼Œåªè¦å®ƒè®°å¿†å¾—â€œæ›´é¢‘ç¹â€ï¼Œå®ƒåœ¨å®é™…è®¡ç®—ä¸­èŠ±è´¹çš„æ—¶é—´å°±ä¼šæ›´å°‘ï¼Œå·¥ä½œé€Ÿåº¦ä¹Ÿä¼šæ›´å¿«ã€‚å®ƒå¹¶æ²¡æœ‰å·¥ä½œå¾—æ›´å¿«â€”â€”å®ƒåªæ˜¯å·¥ä½œã€‚

æˆ‘å¯èƒ½åº”è¯¥è´´ä¸€ä¸ªä¾‹å­:

```
const filterData = memoize( data => data.filter(item => item.selected) )
// ^ we are filtering only "selected" elements

filterData([{selected:true, value:1}, {selected: false, value: 2}]) 
// ^ first call. run it
filterData([{selected:true, value:1}, {selected: false, value: 2}])
// ^ second call. It's the same, you will be given prev result

filterData([{selected:true, value:1}, {selected: false, value: 3/* HEY! */}])
// ^ value of the second, not selected element is changed, but we "dont need it".
// you will be given the old result

filterData([{selected:true, value:2}, {selected: false, value: 2}])
// value of the first argument is changed. re-run 
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­-**`{selected:false}`å…ƒç´ ä¸­çš„ä»»ä½•å˜åŒ–**éƒ½å°†è¢«**å¿½ç•¥**ã€‚æˆ‘ä»¬ä¸éœ€è¦å®ƒã€‚æˆ‘ä»¬åœ¨æ‰¾çš„ä¸œè¥¿ã€‚

> ä¸éœ€è¦*å»ç»“æ„åŒ–*ä½ çš„é€‰æ‹©å™¨ï¼Œä¸éœ€è¦åˆ›å»º 5 ä¸ªä¸åŒçš„é€‰æ‹©å™¨å’Œå¤æ‚çš„`isEqual`é€»è¾‘â€”â€”åªéœ€è¦`memoize-state`ã€‚

è€å®è¯´ï¼Œå¦‚æœä½ å°è¯•è¿è¡Œè¿™ä¸ªä¾‹å­ï¼Œå®ƒä¸ä¼šå·¥ä½œã€‚`filterData`æ˜¯è¿”å›*é€‰ä¸­çš„*ç‰©å“ï¼Œå¹¶ä¸”æ¯æ¬¡æˆ‘ä»¬éƒ½ç”¨ä¸€ä¸ªæ–°çš„ç‰©å“åˆ—è¡¨æ¥è°ƒç”¨å®ƒã€‚è™½ç„¶å®ƒä¼šå¿½ç•¥æœªé€‰ä¸­é¡¹ç›®çš„æ›´æ”¹ï¼Œä½†æ›´æ”¹é€‰ä¸­çš„é¡¹ç›®ï¼Œç”šè‡³åªæ˜¯è¯æ˜*çœ‹èµ·æ¥å’Œ*ä¸€æ ·ï¼Œéƒ½ä¼šå¯¼è‡´é‡æ–°è¿è¡Œã€‚è¿™æ˜¯æˆ‘ä»¬æ‰€è¦æ±‚çš„ã€‚â€œä¸å¯å˜æ•°æ®ç»“æ„â€ï¼Œè¿˜è®°å¾—å—ï¼Ÿ

```
// so this is how it would work with "immutable" data
filterData([selectedValue, notSelectedValue])
filterData([selectedValue, anotherNotSelectedValue]) // still memoized 
```

ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè¦æ±‚ä¸€äº›æ›´å…·ä½“çš„ä¸œè¥¿ï¼Œå¹¶åˆ é™¤â€œå¯„ç”Ÿè™«â€çš„è®¡ç®—ã€‚

```
const filterData = memoize( data => data.filter(item => item.selected)[0].value/*YEP, only value*/)
// we need only a __value__ of the first selected element 
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œalgorythm ä¼šç†è§£æ‚¨å¯¹â€œæ•°æ®ç»“æ„â€ä¸æ„Ÿå…´è¶£ï¼Œè€Œåªå¯¹â€œå€¼â€æ„Ÿå…´è¶£ã€‚æ‰€ä»¥-å®ƒåªä¼šå¯¹å®ƒåšå‡ºååº”ã€‚

# [](#do-not-think)ä¸è®¤ä¸º

ä¸è¦å»æƒ³å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚å®ƒå·¥ä½œäº†ã€‚æ— è®ºä½ å°†å¦‚ä½•ä½¿ç”¨å®ƒ

```
const getVisibleTodos = (state, props) => 
    switch (state.visibilityFilter) {
      case 'SHOW_COMPLETED': return state.todos.filter(todo => todo.completed)
      case 'SHOW_ACTIVE': return state.todos.filter(todo => !todo.completed)
      default: return todos
    }

// works like this
const mapStateToProps = (state, props) => {
  return {
    todos: memoize(getVisibleTodos(state, props))
  }
}

// and like this
const mapStateToProps = memoize( (state, props) => {
  return {
    todos: getVisibleTodos(state, props)
  }
})

// and even with "double" memoization
const mapStateToProps = memoize( (state, props) => {
  return {
    todos: memoize(getVisibleTodos(state, props))
  }
}) 
```

æ²¡æœ‰ç‰¹åˆ«çš„é€»è¾‘ã€‚æ²¡æœ‰é€‰æ‹©å™¨ã€‚æ²¡æœ‰â€œå‚æ•°çº§â€è®°å¿†ã€‚ä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹åº”ç”¨å†…å­˜çŠ¶æ€ï¼ä½ æƒ³è¦å¤šå°‘æ¬¡éƒ½è¡Œã€‚ä½ å¯ä»¥åœ¨é‡Œé¢æˆ–å¤–é¢å†åŠ ä¸€ä¸ªè®°å¿†ã€‚æ²¡å…³ç³»ã€‚å®ƒä¼šè·Ÿè¸ªä½ æä¾›çš„å‚æ•°çš„ç”¨æ³•ï¼Œå¹¶å®Œæˆå·¥ä½œã€‚

> è®°å¿†çŠ¶æ€ä¸æ˜¯â€œå†…éƒ¨â€è®°å¿†ï¼Œä¸æ˜¯â€œåŠŸèƒ½çº§â€è®°å¿†ï¼Œè€Œæ˜¯â€œå¤–éƒ¨â€è®°å¿†ã€‚åªè¦ç”¨ memoize-state åŒ…è£…ä»»ä½•ä¸œè¥¿å¹¶è®©å®ƒè¢«è®°å¿†ã€‚ä»»ä½•å¯èƒ½è¢«è®°å¿†çš„çº¯å‡½æ•°ï¼

# [](#stability)ç¨³å®š

ç¼–å†™è¿™ä¸ªåº“ä¸æ˜¯ä¸€é¡¹ç®€å•çš„ä»»åŠ¡ã€‚æˆ‘å†™äº†å®ƒï¼ŒèŠ±äº†å¤§çº¦ä¸¤å¤©çš„æ—¶é—´ï¼Œæˆ‘æµ‹è¯•äº†å®ƒï¼Œå‘å¸ƒåœ¨ Twitter ä¸Šï¼Œå‘ç°è¿™ä¸ªåº“ä¸å·¥ä½œï¼Œæˆ‘çš„æ„æ€æ˜¯å®Œå…¨ä¸å·¥ä½œï¼Œå¹¶èŠ±äº†ä¸¤ä¸ªå¤šæ˜ŸæœŸåœ¨ç ”å‘ä¸Šã€‚

æˆ‘è§£å†³äº†è¿™äº›é—®é¢˜ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å†™äº†ä¸€ç¯‡å…³äºè¿™ä¸ªåº“çš„æ–‡ç« ã€‚å‘ç°æˆ‘åˆåšé”™äº†å‡ ä»¶äº‹ã€‚ä¿®å¥½äº†ã€‚ä¸€å¹´åï¼Œåœ¨æ— æ•°é—®é¢˜è§£å†³å’Œå¤§é‡æµ‹è¯•å®Œæˆåï¼Œæˆ‘å¼€å§‹å†™è¿™ç¯‡æ–‡ç« ã€‚

# [](#how-it-works)å·¥ä½œåŸç†

å®ƒå®é™…ä¸Šæ˜¯å¦‚ä½•å·¥ä½œçš„â€”â€”å®ƒåªæ˜¯ç”¨æ¥è‡ª`proxyequal`åº“çš„`Proxy`åŒ…è£…æ‰€æœ‰ç»™å®šçš„å‚æ•°ï¼Œå¹¶è§‚å¯Ÿå¯¹è±¡`key`çš„è®¿é—®ã€‚

ä¸€æ—¦ä½ è¿è¡Œäº† *memoized* å‡½æ•°ï¼Œå®ƒå°±ä¼šçŸ¥é“å“ªäº›ä¼ é€’çš„å‚æ•°è¢«ç”¨æ¥äº§ç”Ÿä¸€ä¸ªç»“æœï¼Œå“ªäº›è¢«è¿”å›ä½œä¸ºç»“æœã€‚

å®ƒä¼šçŸ¥é“ä½ å»å¹´å¤å¤©åšäº†ä»€ä¹ˆï¼Œä½ æœ‰æ²¡æœ‰å«è¿‡`.forEach`ï¼Œä½ éœ€è¦`.value`æˆ–è€…ä½ è¦æ‰¾çš„ä¸€åˆ‡éƒ½æ˜¯æœ‰ä¸€ä¸ª`key`çš„å­˜åœ¨ã€‚

> ä¸æ˜¯æ·±å¹³ï¼Œä¸æ˜¯æµ…å¹³ï¼Œæ˜¯å·§å¹³ã€‚ä»£ç†-å¹³ç­‰ã€‚

# [](#speed)é€Ÿåº¦

å¾ˆéš¾ç†è§£è¿™ä¸ªåº“çš„æ€§èƒ½â€”â€”å®ƒæ€»æ˜¯åœ¨è®°å¿†åŠŸèƒ½çš„â€œæˆæœ¬â€å’Œè®°å¿†ç³–çš„â€œæˆæœ¬â€ä¹‹é—´ä¿æŒå¹³è¡¡ã€‚

### [](#standard-memoize-function-of-3-integer-arguments-no-changes)æ ‡å‡†â€œè®°å¿†â€ã€‚3 ä¸ªæ•´æ•°å‚æ•°çš„å‡½æ•°ã€‚æ²¡æœ‰å˜åŒ–ã€‚

```
memoize-one    x 6703353 ops/sec
lodash.memoize x 3095017 ops/sec
fast-memoize   x 1013601 ops/sec 
memoize-state  x 4007493 ops/sec 
```

ä¸€ç‚¹ä¹Ÿä¸æ…¢ï¼Œç”šè‡³æ¯”`lodash`è¿˜è¦å¿«

### [](#function-with-an-object-as-an-argument-returning-a-part)å‡½æ•°ä»¥ä¸€ä¸ªå¯¹è±¡ä½œä¸ºè‡ªå˜é‡ï¼Œè¿”å›ä¸€ä¸ªéƒ¨åˆ†

```
base            x    10095 ops/sec
memoize-one     x    10054 ops/sec
lodash.memoize  x  1695449 ops/sec
fast-memoize    x  1287216 ops/sec
memoize-state   x  1574688 ops/sec 
```

ä¸€æ—¦ä½ å¼€å§‹ä½¿ç”¨æ¯”æ•´ä¸ªå¯¹è±¡å°‘çš„*-*-----------------------------------------------ä¾èµ–äºå¼•ç”¨ç›¸ç­‰çš„å¯¹è±¡åº“åœæ­¢å·¥ä½œï¼Œè€Œå…¶ä»–å¯¹è±¡åº“ç»§ç»­ç«äº‰

### [](#function-with-an-object-as-an-argument-changing-other-value-returning-a-part)å‡½æ•°ä»¥ä¸€ä¸ªå¯¹è±¡ä½œä¸ºè‡ªå˜é‡ï¼Œæ”¹å˜å…¶ä»–å€¼ï¼Œè¿”å›ä¸€ä¸ªéƒ¨åˆ†

```
memoize-one     x   10066 ops/sec
lodash.memoize  x   92596 ops/sec
fast-memoize    x   89224 ops/sec
memoize-state   x 1469865 ops/sec 
```

ä½†æ˜¯å½“ä½ å¼€å§‹æ”¹å˜çŠ¶æ€çš„æŸäº›éƒ¨åˆ†æ—¶ï¼Œä½ ä¸ä½¿ç”¨â€”â€”æ‰€æœ‰å…¶ä»–çš„åº“ä¹Ÿå˜æ…¢ï¼Œè€Œ`memoize-state`ç»§ç»­å·¥ä½œã€‚

memoize-state -å¿½ç•¥ä½ ä¸æ„Ÿå…´è¶£çš„çŠ¶æ€æ›´æ–°ã€‚è¿™æ˜¯å›½å®¶ç®¡ç†çš„ä¸€ä¸ªå¸¸è§æ¡ˆä¾‹ã€‚

[![](../Images/364fc587c08494ea6f72ebbaf2e85a48.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Zck1Wwne--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/woms5vfm61tobu18livp.jpg)

# ç”¨å®ƒå¯ä»¥å»ºé€ ä»€ä¹ˆ

## [](#reactmemoize)[ååº”â€”â€”è®°å¿†](https://github.com/theKashey/react-memoize)

Memoize-state å·¥ä½œèµ·æ¥éå¸¸ç®€å•ï¼Œå¯¹ç”¨æˆ·æ¥è¯´æ˜¯ä¸å¯è§çš„ï¼Œå› æ­¤æˆ‘åœ¨å¦ä¸€ä¸ªåº“ä¸­ä½¿ç”¨äº†å®ƒï¼Œå¹¶è€ƒè™‘åˆ°äº† Memoizeã€‚æ­£å¦‚ä¸¹.é˜¿å¸ƒæ‹‰è«å¤«æ‰€æè®®çš„ã€‚

> ![unknown tweet media content](../Images/42f76a69413cf6033f37cd03f6ad5c04.png)![Dan Abramov profile image](../Images/17c386e6839df2dd490f297a2c139b1e.png)ä¸¹é˜¿å¸ƒæ‹‰è«å¤«[@ä¸¹ _ é˜¿å¸ƒæ‹‰è«å¤«](https://dev.to/dan_abramov)![twitter logo](../Images/65e26e35707d96169ec8af6b3cbf2003.png)æœ‰äººåšè¿™ä¸ªäº†å—ï¼Ÿå¯èƒ½æ¯”æ‰€æœ‰ç”¨äºè®°å¿†çš„ç»„ä»¶éƒ½è¦å¥½ã€‚2018 å¹´ 2 æœˆ 19 æ—¥ä¸Šåˆ 00:11[![Twitter reply action](../Images/269095962147c28351274afdd5486a48.png)](https://twitter.com/intent/tweet?in_reply_to=965378278461755392)[![Twitter retweet action](../Images/771160ecf06ae3d4d7a7815c29c819c2.png)](https://twitter.com/intent/retweet?tweet_id=965378278461755392)51[![Twitter like action](../Images/c077611ab2a5e0b4cd0c826ee7ae1e48.png)](https://twitter.com/intent/like?tweet_id=965378278461755392)411

æˆ‘å»ºç«‹çš„åº“ä¸æ˜¯åŸºäºè¿™ä¸ªè§„èŒƒï¼Œåªè¦ä½ çš„è®°å¿†å‡½æ•°æ˜¯â€œå¤–éƒ¨çš„â€ï¼Œå°±ä¸éœ€è¦è¾“å…¥ã€‚

```
import Memoize from 'react-memoize';

 <Memoize
   prop1 = "theKey"
   state = {this.state}

   compute={ ({prop1, state}) => heavyComputation(state[prop1]) }
  >
  { result => <Display>Result is: {result}</Display> } </Memoize> 
```

å¯èƒ½ä¸å¤ªæ¸…æ¥šè¿™ä¸ªä¾‹å­æœ‰ä»€ä¹ˆå¥½å¤„ï¼Œä½†ç®€è€Œè¨€ä¹‹â€”â€”`compute`åœ¨`state[prop1]`æ—¶åªè¢«ç§°ä¸º**ï¼Œæˆ–è€…é‡Œé¢çš„*ç¡®åˆ‡åœ°è¯´*ä¼šå‘ç”Ÿå˜åŒ–ã€‚memo ization+shouldcomponentdupdate åœ¨ä¸€ä¸ªåŒ…ä¸­ï¼å®ƒåªæ˜¯å°†æ‰€æœ‰çš„é“å…·(é™¤äº† compute)ä¼ é€’ç»™ compute å‡½æ•°ï¼Œå¹¶é€šè¿‡ function-as-children(åˆå renderProps)æ¸²æŸ“ç»“æœã€‚**

 **è¿™ä¸ªåº“æ˜¯**è‰¯å¥½ç±»å‹çš„**ï¼Œå¹¶ä¸”åŒ…å«å¾ˆå°‘çš„ç»„ä»¶æ¥ä½¿æ‚¨çš„ç”Ÿæ´»æ›´å®¹æ˜“ã€‚ä¾‹å¦‚â€œæµâ€,ä½ å¯ä»¥ç”¨ä¸€ç§ç±»ä¼¼äº*æµ*çš„æ–¹å¼å¤„ç†æ•°æ®ã€‚

```
 <MemoizedFlow 
          input={{...this.props, ...this.state}}
          flow={[
            // will react on rows or filter change
            ({rows, filter}) => ({rows: list.filter(filter)}),
            // will react on rows(from step1) change or order
            ({rows, order}) => ({rows: rows.slice().sort(order)}), // !! clone array before sort
            // will react on rows and pagination changes
            ({rows, page, perPage}) => ({rows: list.slice(page*perPage, (page+1)*perPage)}),
            // will react on something else, not related
            ({rain, bows}) => ({rainbows: rain+bows, rain: null, bows: null })
            ]}
          >
            {output => <Table {...output} onSortChange={this.onSortChange} onPageChange={this.onPageChange}/>}
          </MemoizedFlow> 
```

ä»…æ­¤è€Œå·²ã€‚å…¶ä»–çš„éƒ½è—åœ¨å¼•æ“ç›–ä¸‹ã€‚é€šè¿‡æ¨æ–­æ‰€æä¾›å˜é‡çš„*ç”¨æ³•*ï¼Œå®ƒå°†çŸ¥é“å“ªä¸ªæ­¥éª¤ä¾èµ–äºå“ªä¸ªæ­¥éª¤ã€‚åœ¨*å‘ç”Ÿä¸€äº›*å˜åŒ–åï¼Œå®ƒä¼šçŸ¥é“å“ªä¸€æ­¥åº”è¯¥é‡æ–°è¿è¡Œï¼Œå¹¶ä¸”æ°¸è¿œä¸ä¼šåšå¤šä½™çš„äº‹æƒ…ã€‚

## [](#beautifulreactredux)[ç¾ä¸½-ååº”-è¿˜åŸ](https://github.com/theKashey/beautiful-react-redux)

ä¸€ä¸ªå°å‹çš„åº“ï¼Œå®ƒç»§æ‰¿äº† T1ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªå¼€ç®±å³ç”¨çš„ T2 å¼çš„ç¾ä¸½è®°å¿†ã€‚

## [why-do-you-update-redux](https://github.com/theKashey/why-did-you-update-redux)

å¦ä¸€ä¸ª redux ç›¸å…³çš„åº“ï¼Œè®©ä½ **è°ƒè¯•**ä½ çš„é€‰æ‹©å™¨å’Œ`mapStateToProps`ã€‚
åªè¦`memoize-state`å¾ˆé…·â€”â€”å®ƒå¯ä»¥æ£€æŸ¥ä½ çš„*æ‰‹å·¥*é€‰æ‹©å™¨â€”â€”å®ƒä»¬æ˜¯ä¸æ˜¯ä¹Ÿ*é…·*ã€‚å¦‚æœä¸æ˜¯â€”â€”å®ƒä¼šè§£é‡Šå‡ºäº†ä»€ä¹ˆé—®é¢˜ï¼Œå“ªä¸ªå‡½æ•°ä¸å¤Ÿçº¯ç²¹ï¼Œå¹¶å¸®åŠ©æ‚¨ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºæ›´å¿«ï¼Œè€Œæ— éœ€åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ *magic memoization* ã€‚

## [](#reactivereactredux)[ååº”-ååº”-è¿˜åŸ](https://github.com/dai-shi/reactive-react-redux)

å†ä¸€æ¬¡â€”â€”Redux ç›¸å…³çš„åº“ï¼Œè¿™æ¬¡æ˜¯ç”±é’©å­ç»„æˆçš„ã€‚
è¿™ä¸ªåº“ä¸­æ²¡æœ‰ä»€ä¹ˆ*ç‰¹åˆ«çš„*ï¼Œé™¤äº†ä½¿ç”¨å®ƒæ˜¯ä¸€ç§ä¹è¶£ï¼Œè€Œä¸”å®ƒå¼€ç®±åçš„æ€§èƒ½ä¼šæ¯”ä½ é¢„æœŸçš„æ›´å¥½ã€‚
å†æ¬¡-å®ƒä½¿ç”¨ä¸‹é¢çš„`memoize-state`ï¼Œæ¥ä¼˜åŒ–ä½ çš„ç»„ä»¶æ›´æ–°ã€‚

# [](#browser-support)æµè§ˆå™¨æ”¯æŒ

æ‰€æœ‰é­”æœ¯çš„åŸºç¡€å±‚éƒ½ä½¿ç”¨ ES6 ä»£ç†ï¼Œè¿™åœ¨ IE11 å’Œä¸€äº›ååº”å¼ç¯å¢ƒä¸­æ˜¯ä¸å­˜åœ¨çš„ã€‚`proxyequal`æ­è½½`proxy-ponyfill`ã€‚
åªæœ‰ä¸€ä¸ªè¾¹ç¼˜æƒ…å†µï¼Œä¸èƒ½å¤šå¡«å……(è®¿é—®ä¸å­˜åœ¨çš„å±æ€§)ï¼Œå…¶ä»–éƒ½æ˜¯å®‰å…¨å’Œå¿«é€Ÿçš„ã€‚

# [](#limitations)å±€é™æ€§

è®°å¿†åº“ä¹Ÿæœ‰ä¸€ä¸ªå¸¸è§çš„â€œé™åˆ¶â€â€”â€”å®ƒä»¬åªèƒ½å­˜å‚¨ä¸€ä¸ªâ€œæœ€åâ€ç»“æœã€‚è€Œä¸”ï¼Œå¦‚æœä½ æœ‰å‡ ä¸ªä¸åŒçš„è¿æ¥ç»„ä»¶ï¼Œéƒ½ä»ä¸€ä¸ªå•†åº—é€‰æ‹©ä¸€äº›ä¸œè¥¿ï¼Œä½†æœ‰ä¸åŒçš„é“å…·â€”â€”ä½ æ€»æ˜¯ä¼šæœ‰è®°å¿†*ä¸­æ–­*ã€‚æ²¡åâ€”â€”åªæ˜¯æ²¡ç”¨äº†ã€‚

**åªèƒ½æœ‰ä¸€ä¸ª**ï¼å¯¹äºä¸€éƒ¨ç”µå½±æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å£å·ï¼Œä½†ä¸é€‚ç”¨äºå®é™…åº”ç”¨ã€‚è¿™ä¸ªå›¾ä¹¦é¦†æ­£åœ¨æ”¹å˜...è¿™é‡Œä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚

# [](#conclusion)ç»“è®º

åŸå§‹æ€§èƒ½æµ‹è¯•ä¸ä»…åŒ…å«æ¯ç§’æ“ä½œæ•°ï¼Œè¿˜åŒ…å«â€œç¼“å­˜å‘½ä¸­â€å‚æ•°ã€‚è¿™è¦é‡è¦å¾—å¤šã€‚

> ä½ çš„è®°å¿†åŠŸèƒ½å¯ä»¥å¾ˆæ…¢ï¼Œåªè¦å®ƒæ¯”â€œé”™è¿‡çš„â€è®°å¿†å’Œæ ‘æ¸²æŸ“å¯¼è‡´çš„ react/redux/redraw å¿«ã€‚

æ­£ç¡®çš„é‡é€‰çº§è”å¯ä»¥æœ‰ 100%çš„ç¼“å­˜å‘½ä¸­ç‡ï¼Œä½†æ˜¯å¾ˆéš¾ç¼–å†™æ­£ç¡®çš„çº§è”ï¼Œè°ƒè¯•å®ƒï¼Œä½¿å®ƒä¿æŒæœ€æ–°ã€‚å—¯ï¼Œåªæ˜¯éœ€è¦æ—¶é—´ã€‚
è€Œ`memoize-state`çš„â€œç¼“å­˜å‘½ä¸­â€èƒ½åŠ›æ¥è¿‘ç†æƒ³ã€‚å®ƒå°†å°½å¯èƒ½å¤šåœ°è®°å¿†æ¡ˆä¾‹ã€‚

å®ƒæ¯”æ™®é€šçš„è®°å¿†åº“å¤§ 10 å€ï¼Œ(åº”è¯¥)æ¯”æ™®é€šçš„è®°å¿†åº“æ…¢ 10 å€ï¼Œä½†æ˜¯ï¼Œä½ çŸ¥é“ï¼Œä½ çš„åº”ç”¨ç¨‹åºå°†åŒæ ·å¿« 10 å€ã€‚æ²¡æœ‰ä»»ä½•ä½ çš„æ—¶é—´èŠ±åœ¨ä¼˜åŒ–ä¸Šã€‚

è¿™å°±æ˜¯ç›®æ ‡ã€‚æ²¡æœ‰ä»€ä¹ˆâ€œç‰¹æ®Šâ€çš„äº‹æƒ…éœ€è¦ä½ å»åšã€‚

> **ä¸æ˜¯â€œæ›´å¿«â€**ï¼Œè€Œæ˜¯â€œæ›´å¥½â€â€”â€”**â€œè¯·å°½å¯èƒ½å¤šåœ°è®°å¿†æ¡ˆä¾‹â€**ã€‚

[![](../Images/ce80e8e7118b223035a82e8dc3ceea90.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--FSmm0wBq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/gn3g5gnbs3ysakp0ob6t.jpg)

## [](#by-the-way)å¯¹äº†

æˆ‘æœ‰å¦ä¸€ç¯‡å…³äºå¦ä¸€ä¸ªåº“çš„æ–‡ç« ï¼Œé‚£ä¸ªåº“å¯èƒ½ç”¨â€œåªæœ‰ä¸€ä¸ªç»“æœâ€æ¥è§£å†³é—®é¢˜

[![thekashey image](../Images/638fcfb14e5c451b9d2dc31d89e5b034.png)](/thekashey) [## è®°å¿†å‹¿å¿˜æˆ‘ç‚¸å¼¹

### Anton Korzunov 4 æœˆ 1 æ—¥ 1912 åˆ†é’Ÿé˜…è¯»

#javascript #cache #memoization #optimization](/thekashey/memoization-forget-me-bomb-34kh)**