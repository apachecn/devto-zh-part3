# ä¿æŠ¤æ‚¨çš„ç§»åŠ¨åº”ç”¨â€”ç¬¬äºŒé›†(ä¿æŠ¤é™æ€æ•°æ®)

> åŸæ–‡:[https://dev.to/progress/secure-your-mobile-app-ç¬¬äºŒé›†-ä¿æŠ¤é™æ€æ•°æ®-4ami](https://dev.to/progress/secure-your-mobile-app---episode-two-securing-data-at-rest-4ami)

æ— è®ºæ‚¨æ˜¯å¼€å‘ä¼ ç»Ÿçš„æœ¬æœºåº”ç”¨ç¨‹åºï¼Œè¿˜æ˜¯ä½¿ç”¨ Appcelerator æˆ– Xamarin ç­‰äº¤å‰ç¼–è¯‘çš„åº”ç”¨ç¨‹åºï¼Œä½¿ç”¨ Ionic çš„æ··åˆåº”ç”¨ç¨‹åºï¼Œæˆ–è€…ä½¿ç”¨ NativeScript æˆ– React Native çš„ JavaScript-æœ¬æœºåº”ç”¨ç¨‹åºï¼Œè´¯ç©¿å…¶ä¸­çš„ä¸€ä¸ªå…±åŒä¸»é¢˜æ˜¯åº”ç”¨ç¨‹åºå®‰å…¨æ€§ã€‚

æˆ‘è®¤ä¸ºï¼Œæˆ‘ä»¬å¼€å‘äººå‘˜æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´åŠ æ„è¯†åˆ°æˆ‘ä»¬é¢ä¸´çš„æ— æ•°å®‰å…¨é—®é¢˜ã€‚å½“ä½ ç”¨ NativeScript å¼€å‘ä¸€ä¸ªè·¨å¹³å°çš„ç§»åŠ¨åº”ç”¨æ—¶ï¼Œä½ å°±æ˜¯åœ¨å¼€å‘ä¸€ä¸ªçœŸæ­£çš„åŸç”Ÿåº”ç”¨ã€‚ä½†è¿™ä¹Ÿæ„å‘³ç€åŒæ ·çš„å®‰å…¨è€ƒè™‘é€‚ç”¨äºä»»ä½•å…¶ä»–åŸç”Ÿç§»åŠ¨åº”ç”¨ç¨‹åºã€‚

> è§‚çœ‹ç½‘ç»œç ”è®¨ä¼š[ä¿æŠ¤æ‚¨çš„ç§»åŠ¨åº”ç”¨çš„æœ€ä½³å®è·µ](https://www.progress.com/campaigns/kinvey/best-practices-for-securing-your-mobile-apps),è·å–ä¸€äº›å…³äº NativeScript å®‰å…¨æ€§çš„æç¤ºå’ŒæŠ€å·§ï¼

åœ¨ä¸Šä¸€ç¯‡æ–‡ç« çš„[ä¸­ï¼Œæˆ‘ä»¬æ·±å…¥æ¢è®¨äº†å¦‚ä½•é€šè¿‡é«˜çº§æ¨¡ç³Šå¤„ç†æ¥ä¿æŠ¤æˆ‘ä»¬çš„æºä»£ç ï¼Œé˜²æ­¢ä»£ç ç¯¡æ”¹ï¼Œç¼©å°æˆ‘ä»¬çš„å®‰è£…èŒƒå›´ï¼Œä»¥åŠå°†æ•æ„Ÿçš„ä¸šåŠ¡é€»è¾‘è¿ç§»åˆ°äº‘ä¸­ã€‚](https://dev.to/progress/secure-your-mobile-app---episode-one-protecting-the-code-58e)

ä»Šå¤©ï¼Œæˆ‘ä»¬çš„é‡ç‚¹æ˜¯å¦‚ä½•åœ¨æœ¬åœ°å­˜å‚¨(å’Œä¿æŠ¤)æ•°æ®ã€‚æ‰€ä»¥è®©æˆ‘ä»¬å¼€å§‹å§ï¼

*   **ç¬¬ä¸€éƒ¨åˆ†:** [ä¿æŠ¤ä½ çš„æºä»£ç ](https://dev.to/progress/secure-your-mobile-app---episode-one-protecting-the-code-58e)
*   **ç¬¬äºŒéƒ¨åˆ†:**ä¿æŠ¤é™æ€æ•°æ®(å°±æ˜¯ä»Šå¤©ï¼)
*   **ç¬¬ä¸‰éƒ¨åˆ†:** [ç¡®ä¿è®¾å¤‡å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®å®Œæ•´æ€§](https://dev.to/progress/secure-your-mobile-app---episode-three-securing-data-in-transit-491f)
*   **ç¬¬å››éƒ¨åˆ†:** [ä¼ä¸šç”¨æˆ·è®¤è¯å’Œæˆæƒ](https://dev.to/progress/secure-your-mobile-app---episode-four-secure-user-auth-5ep1)

> æŸ¥çœ‹æ¥è‡ª[NativeScripting.com](https://nativescripting.com/course/securing-nativescript-applications)çš„å…³äºç§»åŠ¨åº”ç”¨å®‰å…¨çš„æ–°è¯¾ç¨‹ï¼Œå¹¶é€šè¿‡ä»£ç :NSSECURE è·å¾— 30%çš„æŠ˜æ‰£ã€‚

## [](#encrypt-local-data)åŠ å¯†æœ¬åœ°æ•°æ®

iOS å’Œ Android éƒ½å¯ä»¥é˜²æ­¢ä¸€ä¸ªåº”ç”¨ç¨‹åºå­˜å‚¨çš„æ•°æ®è¢«ç³»ç»Ÿä¸­çš„ä»»ä½•å…¶ä»–åº”ç”¨ç¨‹åºè®¿é—®ã€‚ç„¶è€Œï¼Œä¼—æ‰€å‘¨çŸ¥é€šå¾€åœ°ç‹±çš„é“è·¯æ˜¯ç”±è‰¯å¥½çš„æ„æ„¿é“ºæˆçš„ï¼Œé˜¿ç±³åˆ©ç‰¹ï¼ŸğŸ”¥ğŸ˜°

å› æ­¤ï¼Œæœ€å¥½å¯¹æˆ‘ä»¬ä¿å­˜åˆ°è®¾å¤‡ä¸Šçš„æ‰€æœ‰æ•°æ®è¿›è¡ŒåŠ å¯†ã€‚

å¹¸è¿çš„æ˜¯ï¼Œ[native script-secure-storage](http://market.nativescript.org/plugins/nativescript-secure-storage)æ’ä»¶å·²ç»å­˜åœ¨ï¼

å®‰å…¨å­˜å‚¨æ’ä»¶å…è®¸æˆ‘ä»¬åŠ å¯†ã€ä¿å­˜ã€è§£å¯†å’Œæ£€ç´¢å¯†é’¥/å€¼å¯¹:

```
// require the plugin
import { SecureStorage } from "nativescript-secure-storage";

// instantiate the plugin
let secureStorage = new SecureStorage();

// async
secureStorage.set({
  key: "foo",
  value: "I was set at " + new Date()
}).then(success => console.log("Successfully set a value? " + success));

// sync
const success = secureStorage.setSync({
  key: "foo",
  value: "I was set at " + new Date()
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> **æ³¨æ„:**åœ¨å†…éƒ¨ï¼Œåœ¨ iOS ä¸Šè¿™ä¸ªæ’ä»¶é€šè¿‡[çš„ SAMKeychain åº“](https://github.com/soffes/SAMKeychain)ä½¿ç”¨ KeyChainï¼Œé€šè¿‡[çš„ Hawk åº“](https://github.com/orhanobut/hawk)ä½¿ç”¨ Android(åè¿‡æ¥ä½¿ç”¨[çš„è„¸ä¹¦éšè—](https://github.com/facebook/conceal))ã€‚

## [](#encryption-with-sqlite-sqlcipher)ç”¨ SQLite + SQLCipher åŠ å¯†

ä½ æ˜¯ [SQLite](https://www.sqlite.org/index.html) çš„ç²‰ä¸å—ï¼Ÿä½ çŸ¥é“æœ‰ä¸€ä¸ªæ”¯æŒ SQLite çš„[å…¨åŠŸèƒ½ NativeScript æ’ä»¶](https://market.nativescript.org/plugins/nativescript-sqlite)å—ï¼Ÿç°åœ¨ä½ çŸ¥é“äº†ï¼

SQLite æ’ä»¶çš„å…è´¹ç‰ˆæœ¬(å¦‚ä¸Š)æä¾›äº†æ‚¨æœŸæœ›ä» SQLite è·å¾—çš„æ‰€æœ‰åŠŸèƒ½ã€‚ç„¶è€Œï¼Œæœ‰ä¸€ä¸ª[ä»˜è´¹é€‰é¡¹](https://nativescript.tools/product/10)ä¹ŸåŒ…æ‹¬åŠ å¯†æ‚¨çš„é™æ€ SQLite æ•°æ®åº“ã€‚é€šè¿‡åˆ©ç”¨ [SQLCipher](https://www.zetetic.net/sqlcipher/) ï¼Œæ‚¨å¯ä»¥åœ¨æ‚¨çš„ç”¨æˆ·è®¾å¤‡ä¸Šå¯¹ SQLite æ•°æ®åº“è¿›è¡Œé€æ˜çš„ 256 ä½ AES åŠ å¯†ã€‚

[![sqlite and sqlcipher](../Images/a0b77690bfe9b1cf970d7e94713bf5e6.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--JecKp5pg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://raw.githubusercontent.com/rdlauer/articles/master/nativescript/securing-app/2-sqlcipher.png)

## [](#onlineoffline-data-sync-encryption)åœ¨çº¿/ç¦»çº¿æ•°æ®åŒæ­¥+åŠ å¯†

æˆ‘ä»¬ä¸­çš„è®¸å¤šäººä½¿ç”¨ç§»åŠ¨åç«¯æœåŠ¡(mBaaS ),å¦‚ [Firebase](https://market.nativescript.org/plugins/nativescript-plugin-firebase) æˆ– [Progress Kinvey](https://www.progress.com/kinvey) ç”¨äºæˆ‘ä»¬çš„è¿œç¨‹åç«¯ã€‚å½“å¼€å‘ç§»åŠ¨åº”ç”¨ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£åœ¨çº¿/ç¦»çº¿è¿æ¥ï¼Œå¹¶åœ¨ç”¨æˆ·åœ¨è¿™äº›çŠ¶æ€ä¹‹é—´åˆ‡æ¢æ—¶åŒæ­¥æ•°æ®(ä»¥å…åº”ç”¨ç¨‹åºåœ¨æ²¡æœ‰ç½‘ç»œè¿æ¥çš„æƒ…å†µä¸‹å´©æºƒï¼).

å¼€ç®±å³ç”¨ï¼ŒKinvey è‡ªå¸¦å†…ç½®çš„[åœ¨çº¿/ç¦»çº¿æ•°æ®åŒæ­¥](https://devcenter.kinvey.com/nativescript/guides/datastore)ï¼Œå¦‚æ–‡æ¡£ä¸­çš„å¤§é‡ä»£ç ç¤ºä¾‹æ‰€ç¤º:

```
// Retrieve an instance
const dataStore = Kinvey.DataStore.collection('books', Kinvey.DataStoreType.Sync) as Kinvey.SyncStore;
// Pull data from the backend and save it locally on the device.
const promise = dataStore.pull()
  .then((entities: Array<{}>) => {
    // ...
  })
  .catch((error: Kinvey.BaseError) => {
    // ...
  });
// Find data locally on the device.
const subscription = dataStore.find()
  .subscribe((data: Array<{}>) => {
    // Called once, with local data
  }, (error: Kinvey.BaseError) => {
    // ...
  }, () => {
    // Called after the local data has been retrieved
  });
// Save an entity locally to the device. This will add the item to the sync table to be pushed to the backend at a later time.
const entity = {};
const promise = dataStore.save(entity)
  .then((entity: {}) => {
    // ...
  })
  .catch((error: Kinvey.BaseError) => {
    // ...
  });
// Syncs this store with the backend. This will first push any pending changes on the device to the backend and then pull data from the backend onto the device.
const promise = dataStore.sync()
  .then((entities: Array<{}>) => {
    // result will contain the results of the push to the backend and a pull from the backend
    // result = {
    //   push: [], // pushed entities
    //   pull: [] // pulled entities
    // };
    //
    // Each item in the array of pushed entities will look like the following
    // { _id: '<entity id before push>', entity: <entity after push> }
    // It could also possibly have an error property if the push failed.
    // { _id: '<entity id before push>', entity: <entity after push>, error: <reason push failed> }
  })
  .catch((error: Kinvey.BaseError) => {
    // ...
  }); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ­¤å¤–ï¼Œ [Kinvey ä½¿ç”¨ SQLite å’Œ SQLCipher å¯¹è®¾å¤‡ä¸Šçš„é™æ€æ•°æ®](https://devcenter.kinvey.com/nativescript/guides/encryption)è¿›è¡ŒåŠ å¯†ï¼Œè¿™å¯ä»¥åœ¨åˆå§‹åŒ– Kinvey æ—¶è‡ªåŠ¨é…ç½®:

```
Kinvey.init({

    appKey: '<appKey>',

    appSecret: '<appSecret>',

    encryptionKey: '<encryptionKey>'

}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## 
 [](#backend-compliance-and-security-considerations) 
åç«¯åˆè§„å’Œå®‰å…¨æ³¨æ„äº‹é¡¹

[![hipaa compliance and kinvey](../Images/4173b0e0412ef42b25081c61cf81a870.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--_DfieI47--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://raw.githubusercontent.com/rdlauer/articles/master/nativescript/securing-app/2-hipaa.png)

æˆ‘ä»¬è®¸å¤šåœ¨ä¼ä¸šä¸­å¼€å‘åº”ç”¨ç¨‹åºçš„äººéƒ½éå¸¸æ¸…æ¥šåˆè§„æ€§å’Œå®‰å…¨æ³•è§„ã€‚åœ¨ç¾å›½ï¼Œä¸ºåŒ»ç–—ä¿å¥æä¾›å•†æˆ–ä¿é™©å…¬å¸å¼€å‘åº”ç”¨ç¨‹åºçš„å¼€å‘è€…é¢ä¸´çš„ä¸€å¤§æŒ‘æˆ˜æ˜¯ HIPAAã€‚

> å¦‚æœæ‚¨æ­£åœ¨å¼€å‘ä¸€ä¸ªå¤„ç†åŒ»ç–—ä¿å¥è¡Œä¸š PHI(ç§äººå¥åº·ä¿¡æ¯)çš„åº”ç”¨ç¨‹åºï¼Œæ‚¨ç»å¯¹éœ€è¦ç¡®ä¿æ•°æ®å­˜å‚¨å’Œä¼ è¾“ç¬¦åˆ HIPAA æ ‡å‡†ã€‚

Kinvey é€šè¿‡ SOC2ã€HIPAAã€GDPRã€è¨ç­æ–¯-å¥¥å…‹æ–¯åˆ©æ³•æ¡ˆå’Œå…¶ä»–åˆè§„æ´»åŠ¨ï¼Œæ¯å¹´å®¡æŸ¥ã€ç¡®è®¤å’Œæ”¹è¿›å®‰å…¨æ§åˆ¶æªæ–½ã€‚å¯¹äºå…³æ³¨ FFIEC æˆ– GLBA æ³•è§„çš„é“¶è¡Œä¸šå®¢æˆ·ã€å…³æ³¨ HIPAA çš„åŒ»ç–—ä¿å¥è¡Œä¸šå®¢æˆ·ã€åœ¨æ¬§ç›Ÿå¼€å±•ä¸šåŠ¡å¹¶å…³æ³¨ GDPR çš„å®¢æˆ·ï¼ŒKinvey å¹³å°æä¾›äº†å…¨é¢çš„ç«¯åˆ°ç«¯å®‰å…¨æ€§ï¼Œä»¥åŠæ”¯æŒæ‚¨çš„æ³•è§„éµä»æ€§å·¥ä½œæ‰€éœ€çš„åŠŸèƒ½ã€‚

[ç‚¹å‡»æ­¤å¤„é˜…è¯»æ›´å¤šä¿¡æ¯](https://www.progress.com/kinvey/enterprise-security)äº†è§£ Kinvey å¦‚ä½•ä¸ºæ‚¨çš„ç»„ç»‡æä¾›æ‰€éœ€çš„å®‰å…¨æ€§å’Œåˆè§„æ€§ä¿éšœã€‚

## æ¥ä¸‹æ¥æ˜¯ç¬¬ä¸‰é›†:ä¿æŠ¤ä¼ è¾“ä¸­çš„æ•°æ®ï¼

ä»Šå¤©ï¼Œæˆ‘ä»¬è®¨è®ºäº†å¦‚ä½•åœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­å®‰å…¨åœ°å­˜å‚¨ç§æœ‰æ•°æ®å…ƒç´ ï¼Œç”šè‡³ç ”ç©¶äº†ä¸€äº›æœ¬åœ°å’Œè¿œç¨‹å®‰å…¨æ•°æ®å­˜å‚¨é€‰é¡¹ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç ”ç©¶å¦‚ä½•åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å®‰å…¨åœ°æ¥å›ä¼ è¾“æ•°æ®ã€‚æç¤º:è¿™ä¸æ˜¯*SSL é‚£ä¹ˆç®€å•ã€‚ğŸ¤”*