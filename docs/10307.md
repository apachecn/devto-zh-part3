# åœ¨ä¸åˆ°åŠå°æ—¶çš„æ—¶é—´å†…ä» Typeform åˆ›å»º Salesforce é”€å”®çº¿ç´¢

> åŸæ–‡:[https://dev . to/type form/create-a-sales force-a-lead-from-type form-in-than-half-hour-lmg](https://dev.to/typeform/create-a-salesforce-a-lead-from-typeform-in-less-than-half-an-hour-lmg)

åœ¨ Typeformï¼Œæˆ‘ä»¬å–œæ¬¢ç”¨æˆ‘ä»¬çš„äº§å“æ¥è¿è¡Œä¸œè¥¿ã€‚æ­£å¦‚ä½ å¯èƒ½å·²ç»åœ¨[çš„ä¸Šä¸€ç¯‡æ–‡ç« ](https://www.typeform.com/blog/inside-story/21-ways-typeform-uses-typeforms/)ä¸­è¯»åˆ°çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ç±»å‹è¡¨æ¥è¯„ä»·æˆ‘ä»¬æ¯å¤©çš„åˆé¤ï¼Œæ”¶é›†å…³äºå³å°†æ¨å‡ºçš„åŠŸèƒ½çš„åé¦ˆï¼Œç”šè‡³è¿è¡Œæˆ‘ä»¬çš„å†…éƒ¨ FIFA ç«èµ›ã€‚ä½¿ç”¨ Typeform çš„æ–¹æ³•æœ‰å¾ˆå¤š:)

æˆ‘ä»¬ä¹Ÿæ˜¯ Salesforce çš„å¤§é‡ç”¨æˆ·:æˆ‘ä»¬ä½¿ç”¨å®ƒæ¥ä¿æŒæˆ‘ä»¬çš„åˆä½œä¼™ä¼´è®¡åˆ’æœ‰æ¡ä¸ç´Šã€‚æœ‰å…´è¶£ä¸ Typeform é›†æˆçš„å…¬å¸é€šè¿‡è¿™ä¸ª partner  è”ç³»æˆ‘ä»¬ï¼Œä½†æ˜¯ä¹‹åä»€ä¹ˆä¹Ÿæ²¡æœ‰å‘ç”Ÿã€‚å¦‚æœæˆ‘ä»¬è®¤ä¸ºä¸€ä¸ªé”€å”®çº¿ç´¢å¯ä»¥äº§ç”Ÿæœ‰è¶£çš„å¯¹è¯ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ Salesforce ä¸­æ‰‹åŠ¨åˆ›å»ºé”€å”®çº¿ç´¢*ã€‚*

 *æˆ‘å¯ä»¥å¬åˆ°å¼€å‘äººå‘˜åœ¨è¯´ï¼Œâ€œåº”è¯¥æœ‰æ›´å¥½çš„æ–¹æ³•ï¼â€ğŸ¤”

ä½ è¯´å¾—å¯¹ï¼é€šè¿‡ä½¿ç”¨å¼•äººå…¥èƒœçš„ Typeform UI æ¥æ”¶é›†æ•°æ®ï¼Œä»¥åŠä½¿ç”¨å¼ºå¤§çš„ Salesforce æ¼æ–—å°†æ•°æ®ç»„ç»‡æˆé”€å”®çº¿ç´¢ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½å¤ŸåŒæ—¶äº«å—è¿™ä¸¤ç§åŠŸèƒ½ã€‚

è¿™å°±æ˜¯æˆ‘è¦åœ¨è¿™é‡Œè§£é‡Šçš„ã€‚æˆ‘å°†æˆ‘ä»¬çš„ typeform è¿æ¥åˆ°æˆ‘ä»¬çš„ Salesforce ç»„ç»‡ï¼ŒèŠ‚çœäº†æˆ‘ä»¬å›¢é˜Ÿçš„å®è´µæ—¶é—´ã€‚

# [](#prerequisites)å…ˆå†³æ¡ä»¶ğŸ›’

è¦å­¦ä¹ æœ¬æ•™ç¨‹ï¼Œæ‚¨éœ€è¦:

*   ä¸€ä¸ª [Salesforce](https://www.salesforce.com/) ç»„ç»‡
*   ä¸€ä¸ªæ‰“å­—è´¦æˆ·- [å…è´¹åˆ›å»ºä¸€ä¸ª](https://www.typeform.com/)
*   åŠå°æ—¶çš„ç©ºé—²æ—¶é—´

ç³»å¥½å®‰å…¨å¸¦ï¼Œæˆ‘ä»¬å¼€å§‹å§ï¼ğŸ›«

# [](#principles)åŸåˆ™ğŸ“–

è¿™ä¸ªé»‘å®¢ä¾èµ–äº Typeform webhooksã€‚æ‚¨å¯ä»¥å°†ä¸€ä¸ªæˆ–å¤šä¸ª webhooks é™„åŠ åˆ°ä¸€ä¸ªç±»å‹è¡¨å•ä¸Šï¼Œè¿™æ ·å½“æäº¤æ–°çš„å“åº”æ—¶ï¼Œæ‚¨ä¼šåœ¨æ‚¨é€‰æ‹©çš„ URL ä¸Šå¾—åˆ°é€šçŸ¥ã€‚

Webhooks æ˜¯å®æ—¶å‘ç”Ÿçš„ï¼Œæ‰€ä»¥å®ƒä»¬å…è®¸ä½ å¿«é€Ÿååº”å¹¶ä¿æŒä¸€åˆ‡åŒæ­¥ã€‚

åœ¨é”€å”®é˜Ÿä¼æ–¹é¢ï¼Œæˆ‘ä»¬å°†ä¾é ä»–ä»¬çš„[åœ¨çº¿é”€å”®çº¿ç´¢](https://www.salesforce.com/products/guide/lead-gen/web-to-lead/)è§£å†³æ–¹æ¡ˆã€‚è¿™æ˜¯ä¸€ç§ä» web è¡¨å•ç”Ÿæˆé”€å”®çº¿ç´¢çš„å¿«æ·æ–¹å¼ã€‚

ä¸ºäº†ä» Typeform æ¥æ”¶ webhook è¯¦ç»†ä¿¡æ¯å¹¶å°†å®ƒä»¬å‘é€åˆ° Salesforceï¼Œæˆ‘ä»¬ä½¿ç”¨äº† [Glitch](http://glitch.com) ã€‚ [Glitch](http://glitch.com) æ—¢æ˜¯åœ¨çº¿ IDE åˆæ˜¯æœåŠ¡å™¨ã€‚è¯¥åº”ç”¨ç¨‹åºæ˜¯è‡ªåŠ¨éƒ¨ç½²çš„ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦æ‹…å¿ƒæœåŠ¡å™¨ã€‚

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æ— æœåŠ¡å™¨è§£å†³æ–¹æ¡ˆï¼Œå¦‚ [AWS Lambda](https://aws.amazon.com/lambda) ã€ [Google Cloud functions](https://cloud.google.com/functions/) ã€ [Azure](https://azure.microsoft.com/en-us/services/functions) å’Œ [Stdlib](https://stdlib.com) ã€‚ä½ çš„é€‰æ‹©ï¼ğŸ˜‰

# [](#implement-the-solution)å®æ–½è§£å†³æ–¹æ¡ˆğŸ‘©â€ğŸ’»

## [](#prepare-the-typeform)å‡†å¤‡å­—ä½“

æˆ‘ä»¬çš„ç±»å‹åŒ…å«äº†æˆ‘ä»¬æƒ³é—®çš„æ‰€æœ‰é—®é¢˜ã€‚æ¯ä¸ªé—®é¢˜éƒ½ç”±ä¸€ä¸ª`id`å’Œä¸€ä¸ª`ref`å±æ€§æ ‡è¯†ã€‚ä¸¤è€…éƒ½æ˜¯å”¯ä¸€çš„å¹¶ä¸”æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œä½†æ˜¯`id`å€¼ä¸èƒ½è¢«æ”¹å˜ã€‚[è¡¨å•å®šä¹‰ç¤ºä¾‹](https://gist.github.com/picsoung/1b2665b6083876c949bdf6fe09d1ed7d)ã€‚

<figure>

[![details of field definition](../Images/2cc9a9cc5fc60bd4d60dae9bd5e62b89.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--n_GcuIzD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.evernote.com/l/ACVug-zrn3ZNGJd2rtG7SxpwUtYs8_C-RXYB/image.png)

<figcaption>details of field definition</figcaption>

</figure>

æˆ‘ä»¬*å¯ä»¥*æ›´æ–°`ref`å€¼ï¼Œä½¿ä»£ç æ›´å…·å¯è¯»æ€§ã€‚æˆ‘å°†ä½¿ç”¨[ç±»å‹è¡¨å•ç¼–è¾‘å—å¼•ç”¨åº”ç”¨](https://tf-edit-ref.glitch.me)æ¥ä¿®æ”¹æˆ‘ä»¬çš„ç±»å‹è¡¨å•ä¸­å­—æ®µçš„`ref`å±æ€§ã€‚

<figure>

[![screenshot of edit ref app](../Images/cd9fde599c2a6ea611b936c23a2a88c8.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ckykOzEb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.evernote.com/l/ACVnWFu2hplJMpEK3nRSwVGc0jPT0YDDZiIB/image.png)

<figcaption>screenshot of edit ref app</figcaption>

</figure>

ç°åœ¨é—®é¢˜æœ‰äº†åƒ`first_name`ã€`last_name`è¿™æ ·çš„`ref`å€¼ï¼Œè€Œä¸æ˜¯éšæœºå­—ç¬¦ã€‚ğŸ‘

<figure>

[![After edit result](../Images/18b7fb4aedc96cba3c9446edc2c1e74a.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--GFOgCoVY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.evernote.com/l/ACUecZQAfoNOQrgagEGrSU5epgSh9qRG4BYB/image.png)

<figcaption>Looks better, no? ğŸ˜‰</figcaption>

</figure>

## [](#get-your-salesforce-organization-id)è·å–æ‚¨çš„ Salesforce ç»„ç»‡ ID ğŸ—„ï¸

è¦å°†é”€å”®çº¿ç´¢å‘é€åˆ°æˆ‘ä»¬çš„ Salesforce ç»„ç»‡ï¼Œæˆ‘éœ€è¦é€šè¿‡å°†æˆ‘ä»¬çš„`oid`(ç»„ç»‡ ID)ä½œä¸ºå‚æ•°ä¼ é€’æ¥æ ‡è¯†å®ƒã€‚

æ‚¨å¯ä»¥åœ¨æ‚¨çš„ Salesforce ä»ªè¡¨æ¿ä¸­æ‰¾åˆ°`OID`ã€‚ç‚¹å‡»âš™ï¸å›¾æ ‡ï¼Œä½ ä¼šåœ¨`Company Information`éƒ¨åˆ†çš„*è®¾ç½®*ä¸‹æ‰¾åˆ°å®ƒã€‚

<figure>

[![sc](../Images/d7f6f9b1faf33afa79df663ca122cd3e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--YU94CP2L--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.evernote.com/l/ACUtchZh8oZF7pDNQ3Oa3guTw9_HdNisZRYB/image.png)

<figcaption>Where to find your Salesforce OID</figcaption>

</figure>

å°†`OID`æ”¾åœ¨æ‰‹è¾¹ï¼ä½ ä»¥åä¼šéœ€è¦å®ƒçš„ã€‚ğŸ˜‰

### [](#lets-code)å’±ä»¬ç å§ğŸ‰

æˆ‘çŸ¥é“ä½ æƒ³å°½å¿«åˆ°è¿™ä¸€æ­¥ï¼æ‰€ä»¥è®©æˆ‘ä»¬æŠŠæ‰‹å¼„è„å§ã€‚ğŸ˜ˆ

å¦‚å‰æ‰€è¿°ï¼Œæˆ‘ä»¬çš„å‡½æ•°å°†ä» Typeform webhook æœ‰æ•ˆè´Ÿè½½ä¸­æå–è¯¦ç»†ä¿¡æ¯ï¼Œç„¶åè°ƒç”¨ Salesforce API æ¥åˆ›å»ºé”€å”®çº¿ç´¢ã€‚

```
app.post('/hook', function(request, response) {
  response.sendStatus(200) // let's answer back quickly to typeform ğŸ‘Œ
  let { form_response } = request.body
  let { answers } = form_response

  console.log('received from Typeform webhook', form_response)

  // build the lead object
  let lead_data = {
    first_name: answers.find(a => a.field.ref === 'first_name').text,
    last_name: answers.find(a => a.field.ref === 'last_name').text,
    email: answers.find(a => a.field.ref === 'email').email,
    company: answers.find(a => a.field.ref === 'company').text,
    oid: process.env.OID,
    debug: request.query.debug===1 ? 1 : 0 // salesforce debug mode
  }
}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ­£å¦‚æ‚¨åœ¨è¿™ä¸ªç‰‡æ®µä¸­çœ‹åˆ°çš„ï¼Œæ‚¨å°†åˆ›å»ºä¸€ä¸ª`/hook`è·¯ç”±ï¼Œé™¤äº†ä¸€ä¸ª`POST`è¯·æ±‚ã€‚ç„¶åï¼Œæ‚¨å°†å¤„ç†ä¼ å…¥çš„è¯·æ±‚å¹¶æå–ç›¸å…³æ•°æ®æ¥æ„å»º`lead_data`å¯¹è±¡ã€‚

å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä¸è¦å°†`OID`å€¼ç›´æ¥å­˜å‚¨åœ¨ä»£ç ä¸­ã€‚ç›¸åï¼Œå°†å…¶å­˜å‚¨ä¸ºç¯å¢ƒå˜é‡ã€‚

æˆ‘è¿˜æ·»åŠ äº†ä¸€ä¸ªè°ƒè¯•å‚æ•°ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥åœ¨ä¸æŸå®³æ‚¨çš„å®é™…ç»„ç»‡çš„æƒ…å†µä¸‹è¿›è¡Œæµ‹è¯•ã€‚

å‰©ä¸‹è¦åšçš„å”¯ä¸€ä¸€ä»¶äº‹å°±æ˜¯è°ƒç”¨ Salesforce åœ¨çº¿æ½œåœ¨å®¢æˆ· API å¹¶åˆ›å»ºä¸€ä¸ªæ½œåœ¨å®¢æˆ·ã€‚

è¿™æ˜¯è¦æ·»åŠ çš„ç¼ºå¤±éƒ¨åˆ†:

```
axios({
    method: 'POST',
    url: 'https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8',
    data: qs.stringify(lead_data),
    config: { headers: {'Content-Type': 'application/x-www-form-urlencoded' }}
    })
    .then(function (response) {
        console.log('res',response.status, response.data);
    })
    .catch(function (err) {
        console.log('err',err);
    }); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°±æ˜¯ä½ æŠŠäº‹æƒ…è”ç³»åœ¨ä¸€èµ·æ‰€éœ€è¦çš„ã€‚ğŸŠ

# [](#try-it-live)ç°åœºè¯•ç”¨

è¦å¿«é€Ÿå°è¯•è¿™ç§é›†æˆï¼Œè¯·éµå¾ªä»¥ä¸‹æ­¥éª¤:

1.  [é‡æ–°æ··åˆ Glitch ä¸Šçš„é¡¹ç›®](https://glitch.com/~tf-webtolead)
2.  å°†æ‚¨è‡ªå·±çš„`OID`æ·»åŠ åˆ°`.env`æ–‡ä»¶ä¸­
3.  åœ¨`server.js`çš„ç¬¬ 21-28 è¡Œåˆ é™¤ã€æ·»åŠ æˆ–ä¿®æ”¹ Typeform webhook æœ‰æ•ˆè´Ÿè½½çš„æ•°æ®æå–
4.  ç‚¹å‡»`Show`ä»¥æŸ¥çœ‹ Glitch ä¸Šæ‰˜ç®¡çš„é¡¹ç›®çš„ URL(å¹¶ä¸ºä¸‹ä¸€æ­¥ä¿ç•™å®ƒ)
5.  åœ¨ç±»å‹è¡¨å•ä¸­ï¼Œé€‰æ‹©æ‚¨çš„é”€å”®çº¿ç´¢ç”Ÿæˆç±»å‹è¡¨å•ï¼Œå¹¶åœ¨`Connect > Webhooks`ä¸‹æ·»åŠ æ‚¨çš„ Glitch åº”ç”¨ç¨‹åº URLã€‚URL æ ¼å¼åº”ä¸º`https://{random_name}.glitch.me/hook`
6.  é€šè¿‡å¡«å†™å¹¶æäº¤æ‚¨çš„é”€å”®çº¿ç´¢ç”Ÿæˆç±»å‹è¡¨è¿›è¡Œæµ‹è¯•-æäº¤åï¼Œæ‚¨åº”è¯¥ä¼šåœ¨æ‚¨çš„ Salesforce ç»„ç»‡ä¸­çœ‹åˆ°ä¸€ä¸ªæ–°çš„é”€å”®çº¿ç´¢
7.  åº†ç¥ä¸€ä¸‹ï¼ğŸ‰

<figure>

[![new lead in Salesforce](../Images/471e3996bad5e5f2e1c32b6698803e74.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--YqTimXxZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.evernote.com/l/ACXSHV_zi6VJp4bDmEO8MFpF6iSZjVyUTrQB/image.png)

<figcaption>Succesfully created a lead in Salesforce</figcaption>

</figure>

[https://glitch.com/embed/#!/embed/tf-webtolead?path=index.html](https://glitch.com/embed/#!/embed/tf-webtolead?path=index.html)

# [](#go-beyond)è¶…è¶ŠğŸ—ºï¸

è¿™æ˜¯ä¸€ä¸ªè¿æ¥ Typeform å’Œ Salesforce çš„ç®€å•æ–¹æ³•ã€‚ä¸ºäº†ä½¿å®ƒæ›´å®Œæ•´ï¼Œæ‚¨å¯ä»¥å°†æ›´å¤šå­—æ®µä»æ‚¨çš„ lead å¯¹è±¡æ˜ å°„åˆ°æ‚¨çš„ typeform é—®é¢˜ã€‚å®ƒç”šè‡³é€‚ç”¨äºè‡ªå®šä¹‰ Salesforce å­—æ®µã€‚

å¦‚æœæ‚¨å¯¹å°† Typeform ä¸å…¶ä»–æœåŠ¡è¿æ¥èµ·æ¥æ„Ÿåˆ°å¥½å¥‡ï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬çš„[å¼€å‘è€…æ–‡æ¡£](https://developer.typeform.com)å¹¶æ„å»ºæ‚¨è‡ªå·±çš„è§£å†³æ–¹æ¡ˆï¼ğŸ˜‰

è¦äº†è§£æ­¤ç±»é¡¹ç›®çš„æœ€æ–°è¿›å±•ï¼Œè¯·è®¢é˜…æˆ‘ä»¬çš„[å¼€å‘è€…ç®€è®¯](https://developerplatform.typeform.com/to/DlIzNU)ã€‚*