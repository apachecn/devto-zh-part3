# æ„å»ºä»¥ ASP.NET ä¸ºæ ¸å¿ƒçš„æ‰å¹³åŒ–ç½‘ç«™

> åŸæ–‡:[https://dev . to/Turner software/building-a-flat-website-with-aspnet-core-1 jaa](https://dev.to/turnersoftware/building-a-flat-website-with-aspnet-core-1jaa)

æˆªè‡³æ˜¨æ™šï¼Œæˆ‘ä¸ºæˆ‘æ­£åœ¨æ‰“é€ çš„äº§å“ BrandVantage å¼€é€šäº†ç½‘ç«™ã€‚æˆ‘ä¸ºè¿™ä¸ªç½‘ç«™æ„Ÿåˆ°éå¸¸è‡ªè±ªï¼Œæˆ‘è‡ªå·±è®¾è®¡å¹¶å»ºé€ äº†å®ƒï¼Œè¿˜è®¾è®¡äº†æ ‡å¿—ã€‚è¿™ä¸€åˆ‡éƒ½å‘ç”Ÿåœ¨[æˆ‘ä¹Ÿç¦»èŒ](https://dev.to/turnerj/i-left-my-job-today-f1a)ä¸€å‘¨å¤šä¹‹åï¼

æˆ‘åœ¨ä¸€ç¯‡è¯„è®ºä¸­ç¨å¾®æåˆ°äº† BrandVantage å…³äº[çš„å†…å®¹ï¼Œä½†æ˜¯è¿™ç¯‡æ–‡ç« ï¼Œä»¥åŠå³å°†å‘å¸ƒçš„å…¶ä»–å„ç§æ–‡ç« ï¼Œæ˜¯è¦è°ˆè®ºå¼€å‘å’ŒæŠ€æœ¯ï¼Œè€Œä¸æ˜¯æˆ‘è¯•å›¾å‘ä½ æ¨é”€å®ƒã€‚å½“æˆ‘å¼€å§‹å¯»æ‰¾äº§å“çš„æ—¶å€™ï¼Œæˆ‘å¯èƒ½ä¼šå‘å¸ƒç›¸å…³çš„å¸–å­ï¼ğŸ™‚](https://dev.to/turnerj/comment/8mlf)

è¿™ä¸ªæ–°ç½‘ç«™ï¼Œä»¥åŠ[æˆ‘çš„ä¸ªäººç½‘ç«™](https://turnerj.com/)å’Œ[æˆ‘å…¬å¸çš„ç½‘ç«™](https://www.turnersoftware.com.au/)(éƒ½æ˜¯ä¸ä¹…å‰å‘å¸ƒçš„)éƒ½æ˜¯éå¸¸ç›¸ä¼¼çš„:ä¸€ä¸ªå•é¡µã€æ‰å¹³çš„ HTMLï¼Œå¸¦æœ‰ç¼©å°çš„ CSSã€‚

æˆ‘å–œæ¬¢æœ‰è¿™æ ·ä¸€ä¸ªå¹³é¢ç½‘ç«™ï¼Œå› ä¸ºå®ƒæ˜¯æ‰˜ç®¡ä¸å¯çŸ¥è®ºè€…ã€‚è¿™äº›ç½‘ç«™æˆ‘å·²ç»å»ºæˆï¼Œè€Œ ASP.NET æ ¸å¿ƒé¡¹ç›®çš„ä»£ç ï¼Œä»–ä»¬éƒ¨ç½²åˆ° PHP æ‰˜ç®¡ã€‚è¿™ç¯‡æ–‡ç« çš„å…¶ä½™éƒ¨åˆ†è§£é‡Šäº†è¿™ä¸ªè®¾ç½®ã€‚

## [](#the-base-project)åŸºåœ°é¡¹ç›®

æˆ‘ç”¨çš„æ˜¯ Visual Studioï¼Œæ¯ä¸ªé¡¹ç›®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸€ä¸ªç©ºçš„ ASP.NET æ ¸å¿ƒç½‘ç«™é¡¹ç›®ã€‚

[![Visual Studio Solution Structure](../Images/d4eb685ef571f535e57088eab45b9b79.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--HEWvhpc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/ucj71u7t59rzo59ui7tk.jpg)

ä¸ºäº†è®©å®é™…çš„é¡¹ç›®åœ¨å¼€å‘ä¸­å·¥ä½œï¼Œæ‚¨éœ€è¦å°†æ‚¨çš„`Startup.cs`æ›´æ–°ä¸ºç±»ä¼¼ä¸‹é¢çš„å†…å®¹:

```
public class Startup
{
    public void Configure(IApplicationBuilder app, IHostingEnvironment env)
    {
        if (env.IsDevelopment())
        {
            app.UseDeveloperExceptionPage();
            app.UseBrowserLink();
        }

        app.UseDefaultFiles(new DefaultFilesOptions
        {
            DefaultFileNames = new List<string> { "index.html" }
        });

        app.UseStaticFiles();
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ è¦ç¡®ä¿ä½ æœ‰`UseStaticFiles`å¹¶è®¾ç½®ä½ çš„ç´¢å¼•æ–‡ä»¶ä¸ºé»˜è®¤æ–‡ä»¶ï¼Œå¦åˆ™å®ƒä¸ä¼šåƒä½ æœŸæœ›çš„é‚£æ ·å·¥ä½œã€‚

## [](#site-root)ç«™ç‚¹æ ¹

[![Site Root](../Images/37c595a5a2f2acc01d70e27f870621df.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--jB82w2wT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/5iclmdc6knt6e0tdv9mc.jpg) 
è¿™ä¸ªè®¾ç½®çœŸçš„æ˜¯å›åˆ°äº†åŸºç¡€ï¼Œæˆ‘æ²¡æœ‰ä½¿ç”¨ ASP.NET æ ¸å¿ƒæœ¬èº«çš„ä»»ä½•ç‰¹æ®ŠåŠŸèƒ½ï¼Œä¹Ÿæ²¡æœ‰ä¸€äº›æˆ‘è¦å¯¼å‡ºåˆ°å¹³é¢ HTML çš„ Razor æ¨¡æ¿ã€‚å®ƒå®é™…ä¸Šåªæ˜¯ä¸€ä¸ªæˆ‘æ‰‹å·¥æ„å»ºçš„æ–‡ä»¶ã€‚

æˆ‘ç¡®å®å°è¯•è¿‡å°†ä¸€ä¸ªç«™ç‚¹ä» CSHTML å¯¼å‡ºåˆ°æ™®é€š HTMLï¼Œä½†æ˜¯å¯¹äºä¸€ä¸ªå•é¡µé¢ç«™ç‚¹æ¥è¯´ï¼Œè¿™ä¼¼ä¹æœ‰ç‚¹å¤ªå¤æ‚äº†ã€‚å°†æ¥æˆ‘å¯èƒ½ä¼šé‡æ–°è€ƒè™‘è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯ç°åœ¨ï¼Œä¸€ä¸ªå¹³é¢çš„ HTML é¡µé¢å¯¹æˆ‘æ¥è¯´æ˜¯å®Œç¾çš„ã€‚

## [](#bundling-and-minification)æ†ç»‘å’Œç¼©å°

æˆ‘çš„è®¾ç½®ä¾èµ–äº Nuget åŒ… [BuildBundlerMinifier](https://www.nuget.org/packages/BuildBundlerMinifier) ,å®ƒå…è®¸é€šè¿‡ç®€å•åœ°æ„å»ºä»£ç åº“æ¥ç¼©å° CSSï¼Œå°±åƒä½ åšä»»ä½•å…¶ä»–äº‹æƒ…ä¸€æ ·ã€‚NET ä»£ç åº“ã€‚

å®ƒä½¿ç”¨äº†ä¸€ä¸ª JSON æ–‡ä»¶ï¼Œå¯¹æˆ‘æ¥è¯´ç±»ä¼¼äº:

```
[  {  "outputFileName":  "wwwroot/bundles/site.min.css",  "inputFiles":  [  "wwwroot/css/normalize.css",  "wwwroot/css/layout.css",  "wwwroot/css/product-hunt.css",  "wwwroot/css/responsive.css",  "wwwroot/css/compatibility.css"  ],  "sourceMap":  true  },  {  "outputFileName":  "wwwroot/fonts/font-awesome/bundles/fontawesome.min.css",  "inputFiles":  [  "wwwroot/fonts/font-awesome/css/fontawesome.min.css",  "wwwroot/fonts/font-awesome/css/light.min.css"  ]  }  ] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

bundler/minifier ç¡®å®æ”¯æŒ JavaScriptï¼Œä½†æ˜¯é™¤äº† Google Analytics å’Œä¸€ä¸ªäº§å“æœç´¢è„šæœ¬ï¼Œæˆ‘çš„ç½‘ç«™ä¸Šæ²¡æœ‰ä»»ä½• JSã€‚

ä½ å¯ä»¥åœ¨æˆ‘çš„ç«™ç‚¹æ ¹ç›®å½•æˆªå›¾ä¸­çœ‹åˆ°æœ‰ä¸€ä¸ª`bundles`æ–‡ä»¶å¤¹ï¼Œå®ƒæ˜¯ç”±è¿™ä¸ªè¿‡ç¨‹åˆ›å»ºçš„ï¼Œä½†æ˜¯æˆ‘å·²ç»æŠŠå®ƒä» Git ä¸­æ’é™¤äº†ã€‚

å› ä¸ºæˆ‘çš„ç«™ç‚¹æ˜¯å¹³é¢ HTMLï¼Œæ‰€ä»¥æˆ‘éœ€è¦ç›´æ¥å¼•ç”¨æ†ç»‘æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
 <link href="/bundles/site.min.css" rel="stylesheet" />
</head>
<body>
    <link href="fonts/font-awesome/bundles/fontawesome.min.css" rel="stylesheet" /> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> ä¸€ä¸ªåœ¨`head`ä¸­ï¼Œä¸€ä¸ªåœ¨`body`ä¸­çš„åŸå› æ˜¯ç¨å¾®å¢åŠ äº†å¯¹æ›´å¿«é¡µé¢åŠ è½½çš„æ„ŸçŸ¥ã€‚

è¿™ç§å…¨å¹³é¢ HTML æ–¹æ³•çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼Œè¿™äº›æ†ç»‘çš„æ–‡ä»¶ä¸èƒ½åŠ¨æ€é‡æ–°ç”Ÿæˆã€‚è¿™æ„å‘³ç€æ¯æ¬¡æˆ‘æƒ³æŸ¥çœ‹ CSS å˜åŒ–æ—¶ï¼Œæˆ‘éƒ½éœ€è¦é‡æ–°æ„å»ºã€‚å¯¹äºä¸»è¦çš„å·¥ä½œï¼Œæˆ‘å¯èƒ½ä¼šæ‰‹åŠ¨è¿”å›åˆ°éç¼©å°çš„ CSSï¼Œåªæ˜¯ä¸ºäº†ä½¿å¼€å‘æ›´å®¹æ˜“ã€‚ä¸è¿‡ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œæ‚¨åº”è¯¥è®©å®ƒåœ¨ä¿®æ”¹æ—¶è‡ªåŠ¨ç”Ÿæˆâ€”â€”è¿™æ˜¯è®¸å¤šå…¶ä»–å·¥å…·æä¾›çš„ï¼Œä½†æˆ‘çš„è®¾ç½®ä¸­è¿˜æ²¡æœ‰ã€‚

å¦‚æœæˆ‘ä½¿ç”¨ CSHTMLï¼Œæˆ‘å®é™…ä¸Šå¯ä»¥å¼•ç”¨ä¸¤è€…ï¼Œå¹¶ä½¿ç”¨æ ‡è®°åŠ©æ‰‹æ¥å®šä¹‰æˆ‘è¿è¡Œçš„ç¯å¢ƒã€‚è¿™ä¹Ÿæ˜¯æˆ‘å°†æ¥å¯èƒ½ä¼šè€ƒè™‘çš„äº‹æƒ…ã€‚

## [](#continuous-delivery)è¿ç»­äº¤è´§

ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°åœ¨ç¬¬ä¸€å¼ æˆªå›¾ä¸­æœ‰ä¸€ä¸ªåšè„¸çš®çš„`build-pipeline.yml`æ–‡ä»¶ï¼Œè¿™æ˜¯ Azure DevOps Pipelines ä½¿ç”¨çš„ï¼Œå…è®¸æˆ‘è‡ªåŠ¨è¿›è¡Œæ„å»ºå’Œéƒ¨ç½²è®¾ç½®ã€‚

æˆ‘çš„æ–‡ä»¶æ˜¯è¿™æ ·çš„:

```
resources:
- repo: self
queue:
  name: Hosted VS2017

steps:
- task: DotNetCoreInstaller@0
  inputs:
    version: '2.2.101'

- task: DotNetCoreCLI@2
  displayName: 'dotnet  build'

- task: ArchiveFiles@2
  displayName: 'Archive  src/Website/wwwroot'
  inputs:
    rootFolderOrFile: src/Website/wwwroot
    includeRootFolder: false
    archiveType: 7z
    archiveFile: '$(Build.ArtifactStagingDirectory)/website.7z'

- task: PublishBuildArtifacts@1
  displayName: 'Publish  Artifact:  Web'
  inputs:
    ArtifactName: Web 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä¸æ˜¯ Azure DevOps ç®¡é“æ–¹é¢çš„ä¸“å®¶ï¼Œä½†ä»¥ä¸Šæ˜¯æˆ‘ä¸ºè‡ªå·±å·¥ä½œçš„å†…å®¹ã€‚é¦–å…ˆï¼Œå®ƒå®‰è£…ç‰¹å®šç‰ˆæœ¬çš„ã€‚NET æ ¸å¿ƒï¼Œè¿™æ ·æˆ‘å°±æœ‰äº†ä¸€ä¸ªç¨³å®šä¸€è‡´çš„ç¯å¢ƒ(ä½œä¸ºã€‚å·²ç»å®‰è£…äº† NET Core)ã€‚ç„¶åæˆ‘è¿è¡Œä¸€ä¸ªæ„å»ºï¼Œå®ƒå®é™…ä¸Šåªæ˜¯è¿è¡Œç¼©å°è¿‡ç¨‹ã€‚æ¥ä¸‹æ¥çš„ä¸¤ä¸ªä»»åŠ¡æ˜¯è·å–æ•°æ®ä»¥æ‰“åŒ…éƒ¨ç½²ç®¡é“çš„æ„å»ºæ‰€å¿…éœ€çš„ã€‚

åœ¨è¿›è¡Œè¿™ä¸ªè®¾ç½®æ—¶ï¼ŒAzure ä¸æ”¯æŒç®¡é“éƒ¨ç½²ç«¯çš„å®Œæ•´ YML é…ç½®ï¼Œæ‰€ä»¥æˆ‘ä¸èƒ½å‘æ‚¨å±•ç¤ºè¿™ä¸€ç‚¹ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯:

*   ç­‰å¾…æ¥è‡ªä¸»åˆ†æ”¯çš„æ–°æ„å»ºåŒ…(å…è®¸æˆ‘ä½¿ç”¨å…¶ä»–åˆ†æ”¯è¿›è¡Œå¼€å‘ï¼Œè€Œä¸ç”¨æ‹…å¿ƒéƒ¨ç½²å®ƒä»¬)
*   æ‰“å¼€è—ç‰©
*   ä½¿ç”¨ FTPSï¼Œå°†æ‰€æœ‰æ›´æ”¹éƒ¨ç½²åˆ°æˆ‘çš„ä¸»æœº

## [](#conclusion)ç»“è®º

ä¹Ÿè®¸ä¸æ˜¯æœ€ä¼Ÿå¤§æˆ–æœ€æœ‰æˆæ•ˆçš„è®¾ç½®ï¼Œä½†å¯¹æˆ‘æ¥è¯´éå¸¸å¥½ã€‚ä¸è¿‡ï¼Œæˆ‘å¯ä»¥å¼ºçƒˆåœ°è¯´ï¼Œæˆ‘æ˜¯å¤šä¹ˆå–œæ¬¢è‡ªåŠ¨åŒ–éƒ¨ç½²â€”â€”é‚£ä¸œè¥¿å¤ªæ£’äº†ï¼