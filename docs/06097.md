# æ°¸è¿œä¸è¦é”™è¿‡çˆ±å¥¥å°¼äºšçš„ä¸€ä¸ªé”™è¯¯

> åŸæ–‡:[https://dev . to/robertohuertasm/never-miss-an-error-in-ion-2if 5](https://dev.to/robertohuertasm/never-miss-an-error-in-ionic-2if5)

æ‚¨å¯èƒ½çŸ¥é“ [Angular](https://angular.io) ä¸ºé›†ä¸­å¼å¼‚å¸¸å¤„ç†æä¾›äº†ä¸€ä¸ª`hook`ï¼Œæ‚¨å¯ä»¥è¦†ç›–å®ƒã€‚[é»˜è®¤å®ç°](https://angular.io/api/core/ErrorHandler)å‘`console`æ‰“å°é”™è¯¯æ¶ˆæ¯ã€‚

å¼€å‘äººå‘˜é€šå¸¸ä¼šé€šè¿‡æä¾›è‡ªå·±çš„`ErrorHandler`æ¥è¦†ç›–é»˜è®¤å®ç°ã€‚é€šè¿‡è¿™æ ·åšï¼Œä»–ä»¬å¯ä»¥ç®¡ç†æ‰€æœ‰çš„å¼‚å¸¸ï¼Œå¹¶å¯¹å®ƒä»¬åšä¸€äº›äº‹æƒ…(ä¾‹å¦‚ï¼Œå°†å®ƒä»¬å­˜å‚¨åœ¨æŸä¸ªæ•°æ®åº“ä¸­...).

åšåˆ°è¿™ä¸€ç‚¹çš„æ–¹æ³•éå¸¸ç®€å•:

```
class CustomErrorHandler implements ErrorHandler {
  handleError(error: Error) {
    // do something with the exception
  }
}

@NgModule({
  providers: [{ provide: ErrorHandler, useClass: CustomErrorHandler }],
})
class AppModule {} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ— è®ºä½•æ—¶å‘ç”Ÿæœªå¤„ç†çš„å¼‚å¸¸ï¼Œæ‚¨éƒ½å¸Œæœ›å®ƒè¢«è®°å½•åˆ°`console`ä¸­ï¼Œä¸ç®¡æ‚¨çš„å®šåˆ¶å®ç°æ˜¯å¦æ˜ç¡®åœ°è¿™æ ·åšã€‚è‡³å°‘è¿™æ˜¯é»˜è®¤çš„ [Angular](https://angular.io) å®ç°æ‰€æä¾›çš„ï¼Œäº‹å®ä¸Šï¼Œè¿™å°±æ˜¯å®ƒçš„å·¥ä½œæ–¹å¼ã€‚åœ¨è¿™ä¸ª [StackBlitz é¡¹ç›®](https://stackblitz.com/edit/angular-swallowing-errors)ç°åœºæ£€æŸ¥ä¸€ä¸‹ã€‚

[https://stackblitz.com/edit/angular-swallowing-errors?](https://stackblitz.com/edit/angular-swallowing-errors?)

## [](#but-what-about-ionic)ä½†æ˜¯...çˆ±å¥¥å°¼äºšæ€ä¹ˆæ ·ï¼Ÿ

åœ¨ [Ionic](https://ionicframework.com/) ä¸­ï¼Œä¸ºäº†æä¾›ç›¸åŒçš„è¡Œä¸ºï¼Œä½ éœ€è¦æ‰©å±• [IonicErrorHandler](https://ionicframework.com/docs/api/util/IonicErrorHandler/) :

```
class CustomErrorHandler extends IonicErrorHandler {
  handleError(error: Error) {
    // do something with the exception
  }
}

@NgModule({
  providers: [{ provide: ErrorHandler, useClass: CustomErrorHandler }],
})
class AppModule {} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åˆ°ç›®å‰ä¸ºæ­¢ä¸€åˆ‡é¡ºåˆ©ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œå¦‚æœä½ å¿˜è®°æ˜¾å¼è°ƒç”¨`console.error`ï¼Œä½ å°†çœ‹ä¸åˆ°ä½ çš„`console`ä¸­çš„ä»»ä½•å†…å®¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé»˜è®¤çš„[è§’åº¦](https://angular.io)å®ç°ä¸èµ·ä½œç”¨ï¼Œæ‚¨å°†**å®Œå…¨é”™è¿‡é”™è¯¯**ã€‚

ä½ å¯ä»¥çœ‹çœ‹è¿™ä¸ª [StackBlitz é¡¹ç›®](https://stackblitz.com/edit/ionic-swallowing-errors)å¹¶æ£€æŸ¥ä¸€ä¸‹`console`ã€‚æ‚¨ä¸ä¼šçœ‹åˆ°ä»»ä½•é”™è¯¯ï¼Œå±å¹•å°†ä¿æŒç©ºç™½ï¼Œå› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé”™è¯¯å‘ç”Ÿåœ¨`app.component`çš„ä¸€ä¸ªä¾èµ–é¡¹çš„æ„é€ å‡½æ•°ä¸­ã€‚

## TLï¼›åšå£«ï¼›åŒ»ç”Ÿ

å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ [Ionic](https://ionicframework.com/) å¹¶ä¸”ä½ è¦†ç›–äº†é»˜è®¤çš„ [IonicErrorHandler](https://ionicframework.com/docs/api/util/IonicErrorHandler/) ï¼Œå¦‚æœä½ æƒ³åœ¨`console`ä¸­æœ‰ä¸€äº›å¯è§†æ€§çš„è¯ï¼Œä¸è¦å¿˜è®°åœ¨é‚£ä¸ªå¤„ç†ç¨‹åºä¸­æ˜¾å¼åœ°è°ƒç”¨`console.error`ï¼Œä»¥é˜²ä¸€äº›æ„å¤–çš„é”™è¯¯å‘ç”ŸğŸ˜‰ã€‚

-
åŸè½½äº 2018 å¹´ 10 æœˆ 14 æ—¥[robertohuertas.com](https://robertohuertas.com/2018/09/30/angular-error-handler)ã€‚