# æ‰©å±•å¤§å‹ Vue.js åº”ç”¨ç¨‹åºçš„ 3 ä¸ªæŠ€å·§

> åŸæ–‡ï¼š<https://dev.to/maxpou/3-tips-for-scaling-large-vuejs-application-2edi>

> TLDRï¼›
> 
> *   å°†ä½ çš„åº”ç”¨åˆ†æˆå®Œå…¨éš”ç¦»çš„**æ¨¡å—**
> *   è€ƒè™‘**å¾®å‰ç«¯**æ¶æ„
> *   ä¸è¦è¿‡åº¦ä½¿ç”¨ä½ çš„ **Vuex å•†åº—**

## æç¤º#1:æ€è€ƒæ¨¡å—ï¼

`vue-cli`ç»™å‡ºçš„æ–‡ä»¶æ¶æ„å¾ˆæ£’ã€‚ä½†æ˜¯åœ¨ 3-4 é¡µä¹‹åï¼Œä½ çš„æ–‡ä»¶å°†å¼€å§‹å˜å¾—è¿‡é‡ã€‚ä½ å¯èƒ½æƒ³æŠŠä½ çš„ç»„ä»¶æ”¾åœ¨å¤šä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚ä½†æ˜¯ï¼Œ10 é¡µä¹‹åï¼Œä½ ä¼šå†æ¬¡é¢å¯¹åŒæ ·çš„é—®é¢˜ã€‚

è¿™ä¸ªæƒ³æ³•æ˜¯å°†ä½ çš„åº”ç”¨ç¨‹åºæŒ‰æ¦‚å¿µåˆ†å¼€ã€‚åšæŒä¸€ä¸ªç‹¬ç‰¹çš„è¯ã€‚
ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå•†åº—åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°*ç›®å½•*ã€*è´­ç‰©ç¯®*å’Œ*ä»˜æ¬¾*ã€‚ç°åœ¨

```
â”œâ”€ src/
â”‚  â”œâ”€ core/
â”‚  â”œâ”€ modules/
â”‚  â”‚  â”œâ”€ Catalog/
â”‚  â”‚  â”‚  â”œâ”€ Components/
â”‚  â”‚  â”‚  â”œâ”€ Pages/
â”‚  â”‚  â”‚  â”œâ”€ Routes/
â”‚  â”‚  â”‚  â”œâ”€ Services/
â”‚  â”‚  â”‚  â”‚  â”œâ”€ catalog.api.js
â”‚  â”‚  â”‚  â”‚  â””â”€ catalog.services.js
â”‚  â”‚  â”‚  â”œâ”€ Store/
â”‚  â”‚  â”‚  â”‚  â”œâ”€ catalog.action.js
â”‚  â”‚  â”‚  â”‚  â””â”€ catalog.getters.js
â”‚  â”‚  â”‚  â”‚  â””â”€ catalog.mutationTypes.js
â”‚  â”‚  â”‚  â”‚  â””â”€ catalog.state.js
â”‚  â”‚  â”‚  â”‚  â””â”€ index.js
â”‚  â”‚  â”‚  â”œâ”€ Tests/
â”‚  â”‚  â”‚  â”œâ”€ Catalog.vue 
```

Enter fullscreen mode Exit fullscreen mode

è¿™é‡Œæœ‰å‡ ä»¶é‡è¦çš„äº‹æƒ…:

**éš”ç¦»**

ä¸ºäº†ä¿æŒè‰¯å¥½çš„éš”ç¦»ï¼Œæ¨¡å—ä¹‹é—´ä¸åº”æœ‰é—´éš™ã€‚æˆ‘çš„æ„æ€æ˜¯ï¼Œ`Module A`ä¸åº”è¯¥å’Œ`Module B`å…±ç”¨ä¸€ä¸ªç»„ä»¶ã€‚å¯¹äºå¸¸è§åŠŸèƒ½*(å³ç”¨æˆ·ç™»å½•ã€ç”¨æˆ·è¯­è¨€...)*ï¼Œä½ æœ‰`core`çš„æ–‡ä»¶å¤¹ï¼

**æ™ºèƒ½ä¸éæ™ºèƒ½ç»„ä»¶**

å°†ä½ çš„**æ™ºèƒ½ç»„ä»¶** ( `Pages`æ–‡ä»¶å¤¹)ä¸**å“‘é“ƒ** ( `Components`æ–‡ä»¶å¤¹)åˆ†å¼€æ˜¯å¾ˆé‡è¦çš„ã€‚ç®€è€Œè¨€ä¹‹:

*   æ™ºèƒ½ç»„ä»¶:å¯ä»¥è®¿é—®å•†åº—ã€è·¯ç”±å™¨ã€çª—å£å¯¹è±¡...
*   dumbs ç»„ä»¶:è·å–é“å…·ï¼Œå‘å°„äº‹ä»¶ã€‚å°±æ˜¯è¿™æ ·ï¼

è¿™ç§æ–¹æ³•çš„ä¸»è¦å¥½å¤„æ˜¯å¯é‡ç”¨æ€§ï¼Œæ›´å¥½çš„å…³æ³¨ç‚¹åˆ†ç¦»...

**åŠˆï¼ŒåŠˆï¼ŒåŠˆï¼**

å¦‚æœä½ çš„åˆ†é‡å˜å¾—å¤ªå¤§ï¼Œä¸è¦å®³ç¾:æ‹†åˆ†å®ƒï¼åœ¨ Vue.js çš„æŒ‡å—ä¸­ï¼Œ[â€œç´§è€¦åˆç»„ä»¶åâ€è§„åˆ™](https://vuejs.org/v2/style-guide/#Tightly-coupled-component-names-strongly-recommended)è¢«è®¤ä¸ºæ˜¯å¼ºçƒˆæ¨èçš„ã€‚

```
// ğŸ‘ Bad
|- TodoList.vue
|- TodoItem.vue
|- TodoButton.vue

// ğŸ‘ Good
|- CatalogList.vue
|- CatalogListItem.vue
|- CatalogListItemButton.vue 
```

Enter fullscreen mode Exit fullscreen mode

**ä¹Ÿéš”ç¦»é£æ ¼ï¼**

è®°ä½:**å…¨çƒ CSS éƒ½æ˜¯æ¶**ã€‚å°½å¯èƒ½çš„é¿å¼€ä»–ä»¬ï¼

*   `.vue` files:æ›´ç®€å•çš„æ–¹æ³•æ˜¯åœ¨ style æ ‡ç­¾ä¸­ä½¿ç”¨ scoped å±æ€§:`<styles scoped>`
*   ä¸å¤ªå–œæ¬¢`.vue`æ¡£ï¼Ÿ(å¦‚æœæ‚¨æƒ³åˆ›å»ºå¤šä¸ªå°ç»„ä»¶è€Œä¸åˆ›å»ºå‡ åä¸ªæ–‡ä»¶)ã€‚è€ƒè™‘åƒ[è¿™æ ·çš„åº“ğŸ’…vue é£æ ¼çš„ç»„ä»¶](https://github.com/styled-components/vue-styled-components)ã€‚æ ·å¼å°è£…éå¸¸æœ‰æ•ˆï¼

```
 import styled from 'vue-styled-components';

  const StyledTitle = styled.h1`
      font-size: 1.5em;
      text-align: center;
      color: palevioletred;
  `;

  <StyledTitle>Cool title</StyledTitle> 
```

Enter fullscreen mode Exit fullscreen mode

**æµ‹è¯•**

æµ‹è¯•åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„è¯é¢˜ï¼Œå€¼å¾—å†™ä¸€æ•´ç¯‡åšæ–‡ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œè®©æˆ‘ä»¬ä»¥å‰é¢çš„æ–‡ä»¶ä½“ç³»ç»“æ„ä¸ºä¾‹ï¼Œçœ‹çœ‹è¦æµ‹è¯•ä»€ä¹ˆä»¥åŠå¦‚ä½•æµ‹è¯•ã€‚

*   ç»„ä»¶:ä½ä¼˜å…ˆçº§ï¼Œå®¹æ˜“åšåˆ°ã€‚ä¸ºæ¯ä¸ªç»„ä»¶ç¼–å†™å•å…ƒæµ‹è¯•ã€‚è¿™åº”è¯¥å¾ˆå®¹æ˜“åšåˆ°ã€‚
*   é¡µæ•°:é«˜ä¼˜å…ˆçº§ï¼Œéš¾åšã€‚ä½ å¯èƒ½éœ€è¦æ¨¡ä»¿ API/æµè§ˆå™¨éƒ¨åˆ†ã€‚
*   è·¯çº¿:é€šå¸¸è™«å­ä¸åœ¨è¿™é‡Œã€‚ç•™ç»™ E2E æµ‹è¯•å§ã€‚
*   æœåŠ¡:
    *   api æ¥å£:æˆ‘ä¸ªäººä¸æµ‹è¯•è¿™éƒ¨åˆ†(90%çš„ä»£ç éƒ½æ˜¯å˜²è®½)ã€‚
    *   åŠ©æ‰‹/æ•°æ®æ ¼å¼å™¨:é«˜ä¼˜å…ˆçº§ï¼Œå®¹æ˜“åšã€‚é€šå¸¸ï¼Œåœ¨ä½ çš„åº”ç”¨ä¸­æœ€å®¹æ˜“åšçš„æµ‹è¯•ï¼
*   å•†åº—:æœ€éš¾æµ‹è¯•çš„éƒ¨åˆ†ã€‚ä½ å¯ä»¥é€šè¿‡é›†æˆæµ‹è¯•æ¥æµ‹è¯•å®ƒã€‚åˆ†åˆ«æµ‹è¯•åŠ¨ä½œã€getter å’Œåˆå§‹çŠ¶æ€æ˜¯æ²¡æœ‰ç”¨çš„ã€‚

**ğŸ’¡æ‡’æƒ°åŠ è½½ä½ çš„æ¨¡å—ï¼**

ä¸ºäº†å‡å°‘ JavaScript åŒ…ï¼Œè€ƒè™‘[å»¶è¿ŸåŠ è½½ä½ çš„æ¨¡å—](https://router.vuejs.org/guide/advanced/lazy-loading.html#grouping-components-in-the-same-chunk)ï¼

```
export default new Router({
  routes: [
    {
      path: '/catalog',
      name: 'catalog',
      component: () => import(/* webpackChunkName: "catalog" */ './modules/Catalog/views/Catalog.vue')
    },
    // ...
  ]
}) 
```

Enter fullscreen mode Exit fullscreen mode

å¦‚æœä½ å·²ç»è¿™æ ·åšäº†ï¼Œä½†ä½ ä»ç„¶è®¤ä¸ºä½ çš„åº”ç”¨ç¨‹åºå¤ªå¤§ï¼Œä½ å¯ä»¥è€ƒè™‘ä¸‹ä¸€ä¸ªæŠ€å·§ã€‚

## æç¤º 2:è€ƒè™‘å¾®å‰ç«¯

åœ¨è¿‡å»çš„å‡ å¹´é‡Œï¼Œå¾®æœåŠ¡æ¶æ„å˜å¾—éå¸¸æµè¡Œã€‚è®¸å¤šå…¬å¸å°†å…¶æ™®é€šçš„è€å¼æ•´ä½“åç«¯æ‹†åˆ†æˆè®¸å¤šåç«¯å°æœåŠ¡ã€‚

[![image with microservices](img/e5ddd1b67cae220c44920918bdb1192b.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--OqdTE472--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://raw.githubusercontent.com/maxpou/maxpou.fr/master/content/posts/2018-12-13-scaling-vue-app/backfront.png)

ä»Šå¤©ï¼Œä¼¼ä¹ä¸€äº›å…¬å¸å·²ç»å°†è¿™ç§åç«¯æ¨¡å¼å¤åˆ¶åˆ°å‰ç«¯ä¸–ç•Œã€‚æ‰¿è¯ºä¸åç«¯éå¸¸ç›¸ä¼¼:å°†å¤§å—åˆ†å‰²æˆå¤šä¸ªåº”ç”¨ç¨‹åºï¼Œæ‰©å±•å¹¶èƒ½å¤Ÿç”¨ä¸åŒçš„æŠ€æœ¯ç¼–å†™åº”ç”¨ç¨‹åºã€‚æ˜¯çš„ã€‚ä½ æ­£ç¡®åœ°è¯»äº†æœ€åä¸€å¥è¯ã€‚ä½ å¯ä»¥åœ¨ Vue é‡Œå†™æ”¯ä»˜åº”ç”¨ï¼Œåœ¨ React é‡Œå†™ç›®å½•åº”ç”¨ã€‚

å¦‚æœéœ€è¦ï¼Œä¸åŒçš„åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡æ³¨å†Œåœ¨çª—å£å¯¹è±¡ä¸Šçš„äº‹ä»¶(è§‚å¯Ÿè€…å‘å¸ƒ/è®¢é˜…)è¿›è¡Œå¯¹è¯ã€‚

[![image with micro-frontend](img/94b528245810d0175e674035170b969b.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--YVTsCGca--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://raw.githubusercontent.com/maxpou/maxpou.fr/master/content/posts/2018-12-13-scaling-vue-app/micro-frontend.png)

**âš ï¸ä½†æ˜¯æˆ‘ç»™ä½ ä¸€ä¸ªè­¦å‘Šã€‚æ²¡æœ‰çµä¸¹å¦™è¯ã€‚å½“ä½ æŠŠä¸€ä¸ªèŒƒä¾‹ç•™ç»™å¦ä¸€ä¸ªèŒƒä¾‹æ—¶ï¼Œä½ å¹¶æ²¡æœ‰æ‘†è„±é—®é¢˜ã€‚ä½ ä»£æ›¿ä»–ä»¬ã€‚**

**ğŸ‘ä¼˜ç‚¹:å®Œå…¨éš”ç¦»**

å¦‚æœåç«¯ä¹Ÿæ˜¯é¢å‘å¾®æœåŠ¡çš„ï¼Œå›¢é˜Ÿå¯ä»¥åœ¨ç­’ä»“ä¸­å·¥ä½œã€‚ä»–ä»¬ç«¯åˆ°ç«¯åœ°æ§åˆ¶ç€è‡ªå·±çš„é¢†åŸŸã€‚

**ğŸ‘ä¼˜ç‚¹:èƒ½å¤Ÿä½¿ç”¨ä¸åŒçš„æ¡†æ¶/ä¸€ä¸ªæ¡†æ¶çš„ä¸åŒç‰ˆæœ¬**

å‡è®¾è´Ÿè´£ç›®å½•çš„å›¢é˜Ÿæƒ³è¦æ›´æ–°åˆ° Vue çš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè´Ÿè´£ä»˜æ¬¾çš„å›¢é˜Ÿè¿˜æ²¡æœ‰å‡†å¤‡å¥½ã€‚ä»–ä»¬å¿…é¡»æä¾›ä¸€ä¸ªå¤§åŠŸèƒ½ä¹‹å‰ï¼Œå°†åœ¨ 3 ä¸ªæœˆå†…å‡†å¤‡å°±ç»ªã€‚å½“åº”ç”¨ç¨‹åºè¢«åˆ†æˆå¤šä¸ªå°åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä»¬æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚ä»–ä»¬å¯ä»¥ä¿®æ”¹ä¸€ä¸ªåº“æˆ–ä¸€ä¸ªæ¡†æ¶çš„ç‰ˆæœ¬ï¼Œè€Œä¸ä¼šå½±å“ä»»ä½•å…¶ä»–å›¢é˜Ÿã€‚

æ­¤å¤–ï¼Œå¦‚æœå¦ä¸€ä¸ªå›¢é˜Ÿæƒ³è¦å¼€å§‹ä¸€ä¸ªæ–°çš„å­åº”ç”¨ç¨‹åºï¼Œä»–ä»¬å¯ä»¥ä½¿ç”¨ä»–ä»¬æƒ³è¦çš„æŠ€æœ¯ï¼Œè€Œä¸ä¼šå½±å“åˆ°æ¯ä¸ªäººã€‚

**ğŸ‘ä¼˜ç‚¹:ç‹¬ç«‹éƒ¨ç½²**

è¿™å¤§æ¦‚æ˜¯æœ€å¤§çš„ä¼˜åŠ¿ã€‚â€œå›¢é˜Ÿç›®å½•â€å¯ä»¥ç‹¬ç«‹äºâ€œå›¢é˜Ÿä»˜è´¹â€å·¥ä½œå’Œå‘å¸ƒã€‚

**ğŸ¤”ç¼ºç‚¹:è®¾è®¡ç³»ç»Ÿé›†æˆ**

å¦‚æœä½ æœ‰ä¸€ä¸ªç”¨ Vue ç¼–å†™çš„è®¾è®¡ç³»ç»Ÿï¼Œä½ å¯èƒ½ä¸å¸Œæœ›ä»…ä»…å› ä¸ºä¸€ä¸ªå›¢é˜Ÿæƒ³è¦è¯•éªŒä¸€äº›ä¸œè¥¿è€Œåœ¨ React ä¸­é‡å†™å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½å¯¹ [Web ç»„ä»¶](https://developer.mozilla.org/en-US/docs/Web/Web_Components)æ„Ÿå…´è¶£ã€‚ä»æˆ‘çš„ç»éªŒæ¥çœ‹ï¼Œå¾ˆæ£’ã€‚ä½†å½“ä½ åšäº†ä¸€äº›ï¼Œé‚£å°±æ˜¯å¦ä¸€å›äº‹äº†ã€‚å¦å¤–ï¼ŒIE11 ä¸æ”¯æŒå®ƒ(éœ€è¦å¤šå¡«å……)ã€‚

ğŸ’¡æç¤º:æ‚¨å¯ä»¥ç”¨`vue-cli`å’Œè¿™ä¸ªå‘½ä»¤
æ¥[ç”Ÿæˆ Web ç»„ä»¶](https://cli.vuejs.org/guide/build-targets.html#web-component)

```
vue-cli-service build --target wc --name foo 'src/components/*.vue' 
```

Enter fullscreen mode Exit fullscreen mode

**ğŸ¤”ç¼ºç‚¹:ç»„å»ºå›¢é˜Ÿå¾ˆéš¾**

å¦‚æœä½ è¿˜åœ¨ä¸€ä¸ªæ™®é€šçš„å¤è€çš„å·¨çŸ³ä¸Šå·¥ä½œï¼Œé‚£å°†æ˜¯ä¸€ä¸ªéå¸¸æ¼«é•¿çš„æ—…ç¨‹ã€‚å¦å¤–ï¼Œå¦‚æœåç«¯ä¸åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä½ å°±ä¸èƒ½åœ¨å®Œå…¨å­¤ç«‹çš„å­¤å²›ä¸­å·¥ä½œã€‚ä¹Ÿè®¸å‰ç«¯å›¢é˜Ÿä¼šç‹¬ç«‹ï¼Œä½†åç«¯ä¸ä¼šã€‚

**ğŸ¤”ç¼ºç‚¹:æ€§èƒ½**

å½“ä½ æ¨¡å—åŒ–ä½ çš„åº”ç”¨æ—¶ï¼Œæ¯ä¸ªæ¨¡å—å¯ä»¥è¢«åˆ†å‰²æˆ[ä¸ªå—(é€šè¿‡åƒ WebPack 4 è¿™æ ·çš„å·¥å…·)](https://medium.com/webpack/webpack-4-code-splitting-chunk-graph-and-the-splitchunks-optimization-be739a861366)ã€‚æ‚¨åªéœ€åŠ è½½ä¸€æ¬¡ä¸»è¦ä¾èµ–é¡¹ï¼Œç„¶åå½“æ‚¨åŠ è½½æ”¯ä»˜é¡µé¢æ—¶ï¼Œå°±ä¼šåŠ è½½ä»£ç ã€‚å¦‚æœæ‚¨å°†ç°æœ‰æ¨¡å—è½¬æ¢ä¸ºåˆ†ç¦»/éš”ç¦»çš„åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆæ¯ä¸ªåº”ç”¨ç¨‹åºä¸Šçš„ä¸»æ¡†æ¶å°†åŠ è½½åˆ°æ¯ä¸ªæ¨¡å—ä¸Šã€‚

**ğŸ¤”ç¼ºç‚¹:è·¯ç”±**

è¦ä»æ¨¡å— A è½¬åˆ°æ¨¡å— Bï¼Œæ¨¡å— A éœ€è¦çŸ¥é“å®Œæ•´çš„è·¯å¾„ã€‚å¸¸è§çš„æ˜¯å¯¹ URI è¿›è¡Œç¡¬ç¼–ç ã€‚æ¯•ç«Ÿ: *[â€œé…· URIs ä¸æ”¹â€(W3C)](https://www.w3.org/Provider/Style/URI)*

> *âš ï¸é¿å…ç‚’ä½œé©±ä½¿ Developmentâ„¢ï¸.ä½ å¯èƒ½è¿˜ä¸éœ€è¦è¿™ä¸ªæ¶æ„ã€‚åªæœ‰å½“ä½ è®¤ä¸ºä½ å·²ç»è¾¾åˆ°æ¨¡å—åŒ–çš„æé™æ—¶ï¼Œæ‰è€ƒè™‘å¾®å‰ç«¯æ¶æ„ï¼*

## ç§˜è¯€ 3:å–„å¾…ä½ çš„å•†åº—(Vuex)

åŸºäºç»„ä»¶çš„åº”ç”¨ç¨‹åºçš„æœ€å¤§é—®é¢˜ä¹‹ä¸€æ˜¯å­˜å‚¨ã€‚ä¹ä¸€çœ‹ï¼Œå¾ˆæƒŠè‰³ã€‚æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ° vue å·¥å…·æ—¶ï¼Œå®ƒå®Œå…¨è®©æˆ‘å¤§åƒä¸€æƒŠã€‚æˆ‘å¼€å§‹åˆ°å¤„ç”¨ï¼ç„¶åï¼Œé—®é¢˜å¼€å§‹å‡ºç°ã€‚

*   é¡µé¢åŠ è½½æ—¶çš„ 20 ä¸ªçªå˜(ä½¿æ—¶é—´æ—…è¡Œä¸å¯èƒ½)ï¼›
*   æ‰“å¼€ä¸€é¡µï¼Œåšç‚¹ä»€ä¹ˆï¼Œå»å¦ä¸€é¡µï¼Œç„¶åå›æ¥ã€‚è¯¥çŠ¶æ€æœªè¢«é‡æ–°åˆå§‹åŒ–ï¼›
*   è¿‡åˆ†å¤¸å¼ çš„ç‰¹å¾ã€‚ä½ éœ€è¦ä¸ºä¸€åˆ‡åˆ›é€ çªå˜ã€‚

è¿™é‡Œæœ‰ä¸€äº›ä¿æŒä½ çš„å•†åº—å¯ç»´æŠ¤æ€§çš„å°æŠ€å·§ã€‚

**ä¸è¦è¿‡åº¦ä½¿ç”¨å•†åº—**

å¯¹è¿™å®¶å•†åº—æœ‰å¾ˆå¤šè¯¯è§£ã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå¾ˆå¤šäººéƒ½è®¤ä¸º:â€œVue æ˜¯ç®¡ç† UIï¼ŒVuex æ˜¯ç®¡ç†åº”ç”¨çŠ¶æ€â€ã€‚å¯¹æ­¤æˆ‘åšå†³ä¸åŒæ„ã€‚æ ¹æ®æˆ‘çš„ç»éªŒï¼Œç§»åŠ¨å•†åº—ä¸­çš„æ‰€æœ‰é€»è¾‘ä¼šå¯¼è‡´å¼€é”€å’Œä¸å¿…è¦çš„å¤æ‚åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œä»£ç è¶Šå¤šï¼Œbug å°±è¶Šå¤šã€‚

é€šå¸¸ï¼Œå½“æˆ‘ä»¬é‡åˆ°è¿™æ ·çš„å­˜åœ¨ä¸»ä¹‰é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬ä¼šæ±‚åŠ©äºåˆ›é€ è€…ã€‚

> è¿™ä¸æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œä¹Ÿä¸å»ºè®®å°†æ‚¨çš„æ‰€æœ‰çŠ¶æ€æ”¾åœ¨ Vuex å•†åº—ä¸­ã€‚
> 
> â€”â€”[å°¤é›¨æºª(Vue.js çš„åˆ›å»ºè€…)](https://github.com/vuejs/vuex/issues/236#issuecomment-231754241)

æˆ‘è¿˜å¼•ç”¨äº†ä¸¹Â·é˜¿å¸ƒæ‹‰è«å¤«çš„ä¸€å¥è¯ï¼Œä¸»è¦æ˜¯å› ä¸º Vuex çš„éƒ¨åˆ†çµæ„Ÿæ¥è‡ª Reduxã€‚æ­¤å¤–ï¼Œé¢å‘ç»„ä»¶åº”ç”¨ç¨‹åºæœ‰è®¸å¤šæœ‰è¶£çš„åœ°æ–¹ã€‚

> å¯¹çŸ­æš‚çš„çŠ¶æ€ä½¿ç”¨ Reactï¼Œè¿™ç§çŠ¶æ€å¯¹åº”ç”¨ç¨‹åºæ²¡æœ‰å…¨å±€å½±å“ï¼Œå¹¶ä¸”ä¸ä¼šä»¥å¤æ‚çš„æ–¹å¼å˜å¼‚ã€‚ä¾‹å¦‚ï¼ŒæŸä¸ª UI å…ƒç´ ä¸­çš„åˆ‡æ¢ã€è¡¨å•è¾“å…¥çŠ¶æ€ã€‚å¯¹å…¨å±€é‡è¦çš„æˆ–ä»¥å¤æ‚æ–¹å¼å˜åŒ–çš„çŠ¶æ€ä½¿ç”¨ Reduxã€‚ä¾‹å¦‚ï¼Œç¼“å­˜çš„ç”¨æˆ·æˆ–å¸–å­è‰ç¨¿ã€‚
> 
> â€”â€”[ä¸¹Â·é˜¿å¸ƒæ‹‰è«å¤«(redux çš„åˆ›é€ è€…ï¼Œç›¸å½“äº Vuex ä½†ä¸æ˜¯ React)](https://github.com/reduxjs/redux/issues/1287#issuecomment-175351978)

å½“æˆ‘é—®è‡ªå·±:â€œæˆ‘è¯¥ä¸è¯¥ç”¨è¿™ä¸ªå•†åº—ï¼Ÿâ€ï¼Œæˆ‘é€šå¸¸åœ¨è„‘å­é‡Œåšè¿™æ ·çš„äº‹æƒ…:
[![should I store this data in vuex (flow chart)](img/0888718e8d2b20c2f90c8175758d1bf8.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--8FLfEUjr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://raw.githubusercontent.com/maxpou/maxpou.fr/master/content/posts/2018-12-13-scaling-vue-app/vuex-or-not.png)

æ¢å¥è¯è¯´ï¼Œä»¥ä¸‹æ˜¯å‡ ä¸ªä¾‹å­:

*   å­˜å‚¨â€œå½“å‰ç”¨æˆ·ï¼Œi18n é¦–é€‰é¡¹â€â†’æ˜¯ã€‚
*   â€œé€šè¿‡ API è°ƒç”¨åŠ è½½æ•°æ®â€â†’å°ä¸‘ï¼ä¸è¦å¤ªå°´å°¬ã€‚æˆ‘é€šå¸¸æŠŠå®ƒä¿å­˜åœ¨ç»„ä»¶çš„çŠ¶æ€ä¸­ã€‚æˆ‘åŒæ„ï¼Œæœ‰æ—¶å€™ï¼Œä¸åº”ç”¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†å…±äº«è¿™äº›æ•°æ®æ˜¯æœ‰æ„ä¹‰çš„ã€‚
*   ä¸ç¼–è¾‘/åˆ›å»ºè¡¨å•ç›¸å…³çš„çŠ¶æ€â†’å¦
*   â€œåˆ‡æ¢ç”¨æˆ·ç•Œé¢å…ƒç´ â€â†’å¦
*   â€œç®¡ç†ä¸€ä¸ª`isLoading`çŠ¶æ€â€â†’å¦

æˆ‘ä¸æ˜¯è¯´ä½ ä¸åº”è¯¥ä½¿ç”¨å•†åº—ã€‚çœåƒä¿­ç”¨å°±å¥½ï¼

**ä½¿ç”¨å‘½åç©ºé—´å•†åº—(ç”¨äºæ¨¡å—)**

```
const store = new Vuex.Store({
  modules: {
    catalog: {
      namespaced: true,
      state,
      getters: {
        getFeaturedProducts () { ... } // -> getters['catalog/getFeaturedProducts']
      },
    }
  }
}) 
```

Enter fullscreen mode Exit fullscreen mode

ä¸è¦å†™ç®€å•çš„ gettersã€‚

ä¸ºäº†ç›¸å…³ï¼Œgetter å¿…é¡»åŒ…å«ä¸€äº›é€»è¾‘ã€‚å¦‚æœæ‚¨æƒ³è®¿é—®å­å±æ€§ï¼Œè¯·é€‰æ‹©`mapState`ã€‚

```
getters: {
  // ğŸ¤” non useful getter
  getProducts: state => state.products,
  // ğŸ‘ useful getter
  getFeaturedProducts: state => state.products.filter(p => p.isFeatured),
} 
```

Enter fullscreen mode Exit fullscreen mode

æœ€åˆå‘å¸ƒäº [maxpou.fr](https://www.maxpou.fr/3-tips-scaling-vue-application) ã€‚