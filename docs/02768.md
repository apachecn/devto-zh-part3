# å¯Œæœ‰è¯—æ„çš„ Python

> åŸæ–‡:[https://dev.to/dbanty/productive-python-with-poetry-67h](https://dev.to/dbanty/productive-python-with-poetry-67h)

> è¿™æ˜¯è§£é‡Šç®¡ç† Python ä¾èµ–å…³ç³»çš„ä¸åŒé€‰é¡¹çš„ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†ã€‚ç¡®ä¿ä½ å·²ç»é˜…è¯»äº†ä¹‹å‰çš„æ–‡ç« ï¼Œè¿™ç¯‡æ–‡ç« å°†åŸºäºè¿™äº›ä¿¡æ¯ã€‚

# TLï¼›é€Ÿåº¦ä¸‰è§’å½¢å®šä½æ³•(dead reckoning)

è¯—æ­Œé€šè¿‡æä¾›æ›´å¥½çš„å¼€å‘ä½“éªŒè§£å†³äº†æˆ‘å¯¹ pipenv å’Œ T2 é¦™è‰æ ˆçš„è®¸å¤šæŠ±æ€¨ã€‚ä¸åˆ©çš„ä¸€é¢æ˜¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ›´æ–°çš„å·¥å…·ï¼Œä»ç„¶åœ¨å¼€å‘ä¸€äº›é‡è¦çš„åŠŸèƒ½ï¼Œè€Œä¸”å®ƒæ²¡æœ‰å¾—åˆ° [Python åŒ…ç®¡ç†æœºæ„(PyPA)](https://www.pypa.io/en/latest/) çš„æ”¯æŒï¼Œè¿™å¯¼è‡´äº†ä¸€äº›å†²çªã€‚

# [](#components)ç»„ä»¶

*   [è¯—æ­Œ](https://poetry.eustace.io/):ç”¨äºç®¡ç†ä¾èµ–å…³ç³»ã€è™šæ‹Ÿç¯å¢ƒã€æ„å»ºå’Œå‘å¸ƒä½ çš„é¡¹ç›®ã€‚
*   pyproject.toml :åŒ…å«æ‰€æœ‰çš„é¡¹ç›®å…ƒæ•°æ®
*   poetry.lock:ä¸€ä¸ªç”¨äºåŒæ­¥ç¯å¢ƒé—´ä¾èµ–å…³ç³»çš„ç²¾ç¡®ç‰ˆæœ¬çš„æ–‡ä»¶
*   [pip](https://pypi.org/project/pip/) :ç”¨äºä¸€äº›é…ç”µæƒ…å†µ

# [](#development)å‘å±•

## TLï¼›é€Ÿåº¦ä¸‰è§’å½¢å®šä½æ³•(dead reckoning)

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¯—æ­Œæä¾›äº†æ‰€è®¨è®ºçš„ä¸‰ç§å †æ ˆä¸­æœ€å¥½çš„å¼€å‘äººå‘˜ä½“éªŒã€‚

## [](#defining-requirements)å®šä¹‰éœ€æ±‚

*   ğŸ‘å¼€å‘éœ€æ±‚:å°±åƒ Pipenv ä¸€æ ·ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­å£°æ˜å¼€å‘äººå‘˜çš„ä¾èµ–å…³ç³»ï¼Œå°±åƒå£°æ˜å…¶ä»–ä¾èµ–å…³ç³»ä¸€æ ·ã€‚
*   ğŸ˜å†ç°æ€§:Python åŒ…çš„æœ€æ˜æ™ºçš„ç®¡ç†ã€‚è¯—æ­Œå°†å®‰è£…ä»ä½ çš„é”æ–‡ä»¶ï¼Œå®ƒåªæ›´æ–°ä½ çš„ä¾èµ–ï¼Œå½“ä½ å‘Šè¯‰å®ƒã€‚
*   âœ…å¢åŠ æ–°çš„è½¯ä»¶åŒ…:è¿™æ˜¯å®Œå…¨åº”è¯¥åšçš„ã€‚å¦‚æœä½ è¿™æ ·åšäº†`poetry add somepackage`ï¼Œå®ƒå°†è·å¾— somepackage çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶æ ¹æ®[è¯­ä¹‰ç‰ˆæœ¬](https://semver.org/)å°†çº¦æŸè®¾ç½®ä¸ºå…¼å®¹ã€‚å› æ­¤ï¼Œå¦‚æœæœ€æ–°ç‰ˆæœ¬æ˜¯ 1.4.8ï¼Œæ‚¨çš„çº¦æŸæ˜¯^1.4ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥æ›´æ–°åˆ° 1.4.9 æˆ– 1.5ï¼Œä½†ä¸èƒ½æ›´æ–°åˆ° 2.0ã€‚
*   ğŸ˜Šæ›¿ä»£æ¥æº:ç”šè‡³æ¯” Pipenv æ›´å®¹æ˜“ã€‚å°†æ‚¨çš„æºä»£ç æ·»åŠ åˆ° pyproject.tomlï¼Œå¹¶ä½¿ç”¨`poetry config`è®¾ç½®æ‚¨çš„å‡­è¯ã€‚è¿™æ¯”è¯•å›¾è®©ç¯å¢ƒå˜é‡è·¨å¹³å°å·¥ä½œè¦å®¹æ˜“å¾—å¤šã€‚

## [](#virtual-environments)è™šæ‹Ÿç¯å¢ƒ

*   ğŸ˜Œè®¾ç½®:è½»è€Œæ˜“ä¸¾ã€‚å¦‚æœè™šæ‹Ÿç¯å¢ƒä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œæ¯” Pipenv å¿«å¾—å¤šã€‚ä¸€ä¸ªå°å°çš„æŠ˜è¡·æ˜¯ï¼Œpoem æ”¯æŒä¸€ä¸ªé¡¹ç›®çš„å¤šä¸ª Python ç‰ˆæœ¬ï¼Œè¿™æ„å‘³ç€æ‚¨å¿…é¡»æŒ‡å®šåœ¨ä»»ä½•ç»™å®šçš„æ—¶é—´ç‚¹ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬ã€‚æ¨èä½¿ç”¨ [pyenv](https://github.com/pyenv/pyenv) on -nix ç³»ç»Ÿã€‚æˆ‘å‘ç° Windows çš„å†…ç½® [py](https://www.python.org/dev/peps/pep-0397/) å¯åŠ¨å™¨ä¹Ÿå¾ˆå¥½ç”¨ã€‚
*   ğŸ™‚ç”¨æ³•:å‡ ä¹å’Œè¯—æ­Œä¸€æ ·çš„æ•…äº‹ï¼Œè™½ç„¶æœ‰æ›´å¤šçš„é“ƒé“›å’Œå“¨å­ã€‚
    *   å®‰è£…è¦æ±‚:`poetry install`
    *   è·‘æ­¥:`poetry run python [your script]`
    *   æ¿€æ´»ç¯å¢ƒ:`poetry shell`(åŒæ—¶äº§ç”Ÿä¸€ä¸ªæ–°çš„å¤–å£³)
    *   åœç”¨:`exit`

# [](#distribution)åˆ†å¸ƒ

## TLï¼›é€Ÿåº¦ä¸‰è§’å½¢å®šä½æ³•(dead reckoning)

è¯—æ­Œå‡ ä¹ä½¿ä¸€åˆ‡éƒ½æ¯” Pipenv æ›´å¥½ã€‚å¦‚æœä½ åšçš„æ˜¯æºä»£ç æˆ–è€…é¢„æ„å»ºçš„å‘è¡Œç‰ˆï¼Œä½ çš„æƒ…å†µä¼šç¨å¾®å·®ä¸€ç‚¹ã€‚

## [](#build)æ‰“é€ 

*   ğŸ¥°å®šä¹‰:æ‚¨çš„ [pyproject.toml](https://poetry.eustace.io/docs/pyproject/) å®šä¹‰äº†æ‚¨çš„ä¾èµ–é¡¹ï¼Œä¹Ÿå®šä¹‰äº†æ‚¨çš„é¡¹ç›®çš„æ‰€æœ‰å…¶ä»–å…ƒæ•°æ®ï¼æ²¡æœ‰ setup.py äº†ã€‚
*   ğŸ˜å»ºç­‘:`poetry build`ã€‚ä¸åˆ©æ–¹é¢ï¼Ÿåªæ”¯æŒçº¯ Python è½®å­ï¼Œè¿˜æ²¡æœ‰ C ä»£ç ã€‚

## [](#deploy)éƒ¨ç½²

*   `poetry publish`çš„ä¸€ä¸ªè§’
*   ğŸ‘Œâ€æºä»£ç å‘è¡Œç‰ˆ:ä½ å¿…é¡»åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šå®‰è£…è¯—æ­Œï¼Œä½†å®ƒçš„å¼€é”€æ¯” Pipenv å°‘å¾—å¤šï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºå®ƒæ˜¯å€¼å¾—çš„ã€‚
*   ğŸ˜¥é¢„æ„å»ºçš„ä¾èµ–:è¯—æ­Œçš„å‘å¸ƒç‰ˆæœ¬æ²¡æœ‰åŠæ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚æˆ‘ä»Šå¤©çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨è¯—æ­Œçš„ Alpha ç‰ˆæœ¬(æˆ‘å¯¹æ­¤æ²¡æœ‰å¼‚è®®),å¹¶å¯¼å‡ºä¸€ä¸ª requirements.txt æ¥ä¸ [pip](https://pypi.org/project/pip/) ä¸€èµ·ä½¿ç”¨

# [](#conclusion)ç»“è®º

è¯—æ­Œå¤ªæ£’äº†ï¼å®ƒè¿˜å¾ˆå¹´è½»(ä»åœ¨å‘ 1.0 è¿ˆè¿›)ï¼Œä½†å·²ç»æ¯”ç°æœ‰çš„å·¥å…·è¦å¥½äº†ã€‚è€ƒè™‘åˆ°å®ƒçš„å‘å±•æ–¹å‘ã€æ”¯æŒå®ƒçš„ç¤¾åŒºä»¥åŠå‹å¥½å’Œæ”¯æŒçš„ç»´æŠ¤è€…ï¼Œæˆ‘è®¤ä¸ºå®ƒåº”è¯¥æ˜¯æ¯ä¸ªäººé€‰æ‹©çš„ Python ä¾èµ–ç®¡ç†å·¥å…·ã€‚

è¿™ä¸ªç³»åˆ—å¤§æ¦‚å°±åˆ°æ­¤ä¸ºæ­¢äº†ã€‚å½“ç„¶ï¼Œè¿™ä¸ªè¯é¢˜è¿˜æœ‰æ›´å¤šçš„å†…å®¹ï¼Œæ‰€ä»¥å¦‚æœæˆ‘é”™è¿‡äº†ä»€ä¹ˆæˆ–è€…ä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨ä¸‹é¢ç•™è¨€ï¼

# [](#notable-mentions)å€¼å¾—æ³¨æ„çš„æåŠ

è¿™é‡Œæœ‰ä¸€äº›æˆ‘çŸ¥é“çš„å·¥å…·ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰è¶³å¤Ÿçš„ç»éªŒæ¥å¯¹å®ƒä»¬è¿›è¡Œå…¨é¢çš„å›é¡¾ã€‚å¦‚æœä½ è®¤ä¸ºå…¶ä¸­ä¸€ä¸ªå€¼å¾—èŠ±æ—¶é—´æ¥å†™è¿™ä¸ªç³»åˆ—çš„å¦ä¸€éƒ¨åˆ†ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚

*   ## ![GitHub logo](../Images/75095a8afc1e0f207cda715962e75c8d.png)[pypa](https://github.com/pypa)/[å­µåŒ–](https://github.com/pypa/hatch)

    ### ç°ä»£ã€å¯æ‰©å±•çš„è®¡ç®—æœºç¼–ç¨‹è¯­è¨€é¡¹ç›®ç®¡ç†

    <article class="markdown-body entry-content container-lg" itemprop="text">

    # èˆ±å£

    | CI/CD | [![CI - Test](../Images/0079394ff921bd6206baed121c3a5bbc.png)](https://github.com/pypa/hatch/actions/workflows/test.yml)[![CD - Build Hatch](../Images/7631e18d5f94415f61fae3dcfda2c163.png)](https://github.com/pypa/hatch/actions/workflows/build-hatch.yml)[![CD - Build Hatchling](../Images/b1d92ec44dc06dbf837a1c897be7da59.png)](https://github.com/pypa/hatch/actions/workflows/build-hatchling.yml) |
    | æ–‡ä»¶(æ–‡æ¡£çš„ç®€å†™) | [![Docs - Release](../Images/f06319256589d099f8e765f4b7003c31.png)](https://github.com/pypa/hatch/actions/workflows/docs-release.yml)[![Docs - Dev](../Images/81bab60b55a1c4ee5e0fa62221220274.png)](https://github.com/pypa/hatch/actions/workflows/docs-dev.yml) |
    | åŒ…è£¹ | [![PyPI - Version](../Images/98def2293f466fc633c63590ea532541.png)](https://pypi.org/project/hatch/)[![PyPI - Downloads](../Images/67841e43920ce7616915623011416c91.png)](https://pypi.org/project/hatch/)[![PyPI - Python Version](../Images/b854fef559e9bffb8a88284d0b1c024d.png)](https://pypi.org/project/hatch/) |
    | è‡ªæŒ‡çš„ | [![code style - black](../Images/1abbac1bb267dc041dcfa091baa4840f.png)](https://github.com/psf/black)[![types - Mypy](../Images/a4881b83931218e76f042448dddb2d89.png)](https://github.com/python/mypy)[![imports - isort](../Images/d9de69185ef0691d3ffc2df9120715e0.png)](https://github.com/pycqa/isort)[![License - MIT](../Images/9f68c430692e7660de8562b7179e0a59.png)](https://spdx.org/licenses/)[![GitHub Sponsors](../Images/145c35168bbe276dc6172965b09d5833.png)](https://github.com/sponsors/ofek) |

    * * *

    å­µåŒ–æ˜¯ä¸€ä¸ªç°ä»£çš„ã€å¯æ‰©å±•çš„è®¡ç®—æœºç¼–ç¨‹è¯­è¨€é¡¹ç›®ç®¡ç†å™¨. .

    ## ç‰¹å¾

    *   æ ‡å‡†åŒ–çš„[æ„å»ºç³»ç»Ÿ](https://hatch.pypa.io/latest/build/#packaging-ecosystem)é»˜è®¤æƒ…å†µä¸‹å¯é‡å¤æ„å»º
    *   å¥å£®çš„[ç¯å¢ƒç®¡ç†](https://hatch.pypa.io/latest/environment/)æ”¯æŒå®šåˆ¶ è„šæœ¬
    *   è½»æ¾[å‘å¸ƒ](https://hatch.pypa.io/latest/publish/)åˆ° PyPI æˆ–å…¶ä»–æ¥æº
    *   [ç‰ˆæœ¬](https://hatch.pypa.io/latest/version/)ç®¡ç†
    *   å¯é…ç½®[é¡¹ç›®ç”Ÿæˆ](https://hatch.pypa.io/latest/config/project-templates/)å¸¦æœ‰ sane é»˜è®¤å€¼
    *   å“åº”è¿…é€Ÿ [CLI](https://hatch.pypa.io/latest/cli/about/) ï¼Œæ¯”åŒç­‰å·¥å…·

    ## å¿« 2-3 å€è¯æ˜æ–‡ä»¶

    [æ–‡æ¡£](https://hatch.pypa.io/)ç”± MkDocs çš„[ç´ æåˆ¶ä½œ,ç”±](https://github.com/squidfunk/mkdocs-material) [GitHub é¡µé¢](https://docs.github.com/en/pages)æ‰˜ç®¡

    ## è®¸å¯è¯

    å½±çº¿æ˜¯æ ¹æ®[éº»çœç†å·¥å­¦é™¢](https://spdx.org/licenses/MIT.html)è®¸å¯è¯çš„æ¡æ¬¾åˆ†å‘çš„

    </article>

    [æŸ¥çœ‹ GitHub ä¸Šçš„](https://github.com/pypa/hatch)

*   ## 
    ![GitHub logo](../Images/75095a8afc1e0f207cda715962e75c8d.png)
     [ã€å¾·ä½©å°”ã€‘](https://github.com/dephell) / [å¾·ä½©å°”](https://github.com/dephell/dephell) 

    ### 
    ğŸ“¦ ğŸ”¥è®¡ç®—æœºç¼–ç¨‹è¯­è¨€é¡¹ç›®ç®¡ç†ã€‚ç®¡ç†è½¯ä»¶åŒ…ï¼šæ ¼å¼ä¹‹é—´çš„è½¬æ¢,é”å®š,å®‰è£…,è§£å†³,éš”ç¦»,æµ‹è¯•,å»ºç«‹å›¾è¡¨,æ˜¾ç¤ºè¿‡æœŸ,å®¡è®¡ã€‚ç®¡ç† venvsï¼Œæ„å»ºåŒ…,ä¿®æ”¹ç‰ˆæœ¬

    <article class="markdown-body entry-content container-lg" itemprop="text">

    # é¡¹ç›®å·²å­˜æ¡£

    ç¦å…‹æ–¯:[https://github.com/orsinium/forks](https://github.com/orsinium/forks)

    * * *

    # [![DepHell](../Images/fe97675c5f345e081d21bc90a5b4132b.png)](https://github.com/dephell/dephell./assets/logo.png)[](https://github.com/dephell/dephell./assets/logo.png)

    [](https://github.com/dephell/dephell./assets/logo.png)[![pypi](../Images/a9c39d20003e0dead59ebbb8958250e7.png)](https://pypi.python.org/pypi/dephell/)[![MIT License](../Images/84dcfbee41151652f173d1b2bebd0903.png)](https://github.com/dephell/dephell/blob/master/LICENSE)[![Travis CI](../Images/63a6857a76e97e01a692ac8db2fb3ad4.png)](https://travis-ci.org/dephell/dephell)

    **å¾·è²å°”æ™®æ–¯** -Python çš„é¡¹ç›®ç®¡ç†. .

    ä¸ºä»€ä¹ˆå®ƒä¼˜äºæ‰€æœ‰å…¶ä»–å·¥å…·:

    1.  **æ ¼å¼ä¸å¯çŸ¥**ã€‚ä½ å¯ä»¥ç”¨ä½ å–œæ¬¢çš„æ ¼å¼ä½¿ç”¨ de hell:setup . pyï¼Œrequirements.txtï¼ŒPipfileï¼Œpoemã€‚å¾·è²å°”æ”¯æŒä»–ä»¬æ‰€æœ‰äººï¼Œç”šè‡³æ›´å¤šã€‚
    2.  **åœ¨ä»»ä½•é¡¹ç›®ä¸Šä½¿ç”¨è‡ªå·±å–œæ¬¢çš„å·¥å…·**ã€‚æƒ³å®‰è£…ä¸€ä¸ªåŸºäºè¯—æ­Œçš„é¡¹ç›®ï¼Œä½†ä¸å–œæ¬¢è¯—æ­Œï¼Ÿåªéœ€å‘Šè¯‰ DepHell å°†é¡¹ç›®çš„å…ƒä¿¡æ¯è½¬æ¢æˆ setup.pyï¼Œç”¨ pip å®‰è£…å³å¯ã€‚æˆ–è€…ç›´æ¥ä½¿ç”¨ DepHell çš„é¡¹ç›®ï¼Œå› ä¸º DepHell å¯ä»¥åšä½ é€šå¸¸æƒ³ç”¨åŒ…åšçš„æ‰€æœ‰äº‹æƒ…ã€‚
    3.  **DepHell å¹¶ä¸è¯•å›¾å–ä»£ä½ å–œæ¬¢çš„å·¥å…·**ã€‚å¦‚æœä½ ä½¿ç”¨è¯—æ­Œï¼Œä½ å¿…é¡»ä½¿ç”¨è¯—æ­Œçš„æ–‡ä»¶æ ¼å¼å’Œå‘½ä»¤ã€‚ç„¶è€Œï¼ŒDepHell å¯ä»¥ä¸ä»»ä½•å…¶ä»–å·¥å…·ç»“åˆï¼Œç”šè‡³å¯ä»¥é€šè¿‡è½¬æ¢æ ¼å¼å°†æ‰€æœ‰è¿™äº›å·¥å…·ç»“åˆåœ¨ä¸€èµ·ã€‚æ‚¨å¯ä»¥åœ¨ GitHub

    </article>

    ä¸Šä½¿ç”¨[è§†å›¾](https://github.com/dephell/dephell)