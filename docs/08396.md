# å¦‚ä½•ä½¿ç”¨ Netlifyã€Twilio å’Œæ— æœåŠ¡å™¨åŠŸèƒ½ä»é™æ€ç«™ç‚¹å‘é€æ–‡æœ¬æ¶ˆæ¯

> åŸæ–‡:[https://dev . to/twilio/how-to-send-text-messages-from-your-static-site-using-netlify-twilio-and-server less-functions-24ci](https://dev.to/twilio/how-to-send-text-messages-from-your-static-site-using-netlify-twilio-and-serverless-functions-24ci)

ä½œä¸ºä¸€åå‰ç«¯å¼€å‘äººå‘˜ï¼Œè¿™æ˜¯ä»¤äººå…´å¥‹çš„æ—¶åˆ»ã€‚éšç€æ— æœåŠ¡å™¨åŠŸèƒ½ç­‰ç°ä»£æŠ€æœ¯çš„å…´èµ·ï¼Œ[å‰ç«¯å·¥ç¨‹å¸ˆå¯ä»¥åšé€šå¸¸åªæœ‰åç«¯å·¥ç¨‹å¸ˆæ‰èƒ½åšçš„äº‹æƒ…](https://thepowerofserverless.info/)ã€‚è¿™éœ€è¦éƒ¨ç½²å¯æ‰©å±•çš„ç«™ç‚¹ï¼Œ[å‘é€ç”µå­é‚®ä»¶](https://sendgrid.com/)ï¼Œæˆ–è€…åˆ›å»º HTTP ç«¯ç‚¹ã€‚ç”±äºæ–°æœåŠ¡æä¾›å•†å’Œæ— æ•° API çš„åŠ›é‡ï¼Œæ„å»ºé«˜æ€§èƒ½çš„åº”ç”¨ç¨‹åºå·²ç»å˜æˆäº†ä¸€ä¸ªè¿æ¥ç‚¹çš„æ¸¸æˆï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹æ„å»ºä¸€åˆ‡ã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³åˆ†äº«å¦‚ä½•åœ¨ [Netlify](https://www.netlify.com) ä¸Šåˆ›å»ºå’Œéƒ¨ç½²ä¸€ä¸ªå¯ä¼¸ç¼©çš„é™æ€ç«™ç‚¹ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨æ— æœåŠ¡å™¨åŠŸèƒ½é€šè¿‡ [Twilio](https://www.twilio.com/) å‘é€æ–‡æœ¬æ¶ˆæ¯ã€‚

[![Screenshot of 8-bit-revolution.netlify.com](../Images/c124a8d869465603d84186f0c59b685d.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--U1FJhZ-C--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/TIbRw5-tAMpeoQhNnOaiCb3RHPqsqXxK1eEDbHS4riHNe3.width-800.jpg)

ä½ å¯ä»¥åœ¨[8-bit-revolution.netlify.com](https://8-bit-revolution.netlify.com/)ä¸Šçœ‹åˆ°æœ€ç»ˆç»“æœã€‚ä½ å¯ä»¥å»é‚£é‡Œï¼Œé€šè¿‡çŸ­ä¿¡å‘Šè¯‰æˆ‘ä½ æœ‰å¤šçˆ±é‚£ä¸ªå¥½çš„è€ 8 ä½é£æ ¼ã€‚å¦‚æœä½ æƒ³å»ºç«‹ä¸€ä¸ªç±»ä¼¼â€œ8 ä½é©å‘½â€çš„ç½‘ç«™ï¼Œä½ å¯ä»¥çœ‹çœ‹[é¡¹ç›®çš„è‡ªè¿°](https://github.com/stefanjudis/8-bit-revolution)ã€‚å®ƒåŒ…æ‹¬ä¸€ä¸ªä¸€é”®å¼å®‰è£…æŒ‰é’®ï¼Œä½ å¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ªçŸ­ä¿¡å‘é€ç½‘ç«™ã€‚åœ¨è®¾ç½®ä¸­ï¼Œæ‚¨å¯ä»¥é…ç½®æ”¶ä»¶äººçš„ç”µè¯å·ç å’Œæ‚¨è¦å‘é€çš„æ–‡æœ¬ã€‚

* * *

å¦‚æœä½ æƒ³ç»§ç»­ä¸‹å»ï¼Œæƒ³äº†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä½ éœ€è¦åšçš„æ˜¯:

*   ä¸€ä¸ªè´¦æˆ·
*   å‡€æ”¶ç›Šè´¦æˆ·
*   GitHub çš„ä¸€ä¸ªè´¦æˆ·
*   [Node.js](https://nodejs.org/en/) å·²å®‰è£…

## [](#why-static)ä¸ºä»€ä¹ˆé™æ­¢ï¼Ÿ

HTML ä¸º web æä¾›äº†åŠ¨åŠ›ï¼Œé™æ€æœåŠ¡ HTML æœ‰å‡ ä¸ªä¼˜ç‚¹ã€‚é™æ€ç«™ç‚¹æ›´å®‰å…¨ï¼Œå› ä¸ºæ¶‰åŠçš„è®¡ç®—æ›´å°‘ã€‚HTML æ˜¯é¢„å…ˆç”Ÿæˆçš„ï¼Œæ–‡ä»¶å¯ä»¥ä»æœåŠ¡å™¨ä¸€å¯¹ä¸€åœ°æä¾›ï¼Œè¿™å‡å°‘äº†æ”»å‡»åª’ä»‹çš„æ•°é‡ã€‚å¦å¤–ï¼Œé™æ€ç½‘ç«™å¾ˆä¾¿å®œã€‚GitHub pages å’Œå…¶ä»–æœåŠ¡æä¾›å•†ä¸»è¦å…è´¹æä¾›é™æ€ç«™ç‚¹æ‰˜ç®¡ã€‚æœ€åï¼Œé™æ€ç«™ç‚¹æ˜¯å¯ä¼¸ç¼©çš„ã€‚åœ¨æœåŠ¡å™¨ç«¯æä¾›é™æ€æ–‡ä»¶ä¸éœ€è¦å¤ªå¤šçš„è®¡ç®—èƒ½åŠ›ï¼Œå¦‚æœä½ éœ€è¦çš„è¯ï¼Œä½ å¯ä»¥åœ¨ä½ çš„ç½‘ç«™å‰å¿«é€Ÿæ”¾ç½®ä¸€ä¸ª CDNï¼Œä¸ºä½ æ•°ç™¾ä¸‡çš„è®¿é—®è€…æä¾›æœåŠ¡ã€‚

ä¸è¿‡ï¼Œæ‰‹å·¥ç¼–å†™æ•°ç™¾ä¸ªæ™®é€šçš„ HTML é¡µé¢å¯èƒ½ä¼šå¾ˆéº»çƒ¦ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ„å»ºå·¥å…·å’Œé™æ€ç«™ç‚¹ç”Ÿæˆå™¨å·²ç»æˆä¸ºä¸€ç§å¸¸è§çš„å®è·µã€‚è¿™äº›å·¥å…·å°†æ¨¡æ¿ä¸é™ä»·æ–‡ä»¶æˆ– API æ•°æ®ç»“åˆèµ·æ¥ç”Ÿæˆé™æ€ HTMLã€‚

è¿™å¯¼è‡´éœ€è¦æ›´å¤æ‚çš„è®¾ç½®ã€‚æœåŠ¡å™¨éœ€è¦ç”Ÿæˆ HTMLï¼Œç„¶åå°† HTML ä¸Šä¼ åˆ°æ‚¨çš„é™æ€ç«™ç‚¹ä¸»æœºã€‚è¿™å°±æ˜¯ TravisCI è¿™æ ·çš„æŒç»­é›†æˆç³»ç»Ÿ(CI)å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚è¿™äº›æœåŠ¡å…è®¸æ‚¨åœ¨æ¨é€ä»£ç æ›´æ–°æˆ–å†…å®¹æ›´æ–°æ—¶é‡å»ºæ‚¨çš„ç«™ç‚¹ã€‚

### Netlify æ˜¯æ‚¨çš„ CIã€CDN å’Œæ— æœåŠ¡å™¨å¹³å°

Netlify æ˜¯ä¸€ä¸ªç›¸å½“æ–°çš„æœåŠ¡ï¼Œå®ƒè§£å†³äº†è¿™ä¸ªæ—¥ç›Šå¤æ‚çš„é—®é¢˜ã€‚ä½ å®šä¹‰ä¸€ä¸ªç›®å½•å’Œä¸€ä¸ªæ„å»ºè„šæœ¬ï¼Œä»–ä»¬è´Ÿè´£åˆ›å»ºä½ çš„ç½‘ç«™ï¼Œå¹¶æŠŠå®ƒæ”¾åˆ°ä¸€ä¸ªå…¨çƒå†…å®¹äº¤ä»˜ç½‘ç»œä¸Šã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ— æœåŠ¡å™¨åŠŸèƒ½æˆ–è¡¨å•ç­‰é™„åŠ åŠŸèƒ½æ¥ä¸°å¯Œæ‚¨çš„é™æ€ç½‘ç«™ï¼Œæ‰€æœ‰è¿™äº›éƒ½åŒ…å«åœ¨ä¸€ä¸ªå¹³å°ä¸­ã€‚

å¬èµ·æ¥ä¸é”™ï¼Ÿæˆ‘ä»¬å¼€å§‹å§ï¼

## [](#create-your-static-website)åˆ›å»ºä½ çš„é™æ€ç½‘ç«™

åˆ›å»ºä¸€ä¸ªæ–°ç›®å½•å¹¶åŒ…å«ä¸€ä¸ª`dist`å­ç›®å½•ã€‚`dist`å°†ä¿å­˜åº”ç”± Netlify éƒ¨ç½²çš„æ‰€æœ‰æ–‡ä»¶ã€‚ä½ å¯ä»¥åœ¨é‚£é‡Œæ”¾ä¸€ä¸ªç±»ä¼¼ä¸‹é¢çš„`index.html`æ–‡ä»¶ï¼Œä½ å°±å¯ä»¥å¼€å§‹äº†ã€‚

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>8-bit revolution</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#fafafa">
</head>
<body>
  <p>8-bit rocks!</p>
</body>
</html> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ­¤å¤–ï¼Œæ‚¨å¿…é¡»å®šä¹‰ä¸€ä¸ªåœ¨éƒ¨ç½²ç«™ç‚¹æ—¶åº”è¯¥è¿è¡Œçš„å‘½ä»¤ã€‚åœ¨é¡¹ç›®ç›®å½•ä¸­åˆå§‹åŒ–æ–°çš„ npm é¡¹ç›®ã€‚

```
npm init --yes 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`--yes`æ ‡å¿—å…è®¸æ‚¨åœ¨åˆ›å»ºæ–°é¡¹ç›®æ—¶è·³è¿‡é€šå¸¸ä¸ npm ä¸€èµ·æä¾›çš„è°ƒæŸ¥é—®å·ã€‚è¯¥å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„`package.json`ï¼Œå®ƒæ˜¯ Node.js é¡¹ç›®çš„é…ç½®æ–‡ä»¶ã€‚è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªè™šæ‹Ÿçš„æ„å»ºå‘½ä»¤ï¼Œè¯¥å‘½ä»¤åªå‘åŒ…å«çš„ JSON å¯¹è±¡çš„`scripts`å±æ€§å›æ˜¾ä¸€æ¡æ—¥å¿—æ¶ˆæ¯ã€‚

æ‚¨çš„`package.json`åº”è¯¥ç±»ä¼¼äºä¸‹é¢çš„å†…å®¹:

```
{  "name":  "8-bit-revolution-tut",  "version":  "1.0.0",  "description":  "",  "main":  "index.js",  "scripts":  {  "build":  "echo \"Building your new static site!\""  },  "repository":  {  "type":  "git",  "url":  "git+https://github.com/stefanjudis/8-bit-revolution-tut.git"  },  "keywords":  [],  "author":  "stefan judis <sjudis@twilio.com>",  "license":  "MIT",  "bugs":  {  "url":  "https://github.com/stefanjudis/8-bit-revolution-tut/issues"  },  "homepage":  "https://github.com/stefanjudis/8-bit-revolution-tut#readme"  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ³¨æ„:åç§°ã€å­˜å‚¨åº“ã€ä½œè€…ã€bug å’Œä¸»é¡µå±æ€§ä¼šå› ç”¨æˆ·å’Œé¡¹ç›®è€Œå¼‚ã€‚

æ‚¨å¯ä»¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨`npm run`åè·Ÿå±æ€§åæ¥è¿è¡Œæ‰€æœ‰å·²å®šä¹‰çš„`script`å±æ€§ã€‚æ‰§è¡Œ`npm run build`å°†è®°å½•â€œæ„å»ºä½ çš„æ–°é™æ€ç«™ç‚¹ï¼â€åˆ°ç»ˆç‚¹ç«™ã€‚è¿™è¿˜ä¸ç®—å¤šï¼Œåœ¨æœ¬æ•™ç¨‹çš„åé¢éƒ¨åˆ†ï¼Œæ‚¨å°†å‘è¯¥è„šæœ¬æ·»åŠ æ›´å¤šçš„åŠŸèƒ½ã€‚

åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸­åˆå§‹åŒ– gitï¼Œå¹¶æŠŠå®ƒæ¨åˆ°ä¸€ä¸ªæ–°çš„ GitHub ä»“åº“ä¸­ã€‚

å°†è¿™ä¸¤ä¸ªæ–‡ä»¶æäº¤å¹¶æ¨é€åˆ° GitHub åï¼Œå°±å¯ä»¥éƒ¨ç½²ç«™ç‚¹äº†ã€‚è½¬åˆ° Netlifyï¼Œç™»å½•ï¼Œç‚¹å‡»â€œä» Git æ–°å»ºç«™ç‚¹â€,å°†æ‚¨çš„å­˜å‚¨åº“ä¸ Netlify è¿æ¥èµ·æ¥ã€‚

[![Site overview of Netlify admin area](../Images/d19aa0ddca4cdf14c3fbd46e4d4bcfee.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--uMJwK44c--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/SEJJapFOsOIM9tNTAFYf3SM_NpITaE1P32K5NP366EJl9A.width-800.jpg)

è¿æ¥ GitHub åï¼Œä½ å¯ä»¥é€‰æ‹©ä½ æ–°åˆ›å»ºçš„åº“ã€‚Netlify ä¼šè¯¢é—®æ‚¨åº”è¯¥éƒ¨ç½²å“ªä¸ªåˆ†æ”¯å’Œç›®å½•ï¼Œä»¥åŠåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­è¦æ‰§è¡Œå“ªä¸ªè„šæœ¬ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†æ˜¯`master`ã€`dist`å’Œ`npm run build`ã€‚

[![New site dialog to define build script and folder in Netlify admin area](../Images/bdaa32dbb791efb642403dc9d0a02168.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--MNzoLvYF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/Waw2ie7fM7emsKKVU_Gs2HHb3otaEbqAliYx4-UusWaoTC.width-800.jpg)

æŒ‰ä¸‹â€œéƒ¨ç½²ç½‘ç«™â€,çœ‹åˆ°ä½ çš„é™æ€ç½‘ç«™è¿›å…¥äº’è”ç½‘ã€‚éƒ¨ç½²åªéœ€è¦å‡ ç§’é’Ÿï¼Œå¹¶ä¸”å¯ä»¥åœ¨ Netlify çš„éšæœºå­åŸŸ`frosty-mclean-c6c41c`ä¸­ä½¿ç”¨ã€‚å¦‚æœä½ æ„¿æ„ï¼Œä½ ä¹Ÿå¯ä»¥æ”¹å˜è¿™ä¸ªå­åŸŸæˆ–è€…è¿æ¥[ä½ è‡ªå·±çš„åŸŸ](https://www.netlify.com/docs/custom-domains/)ã€‚ğŸ‰

[![First successful deploy](../Images/55a7b2340871171f2231578f772484ce.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ECGtpYc6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/5dfgHTwaGU4fmZ4TZnAWWf-j1HPPmJR9S4mZ4dZut44zao.width-800.jpg)

æ­å–œä½ ã€‚ç‚¹å‡»â€œéƒ¨ç½²ç«™ç‚¹â€,æ‚¨å°†å»ºç«‹ä¸€ä¸ªæ–°çš„éƒ¨ç½²ç®¡é“ã€‚

Netlify å’Œ GitHub è¿æ¥æœ€é…·çš„ä¸€ç‚¹æ˜¯ï¼Œæ¯å½“ä½ å‘ GitHub æ¨é€æ–°ä»£ç æ—¶ï¼ŒNetlify éƒ½ä¼šé€šè¿‡ [webhooks](https://en.wikipedia.org/wiki/Webhook) å¾—åˆ°é€šçŸ¥ï¼Œå¹¶è‡ªåŠ¨éƒ¨ç½²ä½ çš„ç«™ç‚¹ã€‚å®ƒè¿˜å‡†å¤‡å¥½æ¥å—æ¥è‡ªæ‚¨ä½¿ç”¨çš„ä»»ä½•ç³»ç»Ÿçš„è¯·æ±‚ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥åœ¨ä¸åŒçš„äº‹ä»¶ä¹‹åè§¦å‘é‡å»ºï¼Œä¾‹å¦‚åœ¨[è¿œç¨‹å†…å®¹ç®¡ç†ç³»ç»Ÿ](https://headlesscms.org/)ä¸­æ›´æ–°å†…å®¹ã€‚

## [](#add-a-form-to-allow-user-inputs)æ·»åŠ ä¸€ä¸ªå…è®¸ç”¨æˆ·è¾“å…¥çš„è¡¨å•

å¯¹äºå‘é€æ¶ˆæ¯çš„æƒ…å†µï¼Œé™æ€ HTML æ˜¯ä¸å¤Ÿçš„ã€‚æ‚¨å¿…é¡»æ·»åŠ ä¸€ç§æ–¹å¼æ¥å…è®¸ç”¨æˆ·è¾“å…¥ï¼Œå¦‚æŒ‰ä¸‹æŒ‰é’®æˆ–è¾“å…¥æ•°æ®ã€‚å¹¸è¿çš„æ˜¯ï¼ŒNetlify æä¾›äº†[å†…ç½®è¡¨å•å¤„ç†](https://www.netlify.com/docs/form-handling/)ã€‚æ›¿æ¢â€œ8 ä½å²©çŸ³ï¼â€å…·æœ‰ä»¥ä¸‹å½¢å¼çš„æ®µè½ã€‚

```
<form name="contact" class="form" method="POST" data-netlify="true">
      <h1>Wanna spread the word?</h1>
      <button class="btn" type="submit">Send messages!</button>
</form> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¡¨å•å¿…é¡»åŒ…å«ä¸€ä¸ª`data-netlify=â€trueâ€`å±æ€§ã€‚è¿™å‘Šè¯‰ Netlify æ‚¨å¸Œæœ›è¡¨å•æäº¤ç”±ä»–ä»¬çš„æœåŠ¡å™¨å¤„ç†ã€‚æäº¤å¹¶æ¨é€ä»£ç ã€‚ç­‰å¾…éƒ¨ç½²å®Œæˆï¼Œç§ï¼Œæ‚¨ç°åœ¨å¯ä»¥å¤„ç†è¡¨å•æäº¤äº†ï¼

[![First deploy including a form and a button](../Images/9135a3d51045e9733c3c8c9f90e86c45.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--MDIWCOwY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/KYCOJtNu0TCJ04u1W_IhSv9Wz9w7ZLF1argZC7fpFhqsTQ.width-800.jpg)

æ‰€æœ‰æäº¤è¡¨æ ¼çš„æ•°æ®å°†åœ¨ç½‘ç»œç®¡ç†åŒºçš„â€œè¡¨æ ¼â€ä¸‹æä¾›ã€‚è¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆä»è”ç³»äººè¡¨å•ç­‰æ”¶é›†æ•°æ®ã€‚

[![Netlify form submission success dialog](../Images/c245e6b5610ba6120f6450090717d467.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--rsgtV_9O--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/-DJk0ZyzrWN7zU9Pn3QleVuWyqZ2IPw_jf1dvNrEA4fxxv.width-800.jpg)

åœ¨è¿™ä¸ªé˜¶æ®µï¼Œå½“æ‚¨æäº¤è¡¨å•æ—¶ï¼ŒNetlify å°†å‘æ‚¨æ˜¾ç¤ºä¸€æ¡é€šç”¨çš„æˆåŠŸæ¶ˆæ¯ï¼Œå‘Šè¯‰æ‚¨å®ƒå·²æ”¶åˆ°è¡¨å•æäº¤ã€‚æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨è¡¨å•å…ƒç´ ä¸Šçš„`action`å±æ€§å®šä¹‰ä¸€ä¸ªåº”è¯¥é‡å®šå‘åˆ°çš„é¡µé¢æ¥æ”¹å˜è¿™ç§æƒ…å†µã€‚

æˆ‘æ›´å–œæ¬¢é€šè¿‡ JavaScript æäº¤è¡¨å•ï¼Œä»¥é¿å…é‡å®šå‘ã€‚

### [](#use-ajax-to-submit-forms)ä½¿ç”¨ Ajax æäº¤è¡¨å•

é€šè¿‡å®ç°å…¨å±€å¯ç”¨çš„`fetch`æ–¹æ³•ï¼Œæ‚¨å¯ä»¥ç›´æ¥ä»æµè§ˆå™¨ä¸­å‘å‡ºè¯·æ±‚ï¼Œè€Œä¸éœ€è¦æ·»åŠ ä»»ä½•ä¾èµ–é¡¹ã€‚

åœ¨å¼€å§‹å®ç° Ajax åŠŸèƒ½ä¹‹å‰ï¼Œå‘é¡µé¢æ·»åŠ ä¸¤ä¸ª HTML å…ƒç´ ã€‚è¿™äº›å…ƒç´ å°†æŒ‡ç¤ºè¡¨å•æäº¤è¯·æ±‚çš„æˆåŠŸæˆ–é”™è¯¯ã€‚

```
<p class="successMsg" role="alert" hidden>Messages sent...</p>
<p class="errorMsg" role="alert" hidden>Something went wrong...</p> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨é¡µé¢åº•éƒ¨æ·»åŠ ä¸€ä¸ªå†…åµŒçš„`script`å…ƒç´ ã€‚ä½¿ç”¨åŸç”Ÿ DOM æ–¹æ³•ï¼Œæ‚¨å¯ä»¥ç›‘å¬è¡¨å•çš„æäº¤äº‹ä»¶ï¼Œå¹¶åº”ç”¨å®šåˆ¶åŠŸèƒ½ï¼Œå¦‚å‘å‡º AJAX è¯·æ±‚ã€‚

```
<script>
  const form = document.querySelector('form');
  form.addEventListener('submit', async event => {
    event.preventDefault();

    // disable button to prevent multiple submissions
    form.querySelector('button').disabled = true;

    // make the request to submit the form
    try {
      const response = await fetch('/', {
        method: 'post',
        headers: {
          'Content-type': 'application/x-www-form-urlencoded; charset=UTF-8'
        },
        // parse and submit all included form data
        body: new URLSearchParams(new FormData(form)).toString()
      });

      // if it was successful show success message
      if (response.status === 200) {
        document.querySelector('.successMsg').hidden = false;
      } else {
        document.querySelector('.errorMsg').hidden = false;
      }
    } catch (e) {
      console.error(e);
    }
  });
</script> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`fetch`æ–¹æ³•è¿”å›[ä¸€ä¸ªæ‰¿è¯º](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)ã€‚å¦‚æœ[ä½ çš„æµè§ˆå™¨æ”¯æŒå…è®¸çš„è¯](https://caniuse.com/#feat=async-functions)ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª[å¼‚æ­¥å‡½æ•°](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function)ä½œä¸ºæäº¤å¤„ç†ç¨‹åºæ¥é¿å…å›è°ƒå’Œä¸`await`å’Œ`try/catch`ç»“åˆçš„ then-chainsã€‚

[![Form submission with ajax enabled success message](../Images/9aa86b98858f839cc9c6913a94ff2d33.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--hLkbMwkw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/fRjWG4AsZ2SqDfTwEhHAsWAVjaF7YTrOT8rCu6tyHWIEy4.width-800.jpg)

æ¨é€ä»£ç å¹¶ç­‰å¾…éƒ¨ç½²ã€‚å½“æ‚¨æµ‹è¯•è¡¨å•æäº¤æ—¶ï¼Œæ‚¨å°†çœ‹åˆ°è¡¨å•æäº¤å·¥ä½œæ­£å¸¸ï¼Œå¹¶ä¸”ç«™ç‚¹å‘æ‚¨æ˜¾ç¤ºä¸€æ¡æˆåŠŸæ¶ˆæ¯ï¼Œä½†æ˜¯å®ƒè¿˜æ²¡æœ‰å‘é€ä»»ä½•æ¶ˆæ¯ã€‚

åœ¨ä½ å®ç° SMS å‘é€éƒ¨åˆ†ä¹‹å‰ï¼Œè®©æˆ‘ä»¬æŠŠ 8 ä½é£æ ¼å¸¦å›ç½‘ç«™ã€‚ä»èŒƒä¾‹åº“ä¸­å¤åˆ¶[æ ·å¼ï¼Œå¹¶å°†å®ƒä»¬ç²˜è´´åˆ°æ‚¨çš„`dist`ç›®å½•ä¸­çš„ä¸€ä¸ªæ–°æ–‡ä»¶`styles.css`ä¸­ã€‚æ­¤å¤–ï¼Œæ·»åŠ ä¸€ä¸ªæŒ‡å‘ Google å­—ä½“çš„é“¾æ¥ï¼Œè¯¥å­—ä½“åœ¨åˆšåˆšç²˜è´´åˆ°`index.html`çš„æ ·å¼](https://github.com/stefanjudis/8-bit-revolution/blob/master/dist/styles.css)ä¸­è¢«å¼•ç”¨[ã€‚](https://github.com/stefanjudis/8-bit-revolution/blob/master/dist/styles.css#L26) 

```
<head>
  <meta charset="utf-8">
  <title>8-bit revolution</title>
  <!-- reference the new stylesheet -->
  <link rel="stylesheet" href="/styles.css" />
  <!-- load Google Font to get get a nice 8-bit font -->
  <link
    href="https://fonts.googleapis.com/css?family=Maven+Pro|Yrsa|Press+Start+2P"
    rel="stylesheet"
  />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#fafafa">
</head> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

[![Deployed site with 8-bit style](../Images/b82a1e23f79e5c51c6ac6b3f239462b4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--c91326eq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/VBw2dNyFmsOd0Vgu0K0NmV946C_rKEaUEtSyb98ECUnmym.width-800.jpg)

ä¸ç®—å¤ªå·®ï¼ç°åœ¨ä½ çš„ç½‘ç«™çœ‹èµ·æ¥ä¸é”™ï¼Œè€Œä¸”æ˜¯â€œ8 ä½â€çš„ï¼Œè®©æˆ‘ä»¬æ¥å®ç° SMS åŠŸèƒ½ã€‚

## [](#reacting-to-submitted-forms-using-serverless-functions)ä½¿ç”¨æ— æœåŠ¡å™¨åŠŸèƒ½å¯¹æäº¤çš„è¡¨å•åšå‡ºååº”

å½“ç”¨æˆ·æäº¤è¡¨å•æ—¶ï¼Œé™¤äº† Netlify å­˜å‚¨è¡¨å•æ•°æ®ä¹‹å¤–ï¼Œä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿã€‚è¦å®ç° SMS å‘é€åŠŸèƒ½ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Netlify æä¾›çš„[æ— æœåŠ¡å™¨åŠŸèƒ½](https://www.twilio.com/docs/glossary/what-is-serverless-architecture)ã€‚å»ºè®®ä½¿ç”¨[netlify-lambda NPM åŒ…](https://www.npmjs.com/package/netlify-lambda)æ¥åˆ›å»ºè¿™äº›å‡½æ•°ã€‚é€šè¿‡å‘½ä»¤è¡Œå®‰è£…è½¯ä»¶åŒ…ã€‚

```
npm install --save netlify-lambda 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*netlify-lambda* å†…è”å‡½æ•°ä¸­åŒ…å«çš„æ‰€æœ‰ä¾èµ–é¡¹ï¼Œä»¥ä¾¿å®ƒä»¬åœ¨ netlify ç¯å¢ƒä¸­å¯æ‰§è¡Œã€‚åˆ›å»ºä¸€ä¸ªåä¸º`functions`çš„ç›®å½•å¹¶æ·»åŠ ä¸€ä¸ª JavaScript æ–‡ä»¶`submission-created.js`ã€‚ [Netlify éµå¾ªå‘½åçº¦å®šåœ¨ç‰¹å®šäº‹ä»¶åè¿è¡Œå‡½æ•°](https://www.netlify.com/docs/functions/#event-triggered-functions)ã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥ä¸ºå‡½æ•°æ–‡ä»¶æŒ‡å®šä¸€ä¸ªä¸åœ¨åˆ—è¡¨ä¸­çš„åç§°ï¼Œä»¥å¯åŠ¨æ–°çš„ HTTP ç«¯ç‚¹ã€‚

```
// submission-created.js
exports.handler = function(event, context, callback) {
  console.log('Submission created!')
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ç”Ÿæˆå‡½æ•°ä¹‹å‰ï¼Œæ‚¨å¿…é¡»å®šä¹‰å­˜å‚¨å‡½æ•°çš„ç›®å½•ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`netlify.toml`æ–‡ä»¶ã€‚å®šä¹‰`[build]`å±æ€§ï¼Œå¹¶åŒ…å«æ‚¨ç”Ÿæˆçš„å‡†å¤‡è¿è¡Œçš„å‡½æ•°å°†å­˜å‚¨åœ¨`.functions`ç›®å½•ä¸­çš„é…ç½®ã€‚

```
[build]
  functions = ".functions" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è°ƒæ•´æ‚¨çš„`package.json`ä»¥åœ¨éƒ¨ç½²æœŸé—´æ„å»ºæ‚¨çš„æ— æœåŠ¡å™¨åŠŸèƒ½ã€‚

```
{  "scripts":  {  "build":  "netlify-lambda build functions"  }  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“æ‚¨åœ¨æœ¬åœ°è¿è¡Œ`npm run build`æ—¶ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„`.functions`ç›®å½•ï¼Œå…¶ä¸­åŒ…å«å¯ä»¥åœ¨ Netlify ä¸Šè¿è¡Œçš„å‡½æ•°ã€‚æ–°çš„`.functions`ç›®å½•åŒ…å«ç”Ÿæˆçš„ä»£ç ï¼Œå¯èƒ½ä¸å€¼å¾—ç­¾å…¥ git å¹¶æ¨é€åˆ° GitHubã€‚ç¡®ä¿åˆ›å»ºä¸€ä¸ªåŒ…å«ç”Ÿæˆç›®å½•çš„`.gitignore`æ–‡ä»¶ã€‚

```
# .gitignore
# generated functions
.functions 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é€šè¿‡è¿™äº›è°ƒæ•´ï¼Œæ‚¨å¯ä»¥æäº¤å¹¶æ¨é€è‡³ GitHubã€‚Netlify å°†è‡ªåŠ¨éƒ¨ç½²ç½‘ç«™ï¼ŒåŒ…æ‹¬å½“æœ‰äººæäº¤è¡¨å•æ—¶è¿è¡Œçš„åŠŸèƒ½ã€‚

å½“ä½ æäº¤è¡¨æ ¼å‘Šè¯‰ä¸–ç•Œå…³äº 8 ä½çš„ä¿¡æ¯å¹¶è¿›å…¥ Netlify çš„å‡½æ•°æ—¥å¿—æ—¶ï¼Œä½ ä¼šçœ‹åˆ°â€œæäº¤å·²åˆ›å»ºï¼â€æ¶ˆæ¯ã€‚

[![Function log in Netlify admin area](../Images/2403ad145b6fac357a55349191656e4f.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--cmiEz4zm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/-VaUIOGF5Q-GugRRx-xucjryTOXv1vdeLmIBDkmdF6SH7H.width-800.jpg)

## [](#sending-smss-within-a-serverless-function)åœ¨æ— æœåŠ¡å™¨åŠŸèƒ½ä¸‹å‘é€çŸ­ä¿¡

æ­¤æ—¶ï¼Œæ‚¨çš„å‡½æ•°å·²ç»å‡†å¤‡å¥½å“åº”è¡¨å•æäº¤ï¼Œæ‚¨å¯ä»¥å¼€å§‹å‘é€æ–‡æœ¬æ¶ˆæ¯äº†ã€‚è¦ä½¿ç”¨ Twilio å‘é€æ¶ˆæ¯ï¼Œæ‚¨å¿…é¡»å®šä¹‰æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚æ‚¨çš„å¸æˆ· SIDã€å¸æˆ·ä»¤ç‰Œä»¥åŠæ‚¨è¦å‘å…¶å‘é€æ¶ˆæ¯çš„äººçš„ç”µè¯å·ç ã€‚ç¡®ä¿è¿™äº›ä¸ä¼šæˆä¸ºå…¬å…±çš„ git åº“ã€‚

ä½¿ç”¨`npm install --save dotenv`å®‰è£… [dotenv](https://www.npmjs.com/package/dotenv) åŒ…ã€‚å®ƒå…è®¸æ‚¨ä»æ ¹ç›®å½•ä¸‹çš„`.env`æ–‡ä»¶ä¸­è¯»å–é…ç½®å˜é‡ï¼Œå¹¶é€šè¿‡`process.env`åœ¨æ‚¨çš„æ— æœåŠ¡å™¨åŠŸèƒ½ä¸­è®¿é—®å®ƒä»¬ã€‚åˆ›å»º`.env`æ–‡ä»¶ï¼Œå°†å…¶åŒ…å«åœ¨æ‚¨çš„`.gitignore`ä¸­ï¼Œå¹¶å®šä¹‰ä»¥ä¸‹å€¼ï¼Œç”¨æ‚¨è‡ªå·±çš„å€¼æ›¿æ¢å®ƒä»¬:

```
TWILIO_ACCOUNT_SID = â€œYOUR-TWILIO-ACCOUNT-SIDâ€
TWILIO_AUTH_TOKEN = â€œYOUR-TWILIO-AUTH-TOKENâ€
BOT_NUMBER = â€œYOUR-BOUGHT-TWILIO-NUMBERâ€
BOT_MESSAGE = "YOUR-MESSAGE"
CONTACT_NUMBERS = "NUMBERS-THAT-SHOULD-RECEIVE-A-MESSAGE" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¦è·å¾—æ‰€æœ‰è¿™äº›å€¼ï¼Œ[ç™»å½• Twilio](https://www.twilio.com/console/) ã€‚æ‚¨å¯ä»¥åœ¨ä»ªè¡¨æ¿ä¸­æ‰¾åˆ°æ‚¨çš„å¸æˆ· SID å’Œèº«ä»½éªŒè¯ä»¤ç‰Œã€‚auth ä»¤ç‰Œæ˜¯éå¸¸æ•æ„Ÿçš„ä¿¡æ¯ï¼Œå› ä¸ºå®ƒå¯ä»¥æˆäºˆä¸å½“å‰ç”¨æˆ·ç›¸åŒçš„è®¿é—®æƒé™ã€‚æˆ‘å»ºè®®åœ¨ç»§ç»­ä¹‹å‰å…ˆäº†è§£ä¸€äº›[çš„æœ€ä½³å®è·µæ¥ä¿è¯æ‚¨çš„æˆæƒä»¤ç‰Œ](https://dev.to/twilio/is-someone-else-using-your-twilio-account-best-practices-to-protect-your-auth-token-40p0-temp-slug-5641747)çš„å®‰å…¨ã€‚[a]

[![Twilio console including account sid and token](../Images/6900c45e3f0026d33a87834d8fd82537.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--lhxr7D7i--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/l8hPwDvLJ4G4oxMvQ6rHAdvQfGH-OxpNReJTEdNjiaDey-.width-800.jpg)

æ¥ä¸‹æ¥ï¼Œä½ éœ€è¦[è´­ä¹°ä¸€ä¸ª Twilio ç”µè¯å·ç ](https://www.twilio.com/console/phone-numbers/search)ã€‚ç¡®ä¿ä½ ä¹°ä¸€ä¸ªæœ‰çŸ­ä¿¡åŠŸèƒ½çš„ã€‚

[![Twilio Console buy a number dialog](../Images/3cbceb1a89f056395a1acf5d387f163c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Rr9476eF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/hd9jMxTkLTTEjZ3s9fKd4-LL97PwJryPYozfmKq9hB6I-D.width-800.jpg)

è´­ä¹°å·ç åï¼Œæ‚¨å¯ä»¥è‡ªå·±åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰è¦å‘é€çš„æ¶ˆæ¯å’Œæ”¶ä»¶äººçš„å·ç ã€‚

æ‚¨çš„`.env`æ–‡ä»¶åº”è¯¥æ˜¯è¿™æ ·çš„:

```
TWILIO_ACCOUNT_SID = "AC..."
TWILIO_AUTH_TOKEN = "a8..."
BOT_NUMBER = "+4915735982595"
BOT_MESSAGE = "8-bit rocks!"
CONTACT_NUMBERS = "+491761234567;+49170987654" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è°ƒæ•´æ‚¨çš„å‡½æ•°ä»¥è®¿é—®ä¸Šé¢å®šä¹‰çš„å€¼ã€‚

```
// submission-created.js
// load the env file and make values accessible via process.env
require('dotenv').config();

const {
  TWILIO_ACCOUNT_SID,
  TWILIO_AUTH_TOKEN,
  CONTACT_NUMBERS,
  BOT_NUMBER,
  BOT_MESSAGE
} = process.env;

exports.handler = function(event, context, callback) {
  console.log('Submission created!')
  // the logic for sending the message will go here
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨å‘½ä»¤è¡Œä¸Šå®‰è£… Twilio helper åº“ã€‚

```
npm install --save twilio 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æœ‰äº† Twilio helper åº“ï¼Œæ‚¨ç°åœ¨å¯ä»¥å‘é€æ–‡æœ¬æ¶ˆæ¯äº†ã€‚æ›¿æ¢æ—¥å¿—æ¶ˆæ¯å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚

```
// submission-created.js

// ...
// ğŸ‘† dotenv and process.env handling as above

// initialize the helper library client
const client = require('twilio')(TWILIO_ACCOUNT_SID, TWILIO_AUTH_TOKEN);

exports.handler = function(event, context, callback) {
  Promise.all(
    // split the string of several messages into single numbers
    // send message to each of them
    CONTACT_NUMBERS.split(';').map(num => {
      return client.messages.create({
        from: BOT_NUMBER,
        to: num,
        body: BOT_MESSAGE
      });
    })
  )
    .then(() => callback(null, { statusCode: 200, body: 'Created' }))
    .catch(e => {
      console.log(e);
      callback(e);
    });
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¦åœ¨æœ¬åœ°è¿è¡Œæ‚¨çš„å‡½æ•°ï¼Œå‘`package.json`æ·»åŠ ä¸€ä¸ª`serve`å‘½ä»¤æ¥å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨ã€‚

```
{
  "scripts": {
      "serve": "netlify-lambda serve functions"
    } 
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸Šé¢çš„`netlify-lambda`å‘½ä»¤å°†æ„å»ºå¹¶ç”Ÿæˆæ‚¨çš„å‡½æ•°ï¼Œå¹¶æ‰“å¼€ä¸€ä¸ª HTTP ç«¯ç‚¹ã€‚å¦‚æœä½ è¿è¡Œ`npm run serve`ç„¶åæ‰“å¼€[http://localhost:9000/submission-created](http://localhost:9000/submission-created)å®ƒä¼šè¿è¡Œä½ çš„åŠŸèƒ½å¹¶å‘é€çŸ­ä¿¡ã€‚ğŸ‰

[!["Created" response from Netlify function](../Images/0a5e8ca10dc197246a2fe57c4309c042.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--iShgbnGI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/hbR_7xzJpO5gAGhYA9liptfrdgTPmcm29C84bNvlAioNLA.width-800.jpg)

æäº¤å’Œæ¨é€æ–°åŠŸèƒ½ï¼Œå¹¶ç­‰å¾…éƒ¨ç½²ã€‚ä½†æ˜¯ç­‰ä¸€ä¸‹â€¦å½“ä½ è¯•ç€åœ¨å·²éƒ¨ç½²çš„ç½‘ç»œç”Ÿæ´»ç½‘ç«™ä¸ŠæŒ‰ä¸‹æŒ‰é’®å‘é€çŸ­ä¿¡æ—¶ï¼Œä½ ä¼šå‘ç°å®ƒè¿˜ä¸èƒ½å·¥ä½œã€‚è¿˜è®°å¾—ä½ æŠŠä½ çš„`.env`æ–‡ä»¶æ”¾åˆ°`.gitignore`é‡Œå—ï¼Ÿ

å°†`.env`æ–‡ä»¶ä¸ç¯å¢ƒå˜é‡ç»“åˆä½¿ç”¨æ˜¯é¿å…æ³„éœ²å‡­è¯çš„å¸¸è§åšæ³•ã€‚ä½¿ç”¨`dotenv`,æ‚¨å¯ä»¥ç¡®ä¿æ‚¨çš„åº”ç”¨ç¨‹åºæ—¢å¯ä»¥ä½¿ç”¨å·²å®šä¹‰çš„ç¯å¢ƒå˜é‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨`.env`é…ç½®æ–‡ä»¶ã€‚æœ¬åœ°`dotenv`è¯»å–`.env`æ–‡ä»¶å¹¶å°†å€¼æ”¾å…¥`process.env`ã€‚åœ¨ç”Ÿäº§ä¸­â€”â€”æ‚¨å¿…é¡»è‡ªå·±åœ¨`process.env`ä¸­å®šä¹‰è¿™äº›ç¯å¢ƒå˜é‡ã€‚è¿™æ ·å°±ä¸ç”¨æŠŠå‡­è¯æ”¾åœ¨å…¬å…±åœºæ‰€äº†ã€‚

æ‚¨å¯ä»¥åœ¨ç½‘ç»œç®¡ç†åŒºåŸŸçš„â€œæ„å»ºâ€ã€â€œæ„å»ºè®¾ç½®â€å’Œâ€œæ„å»ºç¯å¢ƒå˜é‡â€ä¸‹å®šä¹‰ç¯å¢ƒå˜é‡ã€‚

[![Environment variables defined in Netlify admin UI](../Images/7502658a64a9521467d3ad3d62b33eb5.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--dtSCvfid--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/gX-zZjb_oob1OF967ujqIkbNPe3Ngy6lmgeG1WB3cHghwC.width-800.jpg) ä¿å­˜æ•°å€¼å¹¶è§¦å‘æ–°çš„æ„å»ºã€‚ç°åœ¨ç‚¹å‡»æŒ‰é’®ï¼Œå°†æ˜¾ç¤ºæ‚¨çš„æ‰€æœ‰æ”¶ä»¶äººï¼Œä½ çˆ± 8 ä½ã€‚ğŸ‰

[![](../Images/262af18c1aaf383e4f3b17bd9b550ce4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--l_B8gru9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/r3aI9a5zC0QxHch41_D32EXWJZ9krUGPlD5IVEGLKIBbxy.width-500.png)

ä½ å¯ä»¥åœ¨ GitHub ä¸Šæ‰¾åˆ°æœ€ç»ˆçš„åŠŸèƒ½å®ç°[ã€‚](https://github.com/stefanjudis/8-bit-revolution/blob/master/functions/submission-created.js)

## [](#conclusion)ç»“è®º

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ Netlify éƒ¨ç½²é™æ€ç«™ç‚¹ï¼Œä½¿ç”¨æ— æœåŠ¡å™¨åŠŸèƒ½ä¸°å¯Œæ‚¨çš„ç«™ç‚¹ï¼Œä»¥åŠä½¿ç”¨ Twilio å‘é€ SMSã€‚

åœ¨æˆ‘ä»¬ç”Ÿæ´»çš„ API é©±åŠ¨çš„ä¸–ç•Œä¸­ï¼Œæ— æœåŠ¡å™¨å‡½æ•°æ˜¯å®Œç¾çš„è¿æ¥å™¨ã€‚ä»–ä»¬å¯ä»¥è¿æ¥æœåŠ¡ï¼Œæ¥å—ç½‘é¡µæŒ‚é’©ï¼Œç”šè‡³å›å¤çŸ­ä¿¡ã€‚

è®©æˆ‘çŸ¥é“ä½ å‘äº†ä»€ä¹ˆä¿¡æ¯ã€‚ä½ å¯ä»¥åœ¨ GitHub ä¸Šæ‰¾åˆ°[å®Œæ•´çš„ä»£ç ã€‚å®ƒåŒ…æ‹¬](https://github.com/stefanjudis/8-bit-revolution)[ä¸€ä¸ªæ›´å¤æ‚çš„è¡¨å•æäº¤æµç¨‹](https://github.com/stefanjudis/8-bit-revolution/blob/master/dist/index.html#L77-L91)ï¼Œä½ å¯èƒ½æƒ³çœ‹çœ‹ã€‚

å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ¸ é“è”ç³»æˆ‘ä»¬:

*   Email: [sjudis@twilio.com](//mailto:sjudis@twilio.com)
*   Github: [å¸æå](https://github.com/stefanjudis)
*   æ¨ç‰¹:t0 @ stefanjudisï¿¥t1