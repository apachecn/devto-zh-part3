# React æ’­å®¢ç¬¬ 31 é›†â€”â€”ç‘å®‰Â·å¼—æ´›ä¼¦æ–¯çš„ã€Šé’©å­æ˜¯æ··æ­å“ã€‹

> åŸæ–‡:[https://dev.to/dance2die/react-podcast-episode-31-èƒ¡å…‹-ç±³æ–¯-è±æ©-å¼—æ´›ä¼¦æ–¯-å†¯](https://dev.to/dance2die/react-podcast-episode-31--hooks-are-mixins-with-ryan-florence-fon)

*ç…§ç‰‡ç”±[é›…å„å¸ƒÂ·å¡æ™®æ–¯çº³å…‹](https://unsplash.com/photos/4f4YZfDMLeU?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨[Unsplash](https://unsplash.com/search/photos/bibimbap?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)T5 æ‹æ‘„*

Ryan Florence å‡ºç°åœ¨ React æ’­å®¢ç¬¬ 31 é›†ï¼Œè°ˆè®º React ä¸­çš„é’©å­å’Œå…¶ä»–æ–°åŠŸèƒ½ã€‚

æ’­å®¢æ˜¯åœ¨ React Conf 2018 ä¹‹å‰å½•åˆ¶çš„ï¼Œå› æ­¤æ¶‰åŠä¸€äº›æ—¶é—´æ—…è¡ŒğŸ˜ã€‚

**å…è´£å£°æ˜**:æˆ‘ä¸æ’­å®¢æ— å…³ï¼Œåªæ˜¯ä¸€ä¸ªçƒ­å¿ƒçš„å¬ä¼—ğŸ˜›ã€‚

## [](#acronyms)ç¼©ç•¥è¯

æˆ‘ä½¿ç”¨äº† React ç”Ÿå‘½å‘¨æœŸæ–¹æ³•åç§°çš„ç®€åŒ–åç§°ã€‚

*   CDUâ€“comopendupdate
*   cDMâ€“ç»„ä»¶å®‰è£…
*   cWU â€“ componentWillUnmount

## [](#table-of-contents)ğŸ“ƒç›®å½•

*   [ç®€ä»‹](#intro)
*   [æŒ‚é’©](#hooks)
*   [90%çš„æ¸…æ´å‰‚å‘ç”Ÿååº”](#%E2%99%BB-90-cleaner-react)
*   [æš‚è®°+èµ„æº(ç¼“å­˜)](#-suspense-resources-cache)
*   [æŒ‡ä»¤ï¼Ÿ](#directives)
*   [ç»“æŸè¯­](#closing-comments)
*   [èµ„æº](#resources)

## [](#intro)ğŸ¹ä»‹ç»

Ryan è®¤ä¸ºäººä»¬æŠ±æ€¨ååº”è¿‡åº¦æ˜¯â€œæœ‰ç‚¹ä¸å…¬å¹³çš„â€ã€‚

ä»–çš„è§£é‡Šæ˜¯ï¼Œæ–°çš„ React APIs å°†æ”¯æŒæ›´ç®€å•ã€æ›´å°çš„ä»£ç ã€‚

#### [](#framework-or-library)ğŸ”¹æ¡†æ¶è¿˜æ˜¯åº“ï¼Ÿ

Ryan è¯´ Ruby ä¸€ç›´æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå› ä¸ºâ€œä½ æŠŠé¡¶å±‚ç»„ä»¶äº¤ç»™ ReactDOM.render & React è°ƒç”¨å®ƒçš„æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸâ€ã€‚

ä»–å°†è¿™ä¸ªè¿‡ç¨‹ä¸ Ruby on Rails & Ember frameworks ç­‰æ¡†æ¶è¿›è¡Œäº†æ¯”è¾ƒ(3:47)ã€‚

ä½†æ˜¯åœ¨è¿™ä¸€é›†çš„åé¢(35:11)ï¼ŒChantastic å»ºè®® React ä»ç„¶ä¸æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå› ä¸º React æ²¡æœ‰å‘Šè¯‰ä½ ä½¿ç”¨é’©å­ã€æ‚¬å¿µæˆ–èµ„æºã€‚

#### [](#react-take-the-wheel)ğŸ”¹ååº”è¿‡æ¥ï¼ŒæŠ“ä½æ–¹å‘ç›˜ğŸ¡

Chantastic æåˆ°äº† Ryan çš„åšå®¢æ–‡ç«  [React take the wheel](https://medium.com/@ryanflorence/react-context-and-re-renders-react-take-the-wheel-cd1d20663647) ï¼Œå…¶ä¸­ Ryan è°ˆåˆ°è®© React å¤„ç†çªå˜ã€‚

åœ¨ React çš„æ—§ API(æ¯” Ryan çš„â€œé—ç•™â€æ›´å¥½çš„æœ¯è¯­)ä¸­ï¼Œ ***React å‘Šè¯‰æˆ‘ä»¬*** å®ƒåœ¨åšä»€ä¹ˆã€‚

*   cDMâ€“æˆ‘å°†å®‰è£…
*   cDUâ€“æˆ‘æ›´æ–°äº†è¿™ä¸ª

æˆ‘ä»¬å¿…é¡»æƒ³å‡ºå¦‚ä½•å¤„ç†å®ƒã€‚

ä½†æ˜¯æœ‰äº†æ–° React APIï¼Œ

*   ***æˆ‘ä»¬ç”¨æ‚¬å¿µå¾—åˆ°å®šä¹‰*** æˆ‘ä»¬éœ€è¦ä»€ä¹ˆ&ç¼“å­˜(èµ„æº)
*   ***React å‘Šè¯‰æˆ‘ä»¬*** éœ€è¦åšä»€ä¹ˆã€‚
    *   `getSnapshotBeforeUpdate` & `getDerivedStateFromProps`å‘Šè¯‰æˆ‘ä»¬éœ€è¦åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯ React åœ¨åšä»€ä¹ˆã€‚
*   ***æˆ‘ä»¬æœ‰ä¸€ä¸ªæ§åˆ¶*** ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•(`useEffect`)ã€‚

æˆ‘ä»¬å¯¹æˆ‘ä»¬çš„ä»£ç æœ‰æ›´ç›´æ¥çš„æ§åˆ¶ï¼Œä»è€Œäº§ç”Ÿæ›´ç®€å•å’Œå¯è¯»çš„ä»£ç ã€‚

## [](#hooks)âš“é’©

#### [](#what-are-hooks)ğŸ”¹ä»€ä¹ˆæ˜¯é’©å­ï¼Ÿ

å€Ÿç”¨[ä¸¹æ¼”è®²ä¸­çš„ä¸€ä¸ªç±»æ¯”](https://youtu.be/V-QO-KO90iQ?t=3420)åœ¨ React Conf 2018 ä¸­ï¼Œ

`Atom`æ›¾è¢«è®¤ä¸ºæ˜¯ç‰©è´¨çš„æœ€å°å•ä½ä½†æ˜¯ç”µå­è¢«å‘ç°äº†ï¼Œå®ƒä¸€ç›´éƒ½åœ¨ã€‚

é’©å­æ˜¯ React ä¸­ä¸€ç›´å­˜åœ¨çš„åŠŸèƒ½ï¼Œåˆ†å¸ƒåœ¨æ•´ä¸ªç±»ä¸­ï¼Œä½†ç°åœ¨è¢«å‘ç°å¹¶å‘½åäº†ã€‚

è¿™æ˜¯ä¸€ç§è·¨ç±»å¤„ç†æˆ‘ä»¬æ­£åœ¨åšçš„æ‰€æœ‰äº‹æƒ…çš„æ–¹æ³•ï¼Œä¿æŒæˆ‘ä»¬çš„çŠ¶æ€(`useState`ã€`useReducer`ã€`useContext`)å¹¶ç®¡ç†åŠŸèƒ½ç»„ä»¶å†…çš„ç”Ÿå‘½å‘¨æœŸ(`useEffect`)ï¼Œä»è€Œå®ç°é«˜åº¦çš„å¯ç»„åˆæ€§ã€‚

Ryan å»ºè®®ä¸è¦ä¸ºäº†ä½¿ç”¨æ–°çš„ API è€Œè¿ç§»æ‰€æœ‰ä¸œè¥¿ã€‚

*è´¾é‡Œå¾·Â·å¸•å°”é»˜åœ¨ Ep 29 ä¸­ç»™å‡ºäº†åŒæ ·çš„å»ºè®®ï¼Œâ€œ* [*ä¸è¦ç”¨è´¾é‡Œå¾·Â·å¸•å°”é»˜*](https://reactpodcast.simplecast.fm/29)*â€*æ¥é‡å†™ä½ çš„åº”ç”¨ç¨‹åº

#### [](#types-of-hooks)ğŸ”¹æŒ‚é’©çš„ç±»å‹

*   [ä½¿ç”¨çŠ¶æ€](https://reactjs.org/docs/hooks-reference.html#usestate)â€“æ›¿æ¢è®¾ç½®çŠ¶æ€
*   [ä½¿ç”¨æ•ˆæœ](https://reactjs.org/docs/hooks-reference.html#useeffect)â€“å–ä»£ cDMã€cDUã€cWU ç­‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚
    *   *`getSnapshotBeforeUpdate`å’Œ`componentDidCatch` [å°šä¸æ”¯æŒ](https://reactjs.org/docs/hooks-faq.html#do-hooks-cover-all-use-cases-for-classes)ã€‚*
*   [ä½¿ç”¨ memo](https://reactjs.org/docs/hooks-reference.html#usememo)â€“è®°å¿†æ•°å€¼(æ•°æ®ã€ç»„ä»¶ç­‰)ã€‚
*   [useReducer](https://reactjs.org/docs/hooks-reference.html#usereducer)â€“é€šè¿‡è°ƒåº¦æ¥ç®¡ç†å‡é€Ÿå™¨çš„çŠ¶æ€ã€‚
*   [useLayoutEffect](https://reactjs.org/docs/hooks-reference.html#uselayouteffect)â€“ç”¨äºä¸€äº›è¾¹ç¼˜æƒ…å†µ
    *   *`useMutationEffect`ä¹Ÿæ›¾æåˆ°è¿‡[ä½†åæ¥å»æ‰äº†](https://github.com/facebook/react/pull/14336)ã€‚*
*   useRefâ€“æ›¿æ¢ [React.createRef](https://reactjs.org/docs/react-api.html#reactcreateref) ã€‚

ä½¿ç”¨é’©å­ï¼Œä¸éœ€è¦å®ä¾‹å˜é‡&åªä½¿ç”¨å±€éƒ¨å˜é‡ã€‚

ä¾‹å¦‚)
ä¸ç”¨åœ¨`cDM`ä¸­è®¾ç½®åŒºé—´å¹¶å°† ID ä¿å­˜åœ¨`this.ID`ä¸­ï¼Œä½¿ç”¨å®ä¾‹å˜é‡åœ¨`cWU`ä¸­æ¸…é™¤ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªç®€å•çš„å±€éƒ¨å˜é‡æ¥å­˜å‚¨åŒºé—´ IDï¼Œå¹¶åœ¨åŒä¸€ä¸ªé’©å­`useEffect`ä¸­æ¸…é™¤ã€‚

#### [](#hooks-are-analogies)ğŸ”¹é’©å­æ˜¯(ç±»æ¯”)

1.  â€œæ··éŸ³åšå¯¹äº†â€
2.  â€œä¸å¸åŠŸèƒ½ç»„ä»¶çš„ Mixinsâ€ã€‚

*å‚è€ƒ [Mixins](https://reactjs.org/docs/react-without-es6.html#mixins) æ–‡æ¡£ã€‚*

Hooks è§£å†³äº†æ¸²æŸ“é“å…·çš„â€œé”™è¯¯å±‚æ¬¡â€(Ryan ç§°ä¹‹ä¸ºâ€œè¯­æ³•ç¾éš¾â€)ã€‚

## [](#%E2%99%BB-90-cleaner-react)â™» 90%æ¸…æ´å‰‚èµ·ååº”

#### [](#1-hooks-let-us-colocate-single-concern-in-a-few-lines-of-code)1ã€‚é’©å­è®©æˆ‘ä»¬åœ¨å‡ è¡Œä»£ç ä¸­å…±åŒå®šä½å•ä¸ªå…³æ³¨ç‚¹

ä¾‹å¦‚)å½“æ‚¨æœ‰ä¸€ä¸ªæ–‡æ¡£æ ‡é¢˜æ›´æ–°ä»£ç ï¼Œä»¥åŠåˆ†å¸ƒåœ¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­çš„äº‹ä»¶è®¢é˜…ä»£ç æ—¶ï¼Œæ‚¨ç°åœ¨å¯ä»¥å°†æ¯ä¸ªä¸ç›¸å…³çš„ä»£ç (æ›´æ–°æ–‡æ¡£æ ‡é¢˜å’Œå–æ¶ˆ/è®¢é˜…äº‹ä»¶)åˆ†ç¦»åˆ°ä¸åŒçš„ä»£ç æ®µä¸­(åˆ†ç¦»`useEffect`æˆ–æ‚¨è‡ªå·±çš„é’©å­)ã€‚

#### [](#2-hooks-require-less-code-and-are-more-portable)2ã€‚é’©å­éœ€è¦æ›´å°‘çš„ä»£ç ï¼Œå¹¶ä¸”æ›´æ˜“ç§»æ¤

ä½¿å¾—é‡æ„å’Œæå–é€»è¾‘åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨å˜å¾—å®¹æ˜“ã€‚

æ‰€æœ‰çš„çŠ¶æ€å’Œæ•ˆæœéƒ½ä½äºå½¼æ­¤æ—è¾¹ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å‰ªåˆ‡å’Œç²˜è´´(é‡æ„)ã€‚

React è¡¨é¢ä¸Šçœ‹èµ·æ¥å¾ˆç®€å•(å¼€å‘äººå‘˜åªéœ€è¦å¤„ç†ç»„ä»¶)ï¼Œä½†æ˜¯ä½ ä¸ºäº†å®Œæˆç®€å•çš„ä»»åŠ¡(è·å–/è¯»å–æ•°æ®å’Œå–æ¶ˆ/è®¢é˜…äº‹ä»¶)è€Œå¤„ç†çš„æ‰€æœ‰äº‹æƒ…ï¼Œä»£ç å˜å¾—å¾ˆå¤§ã€‚

[*90%æ¸…æ´å·¥ React è°ˆ*](https://youtu.be/wXLf18DsV-I) *åœ¨ React Conf 2018*

## [](#-suspense-resources-cache)ğŸŒ‰+ğŸ’²æš‚è®°+èµ„æº(ç¼“å­˜)

**æ‚¬å¿µ&èµ„æºå…è®¸ä½ åƒå¯¹å¾…åŒæ­¥å€¼ä¸€æ ·å¯¹å¾…æ•°æ®ã€‚**

æœ‰ä»€ä¹ˆåˆé€‚çš„å¤„ç†é’©å­ã€æ‚¬å¿µã€èµ„æºçš„æ–¹å¼ï¼Ÿ

ä»¥å‰æˆ‘ä»¬åªæœ‰ç»„ä»¶ï¼Œä½†å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¹Ÿä½¿ç”¨ Reduxã€‚

æ‰€ä»¥ç”¨é’©å­æ¥ä»£æ›¿çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸã€‚

å¤§éƒ¨åˆ†äººç”¨ Redux åšå®¢æˆ·ç«¯ç¼“å­˜ï¼Œå¯ä»¥ç”¨æ‚¬å¿µå’Œç¼“å­˜ä»£æ›¿ã€‚

*å› æ­¤ï¼ŒReact æ„Ÿè§‰æ›´å°(å¦‚ä¹‹å‰åœ¨ 3:10 æŒ‡å‡ºçš„)*

## [](#directives)ğŸ‘‰æŒ‡ä»¤ï¼Ÿ

æŒ‡ä»¤æ˜¯â€œä½ æ”¾åœ¨ä¸€ä¸ªå…ƒç´ ä¸Šçš„å±æ€§ï¼Œå¹¶ç»™å®ƒæ·»åŠ ä¸€ä¸ªè¡Œä¸ºâ€ã€‚

Hooks å…è®¸æ‚¨å‘å…ƒç´ æ·»åŠ è¡Œä¸ºï¼Œè€Œä¸å¿…ä½¿ç”¨æ¸²æŸ“é“å…·å‘ç»„ä»¶æä¾›æ•°æ®ã€‚

æˆ‘éœ€è¦ä¸€äº›è¿™æ–¹é¢çš„ä¾‹å­â€¦æœ‰ç‚¹å›°æƒ‘ã€‚
*å‚è€ƒ[æœ¬ Reddit è¯„è®º](https://www.reddit.com/r/reactjs/comments/a4p7e0/an_unofficial_show_note_for_react_podcast_episode/ebi8dcd/)å…³äºå±æ€§çš„è§£é‡Šã€‚*

## [](#closing-comments)ğŸšªç»“æŸè¯­

*   ç‘å®‰å¯¹ React çš„æœªæ¥éå¸¸ä¹è§‚ï¼Œå› ä¸ºè´¾é‡Œå¾·Â·å¸•å°”é»˜åœ¨ç¬¬ 29 é›†ä¸­ã€‚
*   æŠ“ç´§å®ƒ(é’©å­)ã€‚
*   é’©å­å¯ä»¥å…±äº«è€Œä¸ç”¨äº¤æ¢ã€‚
    *   è€Œä¸”â€œæ›´å®¹æ˜“è¾“å…¥ï¼Œå› ä¸ºä½ ä¸ç”¨è¾“å…¥ä¸€å †é“å…·â€ï¼Œå°¤å…¶æ˜¯æ¸²æŸ“é“å…·ã€‚
    *   å¯¹äºå‡½æ•°ç»„ä»¶ï¼Œprops åªæ˜¯å‡½æ•°çš„å‚æ•°ï¼Œè¿™ä¹Ÿä½¿å…¶æ˜“äºé”®å…¥

è®¢é˜… Chantastic çš„ [React Holiday](https://react.holiday/) ï¼Œä»–å°†åœ¨æ’­å®¢ä¸­ä»‹ç»æ–°çš„ APIã€‚

## [](#resources)ğŸ—»èµ„æº

*   React æ’­å®¢[ç¬¬ 31 é›†](https://reactpodcast.simplecast.fm/31)ã€‚
*   React æ’­å®¢[ç¬¬ 29 é›†](https://reactpodcast.simplecast.fm/29)ã€‚
*   [å®˜æ–¹æŒ‚é’©æ–‡æ¡£](https://reactjs.org/hooks)
*   Ryan Florence çš„æ–‡ç« 

å¦‚æœä½ æƒ³çŸ¥é“[ç›®å½•](#table-of-contents)æ˜¯å¦‚ä½•æ·»åŠ çš„ï¼Œå‚è€ƒä¸‹é¢çš„å…¬å‘Šã€‚

[![andy image](../Images/1d3af2881c3a8b9e2c3b908e00ad9727.png)](/andy) [## é™ä»·æ ‡é¢˜ç°åœ¨è¢«é”šå®šï¼

### å®‰è¿ªèµµ(ä»–/ä»–)11 æœˆ 29 æ—¥ 181 åˆ†é’Ÿé˜…è¯»

#meta #changelog](/devteam/markdown-headers-are-now-anchored-18bg)

*å¸–å­ [React æ’­å®¢ç¬¬ 31 é›†â€”â€”ç‘å®‰Â·å¼—æ´›ä¼¦æ–¯](https://www.slightedgecoder.com/2018/12/09/react-podcast-episode-31-hooks-are-mixins-with-ryan-florence/)çš„â€œé’©å­æ˜¯ Mixinsâ€é¦–å…ˆå‡ºç°åœ¨[å®‹çš„æŠ€æœ¯åšå®¢](https://www.slightedgecoder.com)ä¸Šã€‚*