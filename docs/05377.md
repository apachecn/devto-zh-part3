# Promise.allSettled() Pt.2 -å·²ç»éƒ¨åˆ†è§£å†³äº†ï¼

> åŸæ–‡:[https://dev . to/reverent Mike/promise-all settled-pt-2-it-s-partial-settled-2nb 9](https://dev.to/irreverentmike/promise-allsettled-pt-2-it-s-partly-settled-2nb9)

è¿™æ˜¯æˆ‘å…³äºå³å°†åˆ°æ¥çš„`Promise.allSettled()`åŠŸèƒ½çš„[ç¬¬ä¸€ç¯‡æ–‡ç« ](https://mike.biful.co/solve-all-your-problems-with-promise-allsettled)çš„åç»­ï¼Œå³å°†æ¥åˆ°ä½ é™„è¿‘çš„ä¸€ä¸ªèŠ‚ç‚¹åº”ç”¨ã€‚

ä»Šå¤©æ—©äº›æ—¶å€™ï¼Œæˆ‘æ”¶åˆ°äº†æ¥è‡ª GitHub ç”¨æˆ·`@j-f1` :
çš„[æ‹‰è¯·æ±‚](https://github.com/mbifulco/blog/pull/14)

# [![GitHub logo](../Images/75095a8afc1e0f207cda715962e75c8d.png) æ›´æ–°ä½¿ç”¨æ–‡æ¡£ #14](https://github.com/mbifulco/blog/pull/14) 

[![j-f1 avatar](../Images/b3511b457fedd5d7006959c6646c625d.png)](https://github.com/j-f1) **[j-f1](https://github.com/j-f1)** posted on [<time datetime="2019-04-26T17:20:41Z">Apr 26, 2019</time>](https://github.com/mbifulco/blog/pull/14)[View on GitHub](https://github.com/mbifulco/blog/pull/14)

äº‹å®è¯æ˜ï¼Œ*æ˜¯ä¸€ç§å°†`Promise.allSettled()`æ·»åŠ åˆ°ä½ çš„åº”ç”¨ç¨‹åº*çš„ä¾¿æ·æ–¹å¼*ï¼*ğŸ‰ã€‚å®ƒä½¿ç”¨èµ·æ¥ä¹Ÿæå…¶ç®€å•ã€‚

## [](#the-corejs-npm-package)æ ¸å¿ƒ-js npm åŒ…

æ²¡é”™- [core-js](https://github.com/zloirock/core-js) ã€‚ä»ä»–ä»¬çš„`README.md`æ¥çœ‹ï¼Œè¿™æ­£æ˜¯å®ƒå¬èµ·æ¥çš„æ ·å­:

> *   Is polyfill of JavaScript standard library, which supports:
>     *   The latest ECMAScript standard.
>     *   ECMAScript standard library proposal.
>     *   Part of WHATWG/W3C standard (cross-platform or closely related ECMAScript).
> *   It is the maximum modularity: you can easily choose to load only the functions you will use.
> *   Can be used without polluting the global namespace.
> *   [is tightly integrated with `babel`](https://github.com/zloirock/core-js/blob/master/docs/2019-03-19-core-js-3-babel-and-a-look-into-the-future.md#Babel) : this allows many optimizations of `core-js` import.

è¿›ä¸€æ­¥æŸ¥çœ‹è‡ªè¿°æ–‡ä»¶ä¸­çš„[ï¼Œpolyfill ä¸­æœ‰ä¸€ä¸ªå—æ”¯æŒåŠŸèƒ½çš„åˆ—è¡¨:](//er/docs/2019-03-19-core-js-3-babel-and-a-look-into-the-future.md#ecmascript-proposals)

> *   [`Promise.allSettled`](https://github.com/tc39/proposal-promise-allSettled) Second-stage proposal

è¯¥æ­»çš„ã€‚é‚£å°±è¡Œäº†ï¼

## [](#how-to-use-corejs)å¦‚ä½•ä½¿ç”¨ core-js

æ­£å¦‚`@j-f1`æ‰€æŒ‡å‡ºçš„ï¼Œåœ¨ä»»ä½•ä½¿ç”¨`babel`ä½œä¸ºä¼ è¾“å™¨çš„é¡¹ç›®ä¸­ï¼Œä½ æ‰€éœ€è¦åšçš„å°±æ˜¯å°† core-js æ·»åŠ åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œå¹¶å°†å…¶åŒ…å«åœ¨ä½ çš„åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹:

é¦–å…ˆï¼Œå°†ä¾èµ–é¡¹æ·»åŠ åˆ°æ‚¨çš„é¡¹ç›®ä¸­

```
> yarn add core-js 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åï¼Œåœ¨ä½ çš„åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹(é€šå¸¸æ˜¯ç±»ä¼¼äº`index.js`ï¼Œæˆ–è€…é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„`app.js`):

```
import 'core-js'; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ–è€…ï¼Œå¦‚æœæ‚¨æƒ³åªåŒ…æ‹¬*å’Œ`Promise.allSettled()`èšåˆå¡«å……çš„*ï¼Œè€Œä¸åŒ…æ‹¬å…¶ä»–å†…å®¹ï¼Œè¯·ä½¿ç”¨:

```
import 'core-js/proposals/promise-all-settled'; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°±æ˜¯è¿™æ ·ï¼ğŸ»