# è¾…åŠ©åŠŸèƒ½ä¼˜å…ˆ:é€‰é¡¹å¡

> åŸæ–‡:[https://dev.to/link2twenty/accessibility-first-tabs-ken](https://dev.to/link2twenty/accessibility-first-tabs-ken)

æˆ‘å·²ç»å†³å®šæ‹¿èµ·è¿™ä¸ªç³»åˆ—çš„å¦ä¸€ä¸ªå…ƒç´ ã€‚æˆ‘å—åˆ°äº† [@lkopacz](https://dev.to/lkopacz) å…³äºå¯è®¿é—®æ€§å’Œ javascript çš„å¸–å­çš„å¯å‘ï¼Œå®ƒå€¼å¾—ä¸€è¯»ï¼Œä»¥åˆ¶ä½œéœ€è¦ javascript ä½†åˆä¿æŒå…¶å¯è®¿é—®æ€§çš„ä¸œè¥¿ã€‚

[![lkopacz](../Images/cd7d14f0da8b5733c447c96ff9f5a2f6.png)](/lkopacz) [## a11y å’Œ JSâ€”â€”ä¸€æ®µçœ‹ä¼¼æ ‡æ–°ç«‹å¼‚çš„æ‹æƒ…

### æ—èµ›Â·ç§‘å¸•å¥‡ 1 æœˆ 28 æ—¥ 196 åˆ†é’Ÿé˜…è¯»

#a11y #javascript #frontend #discuss](/lkopacz/a11y-and-js---a-seemingly-unconventional-romance-24i0)

æˆ‘å†³å®šåˆ¶ä½œä¸€ç§é€‰é¡¹å¡å¼å¯¼èˆªçš„å½¢å¼ï¼Œå®ƒæ¾æ•£åœ°éµå¾ªææ–™è®¾è®¡è§„èŒƒã€‚æˆ‘ä»¬çš„æˆå“çœ‹èµ·æ¥ä¼šæœ‰ç‚¹åƒè¿™æ ·

[https://jsfiddle.net/link2twenty/v2d1htzx/embedded/result//dark](https://jsfiddle.net/link2twenty/v2d1htzx/embedded/result//dark)

## [](#requirements)è¦æ±‚

ä¸ºäº†è®©æˆ‘ä»¬çš„æ ‡ç­¾å¯è®¿é—®ï¼Œæˆ‘ä»¬éœ€è¦èƒ½å¤Ÿä½¿ç”¨é”®ç›˜å’Œé¼ æ ‡ä¸å®ƒä»¬äº¤äº’ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½å‡è®¾æˆ‘ä»¬çš„ç”¨æˆ·æ˜¯è§†åŠ›æ­£å¸¸çš„ã€‚

### [](#keyboard)é”®ç›˜:

*   **Tab é”®**ï¼Œæˆ‘ä»¬å¿…é¡»èƒ½å¤Ÿä½¿ç”¨é€‰é¡¹å¡æ¥æ²¿ç€é€‰é¡¹å¡ç§»åŠ¨ç„¦ç‚¹
*   è¿”å›é”®ï¼Œæˆ‘ä»¬å¿…é¡»èƒ½å¤ŸæŒ‰ä¸‹è¿”å›å½“ä¸€ä¸ªæ ‡ç­¾æ˜¯ç„¦ç‚¹ç§»åŠ¨åˆ°å®ƒ
*   **ç©ºæ ¼é”®**ï¼Œç©ºæ ¼é”®åº”è¯¥åƒå›è½¦é”®ä¸€æ ·
*   **Home é”®**ï¼Œæˆ‘ä»¬å¿…é¡»é€‰æ‹©åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªé€‰é¡¹å¡
*   **ç»“æŸé”®**ï¼Œæˆ‘ä»¬å¿…é¡»é€‰æ‹©åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªé€‰é¡¹å¡
*   **ç®­å¤´é”®**ï¼Œæˆ‘ä»¬å¿…é¡»èƒ½å¤Ÿç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªæˆ–ä¸Šä¸€ä¸ªæ ‡ç­¾æ—¶ï¼ŒæŒ‰ä¸‹å³é”®æˆ–å·¦é”®ï¼Œä½†åªæœ‰å½“ç„¦ç‚¹åœ¨æˆ‘ä»¬çš„`tablist`

*è¿™äº›é”®ç›˜è¦æ±‚å¯ä»¥åœ¨[è¿™é‡Œæ‰¾åˆ°](https://www.w3.org/TR/wai-aria-practices/examples/tabs/tabs-1/tabs.html#kbd_label)T3ã€‘*

### [](#mouse)é¼ æ ‡:

*   **ç‚¹å‡»é€‰é¡¹å¡ä¸Šçš„**ä¼šå°†è¯¥é€‰é¡¹å¡è®¾ç½®ä¸ºæ´»åŠ¨çŠ¶æ€
*   æ‚¬åœåº”è¯¥ç»™å‡ºç›®æ ‡çš„ä¸€äº›æŒ‡ç¤º

### [](#nonsighted)æ— è§†åŠ›:

*   ä¾é **é”®ç›˜æ”¯æŒ**
*   å¿…é¡»ä½¿ç”¨**å±å¹•é˜…è¯»å™¨**

æˆ‘ç›¸ä¿¡è¿™å°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ï¼Œå°½ç®¡å¦‚æœæˆ‘é”™äº†è¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¹Ÿç›¸ä¿¡ä¸Šé¢çš„ä¾‹å­ç¬¦åˆæˆ‘ä»¬æ¸…å•ä¸Šçš„æ¯ä¸€é¡¹ã€‚æ‰€ä»¥æˆ‘ä»¬ç»§ç»­å§ã€‚

## [](#markup)Markup

æˆ‘æœ‰ä¸€ä¸ªåŒ…å«æ•´ä¸ªé€‰é¡¹å¡â€œå…ƒç´ â€çš„`<div>`,å®ƒéœ€è¦ä¸€ä¸ª IDï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ç¨åçš„ javascript å’Œ`tab-container`ç±»ä¸­æ‰¾åˆ°å®ƒï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”¨ CSS å¯¹å®ƒè¿›è¡Œæ ·å¼åŒ–ã€‚

ç°åœ¨æˆ‘ä»¬æœ‰ä¸€äº›è§’è‰²ï¼Œè§’è‰²å‘Šè¯‰æµè§ˆå™¨æ¯ä¸ªå…ƒç´ åº”è¯¥å¦‚ä½•å¤„ç†ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª`<ul>`å’Œè§’è‰² [`tablist`](https://www.w3.org/TR/wai-aria-1.1/#tablist) ã€‚è¿™è®©æˆ‘ä»¬çš„æµè§ˆå™¨çŸ¥é“æˆ‘ä»¬åˆ—å‡ºäº†ä¸€äº›æ ‡ç­¾ï¼Œè¿™æ„å‘³ç€å½“å±å¹•é˜…è¯»å™¨çœ‹åˆ°æ ‡ç­¾æ—¶ï¼Œå®ƒä¼šè¯´â€œä¸¤ä¸ªé€‰ä¸­çš„æ ‡ç­¾ä¸­çš„ä¸€ä¸ªâ€ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªè§’è‰²ä¸º [`tab`](https://www.w3.org/TR/wai-aria-1.1/#tab) çš„`<li>`ï¼Œè¿™äº›æ˜¯æˆ‘ä»¬ç”¨äºæ§åˆ¶æ•´ä¸ªâ€œå…ƒç´ â€çš„â€œæŒ‰é’®â€ï¼Œæˆ‘ä»¬å¿…é¡»ç»™æ¯ä¸ªé€‰é¡¹å¡ 0 çš„ [`tabindex`](https://html.spec.whatwg.org/multipage/interaction.html#attr-tabindex) ï¼Œå¹¶ä¸”æ¯ä¸ªé€‰é¡¹å¡å¿…é¡»æœ‰ä¸€ä¸ª [`aria-control`](https://www.w3.org/TR/wai-aria-1.1/#aria-controls) å±æ€§ï¼Œå³å¯¹åº”é¢æ¿çš„ IDã€‚æœ€åï¼Œè¿˜æœ‰ä¸€ä¸ª [`aria-selected`](https://www.w3.org/TR/wai-aria-1.1/#aria-selected) ï¼Œå®ƒåŒ…å«çœŸæˆ–å‡ï¼Œè¿™å–å†³äºè¯¥é€‰é¡¹å¡æ˜¯å¦æ˜¯æ´»åŠ¨çš„/é€‰ä¸­çš„é€‰é¡¹å¡ã€‚

æœ€åï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹`<main>`å†…å®¹ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªé¢æ¿éƒ½å‡†å¤‡äº†ä¸€ä¸ª`<div>`ï¼Œå®ƒä»¬éœ€è¦è§’è‰² [`tabpanel`](https://www.w3.org/TR/wai-aria-1.1/#tabpanel) ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ [`aria-expanded`](https://www.w3.org/TR/wai-aria-1.1/#aria-expanded) å±æ€§ï¼Œè¯¥å±æ€§æ ¹æ®é¢æ¿æ˜¯å¦æ´»åŠ¨/å±•å¼€æ¥åˆ¤æ–­æ˜¯çœŸè¿˜æ˜¯å‡ã€‚ID å±æ€§æ˜¯å¿…éœ€çš„ï¼Œå®ƒå¯¹åº”äº`<li>`å…ƒç´ çš„`aria-control`å±æ€§ã€‚

```
<div id="some_ID" class="tab-container">
  <ul role="tablist">
    <li role="tab" aria-controls="some_ID_1" tabindex="0" aria-selected="true">Tab 1</li>
    <li role="tab" aria-controls="some_ID_2" tabindex="0" aria-selected="false">Tab 2</li>
  </ul>
  <main>
    <div id="some_ID_1" role="tabpanel" aria-expanded="true">
      <p>
        content for 1
      </p>
    </div>
    <div id="some_ID_2" role="tabpanel" aria-expanded="false">
      <p>
        content for 2
      </p>
    </div>
  </main>
</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä»¥ä¸‹æ˜¯ç¤ºä¾‹ä¸­çš„æ ‡è®°ã€‚

[https://jsfiddle.net/link2twenty/d3kc2qgv//embedded/html,result//dark](https://jsfiddle.net/link2twenty/d3kc2qgv//embedded/html,result//dark)

## [](#styles)æ ·å¼

æˆ‘ä¸ä¼šè¯¦ç»†ä»‹ç»è¿™äº›é£æ ¼ï¼Œå› ä¸ºå®ƒä»¬æ˜¯æˆ‘ä¸ªäººçš„å–œå¥½ï¼Œä½†æˆ‘ä¼šæŒ‡å‡ºå‡ ä»¶äº‹ã€‚

é™¤äº†ç±»`.tab-container`ä¹‹å¤–ï¼Œæˆ‘å°è¯•ä½¿ç”¨è§’è‰²ä½œä¸ºé€‰æ‹©å™¨ï¼Œè¿™æ„å‘³ç€å¦‚æœæˆ‘é”™è¿‡äº†ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œè¿™å°†æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œä½†è¿™ä¹Ÿä½¿ä»£ç æ›´å¹²å‡€ã€‚

æˆ‘æœ‰æ‚¬åœæ•ˆæœï¼Œä½†æ²¡æœ‰èšç„¦æ•ˆæœï¼Œæˆ‘è®¤ä¸ºä½ ç”¨`tabindex`å¾—åˆ°çš„è½®å»“åº”è¯¥è¶³å¤Ÿäº†ï¼Œå¦‚æœä½ ä¸åŒæ„ï¼Œè¯·éšæ—¶æ‰“ç”µè¯ç»™æˆ‘ã€‚

```
.tab-container {
  overflow: hidden;
  background: #fff;
}

.tab-container [role=tablist] {
  display: flex;
  margin: 0;
  padding: 0;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
}

.tab-container [role=tab] {
  position: relative;
  list-style: none;
  text-align: center;
  cursor: pointer;
  padding: 14px;
  flex-grow: 1;
  color: #444;
}

.tab-container [role=tab]:hover {
  background: #eee;
}

.tab-container [role=tab][aria-selected=true] {
  color: #000;
}

.tab-container [role=tab][aria-selected=true]::after {
  content: "";
  position: absolute;
  width: 100%;
  height: 4px;
  background: #f44336;
  left: 0;
  bottom: 0;
}

.tab-container main {
  padding: 0 1em;
  position: relative;
}

.tab-container main [role=tabpanel] {
  display: none;
}

.tab-container main [role=tabpanel][aria-expanded=true] {
  display: block;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬å°†æ ·å¼æ·»åŠ åˆ°ç¤ºä¾‹ä¸­ã€‚

[https://jsfiddle.net/link2twenty/hm32w5n0//embedded/css,result//dark](https://jsfiddle.net/link2twenty/hm32w5n0//embedded/css,result//dark)

## JavaScript

å¼€å§‹äº†ï¼Œæˆ‘è¦æ·»åŠ ä¸€äº› javascriptã€‚è¿™æ„å‘³ç€é€‰é¡¹å¡å°†ä¸å†å¯ç”¨ï¼Œå¯¹å—ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ã€‚

åŒæ ·ï¼Œæˆ‘ä¸ä¼šè®²å¤ªå¤šç»†èŠ‚ï¼Œå› ä¸ºï¼ŒçœŸçš„ï¼Œè¿™åªæ˜¯ä¸€å †äº‹ä»¶ç›‘å¬å™¨ã€‚ä½ å¯èƒ½æƒ³çŸ¥é“æˆ‘ä¸ºä»€ä¹ˆç”¨ä¸€ä¸ªç±»ï¼Œå› ä¸ºæˆ‘å–œæ¬¢å®ƒä»¬ï¼Œä½ ä¸å¿…ç”¨ä¸€ä¸ªç±»ï¼Œæˆ‘åªæ˜¯å–œæ¬¢ç”¨å®ƒä»¬ã€‚

æˆ‘ä½¿ç”¨äº†å’Œ CSS ä¸€æ ·çš„é€‰æ‹©å™¨æ ·å¼ï¼Œå®ƒå¯¹æˆ‘æ¥è¯´å¾ˆæœ‰æ„ä¹‰ã€‚æˆ‘åªæœ‰ä¸€ä¸ªå…¬å…±å‡½æ•°ï¼Œå®ƒæ‰€åšçš„å°±æ˜¯æ”¹å˜`aria-selected`å’Œ`aria-expanded`å±æ€§ã€‚æˆ‘ä»¬çš„ CSS å¤„ç†æ‰€æœ‰çš„æ ·å¼å˜åŒ–ã€‚

```
class TabController {
  constructor(container) {
    this.container = document.querySelector(container);
    this.tablist = this.container.querySelector('[role=tablist]');
    this.tabs = this.container.querySelectorAll('[role=tab]');
    this.tabpanels = this.container.querySelectorAll('[role=tabpanel]');
    this.activeTab = this.container.querySelector('[role=tab][aria-selected=true]');

    this._addEventListeners();
  }

  // Private function to set event listeners
  _addEventListeners() {
    for (let tab of this.tabs) {
      tab.addEventListener('click', e => {
        e.preventDefault();
        this.setActiveTab(tab.getAttribute('aria-controls'));
      });
      tab.addEventListener('keyup', e => {
        if (e.keyCode == 13 || e.keyCode == 32) { // return or space
          e.preventDefault();
          this.setActiveTab(tab.getAttribute('aria-controls'));
        }
      })
    }
    this.tablist.addEventListener('keyup', e => {
      switch (e.keyCode) {
        case 35: // end key
          e.preventDefault();
          this.setActiveTab(this.tabs[this.tabs.length - 1].getAttribute('aria-controls'));
          break;
        case 36: // home key
          e.preventDefault();
          this.setActiveTab(this.tabs[0].getAttribute('aria-controls'));
          break;
        case 37: // left arrow
          e.preventDefault();
          let previous = [...this.tabs].indexOf(this.activeTab) - 1;
          previous = previous >= 0 ? previous : this.tabs.length - 1;
          this.setActiveTab(this.tabs[previous].getAttribute('aria-controls'));
          break;
        case 39: // right arrow
          e.preventDefault();
          let next = [...this.tabs].indexOf(this.activeTab) + 1;
          next = next < this.tabs.length ? next : 0
          this.setActiveTab(this.tabs[next].getAttribute('aria-controls'));
          break;
      }
    })
  }

  // Public function to set the tab by id
  // This can be called by the developer too.
  setActiveTab(id) {
    for (let tab of this.tabs) {
      if (tab.getAttribute('aria-controls') == id) {
        tab.setAttribute('aria-selected', "true");
        tab.focus();
        this.activeTab = tab;
      } else {
        tab.setAttribute('aria-selected', "false");
      }
    }
    for (let tabpanel of this.tabpanels) {
      if (tabpanel.getAttribute('id') == id) {
        tabpanel.setAttribute('aria-expanded', "true");
      } else {
        tabpanel.setAttribute('aria-expanded', "false");
      }
    }
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åæˆ‘ä»¬å¯ä»¥å®ä¾‹åŒ–ä¸€ä¸ªé€‰é¡¹å¡å¯¼èˆªçš„å®ä¾‹ï¼Œå¦‚ä¸‹æ‰€ç¤º

```
const someID = new TabController('#some_ID'); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°†è¿™ä¸€åˆ‡ç»“åˆåœ¨ä¸€èµ·

[https://jsfiddle.net/link2twenty/v2d1htzx/embedded/js,result//dark](https://jsfiddle.net/link2twenty/v2d1htzx/embedded/js,result//dark)

## [](#signing-off)æ³¨é”€

æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™ç¯‡å°æ–‡ç« ï¼Œå¹¶åœ¨ä½ çš„ä»»ä½•ç½‘ç«™ä¸Šéšæ„ä½¿ç”¨è¿™äº›æŠ€æœ¯ï¼Œæˆ–è€…å…¨éƒ¨ã€‚æˆ‘çœŸçš„å¾ˆæ„Ÿå…´è¶£å¬åˆ°ä»»ä½•æ–¹æ³•ï¼Œä½ å¯èƒ½æœ‰è¿™æ ·åšï¼Œæ²¡æœ‰ JavaScriptï¼Œæˆ‘è®¤ä¸ºè¿™å¯ä»¥ç”¨ä¸€ä¸ªç”µå°ç»„ï¼Œä½†æˆ‘ç°åœ¨ä¸æ‰“ç®—å°è¯•ã€‚

æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼
ğŸ¦„â¤ğŸ¦„ğŸ¦„ğŸ§ â¤ğŸ¦„