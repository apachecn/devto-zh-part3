# ä½¿ç”¨ Java 12 å’Œ JHipster 6 çš„æ›´å¥½ã€æ›´å¿«ã€æ›´è½»çš„ Java

> åŸæ–‡:[https://dev . to/oktadev/better-fast-light-Java-with-Java-12-and-jhipster-6-5a 4](https://dev.to/oktadev/better-faster-lighter-java-with-java-12-and-jhipster-6-5a4)

æœ€è¿‘ Java ç”Ÿæ€ç³»ç»Ÿä¸­å‘ç”Ÿäº†å¾ˆå¤šäº‹æƒ…ã€‚ç°åœ¨ä¸»è¦çš„ Java ç‰ˆæœ¬æ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡ï¼Œè¿™å¯èƒ½å¾ˆéš¾è·Ÿä¸Šã€‚å°±ä¸ªäººè€Œè¨€ï¼Œæˆ‘ä½¿ç”¨ Spring Boot å¼€å‘äº†æˆ‘çš„å¤§éƒ¨åˆ† Java åº”ç”¨ç¨‹åºã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œæˆ‘åœ¨ Java 8 ä¸Šåœæ»ä¸å‰ï¼Œç›´åˆ° Spring Boot 2.1 å‘å¸ƒã€‚

Spring Boot 2.1 å¢åŠ äº† Java 11 æ”¯æŒï¼Œä»¥åŠæ€§èƒ½æ”¹è¿›ã€æ–°çš„åº¦é‡å®ç°ã€æ–°çš„æ‰§è¡Œå™¨ç«¯ç‚¹å’Œ Spring Security çš„ä¸€æµ OIDC æ”¯æŒã€‚

åœ¨æˆä¸º Java å¼€å‘äººå‘˜ä¹‹å‰ï¼Œæˆ‘æ˜¯ä¸€å web å¼€å‘äººå‘˜ã€‚æˆ‘å¼€å‘ Java å·²ç» 20 å¹´äº†ï¼Œæ‰€ä»¥è¿™å·²ç»å¾ˆè¯´æ˜é—®é¢˜äº†ï¼å¦‚æœæ‚¨æ˜¯ä¸€å Java å¼€å‘äººå‘˜ï¼Œæ‚¨å¯èƒ½ä¼šå¯¹ JavaScript ä¸–ç•Œçš„å˜åŒ–é€Ÿåº¦æ„Ÿåˆ°å›°æƒ‘ã€‚å¦‚æœä½ è§‰å¾— Java å¾ˆéš¾è·Ÿä¸Šï¼Œé‚£å°±è¯•è¯•è·Ÿä¸Š JavaScript å’Œå®ƒçš„ç”Ÿæ€ç³»ç»Ÿå§ï¼å¥½æ¶ˆæ¯æ˜¯æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•æ¥åŒæ—¶æ»¡è¶³è¿™ä¸¤ç§éœ€æ±‚:åªéœ€ä½¿ç”¨ [JHipster](https://www.jhipster.tech) ã€‚

JHipster 6 ä½¿ç”¨ Spring Boot 2.1 ä½œä¸ºå…¶åç«¯ APIï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥ä½¿ç”¨ Java 11+æ¥å¼€å‘æ‚¨çš„ JHipster åº”ç”¨ç¨‹åºï¼

å¦‚æœä½ æƒ³çœ‹è§†é¢‘ï¼Œæˆ‘åˆ¶ä½œäº†è¿™ç¯‡åšæ–‡çš„[æˆªå±ã€‚](https://youtu.be/Ktnvqoouulg)

## JHipster å¦‚ä½•è®© Java å’Œ JavaScript å¼€å‘å˜å¾—æ›´ç®€å•ï¼Ÿ

JHipster æ˜¯æˆ‘æœ€å–œæ¬¢çš„å¼€æºé¡¹ç›®ä¹‹ä¸€ã€‚è¿™æ˜¯ä¸€ä¸ªç”Ÿæˆã€å¼€å‘å’Œéƒ¨ç½² Spring Boot + Angular åº”ç”¨ç¨‹åºçš„å¼€å‘å¹³å°ã€‚æ­¤å¤–ï¼Œå®ƒæ”¯æŒ Reactã€Vueï¼Œå¹¶é€šè¿‡ç½‘é£æ“ä½œç³»ç»Ÿã€å¼¹æ€§å †æ ˆå’Œ Docker åˆ›å»ºå¾®æœåŠ¡æ¶æ„ã€‚

Java å¼€å‘äººå‘˜å€¾å‘äºä¸å–œæ¬¢ JavaScriptï¼Œä½†æ˜¯å¾ˆå¤šäººéƒ½å–œæ¬¢ TypeScriptã€‚ä½ çŒœæ€ä¹ˆç€ï¼ŸJHipster çš„æ‰€æœ‰ UI æ¡†æ¶å®ç°éƒ½ä½¿ç”¨ TypeScriptï¼

JHipster é€šè¿‡ä¸ºæ‚¨é…ç½®ä¸€åˆ‡å¹¶ä½¿ç”¨å…¶åº•å±‚æ¡†æ¶çš„æœ€æ–°ç‰ˆæœ¬ï¼Œä½¿ Java å’Œ JavaScript å¼€å‘å˜å¾—æ›´åŠ å®¹æ˜“ã€‚æƒ³è¦å‡çº§æ‚¨çš„åº”ç”¨ç¨‹åºä»¥ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬å—ï¼Ÿåªéœ€è¿è¡Œ`jhipster upgrade`ã€‚

## [](#install-java-11-or-java-12)å®‰è£… Java 11 æˆ– Java 12

åœ¨ä½ æ‹…å¿ƒå®‰è£… JHipster ä¹‹å‰ï¼Œå…ˆå®‰è£… Java 11ã€‚æˆ‘æ¨èç”¨ [SDKMANï¼](https://sdkman.io/)å¯¹äºè¿™ä¸ªä»»åŠ¡ã€‚å¦‚æœä½ æ²¡æœ‰å®‰è£…ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå‘½ä»¤:

```
curl -s "https://get.sdkman.io" | bash 
```

ä¸€æ—¦ä½ å®‰è£…äº†å®ƒï¼Œä½ å¯ä»¥ä½¿ç”¨`sdk list java`çœ‹åˆ°æ‰€æœ‰å¯ç”¨çš„ Java 11 ç‰ˆæœ¬ã€‚

å®‰è£… OpenJDK ç‰ˆæœ¬:

```
sdk install java 11.0.2-open 
```

å¦‚æœä½ æ›´æ„¿æ„ä½¿ç”¨äºšé©¬é€Šçš„ Correttoï¼Œåªéœ€ä½¿ç”¨`11.0.2-amzn`ä½œä¸ºåç§°ã€‚å¦‚æœæƒ³å°½å¯èƒ½çš„æ½®äººï¼Œç”šè‡³å¯ä»¥ç”¨ Java 12ï¼

```
sdk install java 12.0.0-open 
```

**æç¤º:**å¦‚æœä½ ç”¨`12.0.0-zulu`ä½œä¸ºåå­—ï¼ŒAzul çš„ Zulu ä¹Ÿå¯ä»¥ã€‚

## [](#install-jhipster-6)å®‰è£… JHipster 6

JHipster 6 çš„ä¸€ä¸ªæµ‹è¯•ç‰ˆ[äº 2019 å¹´ 5 æœˆ 3 æ—¥](https://www.jhipster.tech/2019/04/04/jhipster-release-6.0.0-beta.0.html)å‘å¸ƒã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…å®ƒã€‚

```
npm install -g generator-jhipster@beta 
```

**æ³¨æ„**:`npm`å‘½ä»¤æ˜¯ [Node.js](https://nodejs.org) çš„ä¸€éƒ¨åˆ†ã€‚æ‚¨éœ€è¦æœ‰ Node 10.x æ¥å®‰è£… JHipster å¹¶è¿è¡Œæœ‰ç”¨çš„å‘½ä»¤ã€‚

## [](#create-a-spring-boot-angular-app-that-runs-on-java-11)åˆ›å»ºä¸€ä¸ªè¿è¡Œåœ¨ Java 11+ä¸Šçš„ Spring Boot + Angular App

å¼€å§‹ä½¿ç”¨ JHipster çš„æœ€åŸºæœ¬çš„æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªæ–°ç›®å½•ï¼Œæ”¾å…¥ cdï¼Œç„¶åè¿è¡Œ`jhipster`ã€‚ç³»ç»Ÿä¼šæç¤ºæ‚¨å›ç­”ä¸€äº›å…³äºæ‚¨æƒ³è¦åˆ›å»ºçš„åº”ç”¨ç¨‹åºçš„é—®é¢˜ã€‚é—®é¢˜èŒƒå›´ä»ä½ çš„åº”ç”¨ç¨‹åºçš„åç§°ï¼Œåˆ°ä½ æƒ³ä½¿ç”¨çš„èº«ä»½éªŒè¯ç±»å‹ï¼Œåˆ° SQL ä¸ NoSQLã€‚

JHipster ä¹Ÿæœ‰ä¸€ç§é¢†åŸŸè¯­è¨€(JHipster é¢†åŸŸè¯­è¨€çš„ JDL)ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥å®šä¹‰ä½ çš„åº”ç”¨ç¨‹åºã€‚

```
application {
  config {}
} 
```

å¦‚æœæ‚¨ä½¿ç”¨ä¸Šè¿°ä»£ç åˆ›å»ºæ‚¨çš„åº”ç”¨ç¨‹åºï¼Œå®ƒå°†ä½¿ç”¨é»˜è®¤å€¼:

*   åŸºæœ¬åç§°:`jhipster`

*   åº”ç”¨ç¨‹åºç±»å‹:`monolith`

*   databaseType: `sql`

*   ç­‰ç­‰ã€‚

**æç¤º:**ä½ å¯ä»¥åœ¨ [JHipster çš„ JDL æ–‡æ¡£](https://www.jhipster.tech/jdl/#available-application-options)ä¸­çœ‹åˆ°æ‰€æœ‰çš„é»˜è®¤å€¼ã€‚

è¦ä½¿ç”¨ JHipster ç”Ÿæˆæ”¯æŒ OAuth 2.0 çš„åº”ç”¨ç¨‹åºï¼Œè¯·åœ¨æ–°çš„é¡¹ç›®ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª`app.jh`æ–‡ä»¶(ä¾‹å¦‚`~/hipapp` ):

```
application {
  config {
    baseName hipapp
    authenticationType oauth2
  }
} 
```

æ‰“å¼€ç»ˆç«¯çª—å£ï¼Œå¯¼èˆªåˆ°ä¸è¯¥æ–‡ä»¶ç›¸åŒçš„ç›®å½•ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç”Ÿæˆä¸€ä¸ªå¸¦æœ‰è§’åº¦ UI çš„ Spring Boot APIã€‚

**è­¦å‘Š:**ç¡®ä¿ä½ ä¸åœ¨ä½ çš„ä¸»ç›®å½•ä¸­ï¼æ‚¨çš„é¡¹ç›®å°†åœ¨ä¸`app.jh`ç›¸åŒçš„ç›®å½•ä¸­ç”Ÿæˆã€‚

```
jhipster import-jdl app.jh 
```

è¿™å°†åˆ›å»ºå¤§é‡æ–‡ä»¶å¹¶ä½¿ç”¨`npm install`å®‰è£…ä¾èµ–é¡¹ã€‚å½“æ‚¨è¿è¡Œæ­¤å‘½ä»¤æ—¶ï¼Œæ‚¨çš„ç»ˆç«¯åº”è¯¥ç±»ä¼¼äºä»¥ä¸‹å†…å®¹:

[![Results of import-jdl](../Images/24f91f28e9c4c03e21cceb8ac02abe80.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--GBpudOO5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://developer.okta.com/assets-jekyll/blog/java-12-jhipster-6/import-jdl-7db81bd6575856b5ad3769531b8d5f358d67dae3a1c975aefd2fea6aeb8c99bc.png)

å¦‚æœä½ æƒ³çœ‹çœ‹è¿™ä¸ªå‘½ä»¤å®é™…ä¸Šæ˜¯ä»€ä¹ˆæ ·å­ï¼Œä½ å¯ä»¥çœ‹çœ‹ä¸‹é¢çš„å½•éŸ³ã€‚

[https://www.youtube.com/embed/sbwD697nHwM](https://www.youtube.com/embed/sbwD697nHwM)

ç”±äºæ‚¨å°†`oauth2`æŒ‡å®šä¸ºè®¤è¯ç±»å‹ï¼Œå› æ­¤å°†ä¸º Keycloak å®‰è£… Docker Compose é…ç½®ã€‚

[Keycloak](https://www.keycloak.org/) æ˜¯ä¸€ä¸ª Apache è®¸å¯çš„å¼€æºèº«ä»½å’Œè®¿é—®ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚é™¤äº†ä¸º Docker Compose åˆ›å»ºä¸€ä¸ª [`src/main/docker/keycloak.yml`](https://github.com/jhipster/generator-jhipster/blob/master/generators/server/templates/src/main/docker/keycloak.yml.ejs) æ–‡ä»¶ä¹‹å¤–ï¼ŒJHipster è¿˜ä¼šç”Ÿæˆä¸€ä¸ª [`src/main/docker/config/realm-config`](https://github.com/jhipster/generator-jhipster/tree/master/generators/server/templates/src/main/docker/config/realm-config) ç›®å½•ï¼Œå…¶ä¸­åŒ…å«é…ç½® Keycloak ä»¥ä¸ JHipster ä¸€èµ·ä½¿ç”¨çš„æ–‡ä»¶ã€‚

## [](#run-your-jhipster-app-and-log-in-with-keycloak)è¿è¡Œæ‚¨çš„ JHipster åº”ç”¨ç¨‹åºï¼Œå¹¶ä½¿ç”¨ Keycloak ç™»å½•

æ‚¨çš„ JHipster åº”ç”¨ç¨‹åºå¿…é¡»è¿è¡Œ Keycloak æ‰èƒ½æˆåŠŸå¯åŠ¨ã€‚è¿™æ˜¯å› ä¸º Spring Security 5.1 çš„[ä¸€çº§ OIDC æ”¯æŒ](https://developer.okta.com/blog/2019/03/05/spring-boot-migration)åœ¨ JHipster 6 ä¸­å¾—åˆ°äº†åˆ©ç”¨ã€‚

è¿™ç§ OIDC æ”¯æŒåŒ…æ‹¬ discoveryï¼Œè¿™æ„å‘³ç€ Spring Security ä¸ä¸€ä¸ª`/.well-known/openid-configuration`ç«¯ç‚¹å¯¹è¯æ¥é…ç½®è‡ªå·±ã€‚æˆ‘è‡ªå·±å®Œæˆäº†[è¿ç§»](https://github.com/jhipster/generator-jhipster/pull/9416)ï¼Œåˆ é™¤çš„ä»£ç æ¯”æˆ‘æ·»åŠ çš„è¿˜å¤šï¼

ä½¿ç”¨ Docker Compose å¯åŠ¨ key cloak:

```
docker-compose -f src/main/docker/keycloak.yml up -d 
```

**æç¤º:**å¦‚æœä½ æ²¡æœ‰å®‰è£… Docker Composeï¼Œå‚è§[è¿™äº›è¯´æ˜](https://docs.docker.com/compose/install/)äº†è§£å¦‚ä½•å®‰è£…ã€‚

ç„¶åä½¿ç”¨ Maven:
å¯åŠ¨æ‚¨çš„åº”ç”¨ç¨‹åº

```
./mvnw 
```

å½“ä½ çš„åº”ç”¨å¯åŠ¨å¹¶è¿è¡Œæ—¶ï¼Œåœ¨ä½ æœ€å–œæ¬¢çš„æµè§ˆå™¨ä¸­æ‰“å¼€`http://localhost:8080`ï¼Œç‚¹å‡»**ç™»å½•**ã€‚ä½ å°†è¢«é‡å®šå‘åˆ° Keycloakï¼Œåœ¨é‚£é‡Œä½ å¯ä»¥è¾“å…¥`admin/admin`ç™»å½•ã€‚

[![Welcome, Java Hipster](../Images/7823491c1d65a63189db9d849070a4fb.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--sSdj379L--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://developer.okta.com/assets-jekyll/blog/java-12-jhipster-6/welcome-java-hipster-f98915cd9e41341e9bea62953d579dd0cdbe25dbdba7a5d1a55037f2ec310427.png)

å¾ˆåœ†æ»‘ï¼Œæ˜¯å§ï¼Ÿæ‚¨åˆšåˆšåˆ›å»ºäº†ä¸€ä¸ªç°ä»£çš„å•é¡µé¢åº”ç”¨ç¨‹åº(SPA ),å®ƒä½¿ç”¨äº† Angular çš„æœ€æ–°å‘å¸ƒç‰ˆæœ¬ï¼ä¸ä»…å¦‚æ­¤ï¼Œå®ƒè¿˜ä½¿ç”¨äº† OAuth 2.0 æœ€å®‰å…¨çš„å½¢å¼- [æˆæƒç æµ](https://developer.okta.com/blog/2018/04/10/oauth-authorization-code-grant-type)ã€‚

**æ³¨æ„:**å¦‚æœä½ å¯¹ OAuth 2.0 å’Œ OpenID Connect (OIDC)å¦‚ä½•ååŒå·¥ä½œæ„Ÿåˆ°å›°æƒ‘ï¼Œè¯·å‚è§[OAuth åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ](https://developer.okta.com/blog/2017/06/21/what-the-heck-is-oauth)ç®€è€Œè¨€ä¹‹ï¼ŒOIDC æ˜¯ OAuth 2.0 ä¹‹ä¸Šå¢åŠ èº«ä»½çš„ä¸€ä¸ªè–„å±‚ã€‚

## [](#use-okta-were-always-on)ä½¿ç”¨ [Okta](https://developer.okta.com) :æˆ‘ä»¬æ°¸è¿œåœ¨çº¿ï¼

Keycloak æ˜¯ä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®ï¼Œéå¸¸é€‚åˆå¼€å‘å’Œæµ‹è¯•ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨å®ƒï¼Œæ‚¨å°†è´Ÿè´£ç»´æŠ¤å®ƒï¼Œå°†å…¶æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶ç¡®ä¿å®ƒå…¨å¤©å€™è¿è¡Œã€‚åŸºäºè¿™äº›åŸå› ï¼Œæˆ‘æ¨èåœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ [Okta](https://developer.okta.com) ã€‚æ¯•ç«Ÿï¼Œæˆ‘ä»¬çš„*æ°¸è¿œåœ¨ï¼*ğŸ˜ƒ

### [](#create-an-openid-connect-web-application)åˆ›å»ºä¸€ä¸ª OpenID è¿æ¥ Web åº”ç”¨ç¨‹åº

é¦–å…ˆï¼Œæ³¨å†Œä¸€ä¸ª[æ°¸è¿œå…è´¹çš„ Okta å¼€å‘è€…è´¦æˆ·](https://developer.okta.com/signup/)(æˆ–è€…[å¦‚æœä½ å·²ç»æœ‰è´¦æˆ·ï¼Œç™»å½•](https://login.okta.com/?SAMLRequest=fc%2B7CsJAEAXQXvAflu1NNJUMeZBGELTx1a%2FrYILJTtyZGD%2FfSBRiYzlw77lMnD3rSj3Qc0ku0YtgrhU6S5fSXRN9PKxmS52l00nMpq6iBvJWCrfDe4ss6vStRe9aDzmGIZfo1jsgwyWDMzUyiIV9vt1AH4XGk5ClSvewUgMNa%2BYW%2FVj5jxhm9NLP67QQaSAMu64L6CYmsFSHlnzT4ZlLwTgcL6Sf8%2FeX9AU%3Dhttps://login.okta.com/?SAMLRequest=fc%2B7CsJAEAXQXvAflu1NNJUMeZBGELTx1a%2FrYILJTtyZGD%2FfSBRiYzlw77lMnD3rSj3Qc0ku0YtgrhU6S5fSXRN9PKxmS52l00nMpq6iBvJWCrfDe4ss6vStRe9aDzmGIZfo1jsgwyWDMzUyiIV9vt1AH4XGk5ClSvewUgMNa%2BYW%2FVj5jxhm9NLP67QQaSAMu64L6CYmsFSHlnzT4ZlLwTgcL6Sf8%2FeX9AU%3D)åˆ°`{yourOktaDomain}`)ã€‚

ç™»å½• Okta åï¼Œæ³¨å†Œæ‚¨çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚

*   åœ¨é¡¶éƒ¨èœå•ä¸­ï¼Œç‚¹å‡»**åº”ç”¨**

*   ç‚¹å‡»**æ·»åŠ åº”ç”¨**

*   é€‰æ‹©**ç½‘é¡µ**ï¼Œç‚¹å‡»**ä¸‹ä¸€æ­¥**

*   è¾“å…¥`Awesome OIDC`ä½œä¸º**åç§°**(è¿™ä¸ªå€¼æ— å…³ç´§è¦ï¼Œå¯ä»¥éšæ„æ›´æ”¹)

*   å°†ç™»å½•é‡å®šå‘ URI æ›´æ”¹ä¸º`http://localhost:8080/login/oauth2/code/oidc`

*   ç‚¹å‡»**å®Œæˆ**ï¼Œç„¶å**ç¼–è¾‘**å¹¶æ·»åŠ `http://localhost:8080`ä¸ºæ³¨é”€é‡å®šå‘ URI

*   ç‚¹å‡»**ä¿å­˜**

å®Œæˆåï¼Œæ‚¨çš„è®¾ç½®åº”è¯¥ç±»ä¼¼äºä¸‹é¢çš„æˆªå›¾ã€‚

[![OIDC App Settings](../Images/657499f78fd7db980af99d5d1df7370f.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--dVVdpDQI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://developer.okta.com/assets-jekyll/blog/java-12-jhipster-6/app-settings-36cee2d55fa2872188a92e5c2c3c8d9d20ad2082d86b8fe6c7433c89567c3145.png)

åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`okta.env`æ–‡ä»¶ï¼Œå¹¶ç”¨ Okta åº”ç”¨ç¨‹åºä¸­çš„å€¼æ›¿æ¢`{..}`å€¼:

```
export SPRING_SECURITY_OAUTH2_CLIENT_PROVIDER_OIDC_ISSUER_URI="https://{yourOktaDomain}/oauth2/default"
export SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_OIDC_CLIENT_ID="{clientId}"
export SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_OIDC_CLIENT_SECRET="{clientSecret}" 
```

**æç¤º:**å°†`*.env`æ·»åŠ åˆ°ä½ çš„`.gitignore`æ–‡ä»¶ä¸­ï¼Œè¿™æ ·è¿™ä¸ªæ–‡ä»¶å°±ä¸ä¼šå‡ºç°åœ¨ä½ çš„æºä»£ç æ§åˆ¶ç³»ç»Ÿä¸­ã€‚

### [](#create-groups-and-add-them-as-claims-to-the-id-token)åˆ›å»ºç»„å¹¶å°†å®ƒä»¬ä½œä¸ºå£°æ˜æ·»åŠ åˆ° ID ä»¤ç‰Œä¸­

JHipster é»˜è®¤é…ç½®ä¸ºä¸ä¸¤ç§ç±»å‹çš„ç”¨æˆ·ä¸€èµ·å·¥ä½œ:ç®¡ç†å‘˜å’Œç”¨æˆ·ã€‚Keycloak ä¼šè‡ªåŠ¨é…ç½®ç”¨æˆ·å’Œç»„ï¼Œä½†æ˜¯æ‚¨éœ€è¦ä¸ºæ‚¨çš„ Okta ç»„ç»‡è¿›è¡Œä¸€äº›ä¸€æ¬¡æ€§é…ç½®ã€‚

åˆ›å»ºä¸€ä¸ª`ROLE_ADMIN`å’Œ`ROLE_USER`ç»„(**ç”¨æˆ·** > **ç»„** > **æ·»åŠ ç»„**)å¹¶å‘å…¶ä¸­æ·»åŠ ç”¨æˆ·ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ‚¨æ³¨å†Œçš„å¸æˆ·ï¼Œæˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·(**ç”¨æˆ·** > **æ·»åŠ äººå‘˜**)ã€‚å¯¼èˆªåˆ° **API** > **æˆæƒæœåŠ¡å™¨**ï¼Œç‚¹å‡»`default`æœåŠ¡å™¨ã€‚ç‚¹å‡»**ç´¢èµ”**æ ‡ç­¾å’Œ**æ·»åŠ ç´¢èµ”**ã€‚å°†å…¶å‘½åä¸º`groups`ï¼Œå¹¶åŒ…å«åœ¨ ID ä»¤ç‰Œä¸­ã€‚å°†å€¼ç±»å‹è®¾ç½®ä¸º`Groups`ï¼Œå¹¶å°†è¿‡æ»¤å™¨è®¾ç½®ä¸º`.*`çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ç‚¹å‡»**åˆ›å»º**ã€‚

[![Add Claim](../Images/cf99717484a2479a9a0c4aff465cba36.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--85G8f9Ss--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://developer.okta.com/assets-jekyll/blog/java-12-jhipster-6/add-claim-915f54ead19da14f9117ac982daa317f6782c0f8d9fe9fcb5de68f7beb2d6f90.png)

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨æ‚¨çš„åº”ç”¨ç¨‹åº:

```
source okta.env
./mvnw 
```

å¯¼èˆªåˆ°`http://localhost:8080`å¹¶ç”¨æ‚¨çš„ Okta å‡­è¯ç™»å½•ã€‚

[![Authenticated by Okta](../Images/74b0cd741af811eb48c3f2fb66272c33.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Fzvd1D28--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://developer.okta.com/assets-jekyll/blog/java-12-jhipster-6/authenticated-by-okta-c114234313c83a96ea1415c77dd665c626e49ac88487ab51513b9524176f6b9d.png)

Spring Boot å’Œ Spring Security è®©æ›´æ¢ OIDC æä¾›å•†å˜å¾—å¾ˆå®¹æ˜“ï¼Œè¿™éš¾é“ä¸é…·å—ï¼Ÿï¼

## [](#crud-with-jhipster)ç”¨ JHipster è¿›è¡Œ CRUD

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å‡ ä¹æ²¡æœ‰æ¶‰åŠåˆ° JHipster æ‰€èƒ½æä¾›çš„æœåŠ¡ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä¸ºå®ä½“åˆ›å»º CRUD åŠŸèƒ½(é€šè¿‡æµ‹è¯•ï¼)ä½¿ç”¨ JDLã€‚ä¾‹å¦‚ï¼Œç”¨ä¸‹é¢çš„ä»£ç åˆ›å»ºä¸€ä¸ª`blog.jh`æ–‡ä»¶ã€‚

```
entity Blog {
  name String required minlength(3),
  handle String required minlength(2)
}

entity BlogEntry {
  title String required,
  content TextBlob required,
  date Instant required
}

entity Tag {
  name String required minlength(2)
}

relationship ManyToOne {
  Blog{user(login)} to User,
  BlogEntry{blog(name)} to Blog
}

relationship ManyToMany {
  BlogEntry{tag(name)} to Tag{entry}
}

paginate BlogEntry, Tag with infinite-scroll 
```

ç„¶ååœ¨æ‚¨çš„é¡¹ç›®ä¸­è¿è¡Œ`jhipster import-jdl blog.jh`ã€‚jdl-samples GitHub åº“æœ‰æ›´å¤šçš„ä¾‹å­ã€‚

## [](#do-more-with-jhipster)ç”¨ JHipster åšæ›´å¤šäº‹æƒ…

æˆ‘è¦æ„Ÿè°¢æ˜¥å¤©å®‰å…¨å›¢é˜Ÿçš„ä¹”Â·æ ¼å…°è´¾å’Œ T2Â·ç½—å¸ƒÂ·æ¸©å¥‡ã€‚æ²¡æœ‰ä»–ä»¬çš„å¸®åŠ©ï¼ŒJHipster ä¸å¯èƒ½è¿ç§»åˆ°ä½¿ç”¨ Spring Security 5.1ã€‚ä½ ä»¬è¿™äº›*æ‘‡æ»šï¼ï¼*

æˆ‘æ²¡æœ‰ä¸ºè¿™ç¯‡æ–‡ç« åˆ›å»º GitHub åº“ï¼Œå› ä¸ºæ‰€æœ‰çš„ä»£ç éƒ½æ˜¯è‡ªå·±ç”Ÿæˆçš„ã€‚ä½ å¯ä»¥åœ¨ GitHub ä¸Šæ‰¾åˆ° [JHipster çš„æºä»£ç ã€‚](https://github.com/jhipster/generator-jhipster)

æ„Ÿè°¢ JHipster åŠå…¶æ‰€æœ‰å‡ºè‰²çš„[è´¡çŒ®è€…](https://github.com/jhipster/generator-jhipster/graphs/contributors)ã€‚ä½ ä»¬éƒ½åœ¨ç©ºé—²æ—¶é—´åšäº†å¤§é‡çš„å·¥ä½œï¼Œè¿™éå¸¸å€¼å¾—èµèµã€‚

è¿˜æ²¡æœ‰å‡†å¤‡å¥½è¿‡æ¸¡åˆ° JHipster 6 å’Œ Java 11+ï¼Ÿæˆ‘å†™è¿‡å‡ ä¸ªä½¿ç”¨ JHipster 5 å’Œ Java 8 çš„æ•™ç¨‹ã€‚

*   ä¸ Reactã€Spring Boot å’Œæ°æ™®æ–¯ç‰¹ä¸€èµ·å»ºç«‹ç…§ç‰‡åº“ PWA

*   [ä½¿ç”¨ OAuth 2.0 å’Œ JHipster å¼€å‘å¾®æœåŠ¡æ¶æ„](https://developer.okta.com/blog/2018/03/01/develop-microservices-jhipster-oauth)

*   [ä½¿ç”¨ Ionic for JHipster åˆ›å»ºå¸¦ OIDC è®¤è¯çš„ç§»åŠ¨åº”ç”¨](https://developer.okta.com/blog/2018/01/30/jhipster-ionic-with-oidc-authentication)

*   [ç”¨ React Native å’Œ Spring Boot æ„å»ºç§»åŠ¨åº”ç”¨](https://developer.okta.com/blog/2018/10/10/react-native-spring-boot-mobile-app)

æˆ‘è¿˜ä¸º InfoQ å†™äº†ä¸€æœ¬å…³äº JHipster çš„å…è´¹è¿·ä½ ä¹¦ã€‚

å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šå…³äº Spring Security 5.1 åŠå…¶ OIDC æ”¯æŒçš„ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰ä¸€äº›:

*   [ä½¿ç”¨ Spring Security çš„ OAuth 2.0 å¿«é€ŸæŒ‡å—](https://developer.okta.com/blog/2019/03/12/oauth2-spring-security-guide)

*   [å°†ä½ çš„ Spring Boot åº”ç”¨è¿ç§»åˆ°æœ€æ–°æœ€å¥½çš„ Spring Security å’Œ OAuth 2.0](https://developer.okta.com/blog/2019/03/05/spring-boot-migration)

*   [Spring Boot 2.1:å‡ºè‰²çš„ OIDCã€OAuth 2.0 å’Œååº”å¼ API æ”¯æŒ](https://developer.okta.com/blog/2018/11/26/spring-boot-2-dot-1-oidc-oauth2-reactive-apis)

å…³æ³¨æˆ‘ä»¬çš„ [@oktadev](https://twitter.com/oktadev) ï¼Œäº†è§£ Java å’Œé¢†å…ˆçš„ JavaScript æ¡†æ¶çš„æœ€æ–°åŠ¨æ€ã€‚