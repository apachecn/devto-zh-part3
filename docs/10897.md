# ç†è§£ Ruby on Rails ä¸­çš„èµ„äº§ç®¡é“

> åŸæ–‡:[https://dev . to/just alever/understanding-the-asset-pipeline-in-ruby-on-rails-3j 29](https://dev.to/justalever/understanding-the-asset-pipeline-in-ruby-on-rails-3j29)

åœ¨ Ruby on Rails ç¤¾åŒºä¸­ï¼Œèµ„äº§ç®¡é“å·²ç»æ”¹å˜äº†å¾ˆå¤šå¹´çš„æ¸¸æˆè§„åˆ™ã€‚è¿™ç¯‡æ–‡ç« å’Œè§†é¢‘æ¦‚è¿°äº†ä»€ä¹ˆæ˜¯èµ„äº§ç®¡é“ï¼Œå¦‚ä½•ä½¿ç”¨å®ƒï¼Œä»¥åŠè¿™ç§å·¥å…·çš„å¥½å¤„ã€‚

[https://www.youtube.com/embed/kgEcdBGpr54](https://www.youtube.com/embed/kgEcdBGpr54)

### [](#what-is-the-asset-pipeline)ä»€ä¹ˆæ˜¯èµ„äº§ç®¡é“ï¼Ÿ

Ruby on Rails æ–‡æ¡£å¾ˆå¥½åœ°è§£é‡Šäº†â€œä»€ä¹ˆâ€ã€‚

> èµ„äº§ç®¡é“æä¾›äº†ä¸€ä¸ªæ¡†æ¶æ¥è¿æ¥ã€ç¼©å°æˆ–å‹ç¼© JavaScript å’Œ CSS èµ„äº§ã€‚å®ƒè¿˜å¢åŠ äº†ç”¨å…¶ä»–è¯­è¨€å’Œé¢„å¤„ç†ç¨‹åº(å¦‚ CoffeeScriptã€Sass å’Œ ERB)ç¼–å†™è¿™äº›èµ„äº§çš„èƒ½åŠ›ã€‚å®ƒå…è®¸æ‚¨çš„åº”ç”¨ç¨‹åºä¸­çš„èµ„äº§è‡ªåŠ¨ä¸æ¥è‡ªå…¶ä»– gem çš„èµ„äº§ç›¸ç»“åˆã€‚

ä¸€ä¸ªå…¨æ–°çš„ rails åº”ç”¨ç¨‹åºé…å¤‡äº†`sprockets-rails` gemã€‚è¿™ä¸ªå®çŸ³ç»“åˆäº†å…¶ä»–ä¸‰ä¸ªå®çŸ³(`sass-rails`ã€`coffee-rails`å’Œ`uglifier`)çš„åŠ›é‡ï¼Œä½¿ä½ çš„åº”ç”¨ç¨‹åºä¸­çš„èµ„äº§å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚åªè¦æŒæ¡ä¸€ç‚¹çŸ¥è¯†ï¼Œæ‚¨å°±å¯ä»¥ä½¿ç”¨èµ„äº§ç®¡é“åœ¨ç»™å®šçš„ Ruby on Rails åº”ç”¨ç¨‹åºä¸­æ·»åŠ `CSS`ã€æ·»åŠ `JavaScript`ã€å‚è€ƒå›¾åƒç­‰ç­‰ã€‚

#### Rails 6 å³å°†åˆ°æ¥æ€ä¹ˆåŠï¼Ÿ

è¯šç„¶ï¼ŒRails 6 å·²ç»éå¸¸æ¥è¿‘å‘å¸ƒäº†ã€‚å®ƒå°†ä»¥ä¸€ç§ä¸åŒçš„æ–¹å¼å°† JavaScript æ·»åŠ åˆ°ä½ çš„åº”ç”¨ç¨‹åºä¸­ï¼Œè¿™ç§æ–¹å¼æ›´åŠ  node.js é©±åŠ¨ã€‚è¿™åˆ©ç”¨äº†`webpacker` gem çš„åŠ›é‡ï¼Œå…è®¸åœ¨æ‚¨çš„ ruby on rails åº”ç”¨ç¨‹åºä¸­åŒ…å«ç°ä»£ JavaScript å’Œæ›´å¤šå†…å®¹ã€‚è¿™å®Œå…¨å‘ç”Ÿåœ¨èµ„äº§ç®¡é“ä¹‹å¤–ã€‚ç›®å‰ï¼Œå»ºè®®ç»§ç»­ä½¿ç”¨æ¥è‡ªæ–°çš„ webpacker `app/javascript`ç›®å½•çš„å›¾åƒå’Œ CSS/SCSS ä»¥åŠæœåŠ¡å™¨ JavaScript çš„èµ„äº§ç®¡é“ã€‚

### [](#main-features)ä¸»è¦ç‰¹å¾

ä½¿ç”¨èµ„äº§ç®¡é“çš„ä¸€ä¸ªæ™®éå¥½å¤„æ˜¯æ€§èƒ½å’Œé€Ÿåº¦ã€‚åœ¨è¿™äº›å¹¿ä¹‰æ”¶ç›Šä¸­ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä»¥ä¸‹ç»“æœ:

*   **æ–‡ä»¶ä¸²è”**â€“æä¾›æ›´å°‘çš„æ–‡ä»¶æ„å‘³ç€æµè§ˆå™¨éœ€è¦å‘å‡ºæ›´å°‘çš„è¯·æ±‚ã€‚
*   **SHA256 æŒ‡çº¹**â€“ç”¨æŒ‡çº¹è‡ªåŠ¨ç¼“å­˜æ–‡ä»¶ã€‚ä»…æ›´æ–°éœ€è¦çš„æ–‡ä»¶ã€‚
*   **ç¼©å°/å‹ç¼©**â€“ç¼©å°æ„å‘³ç€æ–‡ä»¶æ›´å°ï¼Œæ¯ä¸ªè¯·æ±‚éœ€è¦çš„â€œå­—èŠ‚â€æ›´å°‘ã€‚

æ³¨æ„:å¤§çº¦åœ¨ 20:08 å·¦å³ï¼Œæˆ‘å°è¯•è¦æ±‚â€œlog.jsâ€ã€‚ç”±äºæœ‰äº†â€œrequire_treeâ€ï¼Œä½ ç”šè‡³ä¸éœ€è¦è¯·æ±‚å®ƒã€‚å£°æ˜åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚æˆ‘è¿˜æŠŠâ€œè¦æ±‚â€æ‹¼é”™äº†ã€‚ [![ğŸ¤¦ğŸ¼â€â™‚ï¸](../Images/47761291ebca6a34ef4659fa00fc08cb.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--CSeAO5ZK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s.w.org/images/core/emoji/11.2.0/72x72/1f926-1f3fc-200d-2642-fe0f.png) æˆ‘åªæ˜¯æƒ³ææ¸…æ¥šè¿™ä¸€ç‚¹ï¼

### [](#usage)ç”¨æ³•

åœ¨ä¸€ä¸ªå…¨æ–°çš„ Rails åº”ç”¨ç¨‹åºä¸­ï¼Œæ‚¨åº”è¯¥æ‰¾åˆ°å‡ ä¸ªåœ°æ–¹æ¥å­˜æ”¾æ‚¨çš„èµ„äº§ã€‚ç»‘ä½  app çš„ä¸»è¦æ˜¯`app/assets`ã€‚åœ¨è¯¥æ–‡ä»¶å¤¹ä¸­æœ‰ä¸€ä¸ª`images`ã€`javascripts`å’Œ`stylesheets`ç›®å½•ã€‚

#### [](#images)å›¾åƒ

å›¾åƒç›¸å¯¹æ¥è¯´æ˜¯ä¸è¨€è‡ªæ˜çš„ï¼Œä½†æ˜¯åœ¨è§†å›¾æˆ– CSS æ–‡ä»¶ä¸­å‘ˆç°å®ƒä»¬æ—¶ï¼Œéœ€è¦è®°ä½ä¸€äº›çº¦å®šã€‚

åœ¨è§†å›¾ä¸­åŒ…å«å›¾åƒæ˜¯é€šè¿‡ rails åŠ©æ‰‹å®ç°çš„

```
<%= image_tag "cat.jpg", alt: "Black Cat" %> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œæˆ‘ä»¬åŒ…æ‹¬ä¸€ä¸ªå›¾åƒã€‚`image_tag`åŠ©æ‰‹å¸Œæœ›å›¾åƒä½äºåº”ç”¨ç¨‹åºä¸­çš„`app/assets/images`ã€‚ä½ å¯ä»¥åœ¨`images`ä¸­æ·»åŠ å­æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥è¿™æ ·å¼•ç”¨å›¾ç‰‡ã€‚

```
<%= image_tag "marketing/animals/cat.jpg", alt: "black cat" %> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ä½ çš„`CSS`æ–‡ä»¶ä¸­æ·»åŠ èƒŒæ™¯å›¾ç‰‡ä¹Ÿä¼´éšç€ gotchyaã€‚

```
body {
  background-image: url('/assets/images/cat.jpg');
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨å¯èƒ½è®¤ä¸ºä¸Šé¢çš„ä»£ç å¯ä»¥å·¥ä½œï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œå®ƒä¸èƒ½ã€‚ç›¸åï¼Œæˆ‘ä»¬åˆ©ç”¨å¦ä¸€ä¸ªåŠ©æ‰‹æ¥æ‰¾åˆ°å›¾åƒã€‚

```
body {
  background-image: image-url('cat.jpg');
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯·æ³¨æ„`image-url`åŠ©æ‰‹ä»¥åŠæˆ‘ä¸éœ€è¦å£°æ˜ä»»ä½•ç›¸å¯¹è·¯å¾„çš„äº‹å®ã€‚ç›¸å½“é…·ï¼

#### [](#stylesheets)æ ·å¼è¡¨

åœ¨æ‚¨çš„`app/assets/stylesheets`ç›®å½•ä¸­ï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸€ä¸ª`application.css`æ–‡ä»¶ã€‚è¿™æ˜¯ä½ çš„åº”ç”¨ CSS çš„çœŸå®æ¥æºï¼Œå®ƒä¸åœ¨`vendor`æˆ–`lib`ç›®å½•ä¸­(ä½ å¯ä»¥å­˜æ”¾èµ„äº§çš„å¦å¤–ä¸¤ä¸ªåœ°æ–¹)ã€‚ä»»ä½•æ—¶å€™ä½ éƒ½å¯ä»¥å°†`application.css`æ”¹ä¸º`application.scss`ï¼Œå¹¶è·å¾—ç”¨`SCSS`ä»£æ›¿`CSS`çš„å¥½å¤„ã€‚æˆ‘ä¹‹å‰æåˆ°çš„å®çŸ³åœ¨è¿™é‡Œå‘æŒ¥ä½œç”¨ã€‚

é»˜è®¤çš„`application.css`æ–‡ä»¶å¯èƒ½å¦‚ä¸‹æ‰€ç¤º:

```
/* app/assets/stylesheets/application.css */

/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, or any plugin's
 * vendor/assets/stylesheets directory can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the bottom of the
 * compiled file so the styles you add here take precedence over styles defined in any other CSS/SCSS
 * files in this directory. Styles in this file should be added after the last require_* statement.
 * It is generally better to create a new file per style scope.
 *
 *= require_tree .
 *= require_self
 */ 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`*= require_tree .`è¯­æ³•å¯èƒ½çœ‹èµ·æ¥åƒæ³¨é‡Šï¼Œä½†å®ƒå®é™…ä¸Šè´Ÿè´£å‘ˆç°`app/assets/stylesheets`ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨å°†å®ƒä»¬åŒ…å«åœ¨è¿™é‡Œã€‚è¿™æ ·ï¼Œæ‚¨å°±ä¸å¿…æ‰‹åŠ¨åŒ…å«å®ƒä»¬ã€‚`*= require_self`æ³¨é‡Šéœ€è¦æ–‡ä»¶æœ¬èº«ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„ä¸»å¸ƒå±€æ¨¡æ¿çš„æœ€ç»ˆå†…å®¹ã€‚æ‚¨å¯ä»¥æ·»åŠ ä»»ä½•æ‚¨å–œæ¬¢çš„ CSS æ–‡ä»¶ï¼Œå¦‚æœå®ƒä¸åœ¨`app/assets/stylesheets`ç›®å½•ä¸­ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œè¦æ±‚å®ƒã€‚ä½ å¯ä»¥ä»`vendor`ç›®å½•ä¸­è¿™æ ·åšï¼Œæˆ–è€…å¦‚æœä½ å¶ç„¶å®‰è£…äº†ä¸€ä¸ª gemï¼Œå®ƒæœ‰ä¸€äº›ä½ éœ€è¦åˆ©ç”¨çš„ç›¸å…³é£æ ¼ã€‚

é“¾æ¥åˆ°è¿™äº›èµ„äº§çœ‹èµ·æ¥åƒè¿™æ ·ã€‚

```
<!-- app/views/layouts/application.html.erb -->

<!DOCTYPE html>
<html>
  <head>
    <title>Asset Pipeline</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <div class="container">
      <%= yield %>
    </div>
  </body>
</html> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸Šé¢ä½ ä¼šçœ‹åˆ°ä¸€äº›æ–¹ä¾¿çš„ Rails åŠ©æ‰‹å¸®åŠ©æˆ‘ä»¬ï¼ŒåŒ…æ‹¬æˆ‘ä»¬çš„`application.css`æ ·å¼è¡¨å’Œåœ¨`app/assets/javascripts`æ‰¾åˆ°çš„`application.js` JavaScript æ–‡ä»¶

æ³¨æ„ï¼Œæˆ‘ä»¬åªæ¸²æŸ“äº†`application.css`å’Œ`application.js`æ–‡ä»¶ï¼Œå…¶ä»–ä»€ä¹ˆéƒ½æ²¡æœ‰æ¸²æŸ“ã€‚å¦‚æœæˆ‘åœ¨`app/assets/stylesheets`ä¸­åˆ›å»ºæ–°çš„`global.css`æ–‡ä»¶ï¼Œå®ƒä¼šè‡ªåŠ¨åŒ…å«åœ¨é¡µé¢ä¸­ã€‚

#### [](#javascript)JavaScript

åƒ CSS/SCSS ä¸€æ ·ï¼ŒåŒæ ·çš„åŸç†ä¹Ÿé€‚ç”¨äº JavaScriptï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨äº†ç¨å¾®ä¸åŒçš„è¯­æ³•ã€‚

```
// app/assets/javascripts/application.js

// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, or any plugin's
// vendor/assets/javascripts directory can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// compiled file. JavaScript code in this file should be added after the last require_* statement.
//
// Read Sprockets README (https://github.com/rails/sprockets#sprockets-directives) for details
// about supported directives.
//
//= require rails-ujs
//= require activestorage
//= require turbolinks
//= requre log
//= require_tree . 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä½œä¸ºä¾‹å­è¡¥å……çš„`//= require log`ã€‚æˆ‘åˆ›å»ºäº†ä¸€ä¸ªåä¸º`log.js`çš„æ–°æ–‡ä»¶ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°`app/assets/javascripts`ä¸­ã€‚ç„¶åæˆ‘åœ¨`application.js`ä¸­éœ€è¦å®ƒï¼Œè¿™æ ·å®ƒä¼šè‡ªåŠ¨æ³¨å…¥åˆ°æˆ‘ä»¬çš„å¸ƒå±€ä¸­ã€‚è¿™åœ¨æœ¬åœ°çš„å¥½å¤„ä¸åƒåœ¨ç”Ÿäº§ä¸­é‚£ä¹ˆå¤§ï¼Œåœ¨ç”Ÿäº§ä¸­æ‰€æœ‰çš„æ–‡ä»¶éƒ½è¢«ç¼–è¯‘æˆä¸€ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªè¿‡ç¨‹èŠ‚çœäº†æ–‡ä»¶å¤§å°ã€è¯·æ±‚å¤§å°å’Œé€Ÿåº¦ï¼Œè¿™æ˜¯æœ€é‡è¦çš„(åŠ ä¸Šå®ƒæœ‰å¤šå®¹æ˜“)ã€‚

### [](#configuration-and-adding-new-javascript-and-css)é…ç½®å’Œæ·»åŠ æ–°çš„ JavaScript å’Œ CSS

å‡è®¾æ‚¨æƒ³åœ¨ç»„åˆä¸­æ·»åŠ æ–°æ–‡ä»¶ï¼Ÿåœ¨æˆ‘çš„è§†é¢‘ä¸­ï¼Œæˆ‘ä¸ºå’§å˜´ç¬‘æ·»åŠ äº†è‡ªä¸¾ã€‚è¿™æ„å‘³ç€å°†ä¸€ä¸ª`bootstrap.css`æ–‡ä»¶å’Œä¸€ä¸ª`bootstrap.js`æ–‡ä»¶æ·»åŠ åˆ°æˆ‘ä»¬çš„`vendor`æ–‡ä»¶å¤¹ä¸­ï¼Œå› ä¸ºè¿™æ˜¯æˆ‘ä»¬å°†åˆ©ç”¨ä½†ä¸ä¼šä¿®æ”¹çš„ä»£ç ã€‚æ‚¨å°†å¸Œæœ›æ‚¨çš„ä¾›åº”å•†æ–‡ä»¶å¤¹æœ‰ä¸€ä¸ª`assets`ç›®å½•ï¼Œå¹¶ä¸”åœ¨è¯¥ç›®å½•ä¸­æœ‰ä¸€ä¸ª`stylesheets`ç›®å½•å’Œ`javascripts`ç›®å½•ã€‚

è¯¥ç»“æ„æœ€ç»ˆçœ‹èµ·æ¥åƒè¿™æ ·:

```
vendor
â””â”€â”€ assets
    â”œâ”€â”€ javascripts
    â”‚   â””â”€â”€ bootstrap.js
    â””â”€â”€ stylesheets
        â””â”€â”€ bootstrap.css 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä»…ä»…å°†è¿™äº›æ–‡ä»¶æ·»åŠ åˆ°`vendor`æ˜¯ä¸å¤Ÿçš„ã€‚æˆ‘ä»¬éœ€è¦å°†å®ƒä»¬å‘Šè¯‰æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚

`sprockets-rails`å®çŸ³åœ¨`app/assets/config/`é‡Œæœ‰ä¸€ä¸ªæ–¹ä¾¿çš„`manifest.js`æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶ä¹Ÿæœ‰è‡ªå·±çš„æ–¹å¼æ¥åŒ…å«èµ„äº§ã€‚æˆ‘çš„æ–‡ä»¶æœ€ç»ˆå¦‚ä¸‹:

```
// app/assets/config/manifest.js

//= link_tree ../images
//= link_directory ../javascripts .js
//= link_directory ../stylesheets .css

//= link bootstrap.js
//= link bootstrap.css 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é»˜è®¤æƒ…å†µä¸‹ï¼Œå‰ä¸‰è¡Œæ˜¯ã€‚æˆ‘æ·»åŠ çš„åº•éƒ¨ä¸¤ä¸ªå°†å¼•ç”¨`vendor`ä¸­æ–°æ·»åŠ çš„æ–‡ä»¶ã€‚è¯·æ³¨æ„`link_tree`å£°æ˜ã€‚è¿™æ„å‘³ç€æ–‡ä»¶å¤¹åŠå…¶å­æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶ã€‚`link_directory`å£°æ˜ä»…æŒ‡æŒ‡å®šç›®å½•ä¸­çš„æ–‡ä»¶ã€‚

æˆ‘ä»¬è¿˜æ²¡æœ‰ 100%å®Œæˆã€‚åº”ç”¨ç¨‹åºä¸å¤ªäº†è§£è¿™ä¸¤ä¸ªæ–°å¢åŠ çš„å†…å®¹ã€‚è®©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

```
# config/initializers/assets.rb

# Precompile additional assets.
# application.js, application.css, and all non-JS/CSS in the app/assets
# folder are already added.
Rails.application.config.assets.precompile = ["manifest.js"] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸Šé¢æˆ‘å¯¹æˆ‘ä»¬çš„`config`ç›®å½•ä¸­çš„ä¸€ä¸ª`assets.rb`åˆå§‹åŒ–æ–‡ä»¶è¿›è¡Œäº†ä¿®æ”¹ã€‚æœ€åä¸€è¡Œè®¾ç½®äº†ä¸€ä¸ªé…ç½®ï¼Œåœ¨`app/assets/`ä¸­æŸ¥æ‰¾`manifest.js`æ–‡ä»¶ï¼Œä»¥æŸ¥æ‰¾è¦é¢„ç¼–è¯‘å“ªäº›æ–°èµ„äº§ç”¨äºåº”ç”¨ç¨‹åºä¸­ã€‚ä¿å­˜åï¼Œå¦‚æœ rails æœåŠ¡å™¨å·²ç»åœ¨è¿è¡Œï¼Œæ‚¨å°†éœ€è¦é‡å¯å®ƒã€‚

æœ€åä¸€ä¸ªéš¾é¢˜æ˜¯åœ¨æˆ‘ä»¬çš„è§†å›¾ä¸­åŒ…å«è¿™äº›æ–°æ–‡ä»¶ã€‚æˆ‘ä¸å¸Œæœ›è¿™äº›æ–‡ä»¶è¢«ç¼–è¯‘æˆ`application.js`æ–‡ä»¶ï¼Œå°½ç®¡å¦‚æœæˆ‘ä»¬æ„¿æ„çš„è¯ï¼Œå®ƒä»¬å¯ä»¥ã€‚ç›¸åï¼Œæˆ‘æŠŠå®ƒä»¬æ¸²æŸ“æˆä¸åŒçš„æ–‡ä»¶ï¼Œå¦‚ä¸‹:

```
<!DOCTYPE html>
<html>
  <head>
    <title>Pipeline</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= javascript_include_tag 'https://code.jquery.com/jquery-3.3.1.slim.min.js' %>
    <%= javascript_include_tag 'https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js' %>

    <%= stylesheet_link_tag 'bootstrap', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'bootstrap', 'data-turbolinks-track': 'reload' %>

    <%= javascript_include_tag 'bootstrap', media: 'all', 'data-turbolinks-track': 'reload' %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <div class="container">
      <%= yield %>
    </div>
  </body>
</html> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

Bootstrap é™„å¸¦äº†`jQuery`å’Œ`popper.js`ä½œä¸ºä¾èµ–é¡¹ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿéœ€è¦æ·»åŠ å®ƒä»¬ã€‚æˆ‘æ²¡æœ‰åƒ Bootstrap é‚£æ ·åŒ…å«å®ƒä»¬ï¼Œè€Œæ˜¯ç®€å•åœ°é“¾æ¥åˆ°å®ƒä»¬çš„ CDN æ–‡ä»¶ã€‚ä¸è¿‡ï¼Œæˆ‘ä¸å»ºè®®åœ¨ç”Ÿäº§ä¸­ä¿¡ä»» cdnã€‚

æœ€åä¸€æ¬¡åˆ·æ–°åº”è¯¥ä¼šå¾—åˆ°æ‚¨çš„å¼•å¯¼ï¼

### [](#is-the-asset-pipeline-still-relevant)èµ„äº§ç®¡é“è¿˜ç›¸å…³å—ï¼Ÿ

æˆ‘ç»å¯¹è¿™ä¹ˆè®¤ä¸ºã€‚ç°åœ¨ï¼Œéšç€ Rails 6 çš„å‡ºç°ï¼Œæˆ‘ä»¬å°†å¼€å§‹çœ‹åˆ° JavaScript å­˜åœ¨äºå…¶ä»–åœ°æ–¹ï¼Œä½†å›¾åƒã€CSSã€å­—ä½“ç­‰å¯ä»¥å¾ˆå¥½åœ°å­˜åœ¨äºèµ„äº§ç®¡é“ä¸­ã€‚å®ƒé™„å¸¦äº†ä¸€äº›éœ€è¦å­¦ä¹ çš„çº¦å®šï¼Œä½†æ˜¯åœ¨æŒç»­ä½¿ç”¨ä¸€æ®µæ—¶é—´åï¼Œæ‚¨å°†å­¦ä¼šæ¬£èµ Ruby on Rails ä¸­èµ„äº§ç®¡é“èƒŒåçš„é­”åŠ›ã€‚

### [](#shameless-plug)ä¸è¦è„¸çš„å¡ï¼

å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘åœ¨ [YouTube](https://youtube.com/c/webcrunch) å’Œæˆ‘çš„[åšå®¢](https://web-crunch.com)ä¸Šæœ‰æ›´å¤šè§†é¢‘ã€‚å¸Œæœ›æ”¶ä»¶ç®±ä¸­æœ‰æ›´å¤šè¿™æ ·çš„å†…å®¹å—ï¼Ÿ[è®¢é˜…æˆ‘çš„ç®€è®¯](https://web-crunch.com/subcribe)è‡ªåŠ¨è·å–ã€‚

#### [](#check-out-my-course)æŸ¥çœ‹æˆ‘çš„è¯¾ç¨‹

 [![https://i2.wp.com/i.imgur.com/KIaaJEB.jpg?ssl=1](../Images/083250001f26c8017cdaafe107a730f9.png)

T6ã€‘](https://hellorails.io)

[![â˜](../Images/9bbc19a8f8b6c50ce408d0d17fdbbb56.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--2LBBRZlr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s.w.org/images/core/emoji/11.2.0/72x72/261d.png) æƒ³ä»å¤´å¼€å§‹å­¦ä¹  Ruby on Railsï¼ŸæŸ¥çœ‹æˆ‘å³å°†æ¨å‡ºçš„è¯¾ç¨‹ [Hello Rails](https://hellorails.io) ã€‚

ç†è§£ Ruby on Rails ä¸­çš„èµ„äº§ç®¡é“çš„å¸–å­æœ€å…ˆå‡ºç°åœ¨ T2 çš„ Web-Crunch ä¸Šã€‚