# åœ¨ä¸ç¼–å†™ä»»ä½•æŸ¥è¯¢çš„æƒ…å†µä¸‹å¯¹ GraphQL æœåŠ¡å™¨è¿›è¡Œè´Ÿè½½æµ‹è¯•ğŸ”¥

> åŸæ–‡:[https://dev . to/Estrada 9166/load-testing-to-a-graphql-server-without-writing-a-single-query-3fp 0](https://dev.to/estrada9166/load-testing-to-a-graphql-server-without-writting-a-single-query-3fp0)

å¯¹æ‚¨çš„æœåŠ¡å™¨è¿›è¡Œè´Ÿè½½æµ‹è¯•æ˜¯å¾ˆé‡è¦çš„ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ‚¨åœ¨æœ‰å¤§é‡è¯·æ±‚æ—¶è¯†åˆ«å¯èƒ½çš„è¡Œä¸ºã€‚

æˆ‘å†³å®šåˆ›é€  [`easygraphql-lt`](https://github.com/EasyGraphQL/easygraphql-lt) æ¥å¸®åŠ©æˆ‘å’Œä½ ã€‚ [`easygraphql-lt`](https://github.com/EasyGraphQL/easygraphql-lt) èƒŒåçš„ä¸»è¦æ€æƒ³æ˜¯ç”¨å°½å¯èƒ½å°‘çš„é…ç½®è¿›è¡Œè´Ÿè½½æµ‹è¯•ï¼Œè¿™å°±æ˜¯æˆ‘æ¥ä¸‹æ¥è¦è§£é‡Šçš„:

## [](#how-to-run-it)å¦‚ä½•è¿è¡Œå®ƒ:

```
$ npx easygraphql-lt <CONFIG_FILE>.json 
```

## [](#how-to-use-it)å¦‚ä½•ä½¿ç”¨:

åˆ›å»ºä¸€ä¸ª JSON æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åº”åŒ…å«ä»¥ä¸‹å€¼:

#### [](#config)é…ç½®:

##### [](#url-required)ç½‘å€(å¿…å¡«)

å°†ç”¨äºè¿›è¡Œè´Ÿè½½æµ‹è¯•çš„ URLï¼Œå®ƒå°†ç”¨äºè·å– GraphQL æ¨¡å¼çš„æœ€æ–°å‰¯æœ¬
,å¹¶è¿›è¡Œæ‰€æœ‰æŸ¥è¯¢/è½¬æ¢ã€‚

```
"url":  "http://localhost:7000/" 
```

##### [](#name-optional)Name (Optional):

è¿™å°†æ˜¯æµ‹è¯•å°†è¦ä½¿ç”¨çš„åç§°ï¼›è¿™æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®
ï¼Œå®ƒå°†æ˜¾ç¤º URL ä½œä¸ºåç§°ã€‚

```
"name":  "Testing my new server" 
```

##### [](#selected-queries-optional)é€‰ä¸­æŸ¥è¯¢(å¯é€‰)

æ‚¨å¯ä»¥é€‰æ‹©ä¸€ä¸ªæ‚¨æƒ³è¦æµ‹è¯•çš„æŸ¥è¯¢/çªå˜åˆ—è¡¨ï¼Œä¸ºæ­¤ï¼Œæ‚¨å¿…é¡»ç”¨è¦æµ‹è¯•çš„æŸ¥è¯¢çš„åç§°åˆ›å»ºä¸€ä¸ª
å­—ç¬¦ä¸²æ•°ç»„ï¼›è¿™æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä½ æ²¡æœ‰åˆ›å»ºå®ƒï¼Œæ‰€æœ‰çš„æŸ¥è¯¢éƒ½å°†è¢«æµ‹è¯•ã€‚

```
"selectedQueries":  ["createUser",  "searchUser"] 
```

#### [](#query-file-optional)æŸ¥è¯¢æ–‡ä»¶(å¯é€‰)

æ‚¨å¯ä»¥é€‰æ‹©æ˜¯å¦è¦ä¿å­˜ä¸€ä¸ªåŒ…å«æ‰€æœ‰å·²æµ‹è¯•æŸ¥è¯¢çš„`json`æ–‡ä»¶ã€‚
å¦‚æœä½ ä»€ä¹ˆéƒ½ä¸é€šè¿‡ï¼Œé‚£å°±æ²¡æ•‘äº†ã€‚é»˜è®¤å€¼ä¸º`false`ã€‚

```
"queryFile":  true/false 
```

#### [](#mutations-optional)çªå˜(å¯é€‰)

ä½ ä¹Ÿå¯ä»¥ç”¨ [`easygraphql-lt`](https://github.com/EasyGraphQL/easygraphql-lt) æ¥æµ‹è¯•
ä½ çš„çªå˜ï¼›å¦‚æœæ‚¨æ²¡æœ‰ä¼ é€’ä»»ä½•ä¸œè¥¿ï¼Œå®ƒåªä¼šæµ‹è¯•æŸ¥è¯¢ã€‚
é»˜è®¤å€¼ä¸º`false`ã€‚
*å¦‚æœä½ è®¾ç½®äº†`withMutations: true`ï¼Œä¸è¦å¿˜è®°åœ¨å‚æ•°*ä¸Šæ·»åŠ è¾“å…¥å€¼

```
"withMutations":  true/false 
```

#### [](#duration-optional)æŒç»­æ—¶é—´(å¯é€‰)

æ‚¨å¯ä»¥é€‰æ‹©æµ‹è¯•çš„æŒç»­æ—¶é—´ã€‚

```
"duration":  5 
```

#### [](#arrival-rate-optional)åˆ°è¾¾ç‡(å¯é€‰)

æ‚¨å¯ä»¥é€‰æ‹©æµ‹è¯•çš„åˆ°è¾¾ç‡ã€‚

```
"arrivalRate":  10 
```

#### [](#artillery-output-optional)ç«ç‚®è¾“å‡º(å¯é€‰)

ä½ å¯ä»¥ç”¨[cannon . io](https://artillery.io/)ï¼Œ
åˆ›å»ºä¸€ä¸ª`JSON`æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«è´Ÿè½½æµ‹è¯•çš„ç»“æœã€‚åœ¨æµ‹è¯•ç»“æŸæ—¶ï¼Œç»ˆç«¯ä¼šæ˜¾ç¤ºä¸€æ¡æ¶ˆæ¯ï¼Œè§£é‡Šå¦‚ä½•è¿è¡Œè¿™ä¸ªç»“æœã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œé»˜è®¤ä¸º
`false`ã€‚

```
"withOutput":  true/false 
```

#### [](#args)args

åœ¨è¿™é‡Œï¼Œæ‚¨åº”è¯¥è®¾ç½®æ‰€æœ‰å¯èƒ½åœ¨è´Ÿè½½æµ‹è¯•ä¸­ä½¿ç”¨çš„å‚æ•°ï¼Œå¹¶ä¸”å¦‚æœ
`withMutations`æ˜¯`true`ï¼Œæ‚¨åº”è¯¥å°†ä½¿ç”¨çš„å€¼æ”¾åœ¨`mutation`ä¸Šã€‚

**æ³¨æ„:**å¦‚æœä½ è¦ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œå®ƒåº”è¯¥åƒè¿™æ ·åˆ›å»º`"[\"a\", \"b\"]"`

### [](#json-file-example)JSON æ–‡ä»¶ç¤ºä¾‹

```
{  "config":  {  "url":  "http://localhost:7000/",  "name":  "Testing my new server",  "selectedQueries":  ["createUser",  "searchUser"],  "queryFile":  true,  "withMutations":  true,  "duration":  5,  "arrivalRate":  10,  "withOutput":  true  },  "args":  {  "getFamilyInfoByIsLocal":  {  "isLocal":  true,  "test":  "[\"a\", \"b\"]",  "age":  40,  "name":  "Demo Test"  },  "searchUser":  {  "name":  "Demo User"  },  "createUser":  {  "name":  "Demo User"  },  "createCity":  {  "input":  {  "name":  "Demo Name",  "country":  "Demo Country"  }  }  }  } 
```

* * *

*   å¦‚æœä½ å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œåˆ«å¿˜äº†åœ¨ GitHub ä¸Šç»™ä¸ªâ­ï¸å¥–ã€‚
*   å®Œæ•´æ–‡æ¡£[æ­¤å¤„](https://github.com/EasyGraphQL/easygraphql-lt)ã€‚