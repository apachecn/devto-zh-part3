# JSON æ¨¡å¼æ£’æäº†

> åŸæ–‡:[https://dev.to/nickymeuleman/json-schemas-are-awesome-312m](https://dev.to/nickymeuleman/json-schemas-are-awesome-312m)

## *T3ã€‘é…ç½®æ–‡ä»¶ T5ã€‘*

é‚£äº›è¯è®©ä½ æ„Ÿåˆ°(æœ‰ç‚¹)å®³æ€•å—ï¼Ÿ

æ‚¨å¹¶ä¸å­¤å•ï¼Œç¼–å†™é…ç½®æ–‡ä»¶åœ¨å¤§å¤šæ•°å¼€å‘äººå‘˜æœ€å–œæ¬¢çš„æ¶ˆé£åˆ—è¡¨ä¸­æ’åå¾ˆä½ã€‚

å½“ç¼–å†™è¿™äº›æ–‡ä»¶æ—¶(ä¾‹å¦‚ä¸€ä¸ª`.eslintrc.json`)ï¼Œæ‹¼å†™æ˜¯ä½ æœ€å¤§çš„æ•Œäººä¹‹ä¸€ã€‚

*æ˜¯`no-unused-vars``noUnusedVars``no-unused-var`è¿˜æ˜¯åˆ«çš„ï¼Ÿ*

è®¸å¤šå°æ—¶çš„å¼€å‘æ—¶é—´éƒ½æµªè´¹åœ¨æ‹¼å†™ä¸Šäº†

è®°ä½æŸä¸ªé”®æœŸæœ›å¾—åˆ°çš„å€¼æ˜¯è¿™äº›æ•Œäººä¸­çš„å¦ä¸€ä¸ªã€‚

*è¿™ä¸ªæ˜¯æœŸæœ›ä¸€ä¸ªæ•°ç»„è¿˜æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸è®°å¾—äº†*ğŸ˜°

ä¸€ä¸ªä¼šå·¥ä½œï¼Œå¦ä¸€ä¸ªä¼šç»™ä½ ä¸€å¼ å» crypticError é•‡çš„å•ç¨‹ç¥¨ã€‚

ç”±äºè¿™äº›åŸå› (ä»¥åŠæ›´å¤šåŸå› )ï¼Œåœ¨ç¼–å†™é…ç½®æ—¶æ‰“å¼€æ–‡æ¡£æ˜¯ç»å¯¹çš„*å¿…é¡»*

## [](#there-is-a-better-way)æœ‰æ›´å¥½çš„åŠæ³•

è§£å†³åŠæ³•ï¼Ÿæ€ æƒ°

æˆ‘åœ¨å¼€ç©ç¬‘ï¼Œéƒ¨åˆ†æ˜¯ã€‚è§£å†³æ–¹æ¡ˆæ˜¯ä¸€ä¸ª JSON æ¨¡å¼ã€‚åˆ©ç”¨è¿™äº›æ–¹æ³•ä¹‹ä¸€ï¼Œæ‚¨å¯ä»¥ä¾é æ™ºèƒ½è‡ªåŠ¨å®Œæˆå’Œé”™è¯¯æ£€æµ‹æ¥å®Œæˆç¹é‡çš„å·¥ä½œï¼

ä¸ºäº†ä»¥æœ€å°‘çš„åŠªåŠ›å¼€å§‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ [VSCode](https://code.visualstudio.com/) ï¼Œå®ƒå…·æœ‰å¯¹ JSON-schema çš„[å†…ç½®æ”¯æŒã€‚åˆ›å»ºä¸€ä¸ªåœ¨ schemastore.org](https://json-schema.org/implementations.html#editors)[åˆ—å‡ºçš„æ–‡ä»¶ï¼Œå¹¶è§¦å‘ç¼–è¾‘å™¨ä¸­çš„è‡ªåŠ¨å®ŒæˆåŠŸèƒ½(ctrl/cmd + space)](http://schemastore.org/json/)

[![empty .babelrc file](../Images/3d554e6dbaf4b3b29d531f39a106c564.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--V40sPwOg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/96ufgabar7ixnh89lqs0.png)

ç‚¹å‡»åˆ—è¡¨ä¸­çš„ä¸€ä¸ªé€‰é¡¹`tab`ï¼Œå¦‚æœé‚£ä¸ªé”®éœ€è¦ä¸€ä¸ªæ•°ç»„ä½œä¸ºå€¼**é‚£ä¹ˆè‡ªåŠ¨å¾—åˆ°ç©ºçš„ç›´æ‹¬å·**ã€‚
ä½¿ç”¨æ‚¨é€‰æ‹©çš„é…ç½®æ–‡ä»¶ã€‚å¦‚æœæ¨¡å¼æ”¯æŒçš„è¯ï¼ŒåµŒå¥—çš„æ•°é‡å¹¶ä¸é‡è¦ï¼Œä½ çš„ç¼–è¾‘å™¨ä¼šçŸ¥é“ä»€ä¹ˆå¯ä»¥æ”¾åœ¨é‚£é‡Œã€‚

æ‚¨å¯ä»¥åœ¨ç¼–è¾‘å™¨çš„å·¥ä½œç©ºé—´è®¾ç½®ä¸­å®šä¹‰æƒ³è¦ä½¿ç”¨çš„ç¡®åˆ‡æ–¹æ¡ˆã€‚å½“æˆ‘å†™è¿™ç¯‡æ–‡ç« æ—¶ï¼Œæˆ‘çŸ¥é“ä½ *å¯ä»¥*åšåˆ°ï¼Œä½†ä¸çŸ¥é“*å¦‚ä½•*ã€‚å¹¸è¿çš„æ˜¯ï¼Œç”± JSON-schema æä¾›çš„è‡ªåŠ¨å®ŒæˆåŠŸèƒ½å‡†ç¡®åœ°å‘Šè¯‰äº†æˆ‘å®ƒæ‰€æœŸæœ›çš„ã€‚

åœ¨ VSCode å·¥ä½œåŒºè®¾ç½®`.json`æ–‡ä»¶(ctrl/cmd+shift+p æ¥æœç´¢)

```
{  "json.schemas":  [  {  "fileMatch":  ["/.babelrc"],  "url":  "http://json.schemastore.org/babelrc"  }  ]  } 
```

## [](#your-own-schema)è‡ªå·±çš„å›¾å¼

æ¨¡å¼ä¸éœ€è¦æ˜¯è¿œç¨‹çš„ã€‚æ‚¨è¿˜å¯ä»¥å°†æ‚¨é€‰æ‹©çš„æ–‡ä»¶é“¾æ¥åˆ°è‡ªå·±ç¼–å†™çš„å’Œ/æˆ–æœ¬åœ°çš„æ¨¡å¼ã€‚

åœ¨è¿™ä¸ª`json`æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æŒ‡å‘ç”¨äºéªŒè¯çš„æ¨¡å¼ã€‚

> è®¸å¤š(ä½†ä¸æ˜¯æ‰€æœ‰)ç¼–è¾‘å™¨æ”¯æŒè¿™ç§å°†æ–‡ä»¶é“¾æ¥åˆ°æ¨¡å¼çš„æ–¹å¼

åœ¨`drivers.json`ä¸­

```
{  "$schema":  "./drivers.schema.json"  } 
```

`$schema`å€¼æŒ‡å‘åŒä¸€ç›®å½•ä¸­çš„æ¨¡å¼æ–‡ä»¶

åœ¨`drivers.schema.json`ä¸­

```
{  "$schema":  "http://json-schema.org/draft-07/schema"  } 
```

è¿™é‡Œçš„`$schema`å€¼å®šä¹‰äº†æ­£åœ¨ä½¿ç”¨çš„ JSON-schema è§„èŒƒçš„ç‰ˆæœ¬ã€‚

ä¸€ä¸ªç®€å•çš„æ–‡ä»¶å¾ˆæ— èŠï¼Œä¸‹é¢çš„ä»£ç ç»™`driver.json`å¢åŠ äº†ä¸€äº›çº¦æŸ

åœ¨`drivers.schema.json`ä¸­

```
{  "$schema":  "http://json-schema.org/draft-07/schema",  "title":  "Drivers",  "description":  "Formula 1 drivers",  "type":  "object",  "additionalProperties":  false,  "properties":  {  "$schema":  {  "type":  "string"  },  "series":  {  "type":  "string"  },  "season":  {  "type":  "integer"  }  }  } 
```

*   æ ‡é¢˜å’Œæè¿°ç”¨äºæè¿°éµå¾ªè¯¥æ¨¡å¼çš„æ–‡ä»¶ã€‚
*   æ•´ä¸ªæ–‡ä»¶çš„ç±»å‹åº”è¯¥æ˜¯`object`(è¿™ä¸æ˜¯é—®é¢˜ï¼Œå› ä¸ºå®ƒæ˜¯`json`)
*   åªæ¥å—æˆ‘ä»¬å£°æ˜çš„(é¡¶çº§)å±æ€§/é”®ã€‚
*   è¿™äº›å±æ€§ä¸­çš„æ¯ä¸€ä¸ªéƒ½åº”è¯¥æ˜¯æŒ‡å®šçš„ç±»å‹ã€‚

åœ¨è¿™é‡Œï¼Œæˆ‘è¯•å›¾å°†å­£èŠ‚å®šä¹‰ä¸º`"2018"`

[![incorrect type error](../Images/000de79e45cec8c50b0eab230c3f4b38.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--P1lSUCdt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/6c1kwh3xo2r7die93gc6.png)

ç°åœ¨:æ›´å¤æ‚çš„ä¸œè¥¿ã€‚

åœ¨`drivers.schema.json`ä¸­

```
{  //  ...  "properties":  {  //  ...  "driverList":  {  "type":  "array",  "items":  {  "$ref":  "#/definitions/driver"  }  }  },  "definitions":  {  "driver":  {  "type":  "object",  "additionalProperties":  false,  "properties":  {  "raceNumber":  {  "type":  "integer",  "minimum":  0,  "maximum":  99,  "description":  "number this driver races with"  },  "code":  {  "type":  "string",  "minLength":  3,  "maxLength":  3,  "description":  "3 letter abbreviation"  },  //  ...,  "team":  {  "$ref":  "#/definitions/team"  }  //  ...  },  "required":  ["raceNumber",  "code",  "team"]  },  "team":  {  "enum":  [  //  ...  ]  }  }  } 
```

åœ¨è¿™ä¸ªè¦ç‚¹ä¸­ï¼Œæ•´ä¸ªæ–‡ä»¶[æ˜¯å¯ç”¨çš„](https://gist.github.com/NickyMeuleman/f18b70684e12697d71b4178ad1403988#file-drivers-schema-json)

è¿™æ˜¯ä¸€ä¸ªæ»¡è¶³è¯¥æ¨¡å¼çš„æ–‡ä»¶ç¤ºä¾‹

åœ¨`drivers.json`ä¸­

```
{  "$schema":  "./drivers.schema.json",  "series":  "f1",  "season":  2018,  "driverList":  [  {  "raceNumber":  14,  "code":  "ALO",  "firstName":  "Fernando",  "lastName":  "Alonso",  "dateOfBirth":  "1981-07-29",  "team":  "MCLAREN",  "quotes":  ["GP2 engine, GP2",  "5 second penalty? Issa yoke"]  },  {  "raceNumber":  3,  "code":  "RIC",  "firstName":  "Daniel",  "lastName":  "Ricciardo",  "dateOfBirth":  "1989-07-01",  "nationality":  "Australian",  "team":  "REDBULL"  }  ]  } 
```

æ‰€æœ‰ä¿¡æ¯å¯åœ¨[å®˜æ–¹è§„èŒƒæ–‡ä»¶](https://json-schema.org/specification.html)ä¸­æ‰¾åˆ°ã€‚

æ‚¨å¯ä»¥æä¾›çš„å„ç§é€‰é¡¹åœ¨[ä»–ä»¬çš„æ¨¡å¼éªŒè¯æ–‡æ¡£](https://json-schema.org/latest/json-schema-validation.html)ä¸­å…·ä½“åˆ—å‡ºã€‚

è¿™æ˜¯ä¸€ä¸ªè‰°éš¾çš„é˜…è¯»ã€‚å¦‚æœæ‚¨ä¸å–œæ¬¢ï¼Œä¸å¿…æ‹…å¿ƒï¼Œå› ä¸º JSON-schema æœ¬èº«å…·æœ‰æ™ºèƒ½è‡ªåŠ¨å®Œæˆå’Œé”™è¯¯å¤„ç†åŠŸèƒ½ï¼
åœ¨å¤„ç†æ¨¡å¼æ–‡ä»¶æ—¶ï¼Œæ‚¨åœ¨ç¼–è¾‘å™¨ä¸­è·å¾—çš„ä¿¡æ¯éå¸¸å¥½ã€‚

[![autocomplete while writing a schema](../Images/6db26d58e214be3fe35f5d4e8bf65d90.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--iWnSScmZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/u68dd7nswf4tp81n2z15.png)

[ç†è§£ JSON æ¨¡å¼](https://json-schema.org/understanding-json-schema/)ä¹Ÿæ˜¯è·å¾—æ‚¨æ­£åœ¨å¯»æ‰¾çš„ä¿¡æ¯çš„ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ã€‚å®ƒç›®å‰åŸºäºè§„èŒƒçš„ç¬¬ 6 ç‰ˆï¼Œå¾ˆå¿«ä¼šå¾—åˆ°æ›´æ–°ï¼

## [](#not-just-json)ä¸åªæ˜¯ JSON

è¿™äº› JSON æ¨¡å¼ä¹Ÿå¯ä»¥åº”ç”¨äºå…¶ä»–æ–‡ä»¶ç±»å‹ï¼Œæ¯”å¦‚`YML`

ç”¨ Red Hat å®‰è£… [YML æ”¯æ’‘å»¶é•¿ä»¶](https://marketplace.visualstudio.com/items?itemName=redhat.vscode-yaml)ã€‚

å°†è¿œç¨‹æ¨¡å¼é“¾æ¥åˆ°æ–‡ä»¶å¯ä»¥åœ¨æ‚¨çš„å·¥ä½œåŒºè®¾ç½®ä¸­å®Œæˆã€‚

```
{  "yaml.schemas":  {  "http://json.schemastore.org/prisma":  "prisma.yml"  }  } 
```

ç°åœ¨æˆ‘çš„`prisma.yml`æ–‡ä»¶å‡†å¤‡å¥½äº†ï¼

[![prisma.yml with working schema](../Images/7fd77a69ac8cdaf33d19d3b1521a1a0e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--vJHgeTXm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/r3fn4hpk1o49w5sklk3y.png)

æˆ‘ä»¬åœ¨`drivers.schema.json`ä¸­çš„é¡¶å±‚`"type": "object"`ç°åœ¨å¯ä»¥æ˜¯å¦ä¸€ä¸ªå€¼ã€‚
ä¾‹å¦‚`"array"`ä»£è¡¨åŒ…å«ä¸€ä¸ªå¤§çš„é¡¶çº§åˆ—è¡¨çš„`drivers.yml`ã€‚