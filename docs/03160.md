# æå‡æ‚¨çš„ Ruby Skillz:ä½¿ç”¨å“ˆå¸Œ

> åŸæ–‡:[https://dev . to/Molly/level-up-your-ruby-skillz-work-with-hashes-4 bid](https://dev.to/molly/level-up-your-ruby-skillz-working-with-hashes-4bid)

ä¸Šå‘¨æˆ‘è®¨è®ºäº† Ruby æ•°ç»„ï¼Œå¹¶åˆ†äº«äº†ä¸€äº›æˆ‘è®¤ä¸ºæœ€æœ‰ç”¨çš„æ–¹æ³•ã€‚æœ¬å‘¨æˆ‘æƒ³è°ˆè°ˆæ•£åˆ—ï¼åœ¨æˆ‘å¼€å§‹ç ”ç©¶æˆ‘æœ€å–œæ¬¢çš„æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘æƒ³ç®€è¦ä»‹ç»ä¸€ä¸‹ Ruby ä¸­çš„ hash æ˜¯ä»€ä¹ˆä»¥åŠå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ç›´æ¥æ¥è‡ªæ–‡æ¡£æœ¬èº«çš„[æ•£åˆ—](https://ruby-doc.org/core-2.6.0.preview2/Hash.html)çš„å®šä¹‰:

> æ•£åˆ—æ˜¯æƒŸä¸€é”®åŠå…¶å€¼çš„ç±»ä¼¼å­—å…¸çš„é›†åˆ(å¦‚æœæ‚¨æ˜¯ Java äººå‘˜ï¼Œå¯ä»¥è€ƒè™‘æ˜ å°„)ã€‚ä¹Ÿç§°ä¸ºå…³è”æ•°ç»„(è€å®è¯´ï¼Œæˆ‘ä»æ¥æ²¡æœ‰å¬è¯´è¿‡ï¼Œä½†ğŸ¤·)ï¼Œå®ƒä»¬ç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æ•°ç»„ä½¿ç”¨æ•´æ•°ä½œä¸ºå®ƒçš„ç´¢å¼•ï¼Œæ•£åˆ—å…è®¸ä½ ä½¿ç”¨ä»»ä½•å¯¹è±¡ç±»å‹ã€‚

å…¶ä¸­ä¸€æŠŠé’¥åŒ™(åŒå…³è¯­ğŸ˜‰)çš„å®šä¹‰æ˜¯ï¼Œæ•£åˆ—å…è®¸æ‚¨ä½¿ç”¨ä»»ä½•å¯¹è±¡ç±»å‹ä½œä¸ºç´¢å¼•ã€‚å¤§å¤šæ•°äººä¸€æƒ³åˆ°å¤§éº»å°±ä¼šæƒ³åˆ°è¿™ä¸ªã€‚

```
{ a: 1, b: 2, c: 3 } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯åœ¨ Ruby ä¸­æ•£åˆ—å¯ä»¥å¤šå¾—å¤šï¼ä¾‹å¦‚ï¼Œæ‰€æœ‰è¿™äº›éƒ½æ˜¯æ•£åˆ—ã€‚

```
# String Keys
{ "a" => 1, "b" => 2, "c" => 3 }

# Integer Keys 
{ 1 => "a", 2 => "b", 3 => "c" } 

# Symbol Keys (Hashrocket notation) 
{ :a => 1, :b => 2, :c => 3 } 

# Array Keys
{ ['a'] => 1, ['b'] => 2, ['c'] => 3 } 

# Hash Keys 
{ { :a => 1 } => 2, { :b => 2 } => 3 } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨æƒ³è¦çš„ä»»ä½•å¯¹è±¡ç±»å‹éƒ½å¯ä»¥æ˜¯æ•£åˆ—é”®ã€‚æ—¢ç„¶æˆ‘ä»¬å·²ç»æœ‰äº†è¯­ä¹‰å’Œå®šä¹‰ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ–¹æ³•ï¼

*   [T2`each`](#each)
*   [`each_key`](#each_key_value)/[`each_value`T5ã€‘](#each_key_value)
*   [`keys`](#keys_values)/[`values`T5ã€‘](#keys_values)
*   [`key?`](#key_value?)/[`value?`T5ã€‘](#key_value?)
*   [`transform_keys`](#transform_keys)/[`transform_values`T5ã€‘](#transform_values)
*   [T2`dig`](#dig)
*   [T2`fetch`](#fetch)
*   [T2`select`](#select)
*   [T2`reject`](#reject)
*   [T2`slice`](#slice)
*   [T2`chaining`](#chaining)

æ³¨æ„:å°±åƒåœ¨[æ•°ç»„æ•™ç¨‹](https://dev.to/molly_struve/level-up-your-ruby-skillz-working-with-arrays-hnn)ä¸­ä¸€æ ·ï¼Œå¦‚æœä½ åœ¨ä»£ç ç‰‡æ®µä¸­çœ‹åˆ°`irb`ï¼Œè¿™æ„å‘³ç€æˆ‘æ­£åœ¨ä¸€ä¸ª Ruby æ§åˆ¶å°ä¸­å·¥ä½œã€‚æ­¤å¤–ï¼Œæˆ‘åšäº†ä¸€ä¸ªä»£ç [å°æŠ„](https://paper.dropbox.com/doc/Handy-Ruby-Hash-Methods--AdDf0Q90cMJJ8Xos__W_Un09AQ-vXrU498IlJByJtgHG9o6f)å¦‚æœä½ æƒ³è¦æ²¡æœ‰æ‰€æœ‰è§£é‡Šçš„ä»£ç ã€‚

# [`each`T4ã€‘](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-each)

ä½ å¯ä»¥å¯¹ä¸€ä¸ªæ•£åˆ—åšçš„æœ€æœ‰ä»·å€¼çš„äº‹æƒ…ä¹‹ä¸€å°±æ˜¯è¿­ä»£å®ƒã€‚å¾ªç¯éå†ä¸€ä¸ªæ•£åˆ—æœ€ç®€å•çš„æ–¹æ³•ä¹‹ä¸€æ˜¯ä½¿ç”¨ [`each`](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-each) ã€‚æˆ‘ä¸çŸ¥é“ä½ æ˜¯æ€ä¹ˆæƒ³çš„ï¼Œä½†æ˜¯å½“æˆ‘å¼€å§‹ä½¿ç”¨ Ruby æ—¶ï¼Œæˆ‘çš„ hash `each`è¯­å¥æ˜¯è¿™æ ·çš„ã€‚

```
irb> { a: 1, b: 2, c: 3 }.each do |pair|
  puts "#{pair.first} #{pair.last}"
end
a 1
b 2
c 3
=> {:a=>1, :b=>2, :c=>3} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨è¿™é‡Œï¼Œæˆ‘æ‰§è¡Œæˆ‘çš„`each`æ–¹æ³•ï¼Œå°±åƒæˆ‘å¯¹æˆ‘çš„æ•°ç»„æ‰€åšçš„ä¸€æ ·ã€‚ç°åœ¨ä¸åŒçš„æ˜¯`pair`æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æˆ‘çš„é”®ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯æˆ‘çš„å€¼ã€‚**æ³¨æ„:åœ¨ä¸ºæˆ‘ä»¬çš„æ¯ä¸ªé”®/å€¼å¯¹æ‰§è¡Œå—ä¹‹åï¼Œæˆ‘ä»¬è¿­ä»£çš„åŸå§‹æ•£åˆ—è¢«è¿”å›ã€‚**

ä¸Šé¢çš„æ–¹æ³•æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ç§æ›´å·§å¦™çš„æ–¹æ³•ï¼Œä½ å¯ä»¥é€šè¿‡å‘ä½ çš„å—ä¼ é€’ä¸¤ä¸ªå‚æ•°æ¥åˆ†ç¦»è¿™ä¸€å¯¹ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥è¿™æ ·é‡å†™ä¸Šé¢çš„:

```
irb> { a: 1, b: 2, c: 3 }.each do |key, value|
  puts "#{key} #{value}"
end
a 1
b 2
c 3
=> {:a=>1, :b=>2, :c=>3} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªç‹¬ç«‹çš„å˜é‡ï¼Œä¸€ä¸ªä»£è¡¨é”®ï¼Œä¸€ä¸ªä»£è¡¨å€¼ã€‚

# [T3](#-raw-eachkey-endraw-raw-eachvalue-endraw-)[T0](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-each_key)/[T1](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-each_value)

ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸æƒ³è¦æ‰€æœ‰çš„é”®å’Œå€¼å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬åªæƒ³è¦é”®æˆ–è€…åªæƒ³è¦å€¼å‘¢ï¼Ÿæ¯ä¸€ä¸ªéƒ½æœ‰æ–¹æ³•ï¼

```
irb> { a: 1, b: 2, c: 3 }.each_key do |key|
  puts key
end
a
b 
c
=> {:a=>1, :b=>2, :c=>3}

irb> { a: 1, b: 2, c: 3 }.each_value do |value|
  puts value
end
1
2 
3
=> {:a=>1, :b=>2, :c=>3} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯·æ³¨æ„ï¼ŒåŒæ ·ï¼Œä¸ç®¡æˆ‘ä»¬ä½¿ç”¨`each_key`è¿˜æ˜¯`each_value`ï¼Œåœ¨æˆ‘ä»¬å®Œæˆè¿­ä»£ä¹‹åï¼Œæˆ‘ä»¬ä»ç„¶å¾—åˆ°åŸå§‹æ•£åˆ—ã€‚

# [T3](#-raw-keys-endraw-raw-values-endraw-)[T0](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-keys)/[T1](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-values)

å‡è®¾ä½ åªæƒ³è¦ä¸€ä¸ªé”®çš„æ•°ç»„æˆ–è€…ä½ åªæƒ³è¦ä¸€ä¸ªæ•£åˆ—å€¼çš„æ•°ç»„ã€‚ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`keys`æˆ–`values`ã€‚ä¸¤è€…éƒ½å°†è¿”å›ç»™å®šæ•£åˆ—çš„é”®æˆ–å€¼çš„æ•°ç»„ã€‚

```
irb> { a: 1, b: 2, c: 3 }.keys 
=> [:a, :b, :c]
irb> { a: 1, b: 2, c: 3 }.values 
=> [1, 2, 3] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [T3](#-raw-key-endraw-raw-value-endraw-)[T0](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-key-3F)/[T1](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-value-3F)

å¦å¤–ä¸¤ä¸ªéå¸¸ç®€å•çš„æ–¹æ³•æ˜¯é”®å’Œå€¼[è°“è¯](http://ruby-for-beginners.rubymonstas.org/objects/predicates.html)ã€‚å¦‚æœä½ æƒ³çŸ¥é“ä¸€ä¸ªé”®æˆ–è€…ä¸€ä¸ªå€¼æ˜¯å¦å­˜åœ¨äºä¸€ä¸ªæ•£åˆ—ä¸­ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨`key?`æˆ–è€…`value?`ã€‚

```
irb> { a: 1, b: 2 }.key?(:b)
=> true
irb> { a: 1, b: 2 }.value?(2)
=> true
irb> { a: 1, b: 2 }.value?(5)
=> false 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å¾ˆç®€å•ï¼Œä½†æ˜¯æˆ‘æƒ³æŒ‡å‡ºä¸€äº›ç»†å¾®çš„å·®åˆ«ã€‚é¦–å…ˆï¼Œå½“ä½ å¯»æ‰¾ä¸€ä¸ªé”®æ—¶ï¼Œä½ å¿…é¡»ç¡®ä¿ä½ å¯»æ‰¾çš„æ˜¯æ­£ç¡®çš„æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ä¸€ä¸ªå¸¦æœ‰ç¬¦å·é”®çš„æ•£åˆ—ï¼Œæœç´¢å­—ç¬¦ä¸²å°†è¿”å› falseã€‚

```
irb> { a: 1, b: 2 }.key?("b")
=> false 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç¡®ä¿æ‚¨æ­£åœ¨æœç´¢çš„æ•°æ®ç±»å‹ä¸æ‚¨çš„é”®æˆ–å€¼çš„æ•°æ®ç±»å‹ç›¸åŒ¹é…ã€‚

# [`fetch`T4ã€‘](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-fetch)

ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•æ£€æŸ¥æˆ‘ä»¬æ˜¯å¦æœ‰ä¸€ä¸ªç‰¹å®šçš„é”®æˆ–å€¼ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³å®é™…æŸ¥æ‰¾ä¸€ä¸ªé”®çš„å€¼å‘¢ï¼Ÿå—¯ï¼Œæ€»æœ‰æ ‡å‡†çš„æ–¹æ³•æ¥åšè¿™ä»¶äº‹ï¼Œè¿™æ˜¯æˆ‘é¦–å…ˆå­¦åˆ°çš„ã€‚

```
irb> h = { a: 1, b: 2, c: 3 }
irb> h[:a] 
=> 1
irb> h[:d] 
=> nil 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç®€å•æ˜“è¡Œã€‚å¦‚æœé”®åœ¨é‚£é‡Œï¼Œæˆ‘ä»¬è¿”å›å®ƒçš„å€¼ã€‚å¦‚æœé”®ä¸åœ¨é‚£é‡Œï¼Œæˆ‘ä»¬è¿”å›é›¶ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æœ‰ä¸€äº›æ›´å¤æ‚çš„é€»è¾‘å‘¢ï¼Ÿä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¿”å›é”®å€¼ï¼Œæˆ–è€…å¦‚æœé”®ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬æƒ³è¿”å›ä¸€äº›é»˜è®¤å€¼ï¼Œæ¯”å¦‚ 0ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿå°±æˆ‘ä»¬ç›®å‰æ‰€çŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹

```
h = { a: 1, b: 2, c: 3 }
if h[:a]
  result = h[:a]
else
  result = 0
end 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å®ƒæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯è¦å®Œæˆå®ƒéœ€è¦ç›¸å½“å¤šçš„ä»£ç ã€‚ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ¥æ›¿æ¢è¿™ä¸€å¤§å—ä»£ç ï¼Œ`fetch`ã€‚`fetch`æœ‰å¾ˆå¤šé€‰é¡¹å’Œè¡Œä¸ºï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ä¸€æ¬¡æ‰“å¼€ä¸€ä¸ªã€‚

1) **`fetch`ä¸å¸¦å‚æ•°**å¦‚æœå­˜åœ¨å°†è¿”å›å€¼ã€‚å¦‚æœè¯¥å€¼ä¸å­˜åœ¨ï¼Œ`fetch`å°†å¼•å‘ä¸€ä¸ªé”™è¯¯ã€‚å¦‚æœæ‚¨æƒ³åœ¨æ‰¾ä¸åˆ°é”®æ—¶å¼•å‘é”™è¯¯ï¼Œè¿™æ˜¯å¾ˆå¥½çš„æ–¹æ³•ã€‚

```
irb> h = { a: 1, b: 2, c: 3 }
irb> h.fetch(:a) 
=> 1
irb> h.fetch(:d) 
KeyError: key not found: :d
    from (irb):13:in `fetch'
    from (irb):13 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

2) **`fetch`å¸¦å‚æ•°**å°†è¿”å›å€¼ï¼Œå¦‚æœå®ƒå­˜åœ¨çš„è¯ï¼Œå°±åƒä¹‹å‰ä¸€æ ·ã€‚è¿™å°±æ˜¯å®ƒå˜å¾—å·§å¦™çš„åœ°æ–¹ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆæœ€åˆçš„ç”¨ä¾‹ï¼Œå¦‚æœä½ ä¼ é€’ fetch å‚æ•°ï¼Œè€Œé”®ä¸å­˜åœ¨ï¼Œå®ƒå°†è¿”å›å‚æ•°ï¼ğŸ”¥

```
irb> h = { a: 1, b: 2, c: 3 }
irb> h.fetch(:a, 0) 
=> 1
irb> h.fetch(:d, 0) 
=> 0 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [`dig`T4ã€‘](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-dig)

å½“ä½ æœ‰ä¸€ä¸ªå•çº§æ•£åˆ—å¹¶æƒ³ä½¿ç”¨ä¸€ä¸ªé”®ä»å®ƒè¿”å›ä¸€ä¸ªå€¼æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•éå¸¸æœ‰ç”¨ã€‚ä½†æ˜¯å¦‚æœä½ æœ‰å‡ ä¸ªåµŒå¥—çš„æ•£åˆ—å‘¢ï¼Ÿä¾‹å¦‚

```
h = { a: { b: { c: 1 } } } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é€šå¸¸è¦å¾—åˆ° c çš„å€¼ï¼Œä½ éœ€è¦åš

```
irb> h[:a][:b][:c] 
=> 1 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å®ƒå°†éå†æ‚¨çš„åµŒå¥—æ•£åˆ—å¹¶è¿”å›æ‚¨çš„å€¼ã€‚ä½†æ˜¯å¦‚æœæ‚¨ä¸ç¡®å®šæ˜¯å¦æ‰€æœ‰è¿™äº›çº§åˆ«éƒ½å­˜åœ¨å‘¢ï¼Ÿä¾‹å¦‚ï¼Œå‡è®¾æ‚¨æ­£åœ¨ä½¿ç”¨ä¸€ä¸ª API æ¥è·å–ç”¨æˆ·æ•°æ®ã€‚æœ‰æ—¶å€™ä½ æ‰¾åˆ°ä½ è¦æ‰¾çš„ç”¨æˆ·ï¼ŒæŠŠè¿™ä¸ªæ‹¿å›æ¥ã€‚

```
{ user: { first: 'mary', last: 'sue' } } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å…¶ä»–æ—¶å€™ï¼Œä½ æ²¡æœ‰æ‰¾åˆ°ä½ æƒ³è¦çš„ç”¨æˆ·ï¼Œä½ å¾—åˆ°äº†è¿™ä¸ª

```
{ status: 'not found' } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸èƒ½ä»…ä»…å‡è®¾æˆ‘ä»¬æœ‰ç”¨æˆ·ä¿¡æ¯ï¼Œå› ä¸ºå¦‚æœæˆ‘ä»¬æ²¡æœ‰ç”¨æˆ·ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†æœ€ç»ˆå¼•å‘ä¸€ä¸ªé”™è¯¯ã€‚

```
irb> h = { status: 'not found' }
irb> h[:user][:first] 
=> NoMethodError: undefined method `[]' for nil:NilClass 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åš

```
h = { status: 'not found' }
if h[:user].present?
  result = h[:user][:first]
else
  result = nil
end 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ç¡®ä¿äº†å¦‚æœæˆ‘ä»¬æœ‰ç”¨æˆ·æ•°æ®ï¼Œæˆ‘ä»¬è¿”å›åå­—ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿”å›é›¶ã€‚äº‹å®è¯æ˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨`dig`æ¥é¿å…è¿™ä¸€åˆ‡ã€‚ [`dig`](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-dig) æå–ç”±ä¸€ç³»åˆ—å…³é”®å¯¹è±¡æŒ‡å®šçš„åµŒå¥—å€¼ã€‚**ç„¶è€Œï¼Œå¦‚æœè¿™äº›åµŒå¥—é”®ä¸­çš„ä»»ä½•ä¸€ä¸ªä¸å­˜åœ¨ï¼Œå®ƒå°†è¿”å› nilã€‚**ğŸ‰

```
irb> h = { user: { first: 'mary', last: 'sue' } }
irb> h.dig(:user, :first) 
=> 'mary'
irb> h = { status: 'not found' }
irb> h.dig(:user, :first) 
=> nil 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“ä½ æƒ³éå†ä¸€ä¸ªæ•£åˆ—ä½†ä¸ç¡®å®šå®ƒçš„ç»“æ„æ˜¯ä»€ä¹ˆçš„æ—¶å€™,`dig`éå¸¸æœ‰ç”¨ã€‚å®ƒå…è®¸æ‚¨å¤„ç†æ•£åˆ—ï¼Œè€Œä¸ç”¨æ‹…å¿ƒå¤„ç†å¤§é‡é”™è¯¯æˆ–ä½¿ç”¨ if/else å—è¿›è¡Œå¤§é‡çš„`present?`æ£€æŸ¥ã€‚

# [](#-raw-transformkeys-endraw-only-available-in-ruby-25-and-above)[`transform_keys`](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-transform_keys) (ä»…åœ¨ Ruby 2.5 åŠä»¥ä¸Šç‰ˆæœ¬ä¸­å¯ç”¨)

ç°åœ¨æˆ‘ä»¬è¦æŠŠå®ƒæå‡ä¸€ä¸ªæ¡£æ¬¡ã€‚å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªæ•£åˆ—ï¼Œå…¶ä¸­æ‰€æœ‰çš„é”®éƒ½æ˜¯ç¬¦å·ï¼Œä½†æˆ‘ä»¬æƒ³æŠŠå®ƒä»¬éƒ½å˜æˆå­—ç¬¦ä¸²ï¼Œé‚£è¯¥æ€ä¹ˆåŠï¼Ÿæ—©æœŸæˆ‘ä»¬ä¼šè¿™æ ·åšã€‚

```
new_hash = {}
{ a: 1, b: 2, c: 3 }.each do |key, value|
  new_hash[key.to_s] = value
end
# new_hash = { "a" => 1, "b" => 2, "c" => 3 } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å®ƒçš„å·¥ä½œï¼Œä½†ä½ çŒœå¯¹äº†ï¼Œç°åœ¨æœ‰ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•ã€‚æ›´å¥½çš„æ–¹æ³•æ˜¯`transform_keys`ã€‚ [`transform_keys`](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-transform_keys) å…è®¸ä½ è¿­ä»£ä¸€ä¸ª hash å¹¶å°†è¿”å›ä¸€ä¸ªæ–°çš„ hashã€‚æ–°çš„æ•£åˆ—é”®å°†æ˜¯å¯¹æ¯ä¸ªåŸå§‹é”®æ‰§è¡Œå—çš„ç»“æœã€‚

```
h = { a: 1, b: 2, c: 3 }
new_hash = h.transform_keys do |k| 
  k.to_s 
end  
# new_hash = { "a" => 1, "b" => 2, "c" => 3 } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

**é‡è¦çš„** `transform_keys`(ä¸Šå›¾)å’Œ`transform_values`(ä¸‹å›¾)åªæœ‰åœ¨ Ruby 2.5 åŠä»¥ä¸Šæ‰æœ‰ã€‚å¦‚æœä½ å¾—åˆ°ä¸‹é¢çš„é”™è¯¯ï¼Œé‚£ä¹ˆä½ å¯èƒ½æ­£åœ¨ä½¿ç”¨ä½äº 2.5 ç‰ˆæœ¬çš„ Ruby`NoMethodError: undefined method`transform _ keys`for {:a=>1, :b=>2, :c=>3}:Hash`

# [](#-raw-transformvalues-endraw-only-available-in-ruby-25-and-above)[`transform_values`](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-transform_values) (ä»…åœ¨ Ruby 2.5 åŠä»¥ä¸Šç‰ˆæœ¬ä¸­å¯ç”¨)

`transform_values`çš„å·¥ä½œæ–¹å¼ä¸`transform_keys`å®Œå…¨ç›¸åŒï¼Œåªæ˜¯å®ƒå…è®¸æ‚¨æ›´æ–°å€¼ã€‚å½“å®ƒæ‰§è¡Œå®Œæ‚¨çš„å—æ—¶ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªåŒ…å«æ–°å€¼é›†çš„æ–°æ•£åˆ—ã€‚

```
h = { a: 1, b: 2, c: 3 }
new_hash = h.transform_values do |value| 
  value * 2 
end  
# new_hash = { :a => 2, :b => 4, :c => 6 } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [`select`T4ã€‘](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-select)

å¦‚æœä½ è¯»è¿‡æˆ‘çš„ç¬¬ä¸€ç¯‡[é˜µåˆ—æ•™ç¨‹](https://dev.to/molly_struve/level-up-your-ruby-skillz-working-with-arrays-hnn)ï¼Œç°åœ¨æˆ‘ä»¬å°†è¿›å…¥ä¸€äº›ç†Ÿæ‚‰çš„é¢†åŸŸã€‚å°±åƒæ•°ç»„ä¸€æ ·ï¼Œæ‚¨å¯ä»¥å°†`select`ç”¨äºæ•£åˆ—ï¼ [`select`](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-select) å¯¹äºä¸€ä¸ª hash æ¥è¯´ï¼Œå®ƒçš„å·¥ä½œæ–¹å¼åŸºæœ¬ä¸Šå’Œæ•°ç»„ä¸€æ ·ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ–°çš„ hashï¼Œå…¶ä¸­åŒ…å«ä½ çš„å—è¯„ä¼°ä¸ºçœŸçš„é”®/å€¼å¯¹ã€‚

```
# clunky way
new_hash = {}
h = { a: 1, b: 2, c: 3, d: 4 }
h.each do |key, value| 
  new_hash[key] = value if value.even?
end  
# new_hash = { :b => 2, :d => 4 }

# slick select way
h = { a: 1, b: 2, c: 3, d: 4 }
new_hash = h.select do |key, value| 
  value.even?
end  
# new_hash = { :b => 2, :d => 4 } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [`slice`T4ã€‘](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-slice)

å‡è®¾ä½ æœ‰ä¸€ä¸ª hashï¼Œä½ åªæƒ³å¾—åˆ°ä¸€ç»„ç‰¹å®šçš„é”®å’Œå®ƒä»¬çš„å€¼ã€‚ä½ å¯ä»¥è¿™æ ·åš

```
key_list = [:a, :d]
h = { a: 1, b: 2, c: 3, d: 4 }
new_hash = h.select do |key, value| 
  key_list.include?(key)
end  
# new_hash = { :a => 1, :d => 4 } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯ Ruby æœ‰ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ï¼Œé‚£å°±æ˜¯ä½¿ç”¨`slice`ã€‚ [`slice`](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-slice) å°†è¿”å›ä¸€ä¸ªæ•£åˆ—ï¼Œå…¶ä¸­åªåŒ…å«æ‚¨é€šè¿‡å‚æ•°è¯·æ±‚çš„é”®ã€‚æˆ‘ä»¬ä¸Šé¢çš„å¯ä»¥ç®€åŒ–ä¸º

```
h = { a: 1, b: 2, c: 3, d: 4 }
new_hash = h.slice(:a, :d) 
# new_hash = { :a => 1, :d => 4 } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [`reject`T4ã€‘](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-reject)

å›å¤´æˆ‘ä»¬å†å»ç†Ÿæ‚‰çš„é˜µåˆ—é¢†åŸŸã€‚æ•£åˆ—çš„å·¥ä½œæ–¹å¼ä¸æ•°ç»„ç›¸åŒã€‚ [`reject`](https://ruby-doc.org/core-2.6.0.preview2/Hash.html#method-i-reject) å°†è¿”å›ä¸€ä¸ªæ–°çš„æ•£åˆ—ï¼Œå®ƒç”±æ‚¨çš„å—è¿”å› false çš„æ‰€æœ‰é”®/å€¼å¯¹ç»„æˆã€‚

```
h = { a: 1, b: 2, c: 3, d: 4 }
new_hash = h.reject do |key, value| 
  value.even?
end  
# new_hash = { :a => 1, :c => 3 } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [](#-raw-chaining-endraw-)`chaining`

æœ€åï¼Œä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦ä»‹ç»é“¾æ¥ã€‚ä¸Šé¢ä»»ä½•è¿”å›æ•£åˆ—çš„æ–¹æ³•ï¼Œä½ éƒ½å¯ä»¥é“¾æ¥åœ¨ä¸€èµ·ã€‚å¯¹äºè¿™äº›ä¾‹å­ï¼Œæˆ‘å°†ä½¿ç”¨æ‹¬å·ç¬¦å·ï¼Œå› ä¸ºæˆ‘è®¤ä¸ºä»å·¦è‡³å³é˜…è¯»é“¾æ¥æ–¹æ³•æ¯”ä»ä¸Šè‡³ä¸‹æ›´å®¹æ˜“ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªå°†ä¸Šè¿°ä¸€äº›æ–¹æ³•é“¾æ¥åœ¨ä¸€èµ·çš„ä¾‹å­ã€‚

```
h = { a: 1, b: 2, c: 3, d: 4 }
result = h.transform_keys{|k| k.to_s}.slice("a", "b").reject{|k, v| v == 2}.transform_values{|value| "hi #{value}"} 
# result = {"a"=>"hi 1"} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ ¹æ®æˆ‘ä»¬åœ¨ä¸Šé¢å­¦åˆ°çš„çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™é‡Œæ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ã€‚
1) `transform_keys`å°† hash çš„æ¯ä¸ªé”®æ›´æ”¹ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›`{ "a" => 1, "b" => 2, "c" => 3 , "d" => 4}`
2) `slice`å°†åªé€‰æ‹©é”®â€œaâ€å’Œâ€œbâ€ä»¥åŠå®ƒä»¬çš„å€¼å¹¶è¿”å›`{ "a" => 1, "b" => 2 }`
3) `reject`å°†åˆ é™¤ä»»ä½•å€¼ç­‰äº 2 çš„é”®/å€¼å¯¹ï¼Œå‰©ä¸‹çš„æ˜¯`{ "a" => 1 }`
4)æˆ‘ä»¬æœ€åçš„`transform_values`å°†æŠŠ hash çš„å€¼æ›´æ”¹ä¸ºä¸€ä¸ªå¸¦æœ‰â€œhiâ€å’Œæ•°å­—çš„å­—ç¬¦ä¸²ã€‚æœ€åçš„ç»“æœæ˜¯`{"a"=>"hi 1"}`

# [](#boom)è½°ï¼ğŸ’¥

[![](../Images/73aa870efe9ceaa1ab20bb167f6939f6.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--bJcsceji--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/omdld3l7yz2zsc0xuewb.gif) 
ä½ åšæŒåˆ°äº†æœ€åï¼ï¼ï¼å¸Œæœ›æ‚¨ç°åœ¨å¯¹ Ruby hashes æ„Ÿè§‰æ›´èˆ’æœäº†ï¼Œå¹¶ä¸”åœ¨æ‚¨çš„å·¥å…·ç®±ä¸­æœ‰æ›´å¤šçš„æ–¹æ³•å¯ä»¥ä½¿ç”¨ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦æ¾„æ¸…ï¼Œè¯·ä¸è¦çŠ¹è±«ï¼Œåœ¨è¯„è®ºä¸­æå‡ºé—®é¢˜ï¼

å¦‚æœä½ æƒ³å¿«é€Ÿå‚è€ƒè¿™äº›æ–¹æ³•ï¼Œæˆ‘åšäº†ä¸€ä¸ª[æ–¹ä¾¿çš„å¤‡å¿˜å•](https://paper.dropbox.com/doc/Handy-Ruby-Hash-Methods--AdDf0Q90cMJJ8Xos__W_Un09AQ-vXrU498IlJByJtgHG9o6f)ï¼Œé‡Œé¢æœ‰æ¯ä¸ªä¾‹å­çš„ä»£ç ã€‚