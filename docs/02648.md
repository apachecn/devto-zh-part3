# å¦‚ä½•åœ¨ JavaScript ä¸­æ£€æŸ¥ NaN

> åŸæ–‡:[https://dev . to/Samantha Ming/better-nan-check-with-es6-number-isnan-19g 0](https://dev.to/samanthaming/better-nan-check-with-es6-number-isnan-19g0)

JS ä¸­çš„`isNaN`æ£€æŸ¥æ€»æ˜¯æœ‰å®ƒçš„é—®é¢˜â€”â€”å¯¹äºä¸€ä¸ªå®é™…ä¸Šä¸æ˜¯æ•°å­—çš„å€¼ï¼Œå®ƒè¿”å› trueğŸ˜±ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå®ƒé¦–å…ˆå°†å€¼å¼ºåˆ¶ä¸ºä¸€ä¸ªæ•°å­—ï¼Œè¿™å¯èƒ½ä¼šé”™è¯¯åœ°å¯¼è‡´ä¸€ä¸ª`NaN`ã€‚ES6 æ¥æ•‘æ´äº†ï¼`Number.isNaN`ä¸ä¼šå¼ºè¡Œåšè½¬æ¢ã€‚è¿™æ„å‘³ç€åªæœ‰ number ç±»å‹çš„å€¼å°†è¿”å› trueã€‚è¿™ä¹ˆğŸ‘

```
// What?? ğŸ˜±
isNaN('string') // true

// Better âœ…
Number.isNaN('string') // false 
```

## [](#im-confused)æˆ‘ç³Šæ¶‚äº†...

> ç­‰ç­‰ï¼ŒNaN æ£€æŸ¥ä¸æ˜¯åº”è¯¥å¯¹å­—ç¬¦ä¸²è¿”å› trueï¼Œå¯¹æ•°å­—è¿”å› false å—ï¼ŸNaN çš„æ„æ€æ˜¯â€œä¸æ˜¯ä¸€ä¸ªæ•°â€ï¼Œæ‰€ä»¥å®ƒä¸åº”è¯¥æ˜¯æ£€æŸ¥â€œä¸æ˜¯ä¸€ä¸ªæ•°â€çš„ä¸œè¥¿å—ï¼Ÿæˆ‘å¾ˆå›°æƒ‘

â˜ï¸å¦‚æœä½ æ˜¯è¿™äº›äººä¸­çš„ä¸€å‘˜ã€‚åˆ«æ‹…å¿ƒï¼Œæˆ‘ä¹Ÿæ˜¯ï¼è®©æˆ‘è¯•ç€ä¸ºä½ è§£å¼€è¿™ä¸ªè°œå›¢ã€‚

## [](#numberisnan-vs-isnan)æ•°.ä¼Šæ–¯å— vs ä¼Šæ–¯å—

è®©æˆ‘ä»¬è¯•ç€å»ç†è§£è¿™ä¸¤ç§æ–¹æ³•åœ¨åšä»€ä¹ˆã€‚

### [](#isnan)isNaN

> å¦‚æœå‚æ•°å¼ºåˆ¶ä¸º NaNï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚

*[æ ‡å‡† ECMA-262: 5.1 ç‰ˆ](https://www.ecma-international.org/ecma-262/5.1/#sec-15.1.2.4)*

æ‰€ä»¥è¿™ä¸ªæ–¹æ³•å°†é¦–å…ˆä½¿ç”¨ä¾‹å¦‚`Number(argument)`æ¥å¼ºåˆ¶å‚æ•°ï¼Œå¦‚æœå®ƒçš„å€¼ä¸º`NaN`ï¼Œå®ƒå°†è¿”å› trueã€‚

### [](#numberisnan)ç¼–å·

> ç¡®å®šå‚æ•°æ˜¯å¦ä¸º NaNï¼Œå…¶ç±»å‹æ˜¯å¦ä¸º Numberã€‚

*[æ ‡å‡† ECMA-262:ç¬¬å…­ç‰ˆ](https://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan)*

è¿™é‡Œæ²¡æœ‰å¼ºè¿«ã€‚å®ƒåšä¸¤ä»¶äº‹:

*   é¦–å…ˆï¼Œå®ƒä½¿ç”¨ä¾‹å¦‚`typeof (argument)`æ¥æ£€æŸ¥ç±»å‹ï¼Œå¦‚æœå®ƒçš„è®¡ç®—ç»“æœä¸æ˜¯`number`ï¼Œå®ƒå°†è¿”å› falseã€‚
*   å…¶æ¬¡ï¼Œå®ƒå°†æ£€æŸ¥å‚æ•°æ˜¯å¦æœ‰å€¼`NaN`ï¼Œå¦‚æœæœ‰ï¼Œå®ƒå°†è¿”å› trueã€‚

### [](#summary)æ€»ç»“

éå¸¸æ¸…æ¥šçš„æ˜¯ï¼Œè¿™ä¸¤ç§æ–¹æ³•çš„åŒºåˆ«åœ¨äºåœ¨ç¡®å®šå‚æ•°æ˜¯å¦æœ‰å€¼`NaN`ä¹‹å‰ï¼Œ`Number.isNaN`ä¸ä¼šå¼ºåˆ¶æˆ–å¼ºè¡Œå°†å‚æ•°è½¬æ¢ä¸ºæ•°å­—ã€‚

## [](#understanding-raw-nan-endraw-)ç†è§£`NaN`

å¥½å§ï¼Œè®©æˆ‘ä»¬ç»§ç»­äº†è§£`NaN`æ˜¯ä»€ä¹ˆã€‚å®ƒä»£è¡¨â€œä¸æ˜¯ä¸€ä¸ªæ•°å­—â€ã€‚ä½†æˆ‘è§‰å¾—è¿™æ‰æ˜¯é—®é¢˜çš„æºå¤´ã€‚å¦‚æœä½ ä»å­—é¢ä¸Šè€ƒè™‘å®ƒï¼Œä½ å¯èƒ½ä¼šæŠŠå®ƒè§£é‡Šä¸ºä»»ä½•â€œä¸æ˜¯æ•°å­—â€çš„ä¸œè¥¿ï¼Œé‚£ä¹ˆå®ƒä¸€å®šæ˜¯`NaN`ã€‚è¿™æ˜¯ä¸æ­£ç¡®çš„ã€‚å®ƒä¸æ˜¯æ•°å­—çš„åä¹‰è¯ã€‚ä»¥ä¸€æ ¹â€œç»³å­â€ä¸ºä¾‹ã€‚å½“ç„¶ï¼Œå®ƒâ€œä¸æ˜¯ä¸€ä¸ªæ•°å­—â€,ä½†å®ƒä¸ç­‰äº`NaN`ã€‚æ‰€ä»¥â€œå¼¦â€ä¸æ˜¯`NaN`ğŸ™…â€â™€ï¸

> å°† NaN è§†ä¸ºâ€œæ— æ•ˆçš„æ•°å­—â€ã€â€œå¤±è´¥çš„æ•°å­—â€ï¼Œç”šè‡³â€œé”™è¯¯çš„æ•°å­—â€ï¼Œæ¯”å°†å…¶è§†ä¸ºâ€œä¸æ˜¯æ•°å­—â€è¦å‡†ç¡®å¾—å¤šã€‚

*[å‡¯å°”Â·è¾›æ™®æ£®ï¼Œä½ ä¸çŸ¥é“ JS](https://github.com/getify/You-Dont-Know-JS/blob/master/types%20%26%20grammar/ch2.md#the-not-number-number)T3ã€‘*

æ‰€ä»¥`NaN`æ˜¯ä¸€ä¸ªæ— æ•ˆæ•°å­—ã€‚å½“ä½ è¯•å›¾å¯¹ä¸æ˜¯æ•°å­—çš„å€¼åšä¸€äº›æ•°å­¦è¿ç®—æ—¶ï¼Œä½ å¾—åˆ°äº†`NaN`ã€‚

```
const invalid = 100 // "string";

console.log(invalid); // NaN 
```

### [](#tips-to-understanding-nan)äº†è§£æ¥ çš„å°æŠ€å·§

å¸®åŠ©æˆ‘ç†è§£è¿™ä¸€ç‚¹çš„å¦ä¸€ç§æ–¹å¼æ˜¯æŠŠ`NaN`çœ‹ä½œå®ƒè‡ªå·±çš„ä»·å€¼ã€‚å°±åƒ`200`æ˜¯ä¸€ä¸ªå€¼ä¸€æ ·ï¼Œ`NaN`ä¹Ÿæ˜¯å®ƒè‡ªå·±çš„å€¼ã€‚ä¸è¦ç”¨å®ƒçš„å­—é¢æ„ä¹‰æ¥ç§°å‘¼å®ƒï¼Œâ€œä¸æ˜¯ä¸€ä¸ªæ•°å­—â€ï¼Œåªè¦æŠŠå®ƒè¯»æˆä¸€ä¸ªè¯ï¼Œ **nan** ã€‚è¿™æ ·ä½ çš„å¤§è„‘å°±ä¸ä¼šè®¤ä¸ºå®ƒâ€œä¸æ˜¯ä¸€ä¸ªæ•°å­—â€ã€‚

å¥½äº†ï¼Œå‘å‰çœ‹ï¼Œæˆ‘ä»¬å°†ä¸å†æŠŠ`NaN`ç§°ä¸ºâ€œä¸æ˜¯ä¸€ä¸ªæ•°å­—â€ï¼Œå®ƒåªæ˜¯å¦ä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼å«åš`NaN`ã€‚ç›¸ä¿¡æˆ‘ï¼Œå½“ä½ è¿™æ ·åšçš„æ—¶å€™ï¼Œä¼šæœ‰åŠ©äºç¼“è§£å¾ˆå¤šå›°æƒ‘ğŸ™†â€â™€ï¸.

## [](#problem-checking-raw-nan-endraw-)é—®é¢˜æ£€æŸ¥`NaN`

é‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–¹æ³•æ¥æ£€æŸ¥`NaN`ã€‚ä¸ºä»€ä¹ˆè¿™ä¸ªæ–¹æ³•`isNaN`ä¼šå­˜åœ¨ï¼Ÿå®ƒçš„å­˜åœ¨æ˜¯å› ä¸ºæˆ‘ä»¬ä¸å®¹æ˜“æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯`NaN`ã€‚é‚£æ˜¯å› ä¸º`NaN`ä¸ç­‰äºå®ƒæœ¬èº«ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç®€å•åœ°å°†ä¸€ä¸ªè®ºç‚¹ä¸`NaN`ç›¸æ¯”è¾ƒï¼Œæ¥æ£€æŸ¥å®ƒæ˜¯å¦ç›¸ç­‰æˆ–ç›¸åŒã€‚è¿·èŒ«ï¼Ÿè®©æˆ‘ä»¬èµ°ä¸€éã€‚

æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ç­‰äº`100`ã€‚é‚£å¾ˆç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å’Œå®ƒæœ¬èº«æ¯”è¾ƒ:

```
const value = 100;

value === 100; // true 
```

å¥½å§ï¼Œæˆ‘ä»¬ç”¨`NaN`è¯•è¯•è¿™ä¸ªé€»è¾‘ã€‚

```
const value = NaN;

value === NaN; // false
value == NaN; // false 
```

â˜ï¸It ä¸å·¥ä½œğŸ˜«ã€‚`NaN`æ˜¯ä¸€ä¸ªéå¸¸ç‰¹æ®Šçš„å€¼ï¼Œå®ƒä»ä¸ç­‰äºè‡ªèº«ã€‚è€Œä¸”å› ä¸ºè¿™ä¸ªé—®é¢˜ã€‚JavaScript åˆ›å»ºäº†å…¨å±€å®ç”¨ç¨‹åº`isNaN`æ¥å¸®åŠ©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ç­‰äº`NaN`ã€‚

## [](#problem-with-raw-isnan-endraw-)é—®é¢˜ä¸`isNaN`

å› ä¸ºæ²¡æœ‰ç®€å•çš„æ–¹æ³•æ¥æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ç­‰äº`NaN`,å› ä¸ºå®ƒä¸ç­‰äºè‡ªèº«ã€‚å…¨çƒå®ç”¨ç¨‹åº`isNaN`å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªéš¾é¢˜è€Œåˆ›å»ºçš„ã€‚

```
const value = NaN;

isNaN(value); // true âœ… 
```

è¿™å¤ªæ£’äº†ã€‚ä½†æ˜¯è¿™ä¸ªå·¥å…·æœ‰ä¸€ä¸ªé—®é¢˜ğŸ˜‘

```
const value = 'string';

isNaN(value); // true ğŸ˜± 
```

ä½ çœ‹å‡ºé—®é¢˜äº†å—ï¼Ÿè®©æˆ‘ä»¬ç”¨è¯­è¨€æ¥è§£é‡Šè¿™ä¸ªã€‚`string`ç­‰äº`NaN`å—ï¼Ÿè®°ä½ï¼Œä¸è¦æŠŠ NaN æƒ³æˆâ€œä¸æ˜¯ä¸€ä¸ªæ•°â€ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå« NaN çš„å€¼ã€‚ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼`string`ä¸ç­‰äº`NaN`ã€‚è®©æˆ‘å¾€ä¸‹é’»:

```
"string" === NaN; // false
"string" == NaN; // false 
```

### `isNaN`é—®é¢˜çš„æ¥æº

è®©æˆ‘ä»¬å›åˆ°æˆ‘ä»¬å¯¹`isNaN`çš„å®šä¹‰

> å¦‚æœå‚æ•°å¼ºåˆ¶ä¸º NaNï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚

è§â€œè¦æŒŸâ€äºŒå­—ã€‚è¿™å°±æ˜¯é—®é¢˜æ‰€åœ¨ï¼å®ƒé¦–å…ˆå¼ºåˆ¶å€¼ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒè¯•å›¾å°†å€¼è½¬æ¢æˆæ•°å­—ç±»å‹ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬è¿™æ ·åšæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚

```
const value = 'string';

Number(value); // NaN 
```

â˜ï¸ï¼Œä½ çœ‹åˆ°äº†å—ï¼å½“æ‚¨å°è¯•å°†å­—ç¬¦ä¸²ç±»å‹è½¬æ¢ä¸ºæ•°å­—ç±»å‹æ—¶ï¼Œå®ƒä¼šè¿”å›`NaN`ã€‚è€Œå€¼`NaN`æœ‰æ²¡æœ‰`NaN`çš„å€¼ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚æ‰€ä»¥æ‰è¦å›å½’`true`ã€‚ä½†æ˜¯ï¼è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚è¿™æ˜¯ä¸€ä¸ªå‡é˜³æ€§ã€‚ä¸ºäº†çº æ­£è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›å‘ç”Ÿä»»ä½•èƒè¿«ï¼

## [](#problem-solved-with-raw-numberisnan-endraw-)é—®é¢˜ç”¨`Number.isNaN`è§£å†³

æ‰€ä»¥æ‰æ¨å‡ºäº†`Number.isNaN`æ–¹æ³•ï¼å®ƒè§£å†³äº†`isNaN`çš„è¯¯æŠ¥é—®é¢˜ã€‚`Number.isNaN`ä¸åšä»»ä½•å¼ºåˆ¶ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä¸ä¼šå°è¯•å°†å‚æ•°çš„ç±»å‹è½¬æ¢ä¸ºæ•°å­—ç±»å‹ã€‚

```
const value = 'string';

isNaN(value) // true âŒ
Number.isNaN(value) // false âœ… 
```

è®°ä½è¿™äº›æ–¹æ³•æ„å›¾çš„é—®é¢˜:â€œå€¼æ˜¯å¦ç­‰äº`NaN`â€ã€‚ä¸æ˜¯é—®å€¼æ˜¯ä¸æ˜¯â€œä¸æ˜¯æ•°å­—â€ã€‚æŠ±æ­‰ï¼Œæˆ‘é‡å¤äº†ã€‚ä½†è¿™æ˜¯äººä»¬å¾ˆå¤šå›°æƒ‘çš„æ¥æºï¼Œæ‰€ä»¥æˆ‘çœŸçš„æƒ³æ·±å…¥è¿™ä¸ªæ¦‚å¿µã€‚å¸Œæœ›ç°åœ¨ä¸€åˆ‡éƒ½æ¸…æ¥šäº†ğŸ˜†

## [](#demoing-raw-numberisnan-endraw-vs-raw-isnan-endraw-)æ¼”ç¤º`Number.isNaN` vs `isNaN`

è¿™å·®ä¸å¤šæ˜¯è¿™ç¯‡æ–‡ç« çš„ç»“å°¾ã€‚ä½†æ˜¯æˆ‘æƒ³å†ä¸¾å‡ ä¸ªä¾‹å­ï¼Œè®©ğŸ¥….çœŸæ­£ç†è§£è¿™ä¸ªæ¦‚å¿µ

### [](#example-number)ä¸¾ä¾‹:æ•°å­—

è¯¥å€¼æ˜¯å¦ç­‰äº`NaN`ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚æ‰€ä»¥ç»“æœåº”è¯¥æ˜¯`false`ã€‚è®°ä½å®ƒä¸æ˜¯é—®å€¼æ˜¯å¦ç­‰äºâ€œä¸æ˜¯ä¸€ä¸ªæ•°â€ã€‚

```
const number = 100;

isNaN(number) // false âœ…
Number.isNaN(number) // false âœ… 
```

### [](#example-nan)ä¸¾ä¾‹:å—

è¯¥å€¼æ˜¯å¦ç­‰äº`NaN`ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚æ‰€ä»¥ç»“æœåº”è¯¥æ˜¯`true`ã€‚

```
const nan = NaN;

isNaN(number) // true âœ…
Number.isNaN(number) // true âœ… 
```

### [](#example-string)ä¸¾ä¾‹:å­—ç¬¦ä¸²

å§‹ç»ˆä½¿ç”¨`Number.isNaN`ï¼Œå› ä¸º`isNaN`çš„ç»“æœä¸æ­£ç¡®ã€‚è®°ä½ NaN-check çš„æ„å›¾ï¼Œæ–¹æ³•æ˜¯è¯¢é—®:â€œå€¼æ˜¯å¦ç­‰äº`NaN`ï¼Ÿä¸æ˜¯é—®å€¼æ˜¯å¦ç­‰äºâ€œä¸æ˜¯ä¸€ä¸ªæ•°â€ã€‚

é‚£ä¹ˆï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå­—ç¬¦ä¸²å€¼æ˜¯å¦ç­‰äº`NaN`ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œç»“æœåº”è¯¥æ˜¯`false`ã€‚

```
const value = 'string';

isNaN(value) // true âŒ
Number.isNaN(value) // false âœ… 
```

## [](#conclusion)ç»“è®º

å½“æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ç­‰äº`NaN`æ—¶ã€‚ä½¿ç”¨`Number.isNaN`æ–¹æ³•ã€‚ä¸è¦ä½¿ç”¨`isNaN`ğŸ¤“

## [](#resources)èµ„æº

*   [ECMAScript: isNaN](https://www.ecma-international.org/ecma-262/5.1/#sec-15.1.2.4)
*   [ECMAScript: Number.isNaN](https://www.ecma-international.org/ecma-262/6.0/)
*   YDKJS: NaN
*   [å †æ ˆæº¢å‡º:javascript ä¸­çš„ isNaN å’Œ Number.isNaN æ··æ·†](https://stackoverflow.com/questions/33164725/confusion-between-isnan-and-number-isnan-in-javascript)
*   [åœ¨ JavaScript ä¸­æµ‹è¯• NaN çš„é—®é¢˜](http://adripofjavascript.com/blog/drips/the-problem-with-testing-for-nan-in-javascript.html)
*   [å †æ ˆæº¢å‡º:æ˜¯æ•°å­—ã€‚IsNaN()æ¯” isNaN()](https://stackoverflow.com/questions/25176459/is-number-isnan-more-broken-than-isnan) æ›´ç ´
*   [JDKJS: Number.isNaN](https://github.com/getify/You-Dont-Know-JS/blob/f0d591b6502c080b92e18fc470432af8144db610/es6%20%26%20beyond/ch6.md#numberisnan-static-function)
*   MDN ç½‘ç»œæ–‡æ¡£:ç¼–å·ã€‚ä¼Šæ–¯å—
*   [MDN ç½‘ç»œæ–‡æ¡£:NaN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN)
*   [MDN ç½‘ç»œæ–‡æ¡£:isNaN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/isNaN)
*   [Airbnb é£æ ¼æŒ‡å—:å—](https://github.com/airbnb/javascript#standard-library--isnan)

* * *

**æ„Ÿè°¢é˜…è¯»â¤**
é—®å¥½ï¼[insta gram](https://www.instagram.com/samanthaming/)|[Twitter](https://twitter.com/samantha_ming)|[è„¸ä¹¦](https://www.facebook.com/hisamanthaming) | [åª’ä½“](https://medium.com/@samanthaming) | [åšå®¢](https://www.samanthaming.com/blog)