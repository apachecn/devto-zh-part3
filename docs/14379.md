# ä¸ºæœªæ¥çš„è‡ªå·±ç¼–å†™ä»£ç 

> åŸæ–‡ï¼š<https://dev.to/sunnysingh/writing-code-for-your-future-self-3da2>

æˆ‘ä»¬éƒ½ç»å†è¿‡ã€‚ä½ å†™äº†ä¸€æ®µä»£ç ï¼Œé€šè¯»äº†ä¸€éï¼Œè§‰å¾—å¾ˆå®Œç¾ï¼Œå› ä¸ºå½“æ—¶å¯¹ä½ æ¥è¯´å¾ˆæœ‰æ„ä¹‰ã€‚ä¸€å¹´åå›åˆ°åŒæ ·çš„ä»£ç ï¼Œå®ƒ**æ— æ³•è¯†åˆ«**ğŸ™ˆ

> æˆ‘å†™çš„è¿™æ®µä»£ç å¤ªå®Œç¾äº†ï¼ğŸ˜
> <cite>â€”1 å¹´å‰çš„ä½ ã€‚</cite>

[å‘è¿™æ¡å¾®åš](https://twitter.com/intent/tweet?text=%22This%20code%20I%20wrote%20is%20perfect!%20%F0%9F%98%8E%20%E2%80%94%20You%2C%201%20year%20ago.%22%0A%0Ahttps%3A%2F%2Fsunnysingh.io%2Fblog%2Freadable-code%0A%0Acc%20%40sunnysinghio&related=sunnysinghio)

* * *

> è¿™æ˜¯æä»€ä¹ˆé¬¼ï¼ŸğŸ˜¡
> <cite>â€”ä½ ï¼Œçœ‹ç€ä½  1 å¹´å‰çš„ä»£ç ã€‚</cite>

[å‘è¿™æ¡å¾®åš](https://twitter.com/intent/tweet?text=%22WTF%20is%20this%3F%20%F0%9F%98%A1%20%E2%80%94%20You%2C%20looking%20at%20your%20code%20from%201%20year%20ago.%22%0A%0Ahttps%3A%2F%2Fsunnysingh.io%2Fblog%2Freadable-code%0A%0Acc%20%40sunnysinghio&related=sunnysinghio)

é—®é¢˜æ˜¯ä½ åœ¨ä¸ºå½“å‰çš„è‡ªå·±å†™ä»£ç ã€‚ç›¸åï¼Œä½ éœ€è¦ä¸ºæœªæ¥çš„è‡ªå·±è€Œå†™ä½œã€‚æœ¬è´¨ä¸Šï¼Œä½ åªéœ€è¦é—®è‡ªå·±è¿™æ ·ä¸€ä¸ªé—®é¢˜:â€œæœªæ¥çš„æˆ‘èƒ½ç†è§£è¿™æ®µä»£ç çš„æ„å›¾å—ï¼Ÿâ€

è¿™é‡Œæœ‰ä¸€äº›æˆ‘å¤šå¹´æ¥ç¼–å†™ä¸å¯è¯»ä»£ç æ—¶å­¦åˆ°çš„æŠ€å·§ã€‚

## ä¸è¦è¯•å›¾æ‰“åŠ¨è‡ªå·±

æˆ‘å–œæ¬¢å†™èªæ˜çš„ä»£ç ã€‚è¿™è®©æˆ‘è§‰å¾—è‡ªå·±å¾ˆèªæ˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç›´åˆ°ä¸€å¹´åæˆ‘å›å¤´çœ‹æˆ‘èªæ˜çš„ä»£ç ï¼Œå¹¶è¯•å›¾å¼„æ¸…æ¥šå®ƒåœ¨åšä»€ä¹ˆï¼Œä»¥åŠä¸ºä»€ä¹ˆæˆ‘æ²¡æœ‰ç”¨ä¸€ç§æ›´ç®€å•ã€æ›´æ ‡å‡†çš„æ–¹å¼æ¥åšå®ƒã€‚

æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³åšä¸€äº›ä»¤äººå°è±¡æ·±åˆ»çš„äº‹æƒ…ï¼Œå†™å¯è¯»çš„ä»£ç ã€‚æ¯•ç«Ÿï¼Œåœ¨åŒä¸€å¤©é‡Œï¼Œä½ å¯èƒ½ä¼šä»æ„Ÿè§‰è‡ªå·±åƒä¸ªç¥å˜æˆä¸çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆã€‚

[![The two states of every programmer: Left panel with person moving multiple knobs and switches with the following caption, I am a god. Right panel is a clueless dog at a computer with the following caption, I have no idea what I'm doing.](img/15d991defdb47159b41e3a7f7a18fc51.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--bvhAizHB--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/q3lzdl6v7dvzukjyy8mw.png)

## ä½¿ç”¨æœ‰æ„ä¹‰çš„åå­—

æˆ‘å¾ˆéš¾æƒ³å‡ºæˆ‘çš„å˜é‡ã€å‡½æ•°ã€æ¨¡å—ç­‰çš„åå­—ã€‚ç”šè‡³æœ‰è¿™æ ·ä¸€å¥åè¨€:

> è®¡ç®—æœºç§‘å­¦åªæœ‰ä¸¤ä¸ªç¡¬ä¸œè¥¿:ç¼“å­˜å¤±æ•ˆå’Œäº‹ç‰©å‘½åã€‚
> <cite>â€”è²å°”Â·å¡å°”é¡¿</cite>

è™½ç„¶å‘½åæ˜¯ä¸€é¡¹éœ€è¦åŸ¹å…»çš„æŠ€èƒ½ï¼Œä½†æˆ‘å‘ç°å¤§å¤šæ•°äººè¦ä¹ˆæƒ³å¾—ä¸å¤Ÿå¤šï¼Œè¦ä¹ˆæƒ³å¾—å¤ªå¤šã€‚ä»¥ä¸‹æ˜¯æˆ‘éµå¾ªçš„ä¸€äº›æœ‰ç”¨çš„å»ºè®®:

*   è¿œç¦»é€šç”¨åç§°ï¼Œå¦‚`container`æˆ–`data`ã€‚
*   å¯¹å¸ƒå°”å€¼ä½¿ç”¨ç±»ä¼¼äº`is`æˆ–`has`çš„å‰ç¼€(å³ä½¿åœ¨ç±»å‹åŒ–è¯­è¨€ä¸­)ã€‚
*   å¯¹å‡½æ•°ä½¿ç”¨å‰ç¼€`get`æˆ–`create`æ¥è¡¨ç¤ºåŠ¨ä½œã€‚
*   ä½¿ç”¨å‰ç¼€`min`æˆ–`total`è·å¾—æ›´å¤šæè¿°æ€§æ•°å­—ã€‚
*   åˆ›å»ºç±»ä¼¼`users`çš„æ•°ç»„æ—¶ï¼Œä½¿ç”¨é€‚å½“çš„å¤æ•°ã€‚
*   é¿å…åƒ`e`è¿™æ ·çš„å•å­—æ¯å˜é‡ã€‚ç”¨`event`æˆ–è€…`error`å°±å¯ä»¥äº†ã€‚
*   ä¸è¦å®³æ€•åƒ`getTotalDaysSinceLastLogin`è¿™ç§æœ‰å¤šä¸ªå•è¯çš„é•¿åå­—ã€‚

æœ€é‡è¦çš„æ˜¯:**å°½å¯èƒ½å‡å°‘æ½œåœ¨çš„æ··ä¹±**ã€‚

## åˆ†å¼€ä½ çš„æ¡ä»¶

è®¸å¤šåº”ç”¨ç¨‹åºçš„æ ¸å¿ƒæ˜¯é€»è¾‘ï¼Œå®ƒå®é™…ä¸Šå°±æ˜¯ä½ çš„`if`è¯­å¥ã€‚è¿™äº›è¯­å¥çš„æ¡ä»¶ä¼šå˜å¾—éå¸¸å¤æ‚ã€‚

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ*ä½ èŠ±äº†å¤šé•¿æ—¶é—´*ç†è§£å…¶ä¸­çš„é€»è¾‘ï¼Ÿ

```
if (users[0] && posts.find(post => post.userId === users[0].id)) {
  showUserPost();
} 
```

Enter fullscreen mode Exit fullscreen mode

æ—¶é—´åœ¨è¿™é‡Œæ˜¯ä¸€ä¸ªé‡è¦çš„æ–¹é¢ã€‚å½“ç„¶ï¼Œæˆ‘å¯èƒ½æœ€ç»ˆèƒ½å¤Ÿå¼„æ¸…æ¥šè¿™ä¸ªä»£ç ç‰‡æ®µï¼Œä½†æ˜¯å¦‚æœæ•´ä¸ªä»£ç åº“éƒ½æ˜¯ä»¥è¿™ç§æ–¹å¼ç¼–å†™çš„ï¼Œé‚£ä¹ˆä»»ä½•æœªæ¥çš„ç»´æŠ¤è€…(åŒ…æ‹¬ä½ è‡ªå·±)éƒ½ä¼šç»å°½è„‘æ±è¯•å›¾ç†è§£å®ƒã€‚

æ‚¨å¯èƒ½æ€¥äºåœ¨è¿™é‡Œåˆ›å»ºæ³¨é‡Šï¼Œä½†æ˜¯è®©æˆ‘ä»¬é€šè¿‡å°†æ¡ä»¶ç§»åˆ°ä¸€ä¸ªæœ‰æ„ä¹‰çš„å˜é‡æ¥æ”¹è¿›ä»£ç æœ¬èº«ã€‚

```
const isUserPostCreated = users[0] && posts.find(post => post.userId === users[0].id);

if (isUserPostCreated) {
  showUserPost();
} 
```

Enter fullscreen mode Exit fullscreen mode

å¦‚æœæˆ‘ä»¬å¢åŠ å¦ä¸€ä¸ªæ¡ä»¶å‘¢ï¼Ÿåˆ›å»ºå¦ä¸€ä¸ªå˜é‡ã€‚

```
const isUserPostCreated = users[0] && posts.find(post => post.userId === users[0].id)
const isReaderLoggedIn = getReaderFromDatabase().isLoggedIn();

if (isUserPostCreated && isReaderLoggedIn) {
  showUserPost();
} 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨ï¼Œå½“æœªæ¥çš„ä½ çœ‹åˆ°è¿™æ®µä»£ç æ—¶ï¼Œä½ å°†èƒ½å¤Ÿå¤§å£°è¯»å‡ºæ•´ä¸ªè¯­å¥ï¼Œå¹¶å‡†ç¡®ç†è§£å‘ç”Ÿäº†ä»€ä¹ˆã€‚

## åˆ›å»ºå…·æœ‰å•ä¸€èŒè´£çš„åŠŸèƒ½

æˆ‘çŠ¯äº†åˆ›å»ºæœ‰æ•°ç™¾è¡Œä»£ç åšå¤šç§äº‹æƒ…çš„`init()`å‡½æ•°çš„é”™è¯¯ã€‚è¿™å¾ˆå®¹æ˜“åšåˆ°ï¼Œä½†ä¸å¹¸çš„æ˜¯éšåä¼šåˆ›å»ºä¸å¯ç§»åŠ¨çš„ä»£ç ã€‚

ä¸€ä¸ªç®€å•çš„å»ºè®®æ˜¯éµå¾ªæ‰€è°“çš„**å•ä¸€è´£ä»»åŸåˆ™**ã€‚è¿™æ„å‘³ç€ä¸€ä¸ªåŠŸèƒ½åº”è¯¥åªè´Ÿè´£ä¸€å°éƒ¨åˆ†åŠŸèƒ½ã€‚

è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªéªŒè¯ç”¨æˆ·åçš„ä¾‹å­ã€‚

```
function validateUsername(username) {
  // Invalid if username is over 20 characters.
  if (username.length > 20) {
    return false;
  }

  // Invalid if username has non-alphanumeric characters.
  if (/[^a-z0-9]/gi.test(username)) {
    return false;
  }

  // Invalid if user already exists in database.
  if (db.query('SELECT id FROM users WHERE username = ', username)) {
    return false;
  }

  // Otherwise valid!
  return true;
} 
```

Enter fullscreen mode Exit fullscreen mode

åœ¨æŸç§æ„ä¹‰ä¸Šï¼Œè¿™ç¡®å®éµå¾ªäº†å•ä¸€è´£ä»»åŸåˆ™ï¼Œå› ä¸ºå®ƒåªæ˜¯éªŒè¯ä¸€ä¸ªç”¨æˆ·åã€‚ç„¶è€Œï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œè¿è¡Œå¤šä¸ªéªŒè¯ï¼ŒåŒ…æ‹¬æŸ¥è¯¢æ•°æ®åº“ã€‚æˆ‘ä»¬ä¹Ÿä¸èƒ½å®Œå…¨ç¡®å®šå®ƒæ˜¯å¦æœ‰æ•ˆã€‚

æˆ‘ä»¬èƒ½åšçš„æ˜¯æŠŠè¿™ä¸ªå‡½æ•°åˆ†è§£æˆå…¶ä»–æ›´å°çš„å‡½æ•°ã€‚

```
function validateUsernameLength(username) {
  return username.length <= 20;
}

function validateAlphanumeric(string) {
  return !/[^a-z0-9]/gi.test(string);
}

function checkUsernameExists(username) {
  return db.query('SELECT id FROM users WHERE username = ', username);
}

function validateUsername(username) {
  const isLengthValid = validateUsernameLength(username);
  const isAlphanumeric = validateAlphanumeric(username);
  const isUsernameTaken = checkUsernameExists(username);
  return isLengthValid && isAlphanumeric && !isUsernameTaken;
} 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨è¿™äº›æ›´å°çš„åŠŸèƒ½æ›´å®¹æ˜“æ”¹å˜ã€ç§»åŠ¨å’Œæµ‹è¯•ã€‚

* * *

## ä½ çš„æœªæ¥ä½ ä¼šæ„Ÿè°¢ä½ çš„

ä»¥åŠä»»ä½•å¯èƒ½ä»äº‹ä½ å†™çš„ä»£ç çš„äººã€‚

è¿™ç¯‡æ–‡ç« ä¸ä½ çš„ç»å†æœ‰å…³å—ï¼Ÿå¯¹äºå¯è¯»ä»£ç ï¼Œä½ è¿˜æœ‰å…¶ä»–å»ºè®®å—ï¼Ÿæˆ‘ä¸€ç›´åœ¨å¯»æ±‚æé«˜è‡ªå·±ï¼Œæ‰€ä»¥è¯·éšæ—¶[å‘å¾®åšç»™æˆ‘](https://twitter.com/sunnysinghio)æˆ–åœ¨ä¸‹é¢ç•™è¨€ã€‚

> **æ³¨**:æœ¬æ–‡åŸå†™äº[æˆ‘çš„ä¸ªäººåšå®¢](https://sunnysingh.io/blog/readable-code)ã€‚æˆ‘åœ¨è¿™é‡Œä¸ºç¥å¥‡çš„å¼€å‘è€…ç¤¾åŒºé‡æ–°å‘å¸ƒå®ƒã€‚