# é“¸é€ ğŸƒ:ç»„ä»¶çš„äº‹ä»¶å’ŒçŠ¶æ€

> åŸæ–‡:[https://dev . to/gdotdesign/mint-events-and-state-of-components-3j3a](https://dev.to/gdotdesign/mint-events-and-state-of-components-3j3a)

*è¿™æ˜¯å±•ç¤º Mint ç‰¹æ€§çš„ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸‰ç¯‡ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ä¹‹å‰çš„æ–‡ç« :*

*   *[è–„è·ğŸƒ:å…¥é—¨](https://dev.to/gdotdesign/getting-started-with-mint-3k2o)T3ã€‘*
*   *[è–„è·ğŸƒ:ç»„ä»¶](https://dev.to/gdotdesign/components-in-mint-4a4n)T3ã€‘*

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä½¿ç”¨ç»„ä»¶çš„**äº‹ä»¶**å’Œ**å†…éƒ¨çŠ¶æ€ã€T3:)**

## [](#events)äº‹ä»¶

æ¯ä¸ª web åº”ç”¨ç¨‹åºéƒ½åˆ©ç”¨äº‹ä»¶æ¥å¤„ç†å…¶çŠ¶æ€çš„å˜åŒ–ï¼Œè¿™æ ·çš„äº‹ä»¶å¯èƒ½æ¥è‡ªå‡ ä¸ªä¸åŒçš„æ¥æº:

*   æ¥è‡ª DOM èŠ‚ç‚¹çš„ç”¨æˆ·äº¤äº’
*   æ¥è‡ªæµè§ˆå™¨æœ¬èº«çš„äº¤äº’
*   æ¥è‡ªæœåŠ¡å™¨çš„äº¤äº’(ä¾‹å¦‚æ¥è‡ª WebSocket è¿æ¥)
*   å’Œå¯èƒ½çš„å…¶ä»–æ¥æº

æˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•å¤„ç†æ¥è‡ª DOM èŠ‚ç‚¹çš„äº‹ä»¶ã€‚

### [](#event-attributes-and-handlers)äº‹ä»¶å±æ€§å’Œå¤„ç†ç¨‹åº

ä¸ React ä¸­ä¸€æ ·ï¼ŒDOM èŠ‚ç‚¹å¯ä»¥é™„åŠ äº‹ä»¶å±æ€§:æ¯ä¸ªä»¥ä¸Šçš„**å¼€å§‹çš„å±æ€§éƒ½æ˜¯ä¸€ä¸ª**äº‹ä»¶å±æ€§** ( `onClick`ï¼Œ`onMouseOver`ï¼Œç­‰ç­‰...)**

*ç”±äº Mint ä½¿ç”¨ React ä½œä¸ºå¹³å°ï¼Œä½ å¯ä»¥å‚è€ƒå®ƒåœ¨[æ”¯æŒäº‹ä»¶](https://reactjs.org/docs/events.html)åˆ—è¡¨ä¸Šçš„æ–‡æ¡£ã€‚*

äº‹ä»¶å±æ€§å€¼æ˜¯å¿…é¡»åŒ¹é…ä»¥ä¸‹ä¸¤ç§ç±»å‹ä¹‹ä¸€çš„**å‡½æ•°**:

*   `Function(a)`è¿”å›`a`
*   `Function(Html.Event,a)`è·å–ä¸€ä¸ª`Html.Event`å¹¶è¿”å›`a`ã€‚

*`a`æ˜¯ä¸€ä¸ªç±»å‹å˜é‡ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥æ˜¯ä»»ä½•å…¶ä»–ç±»å‹ã€‚*

ä¾‹å¦‚ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œä¸¤ä¸ªå¤„ç†ç¨‹åºéƒ½æœ‰æ•ˆ:

```
component Main {
  fun increment (event : Html.Event) : String {
    Debug.log("Increment")
  }

  fun decrement : String {
    Debug.log("Decrement")
  }

  fun render : Html {
    <div>
      <button onClick={decrement}>
        "Decrement"
      </button>

      <button onClick={increment}>
        "Increment"
      </button>
    </div>
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œä½ ä¼šåœ¨æ§åˆ¶å°ä¸Šçœ‹åˆ°`increment`æˆ–`decrement`ï¼Œè¿™å–å†³äºä½ ç‚¹å‡»äº†å“ªä¸ªæŒ‰é’®ã€‚

å¦‚ä½ æ‰€è§ï¼Œä½ å¯ä»¥å¼•ç”¨å‡½æ•°æœ¬èº«ï¼Œè€Œä¸ç”¨è°ƒç”¨å®ƒï¼Œåªéœ€é€šè¿‡å®ƒçš„åå­—ã€‚

### [](#htmlevent)Htmlã€‚äº‹ä»¶

`Html.Event`ç±»å‹æ˜¯ [DOM äº‹ä»¶](https://developer.mozilla.org/en-US/docs/Web/API/Event)æ¥å£çš„è§„èŒƒåŒ–ç‰ˆæœ¬ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°å®é™…çš„ç±»å‹å®šä¹‰[ã€‚](https://github.com/mint-lang/mint/blob/master/core/source/Html.Event.mint#L2)

## [](#internal-state)å†…éƒ¨çŠ¶æ€

ç»„ä»¶å¯ä»¥æœ‰è‡ªå·±çš„çŠ¶æ€æ¥å®ç°æŸäº›ä¸éœ€è¦å…¨å±€çŠ¶æ€çš„ç‰¹å®šåŠŸèƒ½ã€‚

ä¸€ä¸ª**çŠ¶æ€**å¯ä»¥ä½¿ç”¨`state`å…³é”®å­—å®šä¹‰ï¼Œç±»ä¼¼äº`property`å…³é”®å­—:

```
component Main {
  state count : Number = 0

  ...
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸ª**çŠ¶æ€**é€šè¿‡å¼•ç”¨å°±å¯ä»¥è·¨ç»„ä»¶ä½¿ç”¨:

```
 ...
      <button onClick={decrement}>
        "Decrement"
      </button>

      <{ Number.toString(count) }>

      <button onClick={increment}>
        "Increment"
      </button>
  .... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#modifying-state)ä¿®æ”¹çŠ¶æ€

å¯ä»¥ä½¿ç”¨`next`å…³é”®å­—è®¾ç½®ä¸€ä¸ªçŠ¶æ€(æˆ–å¤šä¸ªçŠ¶æ€):å®ƒå‘Šè¯‰ç»„ä»¶ç”¨æ–°å€¼æ›¿æ¢ç»™å®šçš„çŠ¶æ€ã€‚

çŠ¶æ€ä¸ä¼šå˜å¼‚ï¼Œä½†ä¼šè¢«æ›¿æ¢ï¼Œå› ä¸º Mint ä¸­çš„æ•°æ®ç»“æ„æ˜¯ä¸å¯å˜çš„ã€‚

ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¿®æ”¹å‡½æ•°æ¥æ›´æ–°è®¡æ•°:

```
...
  fun increment : Promise(Never, Void) {
    next { count = count + 1 }
  }

  fun decrement : Promise(Never, Void) {
    next { count = count - 1 }
  }
... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯·æ³¨æ„ï¼Œå‡½æ•°çš„è¿”å›ç±»å‹å·²ç»æ›´æ”¹ä¸º`Promise(Never, Void)`ã€‚

æ‰¿è¯ºç”¨äºå¼‚æ­¥è®¡ç®—(æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­è®¨è®º)ï¼Œä¿®æ”¹çŠ¶æ€ä¼šè¿”å›ä¸€ä¸ªæ‰¿è¯ºï¼Œå› ä¸ºè¿™è¢«è®¤ä¸ºæ˜¯å‰¯ä½œç”¨ã€‚

ä¸€ä¸ªæ‰¿è¯ºæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯é”™è¯¯ç±»å‹ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹å®ƒæ˜¯`Never`è¡¨ç¤ºå®ƒä¸èƒ½å¤±è´¥ï¼Œç¬¬äºŒä¸ªæ˜¯å½“å®ƒè§£ææ—¶è¿”å›å€¼çš„ç±»å‹ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹å®ƒæ˜¯`Void`è¡¨ç¤ºå®ƒä¸ç›¸å…³(åŸºæœ¬ä¸Šä¸èƒ½ç”¨äºä»»ä½•äº‹æƒ…)ã€‚

* * *

è¿™é‡Œæ˜¯å®Œæ•´çš„æºä»£ç ï¼Œæ„Ÿè°¢æ‚¨çš„é˜…è¯»ğŸ™:

```
component Main {
  state count : Number = 0

  fun increment : Promise(Never, Void) {
    next { count = count + 1 }
  }

  fun decrement : Promise(Never, Void) {
    next { count = count - 1 }
  }

  fun render : Html {
    <div>
      <button onClick={decrement}>
        "Decrement"
      </button>

      <{ Number.toString(count) }>

      <button onClick={increment}>
        "Increment"
      </button>
    </div>
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

* * *

å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº Mint çš„çŸ¥è¯†ï¼Œè¯·æŸ¥çœ‹[æŒ‡å—](https://guide.mint-lang.com)ğŸ“–

åœ¨ä¸‹ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘å°†å‘[å±•ç¤ºå¦‚ä½•ä» JSON API](https://dev.to/gdotdesign/mint-handling-http-requests-2ep3) åŠ è½½å’Œæ˜¾ç¤ºæ•°æ®ğŸ˜‰åœ¨é‚£é‡Œè§ğŸ‘‹