# å¦‚ä½•åœ¨ä¸åˆ°ä¸€ä¸ªå°æ—¶çš„æ—¶é—´å†…ç”¨æ ‘è“æ´¾æ„å»ºè‡ªå·±çš„åŸå§‹ç›‘æ§ç³»ç»ŸğŸ”¥

> åŸæ–‡:[https://dev . to/nicki tax/how-to-build-your-own-primitive-surveillance-system-with-raspberry-pi-than-one-hour-5 ggl](https://dev.to/nickitax/how-to-build-your-own-primitive-surveillance-system-with-raspberry-pi-in-less-than-one-hour-5ggl)

æœ€è¿‘ï¼Œæˆ‘ä»åˆ†ç±»å¹¿å‘Šç½‘ç«™ä¸ŠèŠ±äº†å¤§çº¦ 30 æ¾³å…ƒä¹°äº†ä¸€ä¸ªæ ‘è“ Pi 3 B+ã€‚

[![](../Images/aee497c570c33a27caaa4896bb00528c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ORaYSQ2u--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/w6s1dyy2mddf0taqdtl4.jpg)

å¹¶ä¸”é©¬ä¸Šå†³å®šåšä¸€äº›å°é¡¹ç›®æ¥ç†Ÿæ‚‰ä¸€ä¸ªç³»ç»Ÿã€‚ç¬¬ä¸€ä¸ªæƒ³æ³•æ˜¯åˆ©ç”¨æˆ‘çš„æ—§ Logitech C170 ç›¸æœºï¼Œå®ƒåœ¨æˆ‘çš„è¡£æŸœé‡Œç§¯äº†å¾ˆå¤šå¹´çš„ç°å°˜ã€‚

[![](../Images/8b14cfc370d96c9083773454abb55ff7.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--aQeXTWKH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/79zqn6kcm7rmlsxd30vt.jpg)

ç›‘è§†ç³»ç»Ÿé¡¹ç›®å°±æ˜¯è¿™ä¹ˆæƒ³å‡ºæ¥çš„ï¼

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†è§£é‡Šå¦‚ä½•å»ºç«‹ä¸€ä¸ªéå¸¸ç®€å•å’ŒåŸå§‹çš„ç³»ç»Ÿæ¥æ‹æ‘„ä½ çš„æˆ¿é—´å¹¶ä¸‹è½½å®ƒä»¬ã€‚

å¯¹äºæœ¬æ•™ç¨‹ï¼Œæˆ‘ä»¬å°†åªéœ€è¦ä¸¤ä¸ªç»„ä»¶:æ ‘è“æ´¾å’Œç½‘ç»œæ‘„åƒå¤´ã€‚

æˆ‘çš„ Raspberry Pi è¿è¡Œçš„æ˜¯ Ubuntu Mateï¼Œä½†ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½å®‰è£…ä»»ä½•å…¶ä»–å‘è¡Œç‰ˆã€‚

ä½ å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½ Ubuntu Mate

ä¸€æ—¦ Pi è¿æ¥å¹¶è¿è¡Œï¼Œè®©æˆ‘ä»¬å°†æ‘„åƒæœºè¿æ¥åˆ°å…¶ä¸­ä¸€ä¸ª USB ç«¯å£ã€‚

æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œ`lsusb`å‘½ä»¤æ¥æ£€æŸ¥æ’å…¥çš„è®¾å¤‡ï¼Œè¿™å°†è¾“å‡ºæ‰€æœ‰è¿æ¥çš„è®¾å¤‡:

```
Bus 001 Device 006: ID 046d:082b Logitech, Inc. Webcam C170
Bus 001 Device 005: ID 045e:00cb Microsoft Corp. Basic Optical Mouse v2.0
Bus 001 Device 004: ID 045e:07f8 Microsoft Corp. Wired Keyboard 600 (model 1576)
Bus 001 Device 003: ID 0424:ec00 Standard Microsystems Corp. SMSC9512/9514 Fast Ethernet Adapter
Bus 001 Device 002: ID 0424:9514 Standard Microsystems Corp. SMC9514 Hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub 
```

åœ¨ Linux ç¯å¢ƒä¸­ï¼Œå¯ä»¥ä»ç³»ç»Ÿä¸Šçš„/dev ç©ºé—´æ£€æŸ¥è¿æ¥çš„æ‘„åƒæœºç¡¬ä»¶ã€‚

ä¸ºäº†ç¡®ä¿æˆ‘ä»¬çš„æ‘„åƒæœºå·²è¿æ¥ï¼Œè¿è¡Œ`ls -lts /dev/ | grep video`å‘½ä»¤:

```
0 crw-rw----  1 root video   238,   0 Apr 13 12:30 media0
0 crw-rw----+ 1 root video    81,   0 Apr 13 12:30 video0
0 crw-rw----  1 root video   240,   0 Jan 29  2018 vchiq
0 crw-rw----  1 root video   241,   0 Jan 29  2018 vcsm
0 crw-rw----  1 root video    29,   0 Jan 29  2018 fb0
0 crw-rw----  1 root video   245,   0 Jan 29  2018 vcio 
```

å‰å®³äº†ï¼Œ`video0`è¿˜æœ‰ï¼

è€¶ï¼

ç°åœ¨æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œå¦‚ä½•ä»æˆ‘ä»¬çš„ç½‘ç»œæ‘„åƒå¤´æ•æ‰ä¸€å¼ ç…§ç‰‡ï¼

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä¸æ‰“ç®—ç¼–å†™ä»»ä½•è‡ªå®šä¹‰çš„ Go è§£å†³æ–¹æ¡ˆï¼Œè€Œåªæ˜¯ä½¿ç”¨å·²ç»å­˜åœ¨çš„å·¥å…·`fswebcam`ã€‚

æˆ‘ä»¬å¯ä»¥ç”¨`apt-get`(åˆ«å¿˜äº†æå‰æ›´æ–°åŒ…):

`sudo apt-get install fswebcam`

ç°åœ¨ï¼Œæ˜¯æ—¶å€™æ‹ç¬¬ä¸€å¼ ç…§ç‰‡äº†ï¼

```
fswebcam -r 640x480 --jpeg 100 -D 3 -S 13 /home/user/Desktop/picture.jpg -d /dev/video0 
```

ä¸Šé¢çš„å‘½ä»¤å°†æ•æ‰ JPEG æ ¼å¼çš„ VGA åˆ†è¾¨ç‡å›¾ç‰‡ï¼Œå»¶è¿Ÿ 3 ç§’é’Ÿè¿›è¡Œå¤„ç†ã€‚

è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬æœ‰ä»€ä¹ˆ:

[![](../Images/b8d98ce29a64c0a67188d0cfd47b6d4d.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--YfZNgdWS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/8kcbl919gxql4eum4475.jpg)

...æˆ‘ç¡®å®éœ€è¦æ‰“æ‰«ä¸€ä¸‹æˆ‘çš„æˆ¿é—´...ä½†æ˜¯æ— è®ºå¦‚ä½•...

æˆ‘ä»¬æ‹¿åˆ°äº†ã€‚æ­å–œä½ ï¼ï¼ï¼

ä½†æ˜¯æˆ‘ä»¬å¦‚ä½•è¿œç¨‹å®ç°å‘¢ï¼Ÿ

å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ª API æ¥è°ƒç”¨è¿™ä¸ªå‘½ä»¤ï¼Œå¹¶ç”¨ NGROK æˆ–ç±»ä¼¼çš„å·¥å…·å…¬å¼€å®ƒï¼Œä½†æ˜¯è®©æˆ‘ä»¬åšä¸€äº›æ›´ç®€å•çš„äº‹æƒ…ã€‚

åœ¨æˆ‘å®¶é‡Œï¼Œæˆ‘å¯ä»¥è®¿é—®è·¯ç”±å™¨ã€WAN åœ°å€å’Œ NAT é…ç½®ã€‚

WAN åœ°å€ä»£è¡¨ä¸€ä¸ªå¹¿åŸŸç½‘ IP åœ°å€ï¼Œå¯ä»¥ä»æ‚¨çš„å®¶åº­æœ¬åœ°ç½‘ç»œä¹‹å¤–åˆ°è¾¾ã€‚

ç½‘ç»œåœ°å€è½¬æ¢(æˆ– NAT)å…è®¸æˆ‘ä»¬å°†ä¼ å…¥çš„è¿æ¥è½¬æ¢åˆ°ç‰¹å®šçš„æœ¬åœ° IP åœ°å€(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ Raspberry Pi)ã€‚

ç¬¬ä¸€æ­¥æ˜¯ä¸º Raspberry Pi åˆ›å»ºæœ¬åœ° IP åœ°å€çš„æ°¸ä¹…ç§Ÿçº¦ã€‚æˆ‘ä»¬è¿™æ ·åšæ˜¯ä¸ºäº†ç¡®ä¿æœ¬åœ° IP åœ°å€å¯¹äºæˆ‘ä»¬çš„ Pi æ€»æ˜¯ç›¸åŒçš„ã€‚è¿™ç§ç»‘å®šæ˜¯é’ˆå¯¹ MAC åœ°å€çš„ã€‚

ç¬¬äºŒæ­¥æ˜¯è¿›è¡Œ NAT è½¬å‘ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç«¯å£ 22 ç»‘å®šæ¥ä¸ºæˆ‘ä»¬çš„ Raspberry å¯ç”¨å®‰å…¨å¤–å£³ã€‚

è®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹å®ƒæ˜¯å¦å·¥ä½œ:

```
ssh user@raspberry_pi 
```

ç¡®å®å¦‚æ­¤ã€‚ä½†æ˜¯å®ƒè¦æ±‚è¾“å…¥å¯†ç ...

ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨ä¸–ç•Œä»»ä½•åœ°æ–¹å¯¹æˆ‘ä»¬çš„æ ‘è“ Pi è¿›è¡Œ SSH äº†ã€‚å¹²å¾—å¥½ï¼

ä¸ºäº†ç¡®ä¿æˆ‘ä»¬ä¸å¿…ä¸ºäº†è¿æ¥è€Œä¸æ–­ç™»å½•ï¼Œç”Ÿæˆå…¬é’¥/ç§é’¥æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åšæ³•ã€‚

åœ¨è¿æ¥åˆ° Raspberry Pi çš„ä¸»æœºä¸Šï¼Œç”Ÿæˆä¸€ä¸ªå…¬é’¥/ç§é’¥å¯¹:

```
ssh-keygen -t rsa -b 4096 -C â€œyour@email.to" 
```

ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨
å°†åˆ›å»ºçš„å¯†é’¥å¤åˆ¶åˆ°æ‚¨çš„ Raspberry Pi

```
ssh-copy-id user@raspberry_pi //of your raspberry pi 
```

ç§å•Šã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªå¯†é’¥çš„å¸®åŠ© SSH åˆ°æˆ‘ä»¬çš„ Piï¼Œè€Œä¸éœ€è¦å¯†ç ï¼å¤ªæ£’äº†ã€‚

æœ€åï¼Œè®©æˆ‘ä»¬å°è¯•ç¼–å†™ä¸€ä¸ªå°è„šæœ¬ï¼Œå®ƒå°† SSH åˆ°æˆ‘ä»¬çš„ Raspberry Piï¼Œè°ƒç”¨ capture image å‘½ä»¤å¹¶å°†å…¶ä¸‹è½½åˆ°ä¸»æœºã€‚

```
echo â€œExecuting picture capture on Raspberry Pi..."
ssh -t user@raspberry_pi 'bash fswebcam -r 640x480 --jpeg 100 -D 3 -S 13 /home/user/Desktop/picture.jpg -d /dev/video0'
echo "Copying picture from Raspberry Pi to host desktop..."
scp user@raspberry_pi:/home/user/Desktop/picture.jpg ~/Desktop/ 
```

åˆ›å»º`take_picture.sh`ï¼ŒæŠŠä¸Šé¢çš„å†…å®¹æ”¾è¿›å»ï¼Œæ‰§è¡Œä¸€ä¸ªè„šæœ¬ï¼

ç°åœ¨æˆ‘ä»¬æœ‰äº†æˆ‘ä»¬çš„è¿œç¨‹å›¾ç‰‡:)

[![](../Images/8560b04f2657ad4375364e4de9b9de0a.png)T2ã€‘](https://i.giphy.com/media/YTbZzCkRQCEJa/giphy.gif)

å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·éšæ—¶æé—®ï¼