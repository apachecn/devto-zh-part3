# ç”¨æ™®é€šçš„ JavaScript æ‹‰åŠ¨ä»¥åˆ·æ–°åŠ¨ç”»

> åŸæ–‡:[https://dev . to/viji tail/pull-to-refresh-animation-with-vanilla-JavaScript-17oc](https://dev.to/vijitail/pull-to-refresh-animation-with-vanilla-javascript-17oc)

[![](../Images/764304196a68a2806ba00df20be525df.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--tR5lt6ey--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/naxkjcuajuvanrfym6cu.gif)

æ‹‰è‡³åˆ·æ–°æ˜¯æ™ºèƒ½æ‰‹æœºä¸Šéå¸¸æµè¡Œçš„æ»‘åŠ¨æ‰‹åŠ¿ï¼Œå…è®¸ç”¨æˆ·åœ¨åˆ—å‡ºçš„æ•°æ®ä¸ŠåŠ è½½æ–°å†…å®¹ã€‚å¦‚ä»Šï¼Œå®ƒè¢«ç”¨äºæ‰€æœ‰æµè¡Œçš„æ™ºèƒ½æ‰‹æœºåº”ç”¨ç¨‹åºå’Œç½‘ç»œåº”ç”¨ç¨‹åºä¸­ï¼Œå¹¶å·²æˆä¸º UX çš„ä¸€ä¸ªä¸»è¦éƒ¨åˆ†ã€‚

* * *

å‡ å¤©å‰æˆ‘åœ¨ [dribbble](https://dribbble.com/shots/4963449-Pull-to-Refresh-Animation) ä¸Šçœ‹åˆ°äº†è¿™ç§åŠ¨ç”»ï¼Œæ‰€ä»¥æˆ‘æƒ³ä¸ºä»€ä¹ˆä¸æ‹¿å‡ºæˆ‘çš„ç‰ˆæœ¬å‘¢ã€‚

ä½ çŒœæ€ä¹ˆç€ï¼Œæˆ‘è®¾æ³•ä¸ç”¨åº“æˆ– JQuery æ’ä»¶ï¼Œåªç”¨æ™®é€šçš„ JavaScript å°±å®Œæˆäº†è¿™ä¸ªã€‚ğŸ˜

ä¸€ä¸ªéå¸¸ç®€å•çš„æ ‡è®°ï¼Œä¸€ä¸ªåŒ…å«åŠ è½½å™¨å’Œä¸€å †å¡ç‰‡çš„é¡¶éƒ¨åŠ è½½å®¹å™¨ã€‚

[![](../Images/5a759fbf061173d028963760c043ada4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ORMnpR1U--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2A_Ih6pqytK38ZhOJ_anWDuw.png)

è®©æˆ‘ä»¬å¼€å§‹æœ‰è¶£çš„äº‹æƒ…å§ğŸ˜ã€‚

[![](../Images/9b4fba5c5fe6579722078f1d1ffd6945.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--4AnHPmzT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2ABuVmdgooGuq8bNUs97wDOw.png)

è¿™ä¸ªæƒ³æ³•æ˜¯é»˜è®¤éšè—åŠ è½½å®¹å™¨ï¼Œå½“ç”¨æˆ·å‘ä¸‹æ»‘åŠ¨æ—¶å‘ä¸‹æ»‘åŠ¨ã€‚
**transform-style:preserve-3d**å°†ä½¿å¡ç‰‡èƒ½å¤Ÿè¢«å®šä½åœ¨ 3D ç©ºé—´ä¸­ï¼Œå¹¶ä¸”å¡ç‰‡åŒ…è£…ä¸Šçš„ **perspective** å±æ€§å°†å†³å®šç”¨æˆ·å°†å¦‚ä½•ä»ä»–ä»¬çš„è§†è§’è§‚çœ‹ï¼›è¾ƒä½çš„å€¼å°†äº§ç”Ÿæ›´å¼ºçƒˆçš„ 3D æ•ˆæœã€‚è¯·æ³¨æ„ï¼Œæ²¡æœ‰åœ¨å­å…ƒç´ ä¸Šè®¾ç½®é€è§†å›¾ã€‚
[å…³äº CSS 3D åŠ¨ç”»å’Œå˜æ¢çš„æ›´å¤šä¿¡æ¯](https://3dtransforms.desandro.com/)ã€‚

è¿™å°±æ˜¯ CSSï¼Œç°åœ¨è®©æˆ‘ä»¬å¼€å§‹æ·»åŠ æ»‘åŠ¨æ‰‹åŠ¿ã€‚

[![](../Images/91d26ab0f045facaf61d92fba33e3507.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--x6q2p_VR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2AzpDoJNqjDREy9U5uXE2Kxw.png)

JS ä¸­çš„è§¦æ‘¸äº‹ä»¶ç”±è§¦æ‘¸äº‹ä»¶ç›‘å¬å™¨å¤„ç†ã€‚è¿™äº›äº‹ä»¶ç±»ä¼¼äºé¼ æ ‡äº‹ä»¶ï¼Œåªæ˜¯å®ƒä»¬å…è®¸åœ¨è§¦æ‘¸è¡¨é¢ä¸Šè¿›è¡Œå¤šæ¬¡è§¦æ‘¸ã€‚

[![](../Images/88b18d3a5c3a410b1a2ab5284d439b5c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--2W-xDA44--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2AqtypiV59daSkoDAdaZ3VBQ.png)

pStart å’Œ pCurrent å¯¹è±¡å°†å­˜å‚¨å¼€å§‹å’Œå½“å‰è§¦æ‘¸çš„è§¦æ‘¸ä½ç½®ã€‚æˆ‘ä»¬éœ€è¦è¿™äº›æ¥æ‰¾åˆ° Y åæ ‡çš„å˜åŒ–ï¼Œæ¥è®¡ç®—å¡ç‰‡çš„æ—‹è½¬ã€‚

[![](../Images/dcb1b6134979c302d6abcd99dddc81c2.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--CKOfXu87--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2A5HSwcCE7va1TREQ-Rj4u7w.png)

åœ¨ swipeStart()å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å°†æ•è·è§¦æ‘¸åæ ‡å¹¶å°†å…¶åˆ†é…ç»™ pStart å¯¹è±¡ã€‚

[![](../Images/b48ba3f14a0755cfda86d25bd5f51b37.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s---dQ7UTRj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2A_yDlEjxwPY82fVqm90JnmQ.png)

åœ¨ swipe()å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ç”¨å½“å‰è§¦æ‘¸åæ ‡è®¾ç½® pCurrent å¯¹è±¡ã€‚ä¸‹ä¸€æ­¥æ˜¯æ‰¾å‡ºå¼€å§‹ä½ç½®å’Œå½“å‰ Y ä½ç½®ä¹‹é—´çš„å·®å¼‚ï¼Œä»¥è®¡ç®—æ»‘åŠ¨çš„è·ç¦»ï¼Œå¹¶åŸºäºè·ç¦»çš„ 30%è¿›è¡Œæ—‹è½¬ã€‚åªæœ‰å½“è·ç¦»å¤§äº 100 æ—¶ï¼Œè£…è½½å®¹å™¨æ‰ä¼šå‡ºç°ã€‚

[![](../Images/d64ee29f514924c40f5650902db4f264.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--RzuaLdoh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2AVl8xswbts96XM06u5CtQlA.png)

å¦‚æœè§¦æ‘¸å·²ç»å¼€å§‹ä½†æ²¡æœ‰å¯ç”¨åŠ è½½ï¼ŒswipeEnd()å‡½æ•°å°†æ’¤é”€æ—‹è½¬ã€‚

[![](../Images/0d833afd31bd9913066fc897954fbb3a.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Si2F_MrK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2AcdXAjW9Ge8RMSZl7afiOPg.png)

åœ¨åŠ è½½æ—¶ï¼Œå‡ºäºæ¼”ç¤ºç›®çš„ï¼ŒåŠ è½½å®¹å™¨å°†å‘ä¸‹æ»‘åŠ¨ 2 ç§’é’Ÿï¼Œä½†åœ¨å®é™…ç¤ºä¾‹ä¸­ï¼Œæ ¹æ®æœåŠ¡å™¨çš„å“åº”ï¼Œè¿™å¯èƒ½éœ€è¦æ›´é•¿æˆ–æ›´çŸ­çš„æ—¶é—´ã€‚ä¸€æ—¦è£…è½½å®Œæˆï¼Œè£…è½½å®¹å™¨å’Œå¡ç‰‡å°†æ¢å¤åˆ°åŸå§‹çŠ¶æ€ã€‚

æˆ‘ä»[è¿™ä¸ª](https://stackoverflow.com/questions/46190436/how-to-detect-pull-to-refresh) stackoverflow é—®é¢˜ä¸­å¼•ç”¨äº† JavaScriptã€‚

åœ¨æˆ‘çš„ [codepen](https://codepen.io/Vijit_Ail/pen/pmbypw) ä¸­å®Œæˆæºä»£ç ã€‚æ‰“å¼€ devtools æŸ¥çœ‹åŠ¨ç”»æ•ˆæœã€‚

* * *

æˆ‘å¸Œæœ›ä½ ä»Šå¤©èƒ½å­¦åˆ°ä¸€äº›æ–°ä¸œè¥¿ğŸ˜„ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–å¯¹æ”¹è¿›ä»£ç æœ‰ä»»ä½•å»ºè®®ï¼Œè¯·éšæ—¶å†™ä¸‹æ‚¨çš„å›å¤ã€‚

å¹²æ¯ï¼Œå¿«ä¹ç¼–ç ğŸ» âœŒ

*è¿™ç¯‡æ–‡ç« æœ€åˆåœ¨ medium ä¸Šåˆ†äº«ã€‚æŸ¥çœ‹æˆ‘çš„åª’ä½“ç®€ä»‹[@ VI JIT 2 ail](https://medium.com/@vijit2ail)T3ã€‘*