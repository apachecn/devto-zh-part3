# ç”¨æ¨¡æ¿åˆ¶ä½œæŠ½å±‰

> åŸæ–‡:[https://dev.to/jefiozie/building-a-drawer-with-stencil-2p06](https://dev.to/jefiozie/building-a-drawer-with-stencil-2p06)

åœ¨è¿‡å»çš„å‡ å‘¨é‡Œï¼Œæˆ‘ä¸€ç›´åœ¨å¼€å‘ä¸€ä¸ªä½¿ç”¨ Stencil çš„â€œè®¾è®¡ç³»ç»Ÿâ€ã€‚ä»Šå¤©æˆ‘æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€äº›å…³äºæˆ‘å¦‚ä½•ç”¨æ¨¡æ¿åˆ¶ä½œæŠ½å±‰çš„åŸºæœ¬çŸ¥è¯†ğŸ™ğŸ»ã€‚

## [](#what-is-a-drawer)æŠ½å±‰æ˜¯ä»€ä¹ˆ

æŠ½å±‰æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œç”¨äºåœ¨ä¸€äº›å†…å®¹æ—è¾¹æ·»åŠ å¯æŠ˜å çš„ä¾§è¾¹å†…å®¹(é€šå¸¸æ˜¯å¯¼èˆª)ã€‚æ­¤å¤–ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæ‚¨å°†çœ‹åˆ°æˆ‘ä»¬çš„æŠ½å±‰çš„æœ€ç»ˆç»“æœ(*è¿™ä¸ä¼šæ˜¯ä¸€ä¸ªå®Œç¾é£æ ¼çš„ä¾‹å­*ğŸ˜†).

## [](#the-architecture-of-the-drawer)æŠ½å±‰çš„æ¶æ„

æˆ‘ä»¬çš„æŠ½å±‰æœ‰ä¸‰ä¸ªä¸»è¦éƒ¨åˆ†:

[![Preview of drawer architecture](../Images/5b6d4e1f0259efd10395331d3e406981.png)T2ã€‘](///static/9737f229489869d7ed52de2683ff9096/93d99/drawer_architecture.png)

*   ä¸€ä¸ªå®¹å™¨
*   æŠ½å±‰å†…å®¹çš„ä½ç½®
*   å†…å®¹çš„ä½ç½®

è¯¥å®¹å™¨å°†ç”¨ä½œåŒ…è£…ææ–™ã€‚è¿™å°†æœ‰åŠ©äºæˆ‘ä»¬å†…éƒ¨é›¶ä»¶çš„é€ å‹ã€‚å†…å®¹æ§½æ˜¯æˆ‘ä»¬å°†åœ¨æ§½ä¸­æä¾›çš„å†…å®¹çš„å ä½ç¬¦ã€‚é€šå¸¸è¿™å°†æ˜¯å¯¼èˆªã€‚æœ€åï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåº”ç”¨ç¨‹åºå†…å®¹çš„ä½ç½®ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨å°†æä¾›ç”³è¯·çš„ä¸»è¦å†…å®¹ã€‚

## [](#project-setup)é¡¹ç›®è®¾ç½®

å› ä¸ºæœ¬æ–‡çš„é‡ç‚¹æ˜¯åˆ›å»ºä¸€ä¸ªæŠ½å±‰å®¹å™¨ï¼Œæ‰€ä»¥æˆ‘å°†ç®€è¦ä»‹ç»å¦‚ä½•å»ºç«‹ä¸€ä¸ªæ–°é¡¹ç›®ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡æ¿é¡¹ç›®ï¼Œç”±æ¨¡æ¿çš„[æä¾›ä¸€äº›ç®€å•çš„æ­¥éª¤](https://stenciljs.com/docs/getting-started)

åˆ›å»ºæ–°é¡¹ç›®:

```
npm init stencil 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ ä¼šæç¤ºé€‰æ‹©ä¸€ä¸ªé¡¹ç›®ç±»å‹ï¼Œé€‰æ‹©`component`

```
? Pick a starter â€º - Use arrow-keys. Return to submit.

â¯ ionic-pwa Everything you need to build fast, production-ready PWAs
   app Minimal starter for building a Stencil app or website
   component Collection of web components that can be used anywhere 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æ‚¨éœ€è¦æä¾›ä¸€ä¸ªé¡¹ç›®åç§°ï¼Œæˆ‘ä»¬æ¥å¡«å†™`example-drawer`ã€‚è¿™å°±æ˜¯ç°åœ¨æˆ‘ä»¬å‡†å¤‡å¼€å§‹å·¥ä½œçš„ç»„æˆéƒ¨åˆ†ã€‚

## [](#code)ä»£ç 

åœ¨æ‚¨æœ€å–œæ¬¢çš„ç¼–è¾‘å™¨ä¸­æ‰“å¼€é¡¹ç›®åï¼Œæ‰“å¼€`my-component.tsx`æ–‡ä»¶ï¼Œåˆ é™¤æ‰€æœ‰é»˜è®¤ä»£ç ï¼Œå¹¶æ›¿æ¢ä¸ºä»¥ä¸‹ä»£ç :

```
import { Component, Host, h, State, Method } from '@stencil/core'

@Component({
  tag: 'my-component',
  styleUrl: 'my-component.css',
  shadow: true,
})
export class MyComponent {
  /**
   * Show or hide the drawer
   */
  @State() open = true
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨`@State`è®¾ç½®ä¸€äº›å†…éƒ¨æ•°æ®ã€‚å½“æ”¹å˜`State`å±æ€§æ—¶ï¼Œä¼šå¯¼è‡´ç»„ä»¶å†æ¬¡æ¸²æŸ“ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°†åˆ‡æ¢ä¸€ä¸ª CSS ç±»ã€‚

```
import { Component, Host, h, State, Method } from '@stencil/core'

@Component({
  tag: 'my-component',
  styleUrl: 'my-component.css',
  shadow: true,
})
export class MyComponent {
  @State() open = true

  @Method()
  async toggleDrawer() {
    this.open = !this.open
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª`@Method`è£…é¥°å™¨å’Œä¸€ä¸ªåˆ‡æ¢å±æ€§`open`çš„æ–¹æ³•ã€‚è¿™æ ·åšå…è®¸æˆ‘ä»¬ä»ç»„ä»¶å¤–éƒ¨è°ƒç”¨`toggleDrawer`æ–¹æ³•ã€‚

```
import { Component, Host, h, State, Method } from '@stencil/core'

@Component({
  tag: 'my-component',
  styleUrl: 'my-component.css',
  shadow: true,
})
export class MyComponent {
  @State() open = true

  @Method()
  async toggleDrawer() {
    this.open = !this.open
  }
  render() {
    return (
      <Host>
        <div class="drawer-container">
          <div class={{ drawer: true, open: this.open }}>
            <div class="drawer-content">
              <slot name="drawer-content" />
            </div>
          </div>
          <div class={{ content: true, left: !this.open }}>
            <slot name="content" />
          </div>
        </div>
      </Host>
    )
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨æœ€åä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å®šä¹‰äº† HTML æ¨¡æ¿ã€‚åœ¨æœ¬æ–‡çš„å‰é¢ï¼Œæˆ‘è¯´è¿‡æˆ‘ä»¬å°†åŸºäº`State`å±æ€§`open`åˆ‡æ¢ä¸€äº› CSS ç±»ã€‚ç°åœ¨ä½ å¯ä»¥æ˜ç™½æˆ‘çš„æ„æ€äº†ã€‚å½“å±æ€§`open`ç­‰äº`true`æ—¶ï¼Œ`open`ç±»å°†è¢«æ·»åŠ åˆ° div ä¸­ï¼Œç±»ä¼¼çš„è¡Œä¸ºå°†å‡ºç°åœ¨`content div`ä¸Šï¼Œå¦‚ä»£ç æ‰€ç¤ºã€‚

[![Drawer outside of the view](../Images/24619ee49cc7fc1072e8f0be0daf3932.png)T2ã€‘](///static/30e34bd5d2ae39fd76a9ebd3a1a7fdc5/43efa/outside_of_view.png)

ç°åœ¨æ‰“å¼€`my-component.css`æ–‡ä»¶ï¼Œå°†ä»£ç æ›¿æ¢ä¸º:

```
:host {
  display: block;
  width: 100%;
}

.drawer-container {
  position: relative;
  display: flex;
  box-sizing: border-box;
  overflow: hidden;
  border: 1px solid #ccc;
}

.drawer {
  padding-right: 20px;
  background: gray;
  border-right: 1px solid #ccc;
  position: relative;
  width: 280px;
  transform: translate3d(-100%, 0, 0);
  z-index: 2;
  box-sizing: border-box;
  will-change: transform;
}
.drawer-content {
  width: 100%;
  height: 100%;
}
.drawer.open {
  transform: none;
}

.content {
  margin-left: 0px;
  margin-right: 0px;
  flex-grow: 1;
  flex-shrink: 1;
  display: block;
  height: 100%;
  overflow: auto;
  will-change: contents;
}
.content.left {
  margin-left: -280px;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬å°†å…³æ³¨`open`å’Œ`left`è¡Œä¸ºã€‚åœ¨æˆ‘ä»¬çš„`drawer`ç±»ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†`transform: translate3d(-100%, 0, 0);`ã€‚è¿™å°†æŠŠæˆ‘ä»¬çš„ div æ”¾åˆ°è§†å›¾ä¹‹å¤–ã€‚å½“æˆ‘ä»¬è¿½åŠ `open`ç±»æ—¶ï¼Œæˆ‘ä»¬å°†æŠŠ`transform`è®¾ç½®ä¸º`none`ï¼Œç°åœ¨æˆ‘ä»¬å°† div è¿”å›åˆ°å±å¹•ä¸Šã€‚

æˆ‘ä»¬çš„å¦ä¸€ä¸ªç„¦ç‚¹æ˜¯`left`ç±»ã€‚å› ä¸ºæˆ‘ä»¬æŠ½å±‰çš„å®½åº¦å›ºå®šåœ¨`280px`å¤„ï¼Œæ‰€ä»¥å½“è¿½åŠ è¿™ä¸ªç±»æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`margin-left`å‘å·¦â€œæ»‘åŠ¨â€ã€‚

## [](#putting-it-all-together)æŠŠæ‰€æœ‰çš„ä¸œè¥¿æ”¾åœ¨ä¸€èµ·

ç°åœ¨æˆ‘ä»¬å·²ç»æŠŠæ‰€æœ‰çš„é›¶ä»¶éƒ½ç»„è£…å¥½äº†ï¼Œæˆ‘ä»¬è¿˜è¦åšä¸€ä»¶äº‹ã€‚å½“æˆ‘ä»¬åˆ›å»ºæ–°é¡¹ç›®æ—¶,`Stencil`åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª`index.html`,å®ƒå·²ç»ä¸ºâ€œç¤ºä¾‹â€ç»„ä»¶åˆ›å»ºäº†æ‰€æœ‰çš„ä¸œè¥¿ã€‚

ç„¶è€Œï¼Œå› ä¸ºæˆ‘ä»¬åšäº†æ›´æ”¹ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨`index.html`æ–‡ä»¶ä¸­åæ˜ è¿™äº›æ›´æ”¹ã€‚ä¸ºäº†åŠ å¿«é€Ÿåº¦ï¼Œå¤åˆ¶ä¸‹é¢çš„ä»£ç å¹¶å°†å…¶æ›¿æ¢åˆ°æ‚¨çš„`index.html`æ–‡ä»¶ä¸­ã€‚

```
<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0"
    />
    <title>Stencil Component Starter</title>

    <script type="module" src="/build/example-drawer.esm.js"></script>
    <script nomodule src="/build/example-drawer.js"></script>
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
      }
    </style>
  </head>
  <body>
    <my-component>
      <ul slot="drawer-content">
        <li>Menu 1</li>
        <li>Menu 2</li>
        <li>Menu 3</li>
        <li>Menu 4</li>
        <li>Menu 5</li>
      </ul>
      <div slot="content">
        Main
      </div>
    </my-component>
    <button id="toggleBtn">Toggle drawer</button>
  </body>
  <script>
    const btn = document.getElementById("toggleBtn");
    const = document.querySelector('my-component');
       btn.addEventListener("click", () => {
         drawer.toggleDrawer();
       });
  </script>
</html> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬æ”¹å˜äº†ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å·²ç»æ·»åŠ äº†ä¸€ä¸ª*æœªæ’åºåˆ—è¡¨*ï¼Œå®ƒå°†è¢«æ”¾ç½®åœ¨æ§½ä½:`drawer-content`ä¸­ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ª`div`ï¼Œå®ƒå°†è¢«æ”¾ç½®åœ¨æ§½ä½:`content`ä¸­ã€‚ä¸ºäº†åˆ‡æ¢æˆ‘ä»¬çš„æŠ½å±‰ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªç®€å•çš„æŒ‰é’®ï¼Œ`on-click`å°†è°ƒç”¨`drawer`ä¸Šçš„`toggleDrawer`æ–¹æ³•

## [](#summary)æ€»ç»“

é‚£ä¹ˆæ€»ç»“ä¸€ä¸‹æˆ‘ä»¬åšäº†ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„æŠ½å±‰ï¼Œå®ƒå¯ä»¥æ»‘å‡ºè§†å›¾ã€‚æˆ‘ä»¬è®¾è®¡äº†ä¸€æ¬¾åŸºæœ¬é£æ ¼çš„æŠ½å±‰ï¼Œå¯æ ¹æ®æ‚¨çš„éœ€æ±‚è¿›è¡Œæ”¹è¿›ã€‚æœ€æ£’çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•ä½¿ç”¨æ™®é€š JSã€Angularã€React æˆ– Vue ç­‰çš„å‰ç«¯åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨è¿™ä¸ªæŠ½å±‰ã€‚

è¦æŸ¥çœ‹å®Œæ•´çš„æ¥æºï¼Œè¯·çœ‹ä¸€ä¸‹[è¿™ä¸ªå›è´­](https://github.com/Jefiozie/stencil-drawer)

æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¯å‘ä½ ï¼Œç»™ä½ ä¸€äº›å…³äºå¦‚ä½•ä½¿ç”¨**æ¨¡æ¿**æ„å»ºç»„ä»¶çš„è§è§£ï¼Œå¹¶ä»ä¸­è·å¾—ä¸€äº›ä¹è¶£ï¼ğŸ˜

## [](#a-thank-you)ä¸€å£°è°¢è°¢

æœ€åï¼Œæ„Ÿè°¢é‚£äº›è¯„è®ºæˆ‘çš„æ–‡ç« çš„äºº

*   [éŸ¦æ–¯Â·æ ¼é‡Œå§†æ–¯(@éŸ¦æ–¯Â·æ ¼é‡Œå§†æ–¯)](https://twitter.com/wesgrimes)
*   [ç½—æ…•æ´›Â·è¾›ç‰¹æ‹‰(@ç½—æ…•æ´›Â·è¾›ç‰¹æ‹‰)](https://twitter.com/romulocintra)