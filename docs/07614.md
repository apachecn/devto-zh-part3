# åœ¨ä½ çš„ Rails åº”ç”¨ä¸­ä½¿ç”¨ Tailwind CSS 1.1

> åŸæ–‡:[https://dev . to/andrewmcodes/use-tailwind-CSS-1-0-in-your-rails-app-4p M4](https://dev.to/andrewmcodes/use-tailwind-css-1-0-in-your-rails-app-4pm4)

# [](#notice)é€šçŸ¥

è¿™ä¸ªæ•™ç¨‹å·²ç»è¿‡æ—¶äº†ï¼Œå¯èƒ½ä¸é€‚åˆä½ ã€‚æˆ‘æ ¹æ®è¿‡å»å‡ ä¸ªæœˆä½¿ç”¨ Rails å’Œ TailwindCSS çš„ç»éªŒå†™äº†ä¸€ç¯‡æ–°æ–‡ç« ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ã€‚æ„Ÿè°¢é˜…è¯»ï¼ğŸ˜„

# [](#tutorial)æ•™ç¨‹

å‡ºäºæœ¬æ•™ç¨‹çš„ç›®çš„ï¼Œæˆ‘ä»¬å‡è®¾æ‚¨å·²ç»å®‰è£…äº† Ruby å’Œ Rails gemã€‚å¦‚æœæ‚¨æ²¡æœ‰ï¼Œè¯·è®¿é—®ã€Rails å…¥é—¨æŒ‡å—ã€‚

## [](#create-a-new-rails-project)åˆ›å»ºæ–°çš„ Rails é¡¹ç›®

```
rails new rails_tailwind --skip-coffee --webpack -d postgresql
cd rails_tailwind
rails db:create 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°†ä¸ºæ‚¨åˆ›å»ºä¸€ä¸ªæ–°çš„ Rails é¡¹ç›®ï¼Œä¸ºæ‚¨é…ç½® webpack å’Œ Postgresï¼Œå¹¶åˆ›å»ºæˆ‘ä»¬çš„æ•°æ®åº“ã€‚æˆ‘ä»¬ä¸ä¼šä½¿ç”¨ coffeescriptï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ·»åŠ `--skip-coffee`æ ‡å¿—çš„åŸå› ã€‚å¦‚æœæ‚¨æ„¿æ„ï¼Œä¹Ÿå¯ä»¥çœç•¥`-d postgresql`æ ‡å¿—ï¼Œä½†æ˜¯å¦‚æœæ‚¨æƒ³éƒ¨ç½²åˆ°ç±»ä¼¼ Heroku çš„ä¸œè¥¿ï¼Œæˆ‘å»ºè®®æ‚¨æ·»åŠ å®ƒã€‚å¦‚æœæ‚¨ä¿ç•™ Postgres æ ‡å¿—ï¼Œè¯·ç¡®ä¿æ‚¨å·²ç»å®‰è£…äº† Postgres å¹¶ä¸”å®ƒæ­£åœ¨è¿è¡Œã€‚ä½ å¯ä»¥é€šè¿‡è¿è¡Œ`brew install postgresql && brew services start postgresql`åœ¨ macOS ä¸Šå®‰è£… Postgres

## [](#running-rails-and-webpack)è¿è¡Œ Rails å’Œ Webpack

æ‚¨éœ€è¦åœ¨ä¸¤ä¸ªç»ˆç«¯æ ‡ç­¾/çª—å£ä¸­è¿è¡Œ Rails æœåŠ¡å™¨å’Œ webpack-dev-serverï¼Œé™¤éæ‚¨ä½¿ç”¨ Docker æˆ–ç±»ä¼¼ Foreman çš„ gemã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å°†åªåˆ›å»ºä¸¤ä¸ªç»ˆç«¯çª—å£ã€‚åœ¨ä¸€ä¸ªçª—å£ä¸­ï¼Œè¿è¡Œ:

```
rails s 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è€Œåœ¨å¦ä¸€ä¸ª:

```
./bin/webpack-dev-server 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœæ‚¨åœ¨æµè§ˆå™¨ä¸­å¯¼èˆªåˆ°`localhost:3000`ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ° rails æ¬¢è¿é¡µé¢ã€‚

[![rails default information page](../Images/62dcc1d76a6772d34b53fd6cc8b4f824.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--WPqrOoZm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://guides.rubyonrails.org/images/getting_started/rails_welcome.png)

## [](#generate-a-home-controller)ç”Ÿæˆå®¶å±…æ§åˆ¶å™¨

ä¸ºäº†çœ‹åˆ°æˆ‘ä»¬ç¨åå°†é›†æˆçš„é¡ºé£é£æ ¼ï¼Œæˆ‘ä»¬è‡³å°‘éœ€è¦ä¸€ä¸ªæ§åˆ¶å™¨å’Œè§†å›¾ã€‚

```
rails generate controller Home index 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨å¯ä»¥åˆ é™¤ç”Ÿæˆçš„ JSã€SCSS å’Œ helper æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦å®ƒä»¬ã€‚

```
rm app/helpers/home_helper.rb app/assets/javascripts/home.js app/assets/stylesheets/home.scss 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#configure-your-routes)é…ç½®æ‚¨çš„è·¯çº¿

å°†æ‚¨çš„`config/routes.rb`æ–‡ä»¶æ›´æ”¹ä¸º:

```
# frozen_string_literal: true

Rails.application.routes.draw do
  root 'home#index'
  resources :home, only: :index
end 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é‡å¯æ‚¨çš„ Rails æœåŠ¡å™¨ï¼Œç°åœ¨æ‚¨åº”è¯¥åœ¨`localhost:3000`ä¸Šçœ‹åˆ°ä»¥ä¸‹å†…å®¹

[![home index](../Images/2a601d82277de67e79f46c3964d17209.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--rfopw9O2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/A47j9dx.png)

## [](#install-tailwind-css)å®‰è£…é¡ºé£ CSS

åœ¨æ‚¨çš„ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
yarn add tailwindcss --dev 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™åº”è¯¥ä¼šå°†é¡ºé£åŒ…æ·»åŠ åˆ°æ‚¨çš„`package.json`ä¸­ã€‚

è¦åˆ›å»ºè‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥è¿è¡Œ:

```
./node_modules/.bin/tailwind init 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™åº”è¯¥ä¼šåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`tailwind.config.js`æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å¯ä»¥ç”¨æ¥å®šåˆ¶é¡ºé£é»˜è®¤å€¼ã€‚é˜…è¯»æ›´å¤š[æ­¤å¤„](https://tailwindcss.com/docs/configuration)

æ¥ä¸‹æ¥ï¼Œå°†ä¸‹é¢ä¸¤è¡Œæ·»åŠ åˆ°`postcss.config.js`

```
require('tailwindcss'),
require('autoprefixer'), 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨çš„`postcss.config.js`æ–‡ä»¶ç°åœ¨åº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·:

```
module.exports = {
  plugins: [
    require('autoprefixer'),
    require('postcss-import'),
    require('tailwindcss'),
    require('postcss-flexbugs-fixes'),
    require('postcss-preset-env')({
      autoprefixer: {
        flexbox: 'no-2009'
      },
      stage: 3
    })
  ]
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#configure-tailwind)é…ç½®é¡ºé£

æœ‰å‡ ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†è¿™æ˜¯æˆ‘ä¸ªäººçš„åå¥½ã€‚

ç§»é™¤èµ„äº§æ–‡ä»¶å¤¹:

```
rm -rf app/assets 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°†`app/javascript`ç›®å½•é‡å‘½åä¸º`app/frontend` :

```
mv app/javascript app/frontend 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å‘Šè¯‰ webpacker ä½¿ç”¨è¿™ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œå°†`config/webpacker.yml`ä¸­çš„ source_path ä»`source_path: app/javascript`æ”¹ä¸º`source_path: app/frontend`ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®æˆ‘ä»¬çš„æ ·å¼è¡¨:

```
touch app/frontend/packs/stylesheets.css 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°†ä»¥ä¸‹å†…å®¹ç²˜è´´åˆ°æˆ‘ä»¬æ–°çš„`stylesheets.css`æ–‡ä»¶ä¸­ã€‚*è¿™æ˜¯ç›´æ¥ä»[é¡ºé£æ–‡ä»¶](https://tailwindcss.com/docs/installation#step-2-add-tailwind-to-your-css)*T5ã€‘æ¥çš„

```
@tailwind base;

@tailwind components;

@tailwind utilities; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨`app/frontend/packs/application.js`ä¸­å¢åŠ ä»¥ä¸‹ä¸€è¡Œ:

```
import './stylesheets.css' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æœ€åä¸€æ­¥æ˜¯å‘Šè¯‰ Rails ä½¿ç”¨æˆ‘ä»¬çš„åŒ…ã€‚åœ¨`app/views/layouts/application.html.erb`ä¸­ï¼Œæ›´æ”¹:

```
<%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
<%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è‡´:

```
<%= stylesheet_pack_tag 'stylesheets', 'data-turbolinks-track': 'reload' %>
<%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é‡å¯ Rails æœåŠ¡å™¨å’Œ webpack-dev-serverï¼Œæ‚¨ç°åœ¨åº”è¯¥åœ¨`localhost:3000`ä¸Šçœ‹åˆ°ä»¥ä¸‹å†…å®¹

[![tailwind home index](../Images/b57c139b874eebd9a07e765042c663c4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--jTU127UA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/C64oFFy.png)

é¡ºé£ç°åœ¨åº”è¯¥å¯ä»¥å·¥ä½œäº†ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬è°ƒæ•´ä¸€ä¸‹è§†è§’æ¥çœ‹çœ‹é¡ºé£çš„å¥½å¤„ã€‚

## [](#update-views-to-use-tailwindcss)ä½¿ç”¨ TailwindCSS æ›´æ–°è§†å›¾

åœ¨`app/views/layouts/application.html.erb`æ”¹å˜:

```
<body>
  <%= yield %>
</body> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è‡´:

```
<body class="min-h-screen bg-gray-100">
  <div class="container mx-auto">
    <%= yield %>
  </div>
</body> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¹¶åœ¨`app/views/home/index.html.erb`ä¸­ä¿®æ”¹:

```
<h1>Home#index</h1>
<p>Find me in app/views/home/index.html.erb</p> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è‡´:

```
<section class="py-8 text-center">
  <h1 class="text-5xl mb-2">Ruby on Rails + TailwindCSS</h1>
  <p class="text-xl mb-8">â¤ï¸ A match made in heavenï¸ï¸ â¤ï¸</p>
  <a href="https://tailwindcss.com" class="bg-teal-500 hover:bg-teal-700 text-white font-bold py-4 px-8 rounded" target="_blank">Tailwind Docs</a>
</section> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¯¼èˆªåˆ°`localhost:3000`æ—¶ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä»¥ä¸‹é¡µé¢

[![updated tailwind home index](../Images/ed5e675018e1d2a58a24b427df42d489.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--9Thpfpgw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/okfqCoS.png)

ç°åœ¨ä½ çš„ Rails åº”ç”¨ç¨‹åºä¸­æœ‰äº† Tailwind CSSï¼

å¦‚æœä½ å¯¹ä½¿ç”¨ PurgeCSS ç§»é™¤æœªä½¿ç”¨çš„æ ·å¼æ„Ÿå…´è¶£ï¼Œæˆ‘æ¨èä½ çœ‹çœ‹ [GoRails ç¬¬ 294 é›†](https://gorails.com/episodes/purgecss?autoplay=1)

ç¼–ç å¿«ä¹ï¼