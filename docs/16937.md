# BDD è€Œä¸æ˜¯ TDD:é¢å‘ç»“æœçš„æµ‹è¯•

> åŸæ–‡:[https://dev . to/Yaser/BDD-è€Œä¸æ˜¯-TDD-é¢å‘ç»“æœ-æµ‹è¯•-3n67](https://dev.to/yaser/bdd-rather-than-tdd-result-oriented-testing-3n67)

### [](#tdd-doesnt-click-give-me-the-solution)**TDD ä¸ç‚¹å‡»ï¼Œç»™æˆ‘è§£å†³æ–¹æ¡ˆ**

æˆ‘ä¹‹å‰è°ˆè¿‡ TDD(æµ‹è¯•é©±åŠ¨å¼€å‘)ï¼Œä»¥åŠä½ å¦‚ä½•**æœ€ç»ˆæµ‹è¯•ä½ çš„æ¡†æ¶è€Œä¸æ˜¯ä½ çš„åº”ç”¨ç¨‹åºçš„é€»è¾‘**ã€‚

å¦‚æœä½ æ²¡æœ‰çœ‹è¿‡ä¹‹å‰çš„é¢˜ç›®ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°:[https://dev . to/0x rumple/when-TDD-donts-click-something-else-should-click-harder-2h9h](https://dev.to/0xrumple/when-tdd-doesnt-click-something-else-should-click-harder-2h9h)

### [](#bdd-behavior-driven-development-to-the-rescue)**BDD(è¡Œä¸ºé©±åŠ¨å¼€å‘)æ¥æ‹¯æ•‘**

è¿™ä¸€æ¬¡ï¼Œæˆ‘å†³å®šæ— è®ºå¦‚ä½•éƒ½è¦è¿›è¡Œæµ‹è¯•ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©äº†ä¸€ç§ä¸å…³æ³¨æ¨¡ä»¿ã€ä¼ªé€ ã€æ¥å£ã€ä¾èµ–æ³¨å…¥çš„æ–¹æ³•...ä½†æ˜¯è¿™ä¸€åˆ‡éƒ½æ˜¯ä¸ºäº†æ£€æŸ¥ç»“æœï¼Œè¿™å°±æ˜¯ BDD çš„ç”¨é€”:**è¡Œä¸º**ã€‚

#### [](#did-i-try-it)æˆ‘è¯•è¿‡äº†å—ï¼Ÿ

æ˜¯çš„ï¼Œç›´åˆ°æˆ‘ä»¬(æˆ‘å’Œæˆ‘çš„åˆ›æ„æœ‹å‹ [@alhakem](https://dev.to/alhakem) )å®Œæˆäº†è¿™ä¸ªå®¿èˆç®¡ç†ç³»ç»Ÿ(å­¦ç”Ÿå¯ä»¥æœç´¢/é¢„è®¢æˆ¿é—´ï¼Œç®¡ç†å‘˜å¯ä»¥æ‰¹å‡†/æ‹’ç»é¢„è®¢å¹¶ç®¡ç†ä»–ä»¬çš„å®¿èˆ)ï¼Œæˆ‘æ‰å…è®¸è‡ªå·±å†™è¿™ä¸ªå¸–å­:

[![demo](../Images/836a0e874c64c6bd89e863942b2c1bb0.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--wx1QFfVn--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://github.com/coretabs/dorm-portal/raw/master/demo.png)

è¿™é‡Œæ˜¯æ•´ä¸ªé¡¹ç›®ï¼Œâ€œåŠŸèƒ½â€æ–‡ä»¶å¤¹åŒ…å«æµ‹è¯•:[https://github.com/coretabs/dorm-portal](https://github.com/coretabs/dorm-portal)
éšæ„å…¬å…³æˆ–åˆ›å»ºé—®é¢˜ã€‚

#### [](#fun-facts)æœ‰è¶£çš„äº‹å®

æˆ‘å¼€å‘äº†ä¸€ä¸ªæœ‰ç‚¹å¤æ‚çš„è¿‡æ»¤å¼•æ“(æœ‰å¤šé€‰æ¡†/å•é€‰æ¡†/æ•´æ•°è¿‡æ»¤æ ‡å‡†)ï¼Œç”¨ BDD æˆ‘åœ¨å¤§çº¦**ä¸€å‘¨**å†…å®Œæˆäº†å®ƒ...æ‰€æœ‰æµ‹è¯•éƒ½æ˜¯ç»¿è‰²çš„ï¼Œå“‡å“¦ï¼

æ•´ä¸ªé¡¹ç›®åœ¨å¤§çº¦**ä¸¤ä¸ªæœˆ**å†…å®Œæˆï¼Œå¹¶ä¸”...å…¨ç»¿ğŸ˜‰

### [](#how-can-i-do-bdd)**æ€ä¹ˆæ‰èƒ½åš BDDï¼Ÿ**

è¿™å¾ˆç®€å•:

#### [](#1-write-an-acceptance-criteria-scenario)1ã€‚ç¼–å†™éªŒæ”¶æ ‡å‡†(åœºæ™¯)

å¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨å°é»„ç“œè¯­è¨€ï¼Œç°åœ¨ä¸è¦å®³æ€•ï¼Œå› ä¸ºå®ƒéå¸¸ç›´è§‚ï¼Œçœ‹çœ‹è¿™ä¸ªä¾‹å­(åº”è¯¥æ˜¯**ä¸è¨€è‡ªæ˜çš„** ):

```
Feature: Reservation

    Scenario: As a student
              I want to make reservations
              So that I get a room to stay in

        Given we have 2 dormitories (and 1 room each available to reserve)
        Given two students who reserved nothing

        When create a reservation
        Then quota of the room should decrease 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#2-implement-the-steps)2ã€‚å®æ–½æ­¥éª¤

æ ¹æ®æ‚¨é€‰æ‹©çš„è¯­è¨€/æ¡†æ¶ï¼Œè¿™å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼›æˆ‘æ­£åœ¨ä½¿ç”¨ django(å½“ç„¶æ˜¯ç”¨ python)ï¼Œæœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•å¯ä»¥ä½¿ç”¨ **behave-django åŒ…**ã€‚

ä»¥ä¸‹æ˜¯ä¸Šè¿°å®æ–½çš„éªŒæ”¶æ ‡å‡†:

```
from behave import given, when, then
from api.engine.models import RoomCharacteristics
from features.steps.factory import (create_alfam_dovec_with_4_rooms,
                                    create_student,
                                    create_reservation)

@given('we have 2 dormitories (and 1 room each available to reserve)')
def arrange(context):
    create_alfam_dovec_with_4_rooms(context)

@given('two students who reserved nothing')
def arrange(context):
    context.user1 = create_student(context, 'Owen')
    context.user2 = create_student(context, 'Tia')

@when('create a reservation')
def act(context):
    context.previous_quota = context.room1.allowed_quota
    context.reservation1 = create_reservation(context.room1, context.user1)

@then('quota of the room should decrease')
def test(context):
    context.room1 = RoomCharacteristics.objects.get(pk=context.room1.id)
    assert context.room1.allowed_quota == context.previous_quota - 1 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#3-make-them-green)3ã€‚æŠŠå®ƒä»¬å˜æˆç»¿è‰²

ç°åœ¨æ˜¯ç¼–å†™å®é™…ä»£ç çš„éƒ¨åˆ†ï¼Œç›®æ ‡æ˜¯é€šè¿‡é…é¢æµ‹è¯•ã€‚

```
from django.db import (models as django_models, transaction)
from .exceptions import NoEnoughQuotaException

class Dormitory(django_models.Model):
    name = django_models.CharField(max_length=60)

class RoomCharacteristics(django_models.Model):
    allowed_quota = django_models.PositiveIntegerField(default=0)

    dormitory = django_models.ForeignKey(
        Dormitory, related_name='room_characteristics', on_delete=django_models.CASCADE)

    def decrease_quota(self):
        if self.allowed_quota == 0:
            raise NoEnoughQuotaException()

        self.allowed_quota -= 1

class Reservation(django_models.Model):
    user = django_models.ForeignKey(
        User, related_name='reservations', on_delete=django_models.CASCADE)

    room_characteristics = django_models.ForeignKey(
        RoomCharacteristics, related_name='reservations', on_delete=django_models.CASCADE)

    @classmethod
    def create(cls, *args, **kwargs):
        room_characteristics = kwargs['room_characteristics']
        result = cls(*args, **kwargs)

        with transaction.atomic():
            room_characteristics.decrease_quota()
            result.save()
            room_characteristics.save()

        return result 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#seriously-that-sounds-tedious)**å½“çœŸï¼Ÿï¼é‚£å¬èµ·æ¥å¾ˆä¹å‘³ï¼**

ä¸è¦ã€‚ç›¸ä¿¡æˆ‘ï¼Œå› ä¸ºæˆ‘å‚ä¸è¿‡å…¶ä»–é¡¹ç›®ï¼Œåœ¨è¿™äº›é¡¹ç›®ä¸­ï¼Œæ·»åŠ åŠŸèƒ½æˆ–æ”¹å˜ä¸€ä¸ªç®€å•çš„ä¸œè¥¿å¯èƒ½ä¼šç ´åé¡¹ç›®ä¸­çš„è®¸å¤šå…¶ä»–éƒ¨åˆ†ï¼Œè¿™å®é™…ä¸Šå˜æˆäº†:

[![drawing](../Images/91b1fb26478192e6a8b35f198f2687c0.png)](https://i.giphy.com/media/11ZSwQNWba4YF2/source.gif) 
*å›¾ç‰‡æ¥æº:giphy*

ä½ å°†ä¼šæ„è¯†åˆ°ï¼Œä¸€æ—¦ä½ æ·»åŠ äº† X ç‰¹æ€§ï¼Œè€Œå®¢æˆ·æ¥åˆ°ä½ é¢å‰å¤§å–Š:â€œæ³¨å†Œä¸èµ·ä½œç”¨â€...**ä¸æµ‹è¯•å°±ç¼–ç å¾ˆçƒ‚**ã€‚

### [](#when-to-do-bdd-vs-tdd)**ä»€ä¹ˆæ—¶å€™åš BDD vs TDDï¼Ÿ**

[![doing-bdd-tdd](../Images/aea091fcb95cef50a59b7dbefed1bacc.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--64PAZD4_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/0ce0eu6mss3w7shjdkng.png)

#### [](#references)**å‚è€ƒæ–‡çŒ®**

1.  å°é»„ç“œè¯­è¨€:[https://docs.cucumber.io/gherkin/reference/](https://docs.cucumber.io/gherkin/reference/)
2.  å¤šå…ƒè§†è§‰ä¸Šçš„ BDD è¯¾ç¨‹:[https://www.pluralsight.com/courses/pragmatic-bdd-dotnet](https://www.pluralsight.com/courses/pragmatic-bdd-dotnet)
3.  ä¸åŒç±»å‹çš„æµ‹è¯•è§£é‡Š:[https://dev . to/the jessleigh/different-type-of-testing-explained-1ljo](https://dev.to/thejessleigh/different-types-of-testing-explained-1ljo)