# ä¸ºä»€ä¹ˆååº”é’©å­ï¼Œæˆ‘ä»¬æ˜¯æ€ä¹ˆåˆ°è¿™é‡Œçš„ï¼Ÿ

> åŸæ–‡:[https://dev . to/yurkaniryan/why-react-hooks-and-how-do-we-even-get here-152 f](https://dev.to/yurkaninryan/why-react-hooks-and-how-did-we-even-gethere-152f)

[React é’©å­](https://reactjs.org/docs/hooks-overview.html)åœ¨è¿™é‡Œï¼Œæˆ‘ç«‹åˆ»å–œæ¬¢ä¸Šäº†å®ƒä»¬ã€‚ä¸ºäº†ç†è§£ä¸ºä»€ä¹ˆé’©å­æ˜¯ä¼Ÿå¤§çš„ï¼Œæˆ‘æƒ³çœ‹çœ‹æˆ‘ä»¬æ˜¯å¦‚ä½•è§£å†³ React å†å²ä¸Šçš„ä¸€ä¸ªå¸¸è§é—®é¢˜ä¼šæœ‰æ‰€å¸®åŠ©ã€‚

æƒ…å†µæ˜¯è¿™æ ·çš„ã€‚æˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ªæŒ‰é’®ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡å®ƒå‘é€å’Œæ¥æ”¶æ¶ˆæ¯ã€‚å®ƒå¿…é¡»æ˜¾ç¤ºæ—§æ¶ˆæ¯ï¼Œç›‘å¬æ–°æ¶ˆæ¯ï¼Œå¹¶ç›¸åº”åœ°æ›´æ”¹æ–‡æ¡£æ ‡é¢˜æ¥æé†’å®ƒä»¬ã€‚

åœ¨è¿™ä¸ªç»ƒä¹ ä¸­ï¼Œè®©æˆ‘ä»¬å¿½ç•¥è¡¨è±¡éƒ¨åˆ†ã€‚æˆ‘ä»¬å°†å…³æ³¨å›´ç»•æ•°æ®çš„é€»è¾‘ã€‚æˆ‘ä»¬å¯ä»¥ä»åˆ›å»ºä¸€ä¸ªç»„ä»¶å¤–å£³å¹¶åœ¨æŒ‚è½½æ—¶è·å–æ•°æ®å¼€å§‹ã€‚

```
class Intercom extends Component {
  state = { messages: [] };

  /* Once this component is rendered, it will grab all the old messages */
  componentDidMount() {
    API.getMessages(this.props.user.id, data =>
      this.setState({ messages: data.messages })
    );
  }

  render() {
    return (...);
  }
} 
```

å¾ˆç®€å•ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸ºæ–°æ¶ˆæ¯è®¾ç½®è®¢é˜…ï¼Œå¹¶åœ¨å¸è½½æ—¶è¿›è¡Œæ¸…ç†ã€‚

æˆ‘ä»¬åº”è¯¥ä¸ºæ–°æ¶ˆæ¯ä¿ç•™ä¸€ä¸ªå•ç‹¬çš„çŠ¶æ€é”®ï¼Œå› ä¸ºæˆ‘ä»¬å°†æ¥éœ€è¦åŒºåˆ†ã€‚

```
class Intercom extends Component {
  state = {
    newMessages: [],
    messages: []
  };

  updateNewMessages = data => {
    this.setState({
      newMessages: [...data.messages, ...this.state.newMessages]
    });
  };

  componentDidMount() {
    API.getMessages(this.props.user.id, data =>
      this.setState({ messages: data.messages })
    );

    API.subscribeToNewMessages(this.updateMessages);
  }

  componentWillUnmount() {
    API.unsubscribeFromNewMessages(this.updateMessages);
  }

  render() {
    return (...);
  }
} 
```

ç°åœ¨æˆ‘ä»¬åœ¨ä¸¤ä¸ªè¡Œä¸ºä¸Šï¼Œç»„ä»¶å¼€å§‹å˜å¾—æœ‰ç‚¹å¤§ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰*é‚£ä¹ˆ*ç³Ÿç³•ã€‚ä½†æ˜¯è¯·æ³¨æ„ï¼Œé«˜å…‰å½¼æ­¤å¹¶ä¸é è¿‘ï¼Œå®é™…ä¸Šå·²ç»å¼€å§‹æ–­è£‚ã€‚

ç»§ç»­ï¼Œæ˜¯æ—¶å€™å¤„ç†æ–‡æ¡£æ ‡é¢˜äº†ã€‚æˆ‘ä»¬å¯ä»¥å­˜å‚¨åŸå§‹çš„æ–‡æ¡£æ ‡é¢˜ï¼Œå¹¶åœ¨æ”¶åˆ°æ–°æ¶ˆæ¯æ—¶æ›´æ–°å®ƒã€‚

```
class Intercom extends Component {
  state = {
    newMessages: [],
    messages: [],
    originalDocumentTitle: document.title,
  };

  updateNewMessages = data => {
    this.setState({
      newMessages: [...data.messages, ...this.state.newMessages]
    });
  };

  componentDidMount() {
    API.getMessages(this.props.user.id, data =>
      this.setState({ messages: data.messages })
    );

    API.subscribeToNewMessages(this.updateMessages);
  }

  componentDidUpdate() {
    document.title = this.state.newMessages.length ?
      'New Messages' :
      this.state.originalDocumentTitle
  }

  componentWillUnmount() {
    API.unsubscribeFromNewMessages(this.updateMessages);
  }

  render() {
    return (...);
  }
} 
```

å¥½äº†ï¼Œç°åœ¨è¿™ä¸ªæ–‡ä»¶å¼€å§‹å˜å¾—æœ‰ç‚¹å¤§äº†ï¼Œå¹¶ä¸”è¶Šæ¥è¶Šéš¾çœ‹åˆ°è¿™ä¸‰ç§è¡Œä¸ºçš„å…¨è²Œã€‚

å¦‚æœæ‚¨å·²ç»åœ¨ React ä¸­å·¥ä½œäº†ä¸€æ®µæ—¶é—´ï¼Œæ‚¨ä¼šçŸ¥é“æˆ‘ä»¬å·²ç»æœ‰äº†åœ¨ç±»ç»„ä»¶ä¸­å¤„ç†è¿™ä¸ªé—®é¢˜çš„æŠ€æœ¯ã€‚å¦‚æœä½ ä¸çŸ¥é“è¯¥æ€ä¹ˆåšï¼Œä½ å¯èƒ½ä¼šç»§ç»­å¢åŠ è¡Œä¸ºï¼Œé™·å…¥æŠ€æœ¯å€ºåŠ¡ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œé’©å­å¯¹ç»„ä»¶æœ‰æœ‰è¶£çš„å½±å“ã€‚**çœ‹çœ‹ä¸Šé¢çš„ä»£ç å¦‚æœç”¨é’©å­**ç¼–å†™ä¼šæ˜¯ä»€ä¹ˆæ ·å­ã€‚æˆ‘å°†çªå‡ºæ˜¾ç¤ºä¸æ–°æ¶ˆæ¯è¡Œä¸ºç›¸å…³çš„ä»£ç ã€‚

```
function Intercom(props) {
  /* Fetch old messages */
  const [messages, setMessages] = useState([]);
  useEffect(
    () => API.getMessages(props.user.id, setMessages),
    [props.user.id]
  );

  /* Watch for new ones */
  const [newMessages, setNewMessages] = useState([]);
  useEffect(
    () => {
      API.subscribeToNewMessages(props.user.id, setNewMessages);

      return () =>
        API.unsubscribeFromNewMessages(props.user.id, setNewMessages);
    },
    [props.user.id]
  );

  /* Update document title as needed */
  const [originalTitle] = useState(document.title);
  useEffect(
    () => {
      document.title = newMessages.length
        ? "You have new messages!"
        : originalTitle;
      return () => (document.title = originalTitle);
    },
    [newMessages.length]
  );

  return (...);
} 
```

ä¸€åˆ‡éƒ½æ˜¯é€šè¿‡è¡Œä¸ºè€Œä¸æ˜¯ç”Ÿå‘½å‘¨æœŸæŒ‚é’©èšé›†åœ¨ä¸€èµ·çš„ã€‚è¿™ä½¿å¾—è°ƒè¯•å’Œé‡æ„çš„æ•…äº‹å˜å¾—æ›´çŸ­ã€‚ä½ ä¸éœ€è¦ä»ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­è·³åˆ°å¦ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå–å‡ºä¸€äº›é€»è¾‘æ¥ç§»åŠ¨ã€‚

ç°åœ¨æˆ‘ä»¬æœ‰äº†è¿™ä¸‰ä¸ªæ¸…æ™°çš„é€»è¾‘æŸï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨*å®šåˆ¶é’©å­*ï¼Œå¹¶ç¼–å†™æˆ‘ä»¬è‡ªå·±çš„é’©å­ï¼Œä»¥å¯é‡ç”¨çš„æ–¹å¼æŠ½è±¡å‡ºè¡Œä¸ºã€‚

```
function useMessages(id) {
  const [messages, setMessages] = useState([]);
  useEffect(
    () => API.getMessages(props.user.id, setMessages),
    [id]
  );

  return messages;
}

function useNewMessages(id) {
  const [messages, setMessages] = useState([]);
  useEffect(
    () => {
      API.subscribeToNewMessages(id, setMessages);

      return () =>
        API.unsubscribeFromNewMessages(id, setMessages);
    },
    [id]
  );

  return messages;
}

function useTemporaryDocumentTitle(temporary) {
  const [original] = useState(document.title);
  useEffect(
    () => {
      document.title = temporary || original;
      return () => document.title = original;
    },
    [temporary]
  );
} 
```

æˆ‘ä»¬å¯ä»¥å°†è¿™äº›è‡ªå®šä¹‰æŒ‚é’©å¯¼å…¥åˆ°æˆ‘ä»¬çš„ç»„ä»¶ä¸­ï¼Œç°åœ¨æˆ‘ä»¬ä¹‹å‰å¤æ‚çš„å†…éƒ¨é€šä¿¡ç»„ä»¶çœ‹èµ·æ¥åƒè¿™æ ·:

```
function Intercom(props) {
  const messages = useMessages(props.user.id);
  const newMessages = useNewMessages(props.user.id);
  useTemporaryDocumentTitle(
    newMessages.length ? "You have new messages!" : null
  )

  return (...);
} 
```

æ‰€ä»¥é’©å­å¯ä»¥å¸®åŠ©æˆ‘ä»¬æŠŠè¡Œä¸ºæ”¾è¿›ä¸€ä¸ªå¯é‡ç”¨çš„ç›’å­é‡Œï¼Œä½†æ˜¯ä½ çŸ¥é“æˆ‘ä»¬å·²ç»åœ¨è¿™ä¹ˆåšäº†å—ï¼Ÿéšç€æ—¶é—´çš„æ¨ç§»ï¼Œæˆ‘ä»¬å·²ç»æ…¢æ…¢åœ°è¿›åŒ–äº†ï¼Œå› ä¸ºå·²ç»å‘ç°çš„æ¯ä¸€ç§æŠ€æœ¯éƒ½æœ‰ä¸€äº›é—®é¢˜ã€‚

è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ¯ä¸€ä¸ªï¼Œæ£€æŸ¥ä»–ä»¬çš„æƒè¡¡ï¼Œå¹¶æ€è€ƒå¯ä»¥åšäº›ä»€ä¹ˆæ¥æ”¹å–„ã€‚

### [](#mixins)Mixins

æ··è¡€å„¿å—åˆ°äº†å¾ˆå¤šæŒ‡è´£ã€‚ä»–ä»¬ä¸ºå°†ç”Ÿå‘½å‘¨æœŸæŒ‚é’©ç»„åˆåœ¨ä¸€èµ·æè¿°ä¸€ä¸ªæ•ˆæœåšå¥½äº†å‡†å¤‡ã€‚

```
const NewMessagesMixin = {
  getInitialState() {
    return {
      newMessages: []
    }
  },

  updateNewMessages(data) {
    this.setState({
      newMessages: [...data.messages, ...this.state.newMessages]
    });
  };

  componentDidMount() {
    API.subscribeToNewMessages(this.updateMessages);
  }

  componentWillUnmount() {
    API.unsubscribeFromNewMessage(this.updateMessages)
  }
}

const Intercom = React.createClass({
  mixins: [NewMessagesMixin, MessagesMixin, DocumentTitleMixin],

  /* Rest of our component would go here! */
}) 
```

è™½ç„¶å°è£…é€»è¾‘çš„æ€»ä½“æƒ³æ³•å¾ˆæ£’ï¼Œä½†æˆ‘ä»¬æœ€ç»ˆè¿˜æ˜¯ä» mixins ä¸­å­¦åˆ°äº†ä¸€äº›é‡è¦çš„ä¸œè¥¿ã€‚

ä¸æ¸…æ¥š`this.state.newMessages`ä»ä½•è€Œæ¥ã€‚å¯¹äº mixinï¼Œmixin ä¹Ÿæœ‰å¯èƒ½ç›²ç›®åœ°ä¾èµ–äºç»„ä»¶ä¸­å­˜åœ¨çš„å±æ€§ã€‚

éšç€äººä»¬å¼€å§‹åŒ…å«å’Œæ‰©å±•å¤§é‡çš„ mixinsï¼Œè¿™å°±æˆäº†ä¸€ä¸ªå¤§é—®é¢˜ã€‚ä½ ä¸èƒ½ç®€å•åœ°åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­æœç´¢ï¼Œç„¶åå‡è®¾ä½ æ²¡æœ‰åœ¨å…¶ä»–åœ°æ–¹ç ´åä»€ä¹ˆä¸œè¥¿ã€‚

è¿˜æœ‰ï¼Œä½ ä¸èƒ½è½»æ˜“åœ¨å¦ä¸€ä¸ª mixin ä¸­ä½¿ç”¨`this.state.newMessages`ã€‚å®ƒä»¬ä¸æ„æˆï¼Œæ‰€ä»¥ä½ ä¸èƒ½æŠŠå®ƒæ’åˆ°å…¶ä»–å°è£…é‡Œã€‚

é‡æ„éœ€è¦ç®€å•ã€‚**è¿™äº›æ··è¿›çš„è¡Œä¸ºéœ€è¦æ›´æ˜æ˜¾çš„ä¸å±äºç»„ä»¶ã€‚**ä»–ä»¬ä¸åº”è¯¥ä½¿ç”¨ç»„ä»¶çš„å†…éƒ¨æ„ä»¶ã€‚ğŸ™…â€

Mixins ä¹Ÿå¾ˆéš¾ç±»å‹åŒ–å’Œæµ‹è¯•ï¼Œè¿™ä½¿å¾—å®ƒä»¬æ›´éš¾åœ¨ä¸€ä¸ªä¸ºå˜åŒ–è€Œä¼˜åŒ–çš„ç¯å¢ƒä¸­å·¥ä½œã€‚

### [](#higher-order-components)é«˜é˜¶ç»„ä»¶

æˆ‘ä»¬å¯ä»¥å®ç°ç±»ä¼¼çš„æ•ˆæœï¼Œå¹¶é€šè¿‡åˆ›å»ºä¸€ä¸ªä¼ å…¥é“å…·çš„å®¹å™¨æ¥ä½¿å®ƒä¸é‚£ä¹ˆç¥å¥‡ï¼ç»§æ‰¿çš„ä¸»è¦ç¼ºç‚¹æ˜¯å®ƒä½¿é‡æ„å˜å¾—æ›´åŠ å›°éš¾ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬è¯•è¯•å¤åˆå§ï¼

```
/* Function that takes a component and returns a component! */
function withNewMessages(Component){
  return class withNewMessage extends Component {
    state = { newMessages: [] }

    updateNewMessages = data => {
      this.setState({
        newMessages: [...data.messages, ...this.state.newMessages]
      });

      componentDidMount() {
        API.subscribeToNewMessages(this.updateMessages);
      }

      componentWillUnmount() {
        API.unsubscribeFromNewMessage(this.updateMessages)
      }

      render() {
        return (<Component {...this.props} {...this.state} />)
      }
    };
  }
}

class Intercom extends Component {
  /* Component that uses newMessage, messages props*/
}

const DecoratedIntercom = withNewMessages(
  withMessages(
    withDocumentTitle(
      Intercom
    )
  )
) 
```

è™½ç„¶è¿™æ˜¯æ›´å¤šçš„ä»£ç ï¼Œä½†æˆ‘ä»¬æ­£æœç€æ­£ç¡®çš„æ–¹å‘å‰è¿›ã€‚æˆ‘ä»¬æ‹¥æœ‰æ··åˆè›‹ç™½çš„æ‰€æœ‰å¥½å¤„ã€‚ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªä¸å†ä¸è®¢é˜…è¡Œä¸ºç´§å¯†è€¦åˆçš„`<Intercom />`ç»„ä»¶ã€‚

æµ‹è¯•å˜å¾—æ›´å®¹æ˜“äº†ï¼Œä½†æ˜¯æ‰“å­—ä»ç„¶æ²¡æœ‰å®ƒåº”æœ‰çš„å¼ºå¤§ã€‚å®ƒä»¬å¯ä»¥ç»„åˆåœ¨ä¸€èµ·ï¼Œä½†æ˜¯åœ¨ props ä¸­ä»ç„¶å¯èƒ½å­˜åœ¨åç§°ç©ºé—´å†²çªã€‚

### [](#render-props-amp-children-as-a%C2%A0function)æ¸²æŸ“é“å…·&å„¿ç«¥ä½œä¸ºåŠŸèƒ½

è¿™æ˜¯ä¸€ç›´æ‘†åœ¨æˆ‘ä»¬é¢å‰çš„æ¨¡å¼ã€‚æˆ‘ä»¬æƒ³è¦çš„åªæ˜¯ä¸€ä¸ªå¤„ç†è®¢é˜…æ–°æ¶ˆæ¯è¡Œä¸ºçš„ç»„ä»¶ï¼Œä»¥åŠå‘ˆç°æˆ‘ä»¬æƒ³è¦çš„ä»»ä½•å†…å®¹çš„èƒ½åŠ›ã€‚

```
class NewMessages extends Component {
  state = { newMessages: [], }

  updateNewMessages = data => {
    this.setState({
      newMessages: [...data.messages, ...this.state.newMessages]
    });
  }

  componentDidMount() {
    API.subscribeToNewMessages(this.updateMessages);
  }

  componentWillUnmount() {
    API.unsubscribeFromNewMessage(this.updateMessages)
  }

  render() {
    return this.props.children(this.state)
  }
}

class Intercom extends Component {
  render() {
    <NewMessages>
      {({ newMessages, }) => (
        // Write code that uses them here!
      )}
    </NewMessages>
  }
} 
```

**è¿™ç§ç»†å¾®çš„å·®å¼‚æœ‰ä¸€äº›éå¸¸æ£’çš„å¥½å¤„**

*   ç°åœ¨éå¸¸æ˜æ˜¾çš„æ˜¯ä»€ä¹ˆåœ¨æä¾›`newMessages`ã€‚æ‚¨è¿˜å¯ä»¥è½»æ¾åœ°é‡å‘½åå®ƒä»¬ï¼Œä»¥é˜²æ­¢åç§°å†²çªã€‚
*   æˆ‘ä»¬å¯ä»¥çµæ´»æ§åˆ¶æ¸²æŸ“çš„å†…å®¹ã€‚æˆ‘ä»¬ä¸éœ€è¦åˆ¶ä½œæ–°çš„ç»„ä»¶ï¼Œå¦‚æœæˆ‘ä»¬å†³å®šè¿™æ ·åšï¼Œè¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„å¤åˆ¶ç²˜è´´ã€‚
*   æ‚¨å¯ä»¥åœ¨ç»„ä»¶å‘ˆç°å‡½æ•°ä¸­ç›´æ¥çœ‹åˆ°æ‰€æœ‰è¿™äº›ã€‚è¿™æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œæ–°å¼€å‘äººå‘˜å¾ˆå®¹æ˜“è¯†åˆ«ã€‚åœ¨è¿™é‡Œç»“å¸ã€‚

ç„¶è€Œï¼Œå®ƒé€ æˆäº†ä¸€ç§è™šå‡çš„ç­‰çº§æ„Ÿã€‚ä»…ä»…å› ä¸ºä¸€ä¸ªè¡Œä¸ºâ€œåµŒå¥—â€åœ¨å¦ä¸€ä¸ªè¡Œä¸ºä¹‹ä¸‹ï¼Œå¹¶ä¸æ„å‘³ç€å®ƒä¾èµ–äºçˆ¶è¡Œä¸ºã€‚

æ­¤å¤–ï¼Œå½“æ‚¨å¿…é¡»æ·»åŠ æˆ–åˆ é™¤ä¸€ä¸ªè¡Œä¸ºæ—¶ï¼Œé‡æ„æ˜¯ä¸€ä»¶ç—›è‹¦çš„äº‹æƒ…ã€‚ç¥ä½ é‡æ„ç±»ä¼¼è¿™æ ·çš„ä¸œè¥¿å¥½è¿:

```
const MyForm = () => (
  <DataFetcher>
    {({ data, }) => (
      <Actions>
        {({ actions, }) => (
          <Translations>
            {({ translations, }) => {
              <Theme>
                {({ theme, }) => (
                  <form styles={theme.form}>
                    <input type="text" value={data.value} />
                    <button onClick={actions.submit}>
                      {translations.submit}
                    </button>
                  </form>
                )}
              </Theme>
            }}
          </Translations>
        )}
      </Actions>
    )}
  </DataFetcher>
) 
```

### [](#things-to-remember-with-hooks)ç”¨é’©å­è®°ä½çš„ä¸œè¥¿

å½“ä½¿ç”¨é’©å­æ—¶ï¼Œä½ å¿…é¡»è®°ä½ä¸€äº›è§„åˆ™ï¼Œè¿™äº›è§„åˆ™ä¹ä¸€çœ‹å¯èƒ½å¾ˆå¥‡æ€ª:

âš ï¸ä½ åº”è¯¥åœ¨æ¸²æŸ“å‡½æ•°çš„é¡¶å±‚è°ƒç”¨é’©å­ã€‚

è¿™æ„å‘³ç€æ²¡æœ‰æ¡ä»¶æŒ‚é’©ã€‚æˆ‘ä»¬ä¸ React çš„åˆåŒæ˜¯ï¼Œæˆ‘ä»¬å°†æ¯æ¬¡ä»¥ç›¸åŒçš„é¡ºåºè°ƒç”¨ç›¸åŒæ•°é‡çš„é’©å­ã€‚

å½“ä½ æ¯”è¾ƒ Mixins å’Œ HOCs çš„å·¥ä½œæ–¹å¼æ—¶ï¼Œè¿™ä¸ªè§„åˆ™å¼€å§‹å˜å¾—æ›´æœ‰æ„ä¹‰ã€‚æ‚¨ä¸èƒ½æœ‰æ¡ä»¶åœ°ä½¿ç”¨å®ƒä»¬å¹¶åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶å¯¹å®ƒä»¬é‡æ–°æ’åºã€‚

å¦‚æœä½ æƒ³è¦æ¡ä»¶æ•ˆæœï¼Œä½ åº”è¯¥æŠŠä½ çš„é’©å­åˆ†å‰²æˆå…¶ä»–ç»„ä»¶ï¼Œæˆ–è€…è€ƒè™‘ä¸åŒçš„æ¨¡å¼ã€‚

âš ï¸ **ä½ åªèƒ½åœ¨ React å‡½æ•°ç»„ä»¶å’Œè‡ªå®šä¹‰é’©å­ä¸­ä½¿ç”¨é’©å­ã€‚**

æˆ‘ä¸ç¡®å®šæ˜¯å¦æœ‰ä»»ä½•æŠ€æœ¯ä¸Šçš„åŸå› ä¸å°è¯•åœ¨å¸¸è§„å‡½æ•°ä¸­è°ƒç”¨å®ƒä»¬ã€‚è¿™ç¡®ä¿äº†æ•°æ®åœ¨ç»„ä»¶æ–‡ä»¶ä¸­å§‹ç»ˆå¯è§ã€‚

âš ï¸**component did catch æˆ– getSnapshotBeforeUpdate æ²¡æœ‰é’©å­åŸè¯­ã€‚**

React å°ç»„è¯´ä»–ä»¬å·²ç»åœ¨è·¯ä¸Šäº†ï¼

å¯¹äº componentDidCatch ç”¨ä¾‹ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªé”™è¯¯è¾¹ç•Œç»„ä»¶ï¼ŒgetSnapshotBeforeUpdate æœ‰ç‚¹æ£˜æ‰‹ï¼Œä½†å¹¸è¿çš„æ˜¯éå¸¸å°‘è§ã€‚

### [](#some-final%C2%A0notes)ä¸€äº›æœ€åçš„ç¬”è®°

æˆ‘æ¯«ä¸æ€€ç–‘ hooks å°†ä¼šæ”¹å˜æˆ‘ä»¬çœ‹å¾…äº‹ç‰©çš„æ–¹å¼ï¼Œå¹¶åŠ¨æ‘‡ä¸€äº›æœ€ä½³å®è·µã€‚å…´å¥‹å’Œå›¾ä¹¦é¦†å‡ºæ¥çš„æ•°é‡æ˜¯é¼“èˆäººå¿ƒçš„ï¼

ç„¶è€Œï¼Œæˆ‘åœ¨è¿‡å»å·²ç»çœ‹åˆ°äº†å¯¹æ‰€æœ‰è¿™äº›è®¾è®¡æ¨¡å¼çš„å¤§è‚†å®£ä¼ ã€‚è™½ç„¶å¤§å¤šæ•°æœ€ç»ˆæˆä¸ºæˆ‘ä»¬å·¥å…·ç®±ä¸­éå¸¸æœ‰ä»·å€¼çš„å·¥å…·ï¼Œä½†å®ƒä»¬éƒ½æ˜¯æœ‰ä»·æ ¼çš„ã€‚

æˆ‘ä»ç„¶æ²¡æœ‰å®Œå…¨ç†è§£é’©å­çš„æƒè¡¡ï¼Œè¿™è®©æˆ‘å®³æ€•ã€‚æˆ‘å¼ºçƒˆå»ºè®®å’Œä»–ä»¬ä¸€èµ·ç©ï¼Œé€šè¿‡ä¾‹å­æ¥å­¦ä¹ ã€‚ä¸è¿‡ï¼Œåœ¨å¯¹å®ƒä»¬è¿›è¡Œå…¨é¢é‡å†™ä¹‹å‰ï¼Œæ‚¨å¯èƒ½éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ğŸ˜‰

* * *

å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–æ­£åœ¨å¯»æ‰¾ä¸€å¯¹ä¸€çš„ React å¯¼å¸ˆï¼Œè¯·éšæ—¶å‘æ¨ç‰¹ç»™æˆ‘**[@ yurkaniryan](https://dev.to/yurkaninryan)**ï¼

ç¥ä½ å¥½è¿ï¼Œç¼–ç å¿«ä¹ï¼ï¼ğŸ˜„