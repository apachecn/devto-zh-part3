# å°† Gatsby é»˜è®¤å¯åŠ¨å™¨è½¬æ¢ä¸ºä½¿ç”¨æ ·å¼åŒ–ç»„ä»¶

> åŸæ–‡:[https://dev . to/spences 10/convert-the-Gatsby-default-starter-to-use-styled-components-2b9g](https://dev.to/spences10/convert-the-gatsby-default-starter-to-use-styled-components-2b9g)

###### [](#photo-by-chu-tai-on-unsplash)å¤ªåˆåœ¨ Unsplash ä¸Šçš„ç…§ç‰‡

è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ Gatsby é»˜è®¤å¯åŠ¨ç¨‹åºçš„æ ·å¼åŒ–ç»„ä»¶ã€‚

[https://www.youtube.com/embed/O5sWySCr668](https://www.youtube.com/embed/O5sWySCr668)

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Gatsby é»˜è®¤å¯åŠ¨å™¨ï¼Œå¹¶æ·»åŠ æ ·å¼åŒ–ç»„ä»¶ï¼Œé¦–å…ˆï¼Œæ‰“å¼€ä¸€ä¸ªæ–°çš„[ä»£ç æ²™ç®±](https://codesandbox.io/s/)ï¼Œå¹¶ä»æœåŠ¡å™¨æ¨¡æ¿ä¸­é€‰æ‹© Gatsbyã€‚

## [](#1-dependencies)1ã€‚å±å›½

åœ¨ CodeSandbox ç¼–è¾‘å™¨çš„ dependencies éƒ¨åˆ†ï¼Œæ‚¨éœ€è¦æ·»åŠ ä»¥ä¸‹å†…å®¹:

```
gatsby-plugin-styled-components
styled-components
babel-plugin-styled-components 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#2-config)2ã€‚é…ç½®

ç°åœ¨æˆ‘ä»¬éœ€è¦ä¿®æ”¹`gatsby-config.js`æ¥åˆå¹¶æˆ‘ä»¬åˆšåˆšæ·»åŠ çš„æ–°ä¾èµ–é¡¹ã€‚å®ƒæ²¡æœ‰ä»»ä½•é…ç½®é€‰é¡¹ï¼Œæ‰€ä»¥å®ƒå¯ä»¥ä½œä¸ºé…ç½®ä¸­çš„é¢å¤–ä¸€è¡Œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘å°†å®ƒæ·»åŠ åœ¨`gatsby-plugin-sharp`æ’ä»¶ä¹‹å:

```
'gatsby-transformer-sharp',
'gatsby-plugin-sharp',
'gatsby-plugin-styled-components', 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸è¦å¿˜è®°ç»“å°¾çš„é€—å·ğŸ‘

## [](#3-global-style)3ã€‚å…¨çƒé£æ ¼

æ—¢ç„¶æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½ç”¨æ ·å¼ç»„ä»¶æ¥æ‘‡æ»šäº†ï¼Œæˆ‘ä»¬éœ€è¦ç§»é™¤é»˜è®¤å¯åŠ¨å™¨ä¸­å½“å‰åº”ç”¨çš„æ ·å¼ï¼Œå¹¶åº”ç”¨æˆ‘ä»¬è‡ªå·±çš„æ ·å¼ã€‚

åœ¨`src/components/layout.js`ç»„ä»¶ä¸­æœ‰ä¸€ä¸ªå¯¹`layout.css`çš„å¯¼å…¥ï¼Œè¿™æ˜¯å¯¹ starter çš„ CSS é‡ç½®ï¼Œå¦‚æœæˆ‘ä»¬ä»è¿™é‡Œç§»é™¤å¯¼å…¥ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°è¾¹æ¡†å’Œå­—ä½“çš„æ ·å¼è¢«é‡ç½®ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥åˆ é™¤`layout.css`æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨æ ·å¼åŒ–ç»„ä»¶çš„`createGlobalStyle`å‡½æ•°åˆ›å»ºè‡ªå·±çš„ CSS é‡ç½®ã€‚

åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹`theme`ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­å®ƒåœ¨`src/theme`ä¸­ï¼Œå¹¶åœ¨é‚£é‡Œæ·»åŠ ä¸€ä¸ª`globalStyle.js`æ–‡ä»¶ã€‚

è¿™å°†å¯¼å‡ºä¸€ä¸ª`GlobalStyle`ç»„ä»¶ä¾›æˆ‘ä»¬åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚

è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªè°·æ­Œå­—ä½“å¹¶é‡ç½®`padding`å’Œ`margin`ï¼Œä¸ºäº†è§†è§‰åé¦ˆï¼Œæˆ‘ä»¬å°†å­—ä½“ç›´æ¥æ·»åŠ åˆ° body å…ƒç´ ä¸­ã€‚

```
import { createGlobalStyle } from 'styled-components'

export const GlobalStyle = createGlobalStyle`
  @import url('https://fonts.googleapis.com/css?family=Kodchasan:400,700');
  body {
    padding: 0;
    margin: 0;
    font-family: Kodchasan;
  }
  a {
    text-decoration: none;
  }
  ul {
    margin: 0 auto;
    list-style-type: none;
  }
` 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™é‡Œçš„å¯¼å‡ºç»„ä»¶åœ¨åº”ç”¨ç¨‹åºä¸­å…¨å±€åº”ç”¨æ ·å¼ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒæ”¾åœ¨ç»„ä»¶æ ‘çš„å°½å¯èƒ½é«˜çš„ä½ç½®ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒåœ¨`layout.js`ç»„ä»¶ä¸­ï¼Œå› ä¸ºå®ƒåŒ…è£…äº†è¿™ä¸ªé¡¹ç›®ä¸­çš„æ‰€æœ‰é¡µé¢ã€‚

åœ¨`layout.js`ä¸­å¯¼å…¥`GlobalStyle`ç»„ä»¶ã€‚

```
import Header from './header'
import { GlobalStyle } from '../theme/globalStyle' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åå°†å®ƒæ·»åŠ åˆ°æ­£åœ¨æ¸²æŸ“çš„å…¶ä»–ç»„ä»¶ä¸­ã€‚

```
render={data => (
  <>
    <GlobalStyle />
    <Helmet
    ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¥½å§ï¼åº”ç”¨å…¨å±€æ ·å¼åï¼Œæˆ‘ä»¬ç°åœ¨åº”è¯¥å¯ä»¥çœ‹åˆ°å­—ä½“å’Œé¡µé¢ä¸»ä½“å‘¨å›´çš„è¾¹è·å‘ç”Ÿäº†å˜åŒ–ã€‚

æ˜¯æ—¶å€™ä½¿ç”¨æ ·å¼åŒ–ç»„ä»¶äº†ï¼

## [](#4-use-styledcomponents)4ã€‚ä½¿ç”¨æ ·å¼ç»„ä»¶

ç°åœ¨è®©æˆ‘ä»¬å°† starter ä¸­ä½¿ç”¨çš„æ‰€æœ‰å†…è”æ ·å¼è½¬æ¢ä¸ºæ ·å¼åŒ–ç»„ä»¶ã€‚

è¿™æ˜¯å®é™…çš„æ ·å¼éƒ¨åˆ†ï¼Œå®ƒå°†ç°æœ‰çš„æ ·å¼ç§»åŠ¨åˆ°æ ·å¼åŒ–çš„ç»„ä»¶ï¼Œä»æ–‡ä»¶ç»“æ„çš„é¡¶éƒ¨åˆ°åº•éƒ¨å·¥ä½œï¼Œæ”¹å˜:

```
src/components/header.js
src/components/layout.js
src/pages/index.js 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

**header.js**

```
import React from 'react'
import { Link } from 'gatsby'
import styled from 'styled-components'

const HeaderWrapper = styled.div`
  background: rebeccapurple;
  margin-bottom: 1.45rem;
`

const Headline = styled.div`
  margin: 0 auto;
  max-width: 960;
  padding: 1.45rem 1.0875rem;
  h1 {
    margin: 0;
  }
`

const StyledLink = styled(Link)`
  color: white;
  textdecoration: none;
`

const Header = ({ siteTitle }) => (
  <HeaderWrapper>
    <Headline>
      <h1>
        <StyledLink to="/">{siteTitle}</StyledLink>
      </h1>
    </Headline>
  </HeaderWrapper> )

export default Header 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

**layout . js**T2ã€‘

```
import React from 'react'
import PropTypes from 'prop-types'
import Helmet from 'react-helmet'
import { StaticQuery, graphql } from 'gatsby'

import styled from 'styled-components'

import Header from './header'
import { GlobalStyle } from '../theme/globalStyle'

const ContentWrapper = styled.div`
  margin: 0 auto;
  maxwidth: 960;
  padding: 0px 1.0875rem 1.45rem;
  paddingtop: 0;
`

const Layout = ({ children }) => (
  <StaticQuery
    query={graphql`
      query SiteTitleQuery {
        site {
          siteMetadata {
            title
          }
        }
      }
    `}
    render={data => (
      <>
        <GlobalStyle />
        <Helmet
          title={data.site.siteMetadata.title}
          meta={[
            { name: 'description', content: 'Sample' },
            { name: 'keywords', content: 'sample, something' }
          ]}>
          <html lang="en" />
        </Helmet>
        <Header siteTitle={data.site.siteMetadata.title} />
        <ContentWrapper>{children}</ContentWrapper>
      </>
    )}
  /> )

Layout.propTypes = {
  children: PropTypes.node.isRequired
}

export default Layout 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

**index.js**

```
import React from 'react'
import { Link } from 'gatsby'
import styled from 'styled-components'

import Layout from '../components/layout'
import Image from '../components/image'

const ImgWrapper = styled.div`
  max-width: 300px;
  margin-bottom: 1.45rem;
`

const IndexPage = () => (
  <Layout>
    <h1>Hi people</h1>
    <p>Welcome to your new Gatsby site.</p>
    <p>Now go build something great.</p>
    <ImgWrapper>
      <Image />
    </ImgWrapper>
    <Link to="/page-2/">Go to page 2</Link>
  </Layout> )

export default IndexPage 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#5-done)5ã€‚å®Œæˆçš„

**æ„Ÿè°¢é˜…è¯»**ğŸ™

å¦‚æœä½ éœ€è¦å‚è€ƒï¼Œè¿™æ˜¯æˆ‘ä»¬ç¼–å†™çš„[ç¤ºä¾‹ä»£ç ](https://codesandbox.io/s/yp3z16yw11)ã€‚ğŸ‘€ğŸ‘Œ

å¦‚æœæˆ‘é”™è¿‡äº†ä»€ä¹ˆï¼Œæˆ–è€…å¦‚æœæœ‰æ›´å¥½çš„æ–¹æ³•åšæŸäº‹ï¼Œè¯·è®©æˆ‘çŸ¥é“ã€‚

è¿™ç¯‡æ–‡ç« æœ€åˆå‘å¸ƒåœ¨[æˆ‘çš„ç›–èŒ¨æ¯”åšå®¢](https://blog.scottspence.me)ä¸Šï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œ[æŸ¥çœ‹å®ƒ](https://blog.scottspence.me/gatsby-starter-to-styled-components)å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·çœ‹çœ‹æˆ‘çš„å…¶ä»–å†…å®¹ã€‚

åœ¨ Twitter ä¸Šå…³æ³¨æˆ‘ï¼Œæˆ–è€…åœ¨ GitHub ä¸Šå…³æ³¨ T2 é—®æˆ‘ä»»ä½•é—®é¢˜ã€‚