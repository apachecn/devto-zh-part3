# è‡ªåŠ¨å°†æ‚¨çš„æ•…äº‹ä¹¦éƒ¨ç½²åˆ° Github é¡µé¢

> åŸæ–‡:[https://dev . to/Christopher kade/automatically-deploying-your-story book-to-github-pages-4f6c](https://dev.to/christopherkade/automatically-deploying-your-storybook-to-github-pages-4f6c)

æ•…äº‹ä¹¦æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„å·¥å…·ï¼Œå®ƒå¯ä»¥è®©ä½ æŠŠä½ çš„ç»„ä»¶ç»„ç»‡æˆä¸€ä¸ªæ•´æ´çš„å°ç•Œé¢ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹åƒ T2 è¿™ä¸ª T3ã€‚

ä½ åŸºæœ¬ä¸Šåˆ›å»ºäº†*æ•…äº‹*ï¼Œè´Ÿè´£è¿”å›ä½ æƒ³è¦æ˜¾ç¤ºç»™ç”¨æˆ·çš„ç»„ä»¶ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ª React ç»„ä»¶çš„ä¾‹å­:

```
//...

import { Button } from "../components/Button"

storiesOf('Button', module)
  .add('With text', () => <Button>Enter World</Button>)
  .add('With emojis', () => <Button>ğŸ”¥âš”ï¸</Button>) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¾ˆç®€å•çš„ä¸œè¥¿ï¼Œå½“ç„¶ï¼Œæœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥å®šåˆ¶ä½ çš„æ•…äº‹ä¹¦ï¼Œä»ä¸»é¢˜åˆ°æ·»åŠ ä»¤äººæ•¬ç•çš„ T2 æ’ä»¶ã€‚

ä½†æ˜¯è¿™ç¯‡æ–‡ç« ä¸æ˜¯æ•…äº‹ä¹¦çš„ä»‹ç»ï¼Œå¦‚æœä½ æƒ³è¦ä¸€æœ¬ï¼Œæˆ‘çœŸå¿ƒæ¨è Emma Wedekind çš„[â€œç”¨æ•…äº‹ä¹¦è®°å½• React ç»„ä»¶â€](https://dev.to/emmawedekind/documenting-react-components-with-storybook-4h3b)ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°†éƒ¨ç½²ä¸€ä¸ªç°æœ‰çš„æ•…äº‹ä¹¦åˆ° Github é¡µé¢ï¼Œæ¯”å¦‚[è¿™ä¸ª](https://christopherkade.com/ReactCraft)ï¼ŒåŒæ—¶åœ¨ä¸€ä¸ªç»™å®šçš„åˆ†æ”¯ä¸Šè‡ªåŠ¨æ‰§è¡Œè¿™ä¸ªè¿‡ç¨‹ã€‚

## [](#setting-up-travis-ci)è®¾ç½®ç‰¹æ‹‰ç»´æ–¯ CI

Travis CI æ˜¯ä¸€ä¸ªæŒç»­é›†æˆæœåŠ¡ï¼Œç”¨äºæ„å»ºå’Œæµ‹è¯• Github ä¸Šæ‰˜ç®¡çš„è½¯ä»¶ã€‚å®ƒå¯¹å¼€æºé¡¹ç›®æ˜¯å…è´¹çš„ï¼Œå¹¶ä¸”å…è®¸æˆ‘ä»¬éå¸¸å®¹æ˜“åœ°éƒ¨ç½²åˆ° Github é¡µé¢ã€‚

åœ¨æˆ‘ä»¬å®Œæˆæ‰€æœ‰è¿™äº›ä¹‹å‰ï¼Œéœ€è¦éµå¾ªå‡ ä¸ªæ­¥éª¤:

1.  å» travis-ci.com æ³¨å†Œ GitHubã€‚
2.  æ¥å— Travis CI çš„æˆæƒã€‚ä½ ä¼šè¢«é‡å®šå‘åˆ° GitHubã€‚
3.  å•å‡»ç»¿è‰²çš„æ¿€æ´»æŒ‰é’®ï¼Œå¹¶é€‰æ‹©è¦éƒ¨ç½²çš„å­˜å‚¨åº“
4.  æŒ‰ç…§è¿™ä¸ª[é“¾æ¥](https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line)ä¸Šçš„ç®€çŸ­è¯´æ˜ï¼Œåœ¨ Github ä¸Šç”Ÿæˆä¸€ä¸ªä¸ªäººè®¿é—®ä»¤ç‰Œï¼Œå¹¶èµ‹äºˆå®ƒ`public_repo`æƒé™ã€‚
5.  åœ¨ Travis ä¸Šè¿›å…¥æ‚¨çš„é¡¹ç›®è®¾ç½®ï¼Œåœ¨ç¯å¢ƒå˜é‡éƒ¨åˆ†ï¼Œåˆ›å»ºä¸€ä¸ª`GITHUB_TOKEN`å˜é‡ï¼Œå¹¶ç»™å®ƒæ‚¨åˆšåˆšç”Ÿæˆçš„ä»¤ç‰Œã€‚è¯¥ä»¤ç‰Œå°†å…è®¸ Travis æ¨é€è‡³æ‚¨çš„å­˜å‚¨åº“ä»¥ä¾¿è¿›è¡Œéƒ¨ç½²ã€‚

[![render of the component mentioned](../Images/1bbfc5c0a50e2432ad431c2f8cfebda8.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--yLTSAb4a--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://user-images.githubusercontent.com/15229355/57936079-78135700-78c3-11e9-8735-0aac4881d546.png)

æˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`.travis.yml`æ–‡ä»¶ï¼Œå¹¶èµ‹äºˆå®ƒä»¥ä¸‹å†…å®¹:

```
# Tells Travis we're running on a Node environment
language: 'node_js'
node_js: '8'

# Script that is run before the script phase
before_script:
- yarn build-storybook

# Deployment information
deploy:
  provider: pages # Tell Travis we want to deploy to Github Pages
  skip-cleanup: true 
  github-token: $GITHUB_TOKEN # Will take the environment variable you created on step 5
  local_dir: storybook-static # The folder that needs to be deployed
  repo: christopherkade/ReactCraft # Add your username/project_name here
  target_branch: gh-pages # Tell Travis to deploy on the gh-pages branch
  on:
    branch: master # Tell Travis to trigger a deploy only when we push to master 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> æ³¨æ„:å¦‚æœæ‚¨å¸Œæœ›åœ¨æ¨é€åˆ°ç‰¹å®šåˆ†æ”¯æ—¶è§¦å‘éƒ¨ç½²ï¼Œå¯ä»¥éšæ„æ›´æ”¹é…ç½®æ–‡ä»¶çš„`branch: master`éƒ¨åˆ†ã€‚

## [](#setting-up-our-storybook-for-deployment)ä¸ºéƒ¨ç½²è®¾ç½®æˆ‘ä»¬çš„æ•…äº‹ä¹¦

æˆ‘ä»¬å·®ä¸å¤šå®Œæˆäº†ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„æ•…äº‹ä¹¦å¯¼å‡ºåˆ°ä¸€ä¸ªé™æ€åº”ç”¨ç¨‹åºä¸­ã€‚è¿™æ ·ï¼ŒTravis å°†è´Ÿè´£å°†ç”Ÿæˆçš„åº”ç”¨ç¨‹åºæ¨é€åˆ°æˆ‘ä»¬çš„`gh-pages`åˆ†æ”¯ï¼Œåˆ†æ”¯å°†éƒ¨ç½²å®ƒï¼

åœ¨æ‚¨çš„`package.json`ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹è„šæœ¬:

```
{  "scripts":  {  //  ...  "build-storybook":  "build-storybook -s public",  },  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸ªè„šæœ¬æ˜¯åœ¨æˆ‘ä»¬çš„`.travis.yml`ä¸­çš„`before_script`é˜¶æ®µè¿è¡Œçš„ã€‚å®ƒä¼šåœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª`storybook-static`æ–‡ä»¶å¤¹ï¼ŒåŒ…å«ä½ çš„ç½‘ç«™çš„é™æ€å®ä¾‹ã€‚

## [](#deploying-your-storybook)éƒ¨ç½²ä½ çš„æ•…äº‹ä¹¦

æˆ‘ä»¬ç°åœ¨å¯ä»¥å¼€å§‹ç¬¬ä¸€æ¬¡éƒ¨ç½²äº†ğŸ˜

å°†æ‚¨çš„`package.json`å’Œ`.travis.yml`æ–‡ä»¶æ¨é€åˆ°æ‚¨çš„å­˜å‚¨åº“ä¸­ã€‚

å¦‚æœä¸€åˆ‡æŒ‰è®¡åˆ’è¿›è¡Œï¼Œæ‚¨åº”è¯¥ä¼šåœ¨ Travis ä»ªè¡¨æ¿ä¸Šçœ‹åˆ°ä¸€ä¸ªæ„å»ºè¢«è§¦å‘ã€‚è¿‡äº†ä¸€ä¼šå„¿(å…ˆç­‰å‡ åˆ†é’Ÿ)ï¼Œå¦‚æœä½ çš„æ„å»ºæ˜¾ç¤ºæˆåŠŸï¼Œä½ ä¼šåœ¨ä¸‹é¢çš„ URL ä¸‹æ‰¾åˆ°ä½ çš„æ•…äº‹ä¹¦:username.github.io/project-name.

è¯·è®°ä½ï¼Œä¸€äº›äº‹æƒ…å¯èƒ½ä¼šå¯¼è‡´æ„å»ºå¤±è´¥:

1.  ä½ çš„æµ‹è¯•å¤±è´¥äº†
2.  å¿˜è®°äº†æœ¬æ–‡ä¸­çš„ä¸€ä¸ªæ­¥éª¤ï¼Œä¾‹å¦‚åœ¨ Travis é¡¹ç›®ä¸­è®¾ç½®åŒ…å« Github ä»¤ç‰Œçš„ç¯å¢ƒå˜é‡ã€‚
3.  ä½ çš„ linter æŠ›å‡ºä¸€ä¸ªé”™è¯¯(å¦‚æœä½ æœ‰ä¸€ä¸ªè®¾ç½®)

å› æ­¤ï¼Œæ‚¨å¯ä»¥éšæ—¶ä¿®å¤è¿™äº›é—®é¢˜ï¼Œå¹¶å°†æ‚¨çš„æ›´æ”¹æ¨é€åˆ° Githubã€‚

ç¥è´ºæ‚¨å°†æ•…äº‹ä¹¦éƒ¨ç½²åˆ° Github é¡µé¢ğŸ‰

å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–æƒ³ä¿æŒè”ç³»ï¼Œè¯·éšæ—¶å…³æ³¨æˆ‘çš„ Twitter [@christo_kade](https://twitter.com/christo_kade) ï¼Œæˆ‘ä¼šå®šæœŸåœ¨é‚£é‡Œå‘å¸ƒå…³äº JS å’Œ CSS çš„æ–‡ç« ï¼Œå¹¶ä¼šåœ¨æœ‰æ–°æ–‡ç« æ—¶é€šçŸ¥æ‚¨ğŸ˜„