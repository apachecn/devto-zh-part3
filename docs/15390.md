# ç†è§£ Reducers:ä½ å¯ä»¥ä¸ç”¨ Redux æ¥ä½¿ç”¨å®ƒä»¬

> åŸæ–‡:[https://dev . to/yurkaniryan/understanding-reducers-you-can-use-them-without tre dux-4o4p](https://dev.to/yurkaninryan/understanding-reducers-you-can-use-them-withoutredux-4o4p)

**TLDR:** ä½ å¯ä»¥åœ¨ä½ çš„ç±»ç»„ä»¶ä¸­ç”¨ä¸€ä¸ª reducer æ¥å¤„ç†çŠ¶æ€ï¼Œæ–¹æ³•æ˜¯æ‹¥æœ‰ä¸€ä¸ªå°†åŠ¨ä½œè½¬æ¢æˆçŠ¶æ€å˜åŒ–çš„å‡½æ•°ã€‚å®ƒé›†ä¸­äº†ä½ æ‰€æœ‰çš„è®¾ç½®çŠ¶æ€ã€‚

* * *

### [](#what-is-a%C2%A0reducer)ğŸ¤”ä»€ä¹ˆæ˜¯å‡é€Ÿå™¨ï¼Ÿ

å‡é€Ÿå™¨æ˜¯æ¥å—è¾“å…¥å¹¶åœ¨ä¸€ä¸ªä¸­å¿ƒç‚¹å†³å®šå¦‚ä½•å¤„ç†è¾“å…¥çš„åŠŸèƒ½ã€‚**å°±è¿™æ ·ã€‚ğŸ˜„**

ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªåŸºäº url å†³å®šè§†å›¾æ˜¾ç¤ºçš„å‡½æ•°ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ª URL è§†å›¾ç¼©å‡å™¨ã€‚

Redux Reducersâ„¢ï¸æ˜¯ reducers çš„ä¸€ä¸ªå…·ä½“åº”ç”¨ï¼Œå®ƒè§£é‡Šåº”ç”¨ç¨‹åºä¸­çš„äº‹ä»¶ï¼Œä»¥åŠäº‹ä»¶å¦‚ä½•æ”¹å˜åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚

<figure>

[![](../Images/04d9cd980392f6d89475b3f47f1777cc.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--hGciyIAO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AcK_UHSjJl7rfNUIwb8VZww.png)

<figcaption>this.dispatch("RESET_COUNT_CLICKED")</figcaption>

</figure>

å¦‚æœæ‚¨ä¸ç†Ÿæ‚‰ Reduxï¼Œä¸Šé¢çš„ä¾‹å­é€šå¸¸æ˜¯é€šè¿‡è°ƒç”¨å¸¦æœ‰`action`(æè¿°äº‹ä»¶çš„å¯¹è±¡)çš„`dispatch`å‡½æ•°æ¥å¯åŠ¨çš„ã€‚ğŸ“£

æˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨ä¸€ä¸ªç±»ç»„ä»¶ä¸­ä½¿ç”¨ reducersï¼Œæ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡ä¸€ä¸ªåŠ¨ä½œç±»å‹æ¥å¤„ç†çŠ¶æ€è®¾ç½®ï¼Œå¦‚ä¸‹æ‰€ç¤º:

[![](../Images/19179f81e9e983aee1b3971803507f10.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--hi_hYh7---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AZe_yLCczSHAZudU7PKkkMQ.png)

åœ¨æˆ‘çœ‹æ¥ï¼Œåœ¨è¿™ä¸ªç®€å•çš„ä¾‹å­ä¸­ä½¿ç”¨ä¸€ä¸ªå‡é€Ÿå™¨æ˜¯å¤šä½™çš„ã€‚ä¸ºæ­¤ï¼Œæˆ‘å¾ˆé«˜å…´ React å°†åŒæ—¶æä¾›ä¸€ä¸ª`useState`å’Œ`useReducer`é’©å­ã€‚

å¦‚æœæˆ‘æ³¨æ„åˆ°æˆ‘æ­£åœ¨ä¼ é€’æ”¹å˜çŠ¶æ€çš„æ–¹æ³•ï¼Œå¹¶ä¸”`count`ä¸æ›´å¤šçš„çŠ¶æ€å±æ€§ç»“åˆåœ¨ä¸€èµ·ï¼Œæˆ‘ä¼šåˆ‡æ¢åˆ°ä¸€ä¸ª reducerã€‚

ç”±äº Redux å°†å…¶æ‰€æœ‰çŠ¶æ€æ”¾åœ¨ä¸€ä¸ªå¿«é€Ÿå¢é•¿çš„å¯¹è±¡ä¸­ï¼Œè¿™ä½¿å¾— reducer æ¨¡å¼éå¸¸é€‚åˆã€‚ä» Redux ä¸­åˆ é™¤ reducers æ˜¯å¯èƒ½çš„ï¼Œå³ä½¿æˆ‘ä»¬ä¼šå¤±å»å¤§é‡ä»¤äººæ•¬ç•çš„ç‰¹æ€§ã€‚

Redux è®©ä½ æŠŠä½ çš„å…¨å±€å­˜å‚¨åˆ°ä½ çš„ç»„ä»¶ä¸­ã€‚ä½ å¯ä»¥æŠŠçŠ¶æ€è½¬åŒ–æˆé“å…·ã€‚å®ƒä»¬è¿˜æä¾›äº†ä¸€ä¸ª`dispatch`åŠŸèƒ½æ¥è§¦å‘ä½ çš„å‡é€Ÿå™¨ã€‚

è®©æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªç±»ä¼¼äº`setState`çš„`update`å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¼ é€’ä¸€ä¸ª`dispatch`å‡½æ•°ã€‚

### [](#creating-a-worse-different-version-of%C2%A0redux)ğŸ’©åˆ›å»ºä¸€ä¸ªæ›´ç³Ÿç³•çš„â€œä¸åŒâ€ç‰ˆæœ¬çš„ Redux

[![](../Images/ce764757203b5080b4daabef361e4b75.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--TNTOqNY_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2A5JC7l1-iFIHhdtMaqGOlKA.png)

å½“æ‚¨è°ƒç”¨ update æ—¶ï¼Œæ‚¨å®é™…ä¸Šæ˜¯åœ¨è¯´çŠ¶æ€åº”è¯¥å¦‚ä½•å†…è”æ›´æ”¹ã€‚å®ƒå¯èƒ½ä¸å…¶ä»–ç±»ä¼¼çš„çŠ¶æ€å˜åŒ–ç›¸é‚»ï¼Œä¹Ÿå¯èƒ½ä¸ç›¸é‚»ã€‚

**åœ¨è¶³å¤Ÿå°çš„çŠ¶æ€ä¸‹ï¼Œè¿™å®é™…ä¸Šæ„Ÿè§‰å¾ˆå¥½ï¼Œå¾ˆç®€æ´ã€‚**å¦‚æœæˆ‘ä»¬æœ‰ 5 ä¸ªæˆ–æ›´å¤šçš„ç»„ä»¶æ”¹å˜äº†ä¸€äº›çŠ¶æ€å±æ€§ï¼Œå°±å¾ˆéš¾æ‰¾åˆ°é”™è¯¯çš„æ¥æºã€‚ğŸ› ğŸ•µ

å³ä½¿ä¸æ”¹å˜ reduxï¼Œæ‚¨ä¹Ÿå¯ä»¥æ¨¡æ‹Ÿè¿™ç§æ¨¡å¼ã€‚çœ‹èµ·æ¥åƒ`SET_COUNT`çš„è°ƒåº¦åŠ¨ä½œæš—ç¤ºæˆ‘ä»¬å®é™…ä¸Šåªæ˜¯æƒ³è¦`setState`ã€‚è¿™æ˜¯å¾ˆå®¹æ˜“åšåˆ°çš„äº‹æƒ…ã€‚

å¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä¸é‚£ä¹ˆå›ºæ‰§å·±è§çš„åŠ¨ä½œï¼Œåƒ`INCREMENT_BUTTON_CLICKED`ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è®¸å¤š reducers ä¸­ä½¿ç”¨å®ƒï¼ŒåŠ¨ä½œè´Ÿè½½ä¸ä¼šæœ‰å¤ªå¤§çš„å˜åŒ–ã€‚

### [](#reducers-are-useful-for-more-than%C2%A0state)ğŸ’¡å‡é€Ÿå™¨ä¸ä»…ä»…ç”¨äºçŠ¶æ€

<figure>

[![](../Images/15d88aef3678c8e49ff44c5372f3594c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ZxhPadX5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2A61iLrIrkyPdayRLrMnySrA.png)

<figcaption>The input here is the current URL, the output is theÂ view!</figcaption>

</figure>

Reducers æ˜¯é›†ä¸­å†³ç­–çš„å¥½æ–¹æ³•ã€‚å¦‚æœæ‚¨ä»¥å‰ä½¿ç”¨è¿‡ react-router-4ï¼Œé‚£ä¹ˆä¸Šé¢çš„ä»£ç åº”è¯¥çœ‹èµ·æ¥éå¸¸ç†Ÿæ‚‰ã€‚

å¤šäºäº†`<Switch />`ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹åµŒå¥—è¿™äº›è·¯çº¿è§†å›¾ç¼©å‡å™¨ã€‚

ç°åœ¨ï¼Œå¦‚æœæœ‰äººæœ‰è¿™æ ·çš„é—®é¢˜â€œURL å¯ä»¥æ”¹å˜å‘ˆç°çš„æ‰€æœ‰æ–¹å¼æ˜¯ä»€ä¹ˆâ€ï¼Œä»–ä»¬æœ‰ä¸€ä¸ªé›†ä¸­çš„åœ°æ–¹å¯ä»¥çœ‹ã€‚

### [](#summing-it%C2%A0up)ğŸ†æ€»ç»“ä¸€ä¸‹

1.  Reducers ä½œä¸ºä¸€ç§æ¨¡å¼å­˜åœ¨äº Redux å’Œ Javascript ä¹‹å¤–ï¼Œå¹¶ä¸”æ˜“äºå®ç°ã€‚ä»–ä»¬æœ‰ä¸€ä¸ªå•ä¸€çš„è´£ä»»ï¼Œæ¥å—è¾“å…¥å’Œè¾“å‡ºã€‚
2.  Redux Reducers æŠŠ app äº‹ä»¶å˜æˆçŠ¶æ€ã€‚ç°åœ¨ä¸éœ€è¦ Redux æ¥åšè¿™ä¸ªï¼Œç”¨æœ¬åœ°ç»„ä»¶çŠ¶æ€å°±å¯ä»¥äº†ã€‚
3.  Reducers ä½¿ç»„ç»‡å’ŒæŸ¥æ‰¾ä»£ç ä¸­å¯èƒ½å‘ç”Ÿçš„ä¸åŒå˜åŒ–å˜å¾—å®¹æ˜“ï¼Œå¹¶ä¸”åœ¨åº”ç”¨ç¨‹åºå˜å¤§æ—¶å¾ˆæœ‰ç”¨ã€‚

* * *

å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–æ­£åœ¨å¯»æ‰¾ä¸€å¯¹ä¸€çš„ React å¯¼å¸ˆï¼Œè¯·éšæ—¶å‘æ¨ç‰¹ç»™æˆ‘**[@ yurkaniryan](https://dev.to/yurkaninryan)**ï¼

ç¥ä½ å¥½è¿ï¼Œç¼–ç å¿«ä¹ï¼ï¼ğŸ˜„