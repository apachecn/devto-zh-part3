# åœ¨ React Native ä¸­åˆ›å»ºä¸€ä¸ª FormBuilder ç»„ä»¶(ç¬¬ 7 éƒ¨åˆ†)

> åŸæ–‡:[https://dev . to/dev _ nope/create-a-form builder-component-in-react-native-part-7-32 C7](https://dev.to/dev_nope/create-a-formbuilder-component-in-react-native-part-7-32c7)

æœ¬ç³»åˆ—å†…å®¹:

*   [ç¬¬ 1 éƒ¨åˆ†:åˆ›å»ºæ–°çš„ React åŸç”Ÿåº”ç”¨](https://dev.to/dev_nope/create-a-formbuilder-component-in-react-native-intro--part-1-1m84)
*   [ç¬¬ 2 éƒ¨åˆ†:åˆ›å»ºä¸€ä¸ªç®€å•çš„å·¥èµ„è®¡ç®—å™¨è¡¨å•](https://dev.to/dev_nope/create-a-formbuilder-component-in-react-native-part-2-2dec)
*   [ç¬¬ 3 éƒ¨åˆ†:åˆ›å»ºè‡ªå®šä¹‰è¡¨å•è¾“å…¥å’ŒæŒ‰é’®ç»„ä»¶](https://dev.to/dev_nope/create-a-formbuilder-component-in-react-native-part-3-1aib)
*   [ç¬¬å››éƒ¨åˆ†:å…³äº`FormBuilder`ç»„ä»¶çš„å·¥ä½œ](https://dev.to/dev_nope/create-a-formbuilder-component-in-react-native-part-4-5gc3)
*   [ç¬¬ 5 éƒ¨åˆ†:å³æ—¶å¯ç”¨/ç¦ç”¨è¡¨å•æŒ‰é’®](https://dev.to/dev_nope/create-a-formbuilder-component-in-react-native-part-5-535h)
*   [ç¬¬ 6 éƒ¨åˆ†:åˆ›å»ºæ³¨å†Œè¡¨å•](https://dev.to/dev_nope/create-a-formbuilder-component-in-react-native-part-6-2ohd)
*   ç¬¬ 7 éƒ¨åˆ†:æ·»åŠ å¯¹å¸ƒå°”å­—æ®µç±»å‹çš„æ”¯æŒ(å½“å‰)

# [](#part-7-add-support-for-boolean-field-type)ç¬¬ 7 éƒ¨åˆ†:å¢åŠ å¯¹å¸ƒå°”å­—æ®µç±»å‹çš„æ”¯æŒ

æ—¢ç„¶æˆ‘ä»¬å·²ç»éªŒè¯äº†æˆ‘ä»¬çš„`FormBuilder`åœ¨åˆ›å»ºæ–°è¡¨å•æ—¶å·¥ä½œå¾—éå¸¸å¥½ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•æ·»åŠ å¯¹æ–°å­—æ®µç±»å‹çš„æ”¯æŒâ€”â€”åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ä¸€ä¸ª`Boolean`å­—æ®µã€‚

### [](#create-a-new-raw-formbooleaninput-endraw-component)åˆ›å»ºä¸€ä¸ªæ–°çš„`FormBooleanInput`ç»„ä»¶

è®©æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„è‡ªå®šä¹‰ç»„ä»¶ï¼Œå®ƒå°†ä¸ºæˆ‘ä»¬å‘ˆç°ä¸€ä¸ªå¸ƒå°”å­—æ®µã€‚æˆ‘ä»¬ç§°ä¹‹ä¸º`FormBooleanInput`:

```
import React from 'react';
import PropTypes from 'prop-types';
import {
    View, Switch, Text, StyleSheet,
} from 'react-native';

/**
 * A stateless function component which renders a Boolean input (Switch).
 *
 * @param {obj} props
 */
const FormBooleanInput = (props) => {
    const { labelText, ...inputProps } = props;

    return (
        <View style={styles.switchWrapper}>
            <Switch {...inputProps} />
            {labelText && <Text style={styles.label}>{labelText}</Text>}
        </View>
    );
};

FormBooleanInput.propTypes = {
    labelText: PropTypes.string,
};

FormBooleanInput.defaultProps = {
    labelText: null,
};

const styles = StyleSheet.create({
    switchWrapper: {
        flex: 1,
        marginBottom: 15,
        paddingHorizontal: 10,
        flexDirection: 'row',
        alignItems: 'center',
    },
    label: {
        flex: 1,
        color: '#FFF',
        marginLeft: 10,
    },
});

export default FormBooleanInput; 
```

æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸åŸºæœ¬çš„ç»„ä»¶ï¼Œå®ƒå‘ˆç°å‡ºä¸€ä¸ªå¸¦æœ‰æ ‡ç­¾çš„[å¼€å…³](https://facebook.github.io/react-native/docs/switch)ååº”æœ¬åœ°ç»„ä»¶(å¦‚æœæä¾›çš„è¯)ã€‚

### [](#add-a-new-field-to-the-raw-sign-up-endraw-form)å‘`Sign Up`è¡¨å•æ·»åŠ ä¸€ä¸ªæ–°å­—æ®µ

è®©æˆ‘ä»¬ä½¿ç”¨æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­åˆ›å»ºçš„æ³¨å†Œè¡¨å•ï¼Œå¹¶å‘å®ƒæ·»åŠ ä¸€ä¸ªæ–°å­—æ®µï¼Œå‡è®¾è¿™å°†å…è®¸ç”¨æˆ·è®¢é˜…é‚®ä»¶åˆ—è¡¨ã€‚è¯¥å­—æ®µçš„â€œå®šä¹‰â€å¦‚ä¸‹æ‰€ç¤º:

```
[
    {
        name: 'subscribe',
        label: 'Subscribe me to weekly news from Tech world.',
        type: 'boolean',
        defaultValue: true,
    },
] 
```

æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†æ–°çš„`defaultValue`å­—æ®µå±æ€§ã€‚æˆ‘ä»¬å°†ä½¿ç”¨å®ƒæ¥ä¸ºæˆ‘ä»¬çš„ä»»ä½•è¡¨å•å­—æ®µæä¾›é»˜è®¤å€¼ã€‚å…³äºæˆ‘ä»¬å°†å¦‚ä½•å®ç°è¿™ä¸ªé€»è¾‘çš„ç»†èŠ‚ï¼Œè¯·å‚è§ä¸‹ä¸€èŠ‚ã€‚

### [](#add-support-for-the-raw-boolean-endraw-field-within-the-raw-formbuilder-endraw-component)åœ¨`FormBuilder`ç»„ä»¶ä¸­æ·»åŠ å¯¹`boolean`å­—æ®µçš„æ”¯æŒ

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦åšä¸€äº›æ”¹å˜:

*   é€šè¿‡ä½¿ç”¨`defaultValue`å­—æ®µçš„å±æ€§ï¼Œå…è®¸è¡¨å•å­—æ®µå…·æœ‰é¢„å®šä¹‰çš„é»˜è®¤å€¼ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŠ©æ‰‹å‡½æ•°ï¼Œå®ƒå°†ä¸ºæˆ‘ä»¬æ£€æµ‹ç»™å®šå­—æ®µçš„é»˜è®¤å€¼ã€‚

```
/**
 * Determine what should be the default value
 * for a given field.
 */
getFormFieldDefaultValue = ({ defaultValue, type }) => {
    if (defaultValue !== undefined) {
        return defaultValue;
    }

    switch (type) {
    case 'boolean':
        return false;
    default:
        return '';
    }
}; 
```

ç°åœ¨æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·åœ¨æˆ‘ä»¬çš„`constructor()`ä¸­ä½¿ç”¨è¿™ä¸ªå‡½æ•°:

```
const formFieldNames = formFields.reduce((obj, field) => {
    obj[field.name] = this.getFormFieldDefaultValue(field);
    return obj;
}, {}); 
```

*   æ›´æ–°æˆ‘ä»¬çš„`hasValidFormData()`åŠ©æ‰‹å‡½æ•°ï¼Œå¿½ç•¥`boolean`å­—æ®µç±»å‹ï¼Œå› ä¸ºè¿™ç§ç±»å‹çš„å­—æ®µæ€»æ˜¯æœ‰ä¸€ä¸ªå€¼(æˆ–è€…æ˜¯`true`æˆ–è€…æ˜¯`false`)ã€‚æ›´æ–°åçš„ç‰ˆæœ¬å¦‚ä¸‹æ‰€ç¤º:

```
hasValidFormData = () => {
    const formFields = this.getFormFields();
    const isFilled = formFields
        // filter out Boolean fields because they will always have a value
        .filter(field => field.type !== 'boolean')
        // check if all remaining fields have been filled out
        .every(field => !!this.state[field.name]);

    return isFilled;
}; 
```

*   æ›´æ–°æˆ‘ä»¬çš„`hasDirtyFormData()`åŠ©æ‰‹å‡½æ•°ï¼Œå¹¶ä½¿ç”¨ä¸åŒçš„æ–¹æ³•æ¥æ£€æµ‹`boolean`å­—æ®µæ˜¯å¦æ”¹å˜äº†å®ƒçš„å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
hasDirtyFormData = () => {
    const formFields = this.getFormFields();
    const isDirty = formFields.some((field) => {
        switch (field.type) {
        case 'boolean':
            // because Boolean fields will have a default value,
            // we need to check if the current value is not the default one
            return this.state[field.name] !== this.getFormFieldDefaultValue(field);

        default:
            return !!this.state[field.name];
        }
    });

    return isDirty;
}; 
```

*   åˆ›å»ºä¸€ä¸ªæ–°çš„`renderBooleanInput()`åŠ©æ‰‹å‡½æ•°ï¼Œå®ƒå°†ä¸ºæˆ‘ä»¬å‘ˆç°å‡º`FormBooleanInput`ç»„ä»¶ã€‚åŠŸèƒ½è·Ÿç°æœ‰çš„`renderTextInput()`æ²¡å¤ªå¤§åŒºåˆ«ã€‚å¯èƒ½ä¸»è¦çš„åŒºåˆ«æ˜¯ä½¿ç”¨äº† [onValueChange](https://facebook.github.io/react-native/docs/switch#onvaluechange) é“å…·è€Œä¸æ˜¯ [onChangeText](https://facebook.github.io/react-native/docs/textinput#onchangetext) ã€‚

```
renderBooleanInput = ({ name, label, inputProps }) => (
    <FormBooleanInput
        {...inputProps}
        value={this.state[name]}
        onValueChange={(value) => {
            this.setState({ [name]: value });
        }}
        labelText={label}
        key={name}
    />
); 
```

*   æœ€åï¼Œè®©æˆ‘ä»¬æ›´æ–°ç»„ä»¶çš„`render()`å‡½æ•°ï¼Œå¹¶å‘ˆç°å‡º`boolean`å­—æ®µ(å¦‚æœæœ‰æä¾›çš„è¯)ã€‚

```
{formFieldsRows.map((formFieldsRow, i) => (
    <View style={styles.row} key={`r-${i}`}>
        {formFieldsRow.map((field) => {
            switch (field.type) {
            case 'boolean':
                return this.renderBooleanInput(field);

            default:
                return this.renderTextInput(field);
            }
        })}
    </View>
))} 
```

å°±æ˜¯è¿™æ ·ï¼è®©æˆ‘ä»¬çœ‹çœ‹è¡¨å•åœ¨è¿™ä¸€ç‚¹ä¸Šæ˜¯å¦‚ä½•å·¥ä½œçš„:

[![Sign Up Form V2](../Images/c1dcd79b17351cc64cfb2b421ef14d20.png "Sign Up Form V2")T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--oeHuJuA8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/bqpahidel51rz5325c0p.gif)

è¦æŸ¥çœ‹å®Œæ•´çš„å˜æ›´åˆ—è¡¨ï¼Œè¯·æŸ¥çœ‹ GitHub ä¸Šçš„è¿™ä¸ª[æäº¤ã€‚](https://github.com/vasilestefirta/react-native-form-builder/commit/87d8ca9417c15ead4825fcfe462f051cb3572061)

* * *

å°±è¿™æ ·ï¼Œæˆ‘çš„æœ‹å‹ä»¬ï¼ğŸ™‚ğŸš€ğŸš¢æˆ‘è®¤ä¸ºæˆ‘ä»¬å·²ç»ä»‹ç»äº†è¶³å¤Ÿå¤šçš„å†…å®¹ï¼Œè®©æ‚¨äº†è§£å¦‚ä½•ä»å¤´å¼€å§‹æ„å»ºè‡ªå·±çš„`FormBuilder`ç»„ä»¶ã€‚ğŸ—ï¸:å°½ç®¡æˆ‘å°†åœ¨è¿™é‡Œç»“æŸè¿™ä¸ªç³»åˆ—ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶æœ‰å¾ˆå¤šä¸œè¥¿å¯ä»¥åº”ç”¨åˆ°è¿™ä¸ªåŠ©æ‰‹ç»„ä»¶ä¸­(ä¾‹å¦‚ï¼Œå¯¹å¯é€‰å­—æ®µçš„æ”¯æŒï¼Œå¯¹æ–°å­—æ®µç±»å‹çš„æ”¯æŒï¼Œç­‰ç­‰ã€‚)ï¼Œä½†æ˜¯è®©æˆ‘ä»¬æŠŠå®ƒå½“ä½œä½ çš„å®¶åº­ä½œä¸šğŸ‘¨â€ğŸ’»ğŸ‘©â€ğŸ’»ã€‚

* * *

### [](#bonus-links)å¥–åŠ±é“¾æ¥ğŸ

ä»¥ä¸‹æ˜¯æˆ‘ç”¨æ¥å¼€å§‹ä½¿ç”¨ React Native çš„ä¸€äº›å¥½èµ„æº:

*   https://reactjs.org/docs/getting-started.html(åœ¨æ·±å…¥ React Native ä¹‹å‰ï¼Œä½ å¿…é¡»äº†è§£ React æ˜¯å¦‚ä½•å·¥ä½œçš„)
*   [https://redux.js.org/basics](https://redux.js.org/basics)(å¦‚æœä½ åˆšåˆšå¼€å§‹ä½¿ç”¨ React Nativeï¼Œè¿™æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯å½“ä½ è¦æ„å»ºæ›´å¤æ‚çš„åº”ç”¨æ—¶ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨ Redux)
*   [https://facebook.github.io/react-native/](https://facebook.github.io/react-native/)
*   [http://www.reactnativeexpress.com/](http://www.reactnativeexpress.com/)

åŒ…è£…:

*   https://reactnavigation.org(å½“ä½ æƒ³åœ¨å±å¹•é—´å¯¼èˆªæˆ–åˆ›å»ºæŸç§é€‰é¡¹å¡å¼åº”ç”¨ç¨‹åºæ—¶ï¼Œä½¿ç”¨è¿™ä¸ªåŒ…ã€‚å®ƒæœ‰å¾ˆå¥½çš„æ–‡æ¡£è®°å½•ï¼Œæˆ‘ä½¿ç”¨å®ƒæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚)
*   [https://github.com/react-native-community](https://github.com/react-native-community)(ä¸€ä¸ªäº†ä¸èµ·çš„ç»„ç»‡ï¼Œä¸ºç¤¾åŒºåˆ›é€ äº†è®¸å¤šä¼Ÿå¤§çš„è½¯ä»¶åŒ…)
*   [https://github.com/zo0r/react-native-push-notification](https://github.com/zo0r/react-native-push-notification)
*   [https://github.com/invertase/react-native-firebase](https://github.com/invertase/react-native-firebase)

åº”ç”¨ç¨‹åºå›¾æ ‡+é—ªå±è®¾ç½®(è¿™æ€»æ˜¯ä¸€ä¸ªæ£˜æ‰‹çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸‹é¢çš„é“¾æ¥è‚¯å®šå¸®åŠ©äº†æˆ‘):

*   [https://medium . com/@ scottian Stewart/react-native-add-app-icons-and-launch-screens-on-IOs-and-Android-apps-3 bfbc 20 b 7d 4 c](https://medium.com/@scottianstewart/react-native-add-app-icons-and-launch-screens-onto-ios-and-android-apps-3bfbc20b7d4c)
*   [https://medium . com/handle-labs/how-to-add-a-splash-screen-to-a-react-native-app-IOs-and-Android-30 a3 CEC 835 AE](https://medium.com/handlebar-labs/how-to-add-a-splash-screen-to-a-react-native-app-ios-and-android-30a3cec835ae)

ç¼–ç å¿«ä¹ï¼ğŸ‘¨â€ğŸ’»ğŸ‘©â€ğŸ’»ğŸ‘