# åœ¨ Jupyter ç¬”è®°æœ¬ä¸­å¯¼å…¥åŒ…

> åŸæ–‡:[https://dev . to/mariokostelac/importing-packages-in-jupyter-notebooks-2a 65](https://dev.to/mariokostelac/importing-packages-in-jupyter-notebooks-2a65)

*çœ‹åˆ°â€œImportError:æ²¡æœ‰åä¸º tensorflow çš„æ¨¡å—â€å´çŸ¥é“è‡ªå·±å®‰è£…äº†ï¼Ÿæœ‰æ—¶å€™å¯ä»¥ä»æ§åˆ¶å°å¯¼å…¥åŒ…ï¼Œä½†ä¸èƒ½ä» Jupyter ç¬”è®°æœ¬å¯¼å…¥ï¼Ÿï¼pip å®‰è£… tensorflow æœ‰æ—¶å°±æ˜¯ä¸å·¥ä½œï¼Ÿ*

ä¸æ˜¯å…³äºä½ çš„ã€‚è¿™å¹¶ä¸æ˜¯è¯´ python å¤æ€ªã€‚å®ƒå®é™…ä¸Šæ˜¯å…³äºä½ çš„æœºå™¨**è¿è¡Œå¤šä¸ª python å®‰è£…(ç¯å¢ƒ)ã€‚**è®©æˆ‘ä»¬å¯¹é‚£é‡Œå‘ç”Ÿçš„äº‹æƒ…å’Œå¯¼è‡´ä½ çš„åŒ…åœ¨å®‰è£…åä¸¢å¤±çš„åŸå› æœ‰ä¸€ä¸ªåŸºæœ¬çš„äº†è§£ã€‚ä¸€æ—¦ä½ ç†è§£äº†è¿™ä¸€ç‚¹ï¼Œä½ åœ¨å®‰è£…å’Œå¯¼å…¥ä½ éœ€è¦çš„åŒ…æ—¶å°±ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜äº†ã€‚

## [](#you-are-running-multiple-environments-of-python-that-is-fine)ä½ æ­£åœ¨è¿è¡Œ python çš„å¤šä¸ªç¯å¢ƒã€‚é‚£å¾ˆå¥½ï¼

[![](../Images/f4609d7dc5aa590d64c7501fb259beff.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--_HX7G9oV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://biasandvariance.com/images/importing-packages-in-jupyter/thisisfine.jpg) ä¸ç²¾æˆè¿™æ ·ï¼è¿™å…¶å®å¾ˆå¥½ï¼Œä¸æ˜¯ä½ çš„é”™ã€‚å› ä¸ºä¸æ˜¯æ‰€æœ‰çš„ python2 å·¥å…·éƒ½ç§»æ¤åˆ° python3ï¼Œæ‰€ä»¥æœ‰å¯èƒ½ä½ çš„æ“ä½œç³»ç»Ÿè¿è¡Œä¸¤ä¸ªç‰ˆæœ¬è€Œä½ ä»€ä¹ˆéƒ½ä¸ç”¨ç¢°ã€‚

ä¾‹å¦‚ï¼Œæˆ‘åŒæ—¶å®‰è£…äº† python 2 å’Œ python 3ã€‚å½“æˆ‘åœ¨æ§åˆ¶å°ä¸­è°ƒç”¨ python æ—¶ï¼Œpython 2.7.10 è¢«è°ƒç”¨ï¼›å½“æˆ‘è°ƒç”¨ python3 æ—¶ï¼Œpython 3.7.1 è¢«è°ƒç”¨ã€‚è¿˜æœ‰æ›´å¥½çš„ã€‚æˆ‘æœ‰å¤šä¸ª python 3.6.3 çš„ç¯å¢ƒ(æ˜¯çš„ï¼Œéƒ½æ˜¯åŒä¸€ä¸ªç‰ˆæœ¬)ï¼Œå®ƒä»¬æ ¹æ®æˆ‘å½“å‰æ­£åœ¨è¿›è¡Œçš„é¡¹ç›®åŠ¨æ€åŠ è½½(æ„Ÿè°¢ conda)ã€‚æˆ‘æ¯å¤©éƒ½åœ¨åˆ›å»ºå’Œç ´å python ç¯å¢ƒã€‚

é‚£ä¹ˆæˆ‘å¦‚ä½•çŸ¥é“å½“å‰è¿è¡Œçš„æ˜¯ä»€ä¹ˆç¯å¢ƒå‘¢ï¼Ÿè½»æ¾ç‚¹ã€‚é€šè¿‡åœ¨äº¤äº’æ§åˆ¶å°ä¸­è¿è¡Œ`import sys; sys.prefix`ã€‚è¿™æ­ç¤ºäº†æ‚¨å½“å‰æ‰€å¤„çš„ python ç¯å¢ƒã€‚

[![](../Images/3996c148aeae94fbfd4b81638c59d456.png "By default, my python loads from ~/anaconda3/bin. When I activate fastai environment, it loads from ~/anaconda3/envs/fastai/bin. These two environments do not share installed packages!<br>
")T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--81U5nRJa--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://biasandvariance.com/images/importing-packages-in-jupyter/importsys.png)

### [](#different-python-environment-means-different-sets-of-packages)ä¸åŒçš„ python ç¯å¢ƒæ„å‘³ç€ä¸åŒçš„åŒ…é›†åˆ

é™¤éä½ ä¿®æ”¹äº†`$PYTHONPATH`å˜é‡(å¦‚æœä½ æ²¡å¬è¯´è¿‡ä¹Ÿæ²¡å…³ç³»)ï¼Œå¦åˆ™è¿™äº›ç¯å¢ƒä¸­çš„æ¯ä¸€ä¸ªéƒ½å°†ä½¿ç”¨ä¸€å¥—å®Œå…¨ç‹¬ç«‹çš„åŒ…ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ ä¸èƒ½å¯¼å…¥è¿™ä¸ªåŒ…ï¼Œè€Œä¸”ä½ çŸ¥é“ä½ å·²ç»å®‰è£…äº†å®ƒã€‚ä½ å®‰è£…çš„ç¯å¢ƒä¸å¯¹ï¼

ä½†æ˜¯ä½ è¿è¡Œçš„æ˜¯ Jupyter è€Œä¸æ˜¯æ§åˆ¶å°ï¼Œè¿™ä¸€åˆ‡æ˜¯å¦‚ä½•ç»„åˆåœ¨ä¸€èµ·çš„ï¼Ÿæˆ‘ä»¬åˆšåˆšåˆ°è¾¾é‚£é‡Œã€‚

## æ‚¨ä½¿ç”¨çš„ Jupyter å†…æ ¸ä¸æ‚¨çš„æ§åˆ¶å°ä½¿ç”¨çš„ python ç¯å¢ƒä¸åŒã€‚

Jupyter è¿è¡Œ python çš„æ–¹å¼ä¸ä½ çš„ä¸»æœºä¸åŒã€‚å®ƒæœ‰ä¸€ä¸ªå†…æ ¸çš„æ¦‚å¿µ(å¦‚æœä½ ä¸ç†Ÿæ‚‰è¿™ä¸ªæ¦‚å¿µï¼Œå¯ä»¥æŠŠå®ƒæƒ³è±¡æˆç”¨ Jupyter æ³¨å†Œçš„ python ç¯å¢ƒ)ã€‚è¿è¡Œç¬”è®°æœ¬çš„å†…æ ¸å¯èƒ½ä½¿ç”¨ä¸åŒçš„ python ç¯å¢ƒï¼Œå¹¶ä¸”è‚¯å®šæ²¡æœ‰åƒæ‚¨çš„æ§åˆ¶å°é‚£æ ·è®¾ç½®æ‰€æœ‰çš„ç¯å¢ƒå˜é‡ã€‚é‚£ä¹Ÿå¾ˆå¥½ã€‚æˆ‘ä»¬çŸ¥é“å¦‚ä½•æ‰¾å‡ºå“ªä¸ªç¯å¢ƒæ­£åœ¨è¿è¡Œæˆ‘ä»¬çš„ä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ Jupyter notebook ä¸­åšå®Œå…¨ç›¸åŒçš„äº‹æƒ…ã€‚

[![](../Images/f672e90f8292b09def0e1ec38f29de51.png "Two different kernels are configured to use two different python environments. Running sys.prefix shows the current environment running the notebook.")T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--71oDgRFL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://biasandvariance.com/images/importing-packages-in-jupyter/twoenvs.png)

å•Šå“ˆï¼ï¼ï¼ä½ çŸ¥é“ Jupyter ç”¨çš„æ˜¯ä»€ä¹ˆç¯å¢ƒã€‚ç°åœ¨ä½ åªéœ€è¦:

*   ç¡®ä¿æ‚¨çš„æ§åˆ¶å°(æš‚æ—¶)ä½¿ç”¨ä¸ Jupyter ç¬”è®°æœ¬ç›¸åŒçš„ python ç¯å¢ƒã€‚
*   ç”¨`conda install`æˆ–`pip install`å®‰è£…åŒ…(å¦‚æœä½ ä¸çŸ¥é“æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œèµ¶ç´§å»[æœ¬æŒ‡å—](https://dev.to/how-not-to-break-your-python-environment-again/))ã€‚

é…·ï¼Œé…·ï¼Œé…·ã€‚ä½†æ˜¯ä½ ä¸çŸ¥é“å¦‚ä½•è®©ä½ çš„ä¸»æœºä½¿ç”¨ç›¸åŒçš„ç¯å¢ƒï¼Ÿå¾ˆå¥½ï¼Œæˆ‘ä»¬ä¼šåœ¨ä½ çš„ç¬”è®°æœ¬ä¸Šåšï¼Œä½†ä¸ä¼šåƒä¸Šæ¬¡é‚£æ ·ã€‚

## ä½ æ­£åœ¨ç›´æ¥ä» Jupyter ç¬”è®°æœ¬å®‰è£…è½¯ä»¶åŒ…ï¼Œä½†æ˜¯ä½ åšé”™äº†ã€‚

æµè§ˆ StackOverflow ä¸Šå…³äºç±»ä¼¼é—®é¢˜çš„æ–‡ç« è®©æˆ‘æ„è¯†åˆ°ï¼Œäººä»¬åœ¨å»ºè®®ä¸€äº›å¤§å¤šæ•°æ—¶å€™è¡Œä¸é€šçš„ä¸œè¥¿ã€‚å¦‚æœæ‚¨é€šè¿‡è¿è¡Œ
æ¥å®‰è£…è½¯ä»¶åŒ…

```
!conda install tensorflow
# or if you want to use pip
!pip install tensorflow 
```

ä½ æ­£åœ¨ä½¿ç”¨éå¸¸è„†å¼±çš„å‘½ä»¤(å¦‚æœåœ¨ç¬”è®°æœ¬ä¸Šè¿è¡Œ),è¿™å°±æ˜¯ä½ å®‰è£…çš„è½¯ä»¶åŒ…æ— æ³•å¯¼å…¥çš„åŸå› ã€‚è¿™æ¬¡å¤©æ°”ä¸å¥½ã€‚ä½†æ˜¯æˆ‘ä»¬ä¼šè§£å†³çš„ğŸ™ã€‚å¦‚æœä½ å¯¹å…¶ä¸èµ·ä½œç”¨çš„åº•å±‚ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œè¯·é˜…è¯» Jake Vanderplas çš„è¿™ç¯‡åšæ–‡ã€‚

## [](#instead-use-these-commands)ç›¸åï¼Œä½¿ç”¨è¿™äº›å‘½ä»¤:

```
import sys
!conda install --yes --prefix {sys.prefix} tensorflow
# or if you want to use pip
!{sys.executable} -m pip install tensorflow 
```

ä½ ä¸ä¼šå†æœ‰è¯¥æ­»çš„å¯¼å…¥é”™è¯¯çš„é—®é¢˜äº†ã€‚

ç†è§£è¿™äº›æ¦‚å¿µæœ‰åŠ©äºæˆ‘å’Œæˆ‘çš„é˜Ÿå‹ç†è§£å‘ç”Ÿäº†ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šå¾—åˆ°è¿™äº›é”™è¯¯ã€‚å¦‚æœä½ è®¤ä¸ºæˆ‘çŠ¯äº†ä¸€ä¸ªé”™è¯¯ï¼Œæˆ‘é”™è¿‡äº†ä»€ä¹ˆï¼Œæˆ–è€…ä½ åªæ˜¯æƒ³è¯´è°¢è°¢ï¼Œè¯·åœ¨ğŸ—£.è¯„è®ºä¸­è¿™æ ·åš