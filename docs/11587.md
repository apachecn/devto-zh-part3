# æ— æœåŠ¡å™¨æ¶æ„æ¨¡å¼

> åŸæ–‡:[https://dev . to/foxteck/server less-architectural-patterns-5ge 1](https://dev.to/foxteck/serverless-architectural-patterns-5ge1)

[![](../Images/301ecba85f11e068fb0d726cd15583be.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--zcgYT0wO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2Awz3dUQYEOulqAI-A9H4-wg.png) 

<figcaption>é»‘è‰²å’Œç™½è‰²çš„äº‘å½©ï¼Œå¤§æ°”â€”â€”æ‘„å½±:[å¸ƒè±æ©Â·ç±³çº³å°”](https://unsplash.com/photos/LzJZOJZtgmc?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)</figcaption>

æˆ‘ä»¬æ­£åœ¨æ„å»ºè¶Šæ¥è¶Šå¤æ‚çš„å¹³å°ï¼ŒåŒæ—¶åŠªåŠ›æ»¡è¶³ä¸æ–­å˜åŒ–çš„ä¸šåŠ¡éœ€æ±‚ï¼Œå¹¶å°†å®ƒä»¬æŒ‰æ—¶äº¤ä»˜ç»™è¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·ã€‚

æˆ‘ä»¬äº¤ä»˜çš„ä¸œè¥¿æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚ä¸åŒæœåŠ¡ã€æŠ€æœ¯ã€ç‰¹æ€§å’Œå›¢é˜Ÿçš„ç»„åˆï¼Œå®ƒä»¬æœ‰è‡ªå·±çš„ç¯å¢ƒå’Œç«äº‰ä¼˜å…ˆæƒã€‚

æœ‰æ—¶æ„Ÿè§‰å°±åƒä½ åœ¨è®¾è®¡å’Œå»ºé€ ä¸€è‰˜èˆªç©ºæ¯èˆ°ï¼ŒåŒæ—¶åœ¨æ±¹æ¶Œçš„æµ·æ´‹ä¸­èˆªè¡Œï¼Œè¢«å é¢†ï¼Œå¹¶å—åˆ°æ”»å‡»ã€‚

> ![](../Images/087976fa203bf51faf4528469343326a.png)![](../Images/608b44b64a25bf4aaa0d2cd97e18a46b.png)çˆ±å¾·åå¤šÂ·ç½—æ¢…ç½—@ç¦å…‹æ–¯æ³°å…‹![](../Images/4d9c44713c216584b3d48ff3455cbb68.png)â€œç¼–å†™è½¯ä»¶å°±åƒæ˜¯åœ¨æ³¢æ¶›æ±¹æ¶Œçš„æµ·æ´‹ä¸­è®¾è®¡å’Œå»ºé€ ä¸€è‰˜æ–°å‹çš„èˆªç©ºæ¯èˆ°ï¼Œè¢«å é¢†ï¼Œè¢«æ”»å‡»ã€‚â€2017 å¹´ 4 æœˆ 26 æ—¥ 21:14PM[![Twitter reply action](../Images/269095962147c28351274afdd5486a48.png)](https://twitter.com/intent/tweet?in_reply_to=857342043017891840)[![Twitter retweet action](../Images/771160ecf06ae3d4d7a7815c29c819c2.png)](https://twitter.com/intent/retweet?tweet_id=857342043017891840)0[![Twitter like action](../Images/c077611ab2a5e0b4cd0c826ee7ae1e48.png)](https://twitter.com/intent/like?tweet_id=857342043017891840)1

æŒç»­å¿«é€Ÿåœ°äº¤ä»˜é«˜è´¨é‡çš„è½¯ä»¶æ˜¯æˆ‘ä»¬å®¢æˆ·çš„æ ¸å¿ƒå•†ä¸šä¼˜åŠ¿ã€‚ç”¨ç°ä»£æ¶æ„ã€æ¡†æ¶å’Œå®è·µåŠ é€Ÿå¼€å‘è¿‡ç¨‹æ˜¯æˆ˜ç•¥æ€§çš„ã€‚

æ— æœåŠ¡å™¨æ¨¡å¼éå¸¸é€‚åˆå¿«é€Ÿã€è¿ç»­çš„è½¯ä»¶äº¤ä»˜ã€‚æ‚¨ä¸å¿…è€ƒè™‘ç®¡ç†åŸºç¡€æ¶æ„ã€é…ç½®æˆ–è§„åˆ’éœ€æ±‚å’Œè§„æ¨¡ã€‚

å€ŸåŠ©â€œåŠŸèƒ½å³æœåŠ¡â€æ¨¡å¼ï¼Œæˆ‘ä»¬å°†ä»£ç ç»„ç»‡æˆæ›´å°ã€æ›´ç®€å•çš„å•å…ƒï¼Œæ˜“äºç†è§£ã€æ›´æ”¹å’Œéƒ¨ç½²åˆ°ç”Ÿäº§ä¸­ã€‚å…è®¸æˆ‘ä»¬äº¤ä»˜å•†ä¸šä»·å€¼å¹¶å¿«é€Ÿè¿­ä»£ã€‚

> æ— æœåŠ¡å™¨æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„å®éªŒï¼Œå­¦ä¹ å’Œè¶…è¶Šä½ çš„ç«äº‰å¯¹æ‰‹çš„æ¨åŠ¨è€…ã€‚

æ¶æ„æ¨¡å¼æ˜¯åœ¨æˆ‘ä»¬çš„å·¥ç¨‹ç»„ç»‡ä¸­æ¨å¹¿æœ€ä½³å®è·µã€å¥å£®çš„è§£å†³æ–¹æ¡ˆå’Œå…±äº«æ¶æ„æ„¿æ™¯çš„å¼ºå¤§æ–¹æ³•ã€‚

åœ¨åˆ©ç”¨æ— æœåŠ¡å™¨çš„ä¸åŒé¡¹ç›®ä¸­ï¼Œæˆ‘çœ‹åˆ°äº†æˆ‘ä»¬å¯ä»¥ç”¨æ¥è§£å†³ç°ä»£äº‘æ¶æ„ä¸­å¸¸è§é—®é¢˜çš„æ¨¡å¼ã€‚è™½ç„¶è¿™ä¸æ˜¯ä¸€ä¸ªè¯¦å°½çš„é›†åˆï¼Œä½†å®ƒå¯ä»¥ç”¨ä½œæˆ‘ä»¬æ„å»ºçš„ä¸‹ä¸€ä¸ªå¹³å°çš„æ¶æ„çº§æ„å»ºå—çš„ç›®å½•ã€‚

### [](#serverless-architectural-patterns-catalog)æ— æœåŠ¡å™¨æ¶æ„æ¨¡å¼ç›®å½•

*   ç®€å•çš„ Web æœåŠ¡ã€‚
*   è§£è€¦æ¶ˆæ¯ä¼ é€’ã€‚
*   å¼ºå¤§çš„ APIã€‚
*   èšåˆå™¨ã€‚
*   é…’å§/é…’å§ã€‚
*   é™Œç”Ÿäºº
*   åŸºäºé˜Ÿåˆ—çš„è´Ÿè½½å‡è¡¡ã€‚
*   å¤§é‡è¯»å–çš„æŠ¥å‘Šå¼•æ“ã€‚
*   æºªæµå’Œç®¡é“ã€‚
*   æ‰‡å…¥å’Œæ‰‡å‡ºã€‚

#### [](#simple-web-service)ç®€å•çš„ Web æœåŠ¡

> "å®¢æˆ·éœ€è¦é€šè¿‡å…¬å…±æˆ–å†…éƒ¨ API æ¥æ¶ˆè´¹æœåŠ¡."

ç®€å•çš„ web æœåŠ¡æ˜¯ AWS Lambda ä½œä¸ºåç«¯æœåŠ¡çš„æœ€æ ‡å‡†ç”¨ä¾‹ã€‚å®ƒä»£è¡¨ä¸€ä¸ª [*n å±‚*](https://en.wikipedia.org/wiki/Multitier_architecture) æˆ– [*åˆ†å±‚*](https://martinfowler.com/bliki/PresentationDomainDataLayering.html) *æ¶æ„*çš„*é€»è¾‘*æˆ–*åŸŸ*å±‚ã€‚

[![](../Images/1556e33a45114e2d625dcd62b4426521.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--N-1rPFDM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/882/1%2AFBgxD-qR66DTnjHA1ASJEA.png) 

<figcaption>å…¬å…± API â€”é€šè¿‡ HTTP(s)æš´éœ²çš„ Lambda å‡½æ•°</figcaption>

å¯¹äºå…¬å…± APIï¼ŒAPI Gateway é€šè¿‡ HTTPs å…¬å¼€ lambda å‡½æ•°ã€‚API ç½‘å…³å¯ä»¥å¤„ç†æˆæƒã€è®¤è¯ã€è·¯ç”±å’Œç‰ˆæœ¬æ§åˆ¶ã€‚

å¯¹äºå†…éƒ¨ APIï¼Œå®¢æˆ·ç«¯ä½¿ç”¨ [AWS çš„ SDK](https://aws.amazon.com/tools/#sdk) ä»å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¸­ç›´æ¥è°ƒç”¨ lambda å‡½æ•°ã€‚

[![](../Images/442123f62cf3f3983e5b78f6c7c18cac.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--E-hH8qqf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/858/1%2AiPIAqcjx6gwXO2uvdh67Ag.png) 

<figcaption>å†…éƒ¨ APIâ€”â€”å®¢æˆ·ç«¯é€šè¿‡è‡ªå·±å–œæ¬¢çš„è¯­è¨€çš„ AWS SDK è°ƒç”¨ Lambda å‡½æ•°ã€‚</figcaption>

AWS Lambda è‡ªåŠ¨æ‰©å±•ï¼Œå¯ä»¥å¤„ç†æ³¢åŠ¨è´Ÿè½½ã€‚æ‰§è¡Œæ—¶é—´å—é™äº API Gateway å…è®¸çš„æœ€å¤§å€¼( *29 ç§’)*ï¼Œæˆ–è€…å¦‚æœä½¿ç”¨ SDK è°ƒç”¨ï¼Œåˆ™å—é™äº *15 åˆ†é’Ÿ*çš„ç¡¬é™åˆ¶ã€‚

å¼ºçƒˆå»ºè®®å‡½æ•°[æ— çŠ¶æ€](https://read.acloud.guru/lambda-for-alexa-skills-7-tips-from-the-trenches-684c963e6ad1#5c39)ï¼Œ[ä¼šè¯](https://serverless.com/blog/strategies-implementing-user-authentication-serverless-applications/)è¢«[ç¼“å­˜](https://medium.com/@tjholowaychuk/aws-lambda-lifecycle-and-in-memory-caching-c9cd0844e072)ï¼Œåˆ°ä¸‹æ¸¸æœåŠ¡çš„è¿æ¥è¢«[é€‚å½“å¤„ç†](https://www.jeremydaly.com/reuse-database-connections-aws-lambda/)ã€‚

#### [](#decoupled-messaging)è§£è€¦æ¶ˆæ¯ä¼ é€’

> â€œéšç€æ‰“ç ´æ•´ä½“æ ¼å±€æˆ–ç»§ç»­ä¸ºæˆ‘ä»¬çš„å¹³å°æ„å»ºæœåŠ¡ï¼Œä¸åŒçš„æœåŠ¡å¿…é¡»è¿›è¡Œäº¤äº’ã€‚æˆ‘ä»¬å¸Œæœ›é¿å…ç“¶é¢ˆã€åŒæ­¥ I/O å’Œå…±äº«çŠ¶æ€ã€‚â€

å¼‚æ­¥æ¶ˆæ¯ä¼ é€’æ˜¯å¤§å¤šæ•°æœåŠ¡é›†æˆçš„åŸºç¡€ã€‚å®ƒè¢«è¯æ˜æ˜¯ä¼ä¸šæ¶æ„çš„æœ€ä½³ç­–ç•¥ã€‚å®ƒå…è®¸æ„å»ºæ¾æ•£è€¦åˆçš„æ¶æ„ï¼Œå…‹æœè¿œç¨‹æœåŠ¡é€šä¿¡çš„é™åˆ¶ï¼Œå¦‚å»¶è¿Ÿå’Œä¸å¯é æ€§ã€‚

[![](../Images/2ab655d6bc439475ed89f932e713b353.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--ZKJzg5zF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AM0nPEazhCK9DiKurpjw9CQ.png) 

<figcaption>ä¸ SNS è§£é™¤æ¶ˆæ¯ä¼ é€’</figcaption>

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒæœåŠ¡ A è§¦å‘äº‹ä»¶ï¼ŒSNS å°†è¿™äº›äº‹ä»¶åˆ†å‘ç»™å…¶ä»–æœåŠ¡ã€‚å½“éƒ¨ç½²æ–°æœåŠ¡æ—¶ï¼Œä»–ä»¬å¯ä»¥è®¢é˜…é¢‘é“ï¼Œå¹¶åœ¨äº‹ä»¶å‘ç”Ÿæ—¶å¼€å§‹æ¥æ”¶æ¶ˆæ¯ã€‚

æ¶ˆæ¯ä¼ é€’åŸºç¡€è®¾æ–½æ˜¯å¯é çš„ã€‚æä¾›æ¯”å…±äº«æ•°æ®åº“æ›´å¥½çš„å°è£…ã€‚éå¸¸é€‚åˆåŸºäºäº‹ä»¶çš„å¼‚æ­¥é€šä¿¡ã€‚

ä¸åŒçš„æŠ€æœ¯æœ‰ä¸åŒçš„é™åˆ¶ï¼Œå¹¶æä¾›ç‰¹å®šçš„ä¿è¯ã€‚äº†è§£è¿™äº›æƒè¡¡æ˜¯å¾ˆé‡è¦çš„ã€‚AWS ä¸Šæœ€å¸¸è§çš„æ¶ˆæ¯æœåŠ¡æœ‰ [SNS](https://aws.amazon.com/sns/faqs/) ã€ [SQS](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-limits.html) å’Œ [Kinesis](https://docs.aws.amazon.com/streams/latest/dev/service-sizes-and-limits.html) ã€‚

***æ³¨æ„äº‹é¡¹*** :é™¤äº†æ¯ä¸ªæ¶ˆæ¯æœåŠ¡çš„å·²çŸ¥é™åˆ¶å’Œä¿è¯ä¹‹å¤–ï¼Œè¿˜åº”è¯¥æœ‰æ„è¯†åœ°è€ƒè™‘æ¶ˆæ¯å¤åˆ¶ã€æ¶ˆæ¯æ’åºã€æœ‰å®³æ¶ˆæ¯ã€åˆ†ç‰‡å’Œæ•°æ®ä¿ç•™ã€‚å¾®è½¯çš„â€œ[å¼‚æ­¥æ¶ˆæ¯ä¼ é€’å…¥é—¨](https://docs.microsoft.com/en-us/previous-versions/msp-n-p/dn589781(v=pandp.10))â€æ–‡ç« è¯¦ç»†è®¨è®ºäº†[è¿™äº›ä¸»é¢˜](http://considerations-for-implementing-asynchronous-messaging)ã€‚

#### [](#robust-api)å¥å£®çš„ API

> â€œéšç€å¹³å°æœåŠ¡æ•°é‡çš„å¢é•¿ï¼Œå®¢æˆ·éœ€è¦ä¸è¶Šæ¥è¶Šå¤šçš„æœåŠ¡è¿›è¡Œäº¤äº’ã€‚å› ä¸ºæ¯ä¸ªæœåŠ¡å¯èƒ½æœ‰ä¸åŒçš„ç«¯ç‚¹ï¼Œå±äºä¸åŒçš„å›¢é˜Ÿï¼Œå¹¶æœ‰ä¸åŒçš„å‘å¸ƒå‘¨æœŸï¼Œè®©å®¢æˆ·ç«¯ç®¡ç†è¿™äº›è¿æ¥å¯èƒ½æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚â€

åœ¨è¿™ä¸ªæ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå•ä¸€çš„å…¥å£ç‚¹ï¼Œå®ƒå…¬å¼€äº†ä¸€ä¸ªå®šä¹‰è‰¯å¥½çš„ APIï¼Œå¹¶æ ¹æ®ç«¯ç‚¹ã€è·¯ç”±ã€æ–¹æ³•å’Œ[å®¢æˆ·ç«¯ç‰¹æ€§](https://blog.apisyouwonthate.com/api-versioning-has-no-right-way-f3c75457c0b7#0f4b)å°†è¯·æ±‚è·¯ç”±åˆ°ä¸‹æ¸¸æœåŠ¡ã€‚

[![](../Images/06028e679b501f2432a33f3a5a35c8a1.png)](https://res.cloudinary.com/practicaldev/image/fetch/s---KGRBPTo--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AkN_ykbVbX1Ln57wnPdtUqg.png) 

<figcaption>ä¸€ä¸ªå¥å£®çš„ APIï¼Œç”±ä¸åŒçš„ä¸‹æ¸¸æœåŠ¡ç»„æˆï¼Œé€šè¿‡ API ç½‘å…³æš´éœ²ã€‚</figcaption>

ä¸‹æ¸¸æœåŠ¡å¯ä»¥æ˜¯ lambda å‡½æ•°ã€å¤–éƒ¨ç¬¬ä¸‰æ–¹ APIã€ [Fargate](https://aws.amazon.com/fargate/) å®¹å™¨ã€æˆç†Ÿçš„å¾®æœåŠ¡ï¼Œç”šè‡³å†…éƒ¨ APIã€‚

[å¯ä»¥åˆ©ç”¨ API ç½‘å…³](https://aws.amazon.com/api-gateway/)ã€ [App è´Ÿè½½å‡è¡¡å™¨](https://aws.amazon.com/elasticloadbalancing/features/#Details_for_Elastic_Load_Balancing_Products)æˆ– [AppSync](https://aws.amazon.com/appsync/) ä½œä¸ºè·¯ç”±å¼•æ“æ¥å®ç°ã€‚

[![](../Images/2181524f98a85e02d9de33a554b1888d.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--IoIe9gqR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/747/1%2AcY03nWEJaD4RysmM6YLIMw.png) 

<figcaption>AppSync (GraphQL)å¯ä»¥çœ‹ä½œæ˜¯å¥å£®çš„ API å’Œèšåˆå™¨æ¨¡å¼çš„å®ç°ã€‚</figcaption>

åœ¨å®¢æˆ·æœºå’Œä¸‹æ¸¸æœåŠ¡ä¹‹é—´æœ‰ä¸€ä¸ªæŠ½è±¡å±‚æœ‰åŠ©äºå¢é‡æ›´æ–°ã€æ»šåŠ¨å‘å¸ƒå’Œå¹¶è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚ä¸‹æ¸¸æœåŠ¡å¯ä»¥å½’ä¸åŒçš„å›¢é˜Ÿæ‰€æœ‰ï¼Œåˆ†ç¦»å‘å¸ƒå‘¨æœŸï¼Œå‡å°‘è·¨å›¢é˜Ÿåä½œçš„éœ€è¦ï¼Œå¹¶æ”¹å–„ API ç”Ÿå‘½å‘¨æœŸå’Œ[å¯æ¼”è¿›æ€§](https://blog.apisyouwonthate.com/api-evolution-for-rest-http-apis-b4296519e564)ã€‚

è¿™ç§æ¨¡å¼ä¹Ÿè¢«ç§°ä¸º [API ç½‘å…³](https://microservices.io/patterns/apigateway.html)æˆ–[ç½‘å…³è·¯ç”±å™¨](https://docs.microsoft.com/en-us/azure/architecture/patterns/gateway-routing)ã€‚

***æ³¨æ„äº‹é¡¹*** :ç½‘å…³å¯èƒ½æ˜¯å•ç‚¹æ•…éšœã€‚ç®¡ç†èµ„æºå’Œæ›´æ–°é¢å‘å®¢æˆ·ç«¯çš„ç•Œé¢å¯èƒ½ä¼šå¾ˆæ£˜æ‰‹ã€‚å¦‚æœä¸é€šè¿‡ä»£ç è‡ªåŠ¨åŒ–è¿›è¡Œç®¡ç†ï¼Œå®ƒå¯èƒ½ä¼šæˆä¸ºè·¨å›¢é˜Ÿçš„ç“¶é¢ˆã€‚

#### [](#aggregator)èšåˆå™¨

> â€œå®¢æˆ·ç«¯å¯èƒ½éœ€è¦å¤šæ¬¡è°ƒç”¨å„ç§åç«¯æœåŠ¡æ¥æ‰§è¡Œå•ä¸ªæ“ä½œã€‚è¿™äº›é—®é¢˜ä¼šå½±å“æ€§èƒ½å’Œè§„æ¨¡ã€‚â€

å¾®æœåŠ¡ä½¿å¾—é€šä¿¡å¼€é”€æˆä¸ºä¸€ä¸ªæ™®éé—®é¢˜ã€‚åº”ç”¨ç¨‹åºéœ€è¦ä¸è®¸å¤šè¾ƒå°çš„æœåŠ¡è¿›è¡Œé€šä¿¡ï¼Œæœ‰å¤§é‡çš„è·¨æœåŠ¡è°ƒç”¨ã€‚

æœåŠ¡é›†ä¸­å®¢æˆ·ç«¯è¯·æ±‚ä»¥å‡å°‘é€šä¿¡å¼€é”€çš„å½±å“ã€‚å®ƒåˆ†è§£å¹¶å‘ä¸‹æ¸¸æœåŠ¡å‘å‡ºè¯·æ±‚ï¼Œæ”¶é›†å¹¶å­˜å‚¨åˆ°è¾¾çš„å“åº”ï¼Œèšåˆå®ƒä»¬ï¼Œå¹¶å°†å…¶ä½œä¸ºä¸€ä¸ªå“åº”è¿”å›ç»™è°ƒç”¨è€…ã€‚

[![](../Images/dea79d3a00f93d91ff1f0ac1fc8cbea9.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--jeYOHE_b--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/934/1%2AcHSxPOODaR1itN4A_W8Mcg.png) 

<figcaption>å‘ç¥¨Î»åŠŸèƒ½èšåˆä¸‹æ¸¸æœåŠ¡ã€‚</figcaption>

å¾®è½¯å°†è¿™ç§æ¨¡å¼ç§°ä¸º[ç½‘å…³èšåˆ](https://docs.microsoft.com/en-us/azure/architecture/patterns/gateway-aggregation)ã€‚å®ƒå¯ä»¥è¢«å®ç°ä¸ºå…·æœ‰*æŸç§*ä¸šåŠ¡é€»è¾‘çš„æœåŠ¡ï¼Œèƒ½å¤Ÿç¼“å­˜å“åº”å¹¶çŸ¥é“å½“ä¸‹æ¸¸æœåŠ¡å¤±è´¥æ—¶è¯¥åšä»€ä¹ˆã€‚

***æ³¨æ„äº‹é¡¹*** :å¯¹ API çš„è°ƒç”¨åº”è¯¥ä½œä¸ºä¸€ä¸ªæ“ä½œæ¥å·¥ä½œã€‚èšåˆå™¨çš„ API ä¸åº”è¯¥å‘å®¢æˆ·ç«¯å…¬å¼€å…¶èƒŒåçš„æœåŠ¡ç»†èŠ‚ã€‚èšåˆå™¨å¯èƒ½æ˜¯ä¸€ä¸ªå•ç‚¹æ•…éšœï¼Œå¦‚æœå®ƒä¸æ˜¯*è¶³å¤Ÿé è¿‘*å…¶ä»–æœåŠ¡ï¼Œå®ƒå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚èšåˆå™¨è´Ÿè´£å¤„ç†é‡è¯•ã€ç”µè·¯ä¸­æ–­ã€ç¼“å­˜ã€è·Ÿè¸ªå’Œæ—¥å¿—è®°å½•ã€‚

#### [](#pubsub)å‘å¸ƒ/è®¢é˜…

> â€œæœåŠ¡å¾ˆå°‘å­¤ç«‹å­˜åœ¨ã€‚å¹³å°åœ¨å‘å±•ï¼ŒæœåŠ¡åœ¨æ¿€å¢ã€‚æˆ‘ä»¬éœ€è¦æœåŠ¡åœ¨ä¸äº§ç”Ÿç›¸äº’ä¾èµ–çš„æƒ…å†µä¸‹è¿›è¡Œäº¤äº’ã€‚
> 
> å¼‚æ­¥æ¶ˆæ¯ä¼ é€’ä½¿æœåŠ¡èƒ½å¤Ÿå‘å¤šä¸ªæ„Ÿå…´è¶£çš„æ¶ˆè´¹è€…å®£å¸ƒäº‹ä»¶ï¼Œè€Œæ— éœ€è€¦åˆã€‚"

åœ¨[ä¸­ï¼Œå‘å¸ƒè€…-è®¢é˜…è€…](https://docs.microsoft.com/en-us/azure/architecture/patterns/publisher-subscriber)æœåŠ¡é€šè¿‡ä¸€ä¸ªé€šé“å°†äº‹ä»¶å‘å¸ƒä¸º*æ¶ˆæ¯*ã€‚å¤šä¸ªæ„Ÿå…´è¶£çš„æ¶ˆè´¹è€…é€šè¿‡è®¢é˜…è¿™äº›é¢‘é“æ¥æ”¶å¬äº‹ä»¶ã€‚

[![](../Images/508b1b58ae88839a42c65945393ab8a7.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--v_YCAeFB--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1016/1%2A-EPTUG9Umkl2UZTw7XqYDw.png) 

<figcaption>è®¢å•æœåŠ¡ä¸è§†é¢‘å¢™ã€æ’è¡Œæ¦œå’Œæ¨èå¼•æ“äº¤äº’ã€‚</figcaption>

åœ¨ç¤ºä¾‹ä¸­ï¼Œå½“åœ¨ç§»åŠ¨åº”ç”¨ç¨‹åºä¸­åˆ›å»ºè®¢å•æ—¶ï¼Œè®¢å•æœåŠ¡å°†å‘å¸ƒä¸€ä¸ªäº‹ä»¶ã€‚

å±å¹•å¢™æœåŠ¡æ­£åœ¨ä¾¦å¬ OrderCreated äº‹ä»¶ã€‚å®ƒå°†æ¥å—è®¢å•ï¼Œåˆ†è§£è®¢å•ä¸­çš„é¡¹ç›®â€”â€”å“ªäº›*éœ€è¦åƒ v60 ä¸€æ ·å‡†å¤‡*,æˆ–è€…*ä¸å–œæ¬¢é¥¼å¹²*,å¹¶æ›´æ–°å±å¹•ï¼Œä»¥ä¾¿æˆ‘ä»¬çš„*å’–å•¡å¸ˆ*çœ‹åˆ°æ¥ä¸‹æ¥å¼€å§‹å†²æ³¡å“ªç§å’–å•¡ã€‚

æ’è¡Œæ¦œæœåŠ¡å°†æ”¶åˆ°ç›¸åŒçš„äº‹ä»¶ï¼Œå¹¶å°†æ›´æ–°è®°å½•â€”â€”è°æ˜¯æœ¬æœˆçš„*å’–å•¡çˆ±å¥½è€…*ï¼Œä»¥åŠä»€ä¹ˆæ˜¯*æœ€ç•…é”€çš„å’–å•¡äº§åœ°ã€æ–¹æ³•*å’Œ*ç¾é£Ÿ*ã€‚

æ¨èæœåŠ¡å°†è·Ÿè¸ªè°åœ¨å–ä»€ä¹ˆï¼Œçœ‹èµ·æ¥å¾ˆæ­é…çš„ä¸œè¥¿ï¼Œä»¥åŠä½ åº”è¯¥å°è¯•çš„ä¸‹ä¸€ç§æ–¹æ³•ã€‚â€” *æç¤º*ï¼Œè¯•è¯•æ—¥æœ¬çš„è™¹å¸ç®¡:

[https://medium . com/media/c5ae 351 F5 c 6 bbf 46 de 15 cc 3c 5 fa 8 f 498/href](https://medium.com/media/c5ae351f5c6bbf46de15cc3c5fa8f498/href)

æœåŠ¡æ˜¯åˆ†ç¦»çš„ã€‚ä»–ä»¬é€šè¿‡è§‚å¯Ÿç¯å¢ƒå’Œå¯¹ç¯å¢ƒåšå‡ºååº”æ¥åˆä½œï¼Œå°±åƒè¯´å”±æ­Œæ‰‹ä¸€æ ·ã€‚

å½“æ–°çš„æœåŠ¡å’ŒåŠŸèƒ½å¯ç”¨æ—¶ï¼Œä»–ä»¬å¯ä»¥è®¢é˜…ã€è·å–äº‹ä»¶å¹¶ç‹¬ç«‹å‘å±•ã€‚

å›¢é˜Ÿå¯ä»¥ä¸“æ³¨äºäº¤ä»˜ä»·å€¼ï¼Œæé«˜ä»–ä»¬çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œè€Œä¸å¿…å…³æ³¨æ•´ä¸ªå¹³å°çš„å¤æ‚æ€§ã€‚

***è€ƒè™‘:*** å‘å¸ƒè€…/è®¢é˜…è€…æ˜¯äº‹ä»¶é©±åŠ¨æ¶æ„çš„ç»ä½³æ­é…ã€‚æœ‰å¾ˆå¤šä¸åŒçš„æ¶ˆæ¯é€‰é¡¹: [SNS](https://aws.amazon.com/sns/) ï¼Œ [Kinesis](https://aws.amazon.com/kinesis/) ï¼Œ [Azure çš„æœåŠ¡æ€»çº¿](https://azure.microsoft.com/en-us/services/service-bus/)ï¼Œ [Google çš„äº‘å‘å¸ƒ/è®¢é˜…](https://cloud.google.com/pubsub/)ï¼Œ [Kafka](https://kafka.apache.org/) ï¼Œ [Pulsar](https://pulsar.apache.org/) ç­‰ç­‰ã€‚è¿™äº›æ¶ˆæ¯ä¼ é€’æœåŠ¡å°†è´Ÿè´£ pub/sub çš„åŸºç¡€è®¾æ–½éƒ¨åˆ†ï¼Œä½†æ˜¯è€ƒè™‘åˆ°æ¶ˆæ¯ä¼ é€’çš„å¼‚æ­¥ç‰¹æ€§ï¼Œå‰é¢è®¨è®ºçš„æ‰€æœ‰é—®é¢˜â€”â€”æ¶ˆæ¯æ’åºã€å¤åˆ¶ã€è¿‡æœŸã€å¹‚ç­‰æ€§å’Œæœ€ç»ˆä¸€è‡´æ€§â€”â€”éƒ½åº”è¯¥åœ¨å®ç°ä¸­åŠ ä»¥è€ƒè™‘ã€‚

#### [](#strangler)æ‰¼æ€è€…

> â€œç³»ç»Ÿä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œæˆé•¿å’Œå‘å±•ã€‚éšç€å¤æ‚æ€§çš„å¢åŠ ï¼Œæ·»åŠ æ–°åŠŸèƒ½ä¼šå˜å¾—éå¸¸å›°éš¾ã€‚å®Œå…¨æ›´æ¢ä¸€ä¸ªç³»ç»Ÿéœ€è¦æ—¶é—´ï¼Œä»é›¶å¼€å§‹å‡ ä¹æ˜¯ä¸€ä¸ªæ™®éçš„åä¸»æ„ã€‚
> 
> é€æ¸è¿ç§»åˆ°æ–°ç³»ç»Ÿï¼ŒåŒæ—¶è®©æ—§ç³»ç»Ÿå¤„ç†å°šæœªå®ç°çš„åŠŸèƒ½æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€”å¾„ã€‚
> 
> ä½†æ˜¯å®¢æˆ·éœ€è¦äº†è§£è¿™ä¸¤ä¸ªç³»ç»Ÿï¼Œå¹¶åœ¨æ¯æ¬¡è¿ç§»ä¸€ä¸ªç‰¹æ€§æ—¶è¿›è¡Œæ›´æ–°ã€‚"

[æ‰¼æ€è€…æ¨¡å¼](https://www.martinfowler.com/bliki/StranglerApplication.html)æ˜¯ä¸€ç§é€æ¸è¿ç§»é—ç•™ç³»ç»Ÿçš„æŠ€æœ¯ï¼Œéšç€å¾®æœåŠ¡çš„æŒ‡æ•°çº§æµè¡Œè€Œæµè¡Œã€‚åœ¨è¿™ç§æ¨¡å¼ä¸­ï¼ŒæœåŠ¡ä½œä¸º*çš„é—¨é¢*ï¼Œæ‹¦æˆªæ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶å°†å®ƒä»¬è·¯ç”±åˆ°é—ç•™æœåŠ¡æˆ–æ–°æœåŠ¡ã€‚

å®¢æˆ·ç«¯ç»§ç»­ä½¿ç”¨ç›¸åŒçš„ç•Œé¢ï¼Œä¸çŸ¥é“è¿ç§»å°†å¯èƒ½çš„å½±å“å’Œé£é™©é™è‡³æœ€ä½ã€‚

[![](../Images/ae1765ffb0c224bd23e74d0c27ec80ab.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--sntrcYr7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2Audq9hy-EMH0qSNZmjpBvlA.png) 

<figcaption>ALB åœ¨é—ç•™ app å’Œæ–°å¾®æœåŠ¡ä¹‹é—´è·¯ç”±è¯·æ±‚ã€‚</figcaption>

ä¸€ä¸ªåº”ç”¨è´Ÿè½½å¹³è¡¡å™¨å°†å®¢æˆ·çš„è¯·æ±‚è·¯ç”±åˆ°è®¢å•æœåŠ¡ï¼Œè¿™æ˜¯è¯¥å›¢é˜Ÿå®ç°çš„ç¬¬ä¸€ä¸ªå¾®æœåŠ¡ã€‚å…¶ä»–ä¸€åˆ‡éƒ½ç»§ç»­åˆ°é—ç•™åº”ç”¨ç¨‹åºã€‚

Orders æœ‰è‡ªå·±çš„æ•°æ®å­˜å‚¨ï¼Œå¹¶å®ç°è®¢å•çš„æ‰€æœ‰ä¸šåŠ¡é€»è¾‘ã€‚å› ä¸ºé—ç•™åº”ç”¨ä¸Šçš„ä¸€äº›åŠŸèƒ½ä½¿ç”¨é¡ºåºï¼Œæˆ‘ä»¬éœ€è¦å°†æ•°æ®æ¨å›é—ç•™åº”ç”¨ä»¥ä¿æŒåŒæ­¥(ç±»ä¼¼äº[åè…è´¥å±‚](https://docs.microsoft.com/en-us/azure/architecture/patterns/anti-corruption-layer))ã€‚

[![](../Images/20859d7456fd55b7b5795ae5affdd2a5.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--44E7qPCx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2ALzhxzJ5M0zlNkgFm4SixrA.png) 

<figcaption>æ–°åŠŸèƒ½â€”æ’è¡Œæ¦œå¾®æœåŠ¡ç°å·²æ¨å‡ºã€‚</figcaption>

éšç€é¡¹ç›®çš„å‘å±•ï¼Œæ–°çš„ç‰¹æ€§å‡ºç°äº†ï¼Œæˆ‘ä»¬åˆ›å»ºäº†æ–°çš„æœåŠ¡ã€‚

æ’è¡Œæ¦œæœåŠ¡ç°å·²æ¨å‡ºã€‚è¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„åŠŸèƒ½ï¼Œç”±å…¨æ–°çš„*å‚ä¸å›¢é˜Ÿ*åˆ›å»ºï¼Œå› æ­¤æ— éœ€ä¸ä¼ ç»Ÿåº”ç”¨ç¨‹åºäº¤äº’ã€‚

å›¢é˜Ÿå°†ç»§ç»­åˆ›å»ºæ–°åŠŸèƒ½ï¼Œå¹¶å°†ç°æœ‰åŠŸèƒ½ç§»æ¤åˆ°æ–°æœåŠ¡ä¸­ã€‚å½“æ‰€æœ‰å¿…éœ€çš„åŠŸèƒ½éƒ½ä»é—ç•™çš„æ•´ä½“å¼åº”ç”¨ç¨‹åºä¸­æ·˜æ±°åï¼Œå®ƒå°±å¯ä»¥é€€å½¹äº†ã€‚

***æ³¨æ„äº‹é¡¹:****å¤–è§‚*ä¸æ–°æœåŠ¡ä¸€èµ·ä¸æ–­å‘å±•ã€‚ä¸€äº›æ•°æ®å­˜å‚¨æœ‰å¯èƒ½è¢«æ–°çš„å’Œé—ç•™çš„æœåŠ¡ä½¿ç”¨ã€‚æ–°çš„æœåŠ¡åº”è¯¥ä»¥ä¸€ç§å®¹æ˜“è¢«æˆªå–çš„æ–¹å¼æ¥æ„å»ºã€‚åœ¨æŸä¸ªæ—¶å€™ï¼Œè¿ç§»åº”è¯¥å·²ç»å®Œæˆï¼Œæ‰¼æ€è€…*å¤–è§‚*è¦ä¹ˆæ¶ˆå¤±ï¼Œè¦ä¹ˆæ¼”å˜æˆç½‘å…³æˆ–é€‚é…å™¨ã€‚

#### [](#queuebased-load-leveling)åŸºäºé˜Ÿåˆ—çš„è´Ÿè½½å‡è¡¡

> â€œè´Ÿè½½å¯èƒ½æ˜¯ä¸å¯é¢„æµ‹çš„ï¼Œå½“å‡ºç°é—´æ­‡æ€§çš„é«˜è´Ÿè½½æ—¶ï¼Œä¸€äº›æœåŠ¡æ— æ³•æ‰©å±•ã€‚éœ€æ±‚é«˜å³°å¯èƒ½å¯¼è‡´è¿‡è½½ï¼Œæ·¹æ²¡ä¸‹æ¸¸æœåŠ¡ï¼Œå¯¼è‡´å®ƒä»¬å¤±è´¥ã€‚
> 
> åœ¨æœåŠ¡ä¹‹é—´å¼•å…¥ä¸€ä¸ªé˜Ÿåˆ—ä½œä¸ºç¼“å†²åŒºå¯ä»¥ç¼“è§£è¿™äº›é—®é¢˜ã€‚å­˜å‚¨æ¶ˆæ¯å¹¶å…è®¸æ¶ˆè´¹è€…ä»¥è‡ªå·±çš„é€Ÿåº¦å¤„ç†è´Ÿè½½ã€‚"

å€ŸåŠ©é˜Ÿåˆ—æ¥ç¼“å†²æœåŠ¡æ˜¯éå¸¸å¸¸è§çš„ã€‚åœ¨å¾®è½¯çš„äº‘æ¶æ„æ¨¡å¼ä¸­ï¼Œå®ƒè¢«ç§°ä¸º[åŸºäºé˜Ÿåˆ—çš„è´Ÿè½½å‡è¡¡æ¨¡å¼](https://docs.microsoft.com/en-us/azure/architecture/patterns/queue-based-load-leveling)ï¼Œå´”ç°ç§°ä¹‹ä¸º[è§£è€¦è°ƒç”¨](https://read.acloud.guru/applying-the-decoupled-invocation-pattern-with-aws-lambda-2f5f7e78d18)ï¼Œæ°é‡Œç±³Â·æˆ´åˆ©ç§°ä¹‹ä¸º[å¯æ‰©å±• Webhook](https://www.jeremydaly.com/serverless-microservice-patterns-for-aws/#scalablewebhook) ã€‚

é˜Ÿåˆ—å°†*ä»»åŠ¡*ä»*æœåŠ¡ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œ*åˆ›å»ºäº†ä¸€ä¸ªç¼“å†²åŒºæ¥ä¿å­˜å¯¹æ‰©å±•æ€§è¾ƒå·®çš„åç«¯æˆ–ç¬¬ä¸‰æ–¹æœåŠ¡çš„è¯·æ±‚ã€‚

æ— è®ºè¯·æ±‚é‡æœ‰å¤šå¤§ï¼Œå¤„ç†è´Ÿè½½éƒ½æ˜¯ç”±ä½¿ç”¨è€…é©±åŠ¨çš„ã€‚ä½å¹¶å‘å’Œæ‰¹é‡å¤§å°å¯ä»¥æ§åˆ¶å·¥ä½œè´Ÿè½½ã€‚

[![](../Images/d767d21824ba8359f578210045f27ada.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--4l--rYJT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2A-6QcmhOklq1FcD81Fof_iQ.png)

åœ¨ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªè¿ç§»å·¥ä½œè¿›ç¨‹ï¼Œå®ƒè¯»å– Elasticsearch ç´¢å¼•çš„å†…å®¹ã€‚Elasticsearch å®ƒå¾ˆå¿«ã€‚å·¥äººå¯ä»¥é˜…è¯»æˆåƒä¸Šä¸‡çš„æ–‡ç« ï¼Œå¹¶è·å–å®ƒä»¬çš„ä¾èµ–å…³ç³»(ä½œè€…ã€ç±»åˆ«ã€æ ‡ç­¾ã€èŠ‚ç›®ã€èµ„äº§ç­‰)ã€‚)ä¸åˆ°ä¸€ç§’é’Ÿã€‚

åœ¨å³ä¾§ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªéœ€è¦æ¥æ”¶æ‰€æœ‰å†…å®¹çš„æœåŠ¡ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ç¯‡æ–‡ç« ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»ä»¥ç‰¹å®šçš„é¡ºåºåˆ›å»ºå®ƒçš„æ‰€æœ‰å…³ç³»ï¼Œä»”ç»†æ£€æŸ¥å®ƒä»¬æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”éœ€è¦æ›´æ–°ï¼Œè¿™æ¯”è¾ƒæ…¢ã€‚å³ä½¿æˆ‘ä»¬æ¨ªå‘æ‰©å±•æœåŠ¡â€”â€”æˆ‘ä»¬ç¡®å®è¿™æ ·åšäº†â€”â€”å®ƒèƒŒåçš„å…³ç³»æ•°æ®åº“ä¹Ÿä¼šæˆä¸ºç“¶é¢ˆã€‚

åœ¨æŸä¸ªç‚¹(å¤§çº¦ 100k åˆ° 500k ç¯‡æ–‡ç« )ä¹‹åï¼ŒæŸ¥è¯¢æ•°æ®åº“ä¼šæ…¢ä¸‹æ¥ï¼Œå› ä¸ºåœ¨[æ‹¥æœ‰å’Œå±äºå¤š](http://archive.oreilly.com/oreillyschool/courses/Rails2/many_to_many.html)å…³ç³»è¡¨ä¸Šæœ‰ä¸€äº›é”å®šã€‚

é€šè¿‡é™åˆ¶æ‰¹å¤„ç†å¤§å°å’Œå¹¶å‘è¿è¡Œçš„å·¥ä½œçº¿ç¨‹æ•°é‡ï¼Œæˆ‘ä»¬å¯ä»¥ç»´æŒä¸€ä¸ªç¼“æ…¢ä½†ç¨³å®šçš„æµç¨‹ï¼Œä»è€Œå‡å°‘æ•°æ®åº“ä¸­çš„é”äº‰ç”¨ã€‚

[![](../Images/49fb6da1d94ca4f7ee60984a946b7031.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--KQkH5O55--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AH_dlsZOyQcka3GbEPiAh-Q.png) 

<figcaption>ç¼“å†²ç¹å¿™çš„å…¬å…± API çš„è¯·æ±‚ã€‚</figcaption>

å¦ä¸€ä¸ªå¸¸è§çš„ä¾‹å­æ˜¯ä½¿ç”¨ SQS æ¥ç¼“å†² API è¯·æ±‚ï¼Œä»¥åˆ†æ‘Šæµé‡å³°å€¼â€”â€”å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚

ç«¯ç‚¹å‘å®¢æˆ·ç«¯è¿”å› [202 â€”æ¥å—çš„](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/202)ï¼Œå¸¦æœ‰äº‹åŠ¡ id å’Œç»“æœçš„ä½ç½®ã€‚åœ¨å®¢æˆ·ç«¯ï¼ŒUI å¯ä»¥å‘æ¨¡æ‹Ÿé¢„æœŸè¡Œä¸ºçš„ç”¨æˆ·æä¾›åé¦ˆã€‚

è¯¥æœåŠ¡å¯ä»¥è‡ªè¡Œåœ¨åå°å¤„ç†è¯·æ±‚ã€‚å³ä½¿æ¶‰åŠé•¿æ—¶é—´è¿è¡Œçš„è¿›ç¨‹ï¼Œå®¢æˆ·ç«¯è´Ÿè½½çš„å¢åŠ ä¹Ÿä¸ä¼šå½±å“ç³»ç»Ÿçš„ååé‡å’Œå“åº”èƒ½åŠ›ã€‚

***æ³¨æ„äº‹é¡¹:*** å½“æœåŠ¡éœ€è¦åŒæ­¥å“åº”(ç­‰å¾…å›å¤)æ—¶ï¼Œè¿™ç§æ¨¡å¼æ²¡æœ‰å¸®åŠ©ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸ä½¿ç”¨å¹¶å‘é™åˆ¶ä¼šé™ä½æ¨¡å¼çš„æœ‰æ•ˆæ€§:AWS Lambda å’Œ Kinesis å¯ä»¥å¿«é€Ÿä¼¸ç¼©ï¼Œå‹å€’å¼¹æ€§è¾ƒå°æˆ–ä¼¸ç¼©è¾ƒæ…¢çš„ä¸‹æ¸¸æœåŠ¡ã€‚Zalando çš„ API æŒ‡å—åŒ…å«äº†ä¸€ä¸ªå…³äºäº‹ä»¶çš„[å®Œæ•´ç« èŠ‚](https://opensource.zalando.com/restful-api-guidelines/#events)ï¼Œè®¨è®ºäº†è¿™ç§æ¨¡å¼çš„ä¸€äº›é‡è¦è€ƒè™‘äº‹é¡¹ã€‚

#### [](#readheavy-reporting-engine)è¯»-é‡æŠ¥å‘Šå¼•æ“

> â€œå¯¹äºè¯»å–é‡å¤§çš„åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œè¾¾åˆ°ä¸‹æ¸¸æ•°æ®å¼•æ“çš„æé™æ˜¯å¾ˆå¸¸è§çš„ï¼Œè¿™äº›å¼•æ“ä¸æ˜¯ä¸“é—¨é’ˆå¯¹å®¢æˆ·ä½¿ç”¨çš„ä¸åŒæŸ¥è¯¢æ¨¡å¼çš„ã€‚
> 
> ç¼“å­˜æ•°æ®å¹¶ä¸ºæŸ¥è¯¢æœ€å¤šçš„æ•°æ®åˆ›å»ºä¸“é—¨çš„è§†å›¾æœ‰åŠ©äºå‡è½»è¯»å–é‡å¤§çš„æœåŠ¡çš„è´Ÿè½½å½±å“ã€‚"

ä»¥å‰çš„æ¨¡å¼æœ‰åŠ©äºè§£å†³å°†æ•°æ®å’Œäº‹ä»¶ä»ä¸€ä¸ªæœåŠ¡æ¨é€åˆ°å¦ä¸€ä¸ªæœåŠ¡çš„é—®é¢˜ï¼Œä¼˜åŒ–å†™å…¥å¯†é›†å‹æœåŠ¡çš„è§„æ¨¡ã€‚è¿™ç§æ¨¡å¼é’ˆå¯¹å®¢æˆ·éœ€è¦çš„ä¸åŒçš„*è®¿é—®*å’Œ*æŸ¥è¯¢æ¨¡å¼*ä¼˜åŒ–æ•°æ®ï¼Œä¼˜åŒ–è¯»å¯†é›†å‹æœåŠ¡çš„è§„æ¨¡ã€‚

å¤§å¤šæ•°åº”ç”¨ç¨‹åºéƒ½æ˜¯è¯»å–å¯†é›†å‹çš„ã€‚å¯¹äºæˆ‘ä»¬çš„å¤§å‹åª’ä½“å®¢æˆ·ç«¯æ¥è¯´å°¤å…¶å¦‚æ­¤ï¼Œåœ¨è¿™äº›å®¢æˆ·ç«¯ä¸­ï¼Œç”Ÿæˆå†…å®¹çš„ç”¨æˆ·è¿œè¿œå°‘äºæ¶ˆè´¹å†…å®¹çš„ç”¨æˆ·ã€‚å®ƒä»¬ä¹‹é—´çš„æ¯”ä¾‹å¯ä»¥å¾ˆå¤§ï¼Œæ¯”å¦‚ 1:100000ã€‚

ç¼“å­˜æ•°æ®å’Œåˆ›å»ºæœ€é¢‘ç¹è®¿é—®æ¨¡å¼çš„ä¸“é—¨è§†å›¾æœ‰åŠ©äºæœåŠ¡æœ‰æ•ˆæ‰©å±•ã€‚

ç¼“å­˜æ„å‘³ç€å°†ç»å¸¸ä½¿ç”¨çš„å†…å®¹ä¸´æ—¶å¤åˆ¶åˆ°å†…å­˜æˆ–å…±äº«å­˜å‚¨åº“ä¸­ã€‚[ç¼“å­˜æ•°æ®](https://docs.microsoft.com/en-us/azure/architecture/patterns/cache-aside)æ˜¯æé«˜æ€§èƒ½å’Œæ‰©å±•è¯»å–æœ€å¸¸ç”¨çš„ç­–ç•¥ä¹‹ä¸€ã€‚

åœ¨[ç‰©åŒ–è§†å›¾](https://docs.microsoft.com/en-us/azure/architecture/patterns/materialized-view)ä¸­ï¼Œæ•°æ®ä»¥ä¸€ç§ä¸ºæŸ¥è¯¢å’Œæ˜¾ç¤ºè€Œä¼˜åŒ–çš„æ–¹å¼è¢«å¤åˆ¶å’Œè½¬æ¢ã€‚ç‰©åŒ–è§†å›¾å¯ä»¥æ˜¯æ–°çš„è¡¨æˆ–å®Œå…¨ä¸åŒçš„æ•°æ®å­˜å‚¨ï¼Œå…¶ä¸­æ•°æ®è¢«æ˜ å°„ä¸ºä»¥æ–°çš„æ ¼å¼æ˜¾ç¤ºï¼Œæˆ–è€…è¢«é™åˆ¶ä¸ºæ•°æ®çš„ç‰¹å®šå­é›†ã€‚

ç‰©åŒ–è§†å›¾ä¹Ÿæœ‰åŠ©äºâ€œæ¡¥æ¥â€ä¸åŒçš„å­˜å‚¨ï¼Œä»¥åˆ©ç”¨å®ƒä»¬æ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚

ä½¿ç”¨[ç´¢å¼•è¡¨](https://docs.microsoft.com/en-us/azure/architecture/patterns/index-table),æ•°æ®è¢«å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„è¡¨ä¸­ï¼Œè¯¥è¡¨ä½¿ç”¨ç‰¹å®šäºå…¬å…±æŸ¥è¯¢çš„ä¸“ç”¨ç´¢å¼•ã€‚ä¸“é—¨åŒ–çš„ç´¢å¼•å¯ä»¥æ˜¯ç»„åˆé”®ã€è¾…é”®å’Œéƒ¨åˆ†éè§„èŒƒåŒ–çš„é”®ã€‚

[![](../Images/dcd939616fd4d2c20727b16dfb440035.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--ivbT47Je--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AhibCn1a_yqdkprm8TkgCbQ.png) 

<figcaption>ä½¿ç”¨ç‰©åŒ–è§†å›¾å’Œç´¢å¼•è¡¨è¿›è¡Œç¤¾äº¤ app ä¸Šæµè¡Œçš„æŸ¥è¯¢æ¨¡å¼ã€‚</figcaption>

Dynamo æµå’Œ lambda å‡½æ•°æ˜¯åˆ›å»ºä¸“é—¨åŒ–è§†å›¾çš„å®Œç¾å·¥å…·ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸‰ä¸ªç«¯ç‚¹â€”â€”æœç´¢ã€æ¨æ–‡å’Œæ—¶é—´è½´ã€‚æ¯ä¸€ç§éƒ½éœ€è¦ç¨å¾®ä¸åŒçš„æŸ¥è¯¢æ¨¡å¼ï¼Œå…¶ä¸­æ•°æ®éœ€è¦ä»¥ç‰¹å®šçš„æ–¹å¼è¿›è¡Œä¼˜åŒ–ã€‚

/search æŸ¥è¯¢ Elasticsearch ä¸­çš„ Tweets ç´¢å¼•ã€‚æä¾›è¯­éŸ³æœç´¢ã€é”™åˆ«å­—ã€ç›¸å…³æœ¯è¯­å’Œå»ºè®®ã€‚æ²¡æœ‰å¿…è¦ç´¢å¼•åŸå§‹æ¨æ–‡ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œå¯èƒ½åªåŒ…æ‹¬æ–‡æœ¬ã€ä½ç½®ã€åª’ä½“ URLâ€”â€”ä»¥è·å¾—æ¼‚äº®çš„é¢„è§ˆå’Œæ ‡ç­¾ã€‚æˆ‘ä»¬ä½¿ç”¨è¯¥æµè§¦å‘ TweetCreated ä¸Šçš„ lambdaï¼Œè¯¥ lambda å‰¥ç¦»æ‰€æœ‰æˆ‘ä»¬ä¸éœ€è¦çš„æ•°æ®ï¼Œå¹¶å¯¹ tweet è¿›è¡Œç´¢å¼•ã€‚

/timeline æ˜¯æ ¹æ®ç½‘ç»œä¸Šæœ€æœ‰è¶£çš„æ¨æ–‡ï¼Œä»¥åŠæˆ‘çš„äººè„‰æ´»åŠ¨åˆ›å»ºçš„ã€‚

æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª Dynamo è¡¨æ¥ä¿å­˜æœ€çƒ­é—¨çš„ Tweetsâ€”â€”ä¸€ä¸ªè¢«ç´¢å¼•çš„è¡¨é™åˆ¶åœ¨ 1000 ä¸ªè¢«æµè§ˆæœ€å¤šçš„æ¡ç›®ã€‚Tweets é€šè¿‡ TweetViewed äº‹ä»¶çš„æµè¿›è¡Œæ›´æ–°ã€‚lambda å‡½æ•°æ¥æ”¶äº‹ä»¶ï¼ŒæŸ¥è¯¢ Tweets é›†åˆï¼Œå¹¶ä¿å­˜ç»“æœã€‚

åœ¨åƒ [Neptune](https://aws.amazon.com/neptune/) è¿™æ ·çš„å›¾å½¢æ•°æ®åº“ä¸Šï¼Œè·å–æŸäººçš„è¿æ¥æ´»åŠ¨æ›´å®¹æ˜“ã€‚TweetCreated äº‹ä»¶è§¦å‘çš„å¦ä¸€ä¸ª lambda åœ¨ Neptune ä¸Šä¸ºæˆ‘ä»¬çš„è¿æ¥çš„æ¨æ–‡æµåˆ›å»ºäº†ä¸€ä¸ªç»´æŠ¤æ´»åŠ¨çš„è®°å½•ã€‚

åœ¨å¾®è½¯çš„äº‘æ¶æ„ä¸­ï¼Œè¿™æ˜¯ä¸åŒæ¨¡å¼çš„æ··åˆâ€”â€”æ•°æ®ç®¡é“ã€[ç¼“å­˜å¤‡ç”¨](https://docs.microsoft.com/en-us/azure/architecture/patterns/cache-aside)ã€[ç‰©åŒ–è§†å›¾](https://docs.microsoft.com/en-us/azure/architecture/patterns/materialized-view)å’Œ[ç´¢å¼•è¡¨](https://docs.microsoft.com/en-us/azure/architecture/patterns/index-table)ã€‚

***æ³¨æ„äº‹é¡¹:*** å¤„ç†ç¼“å­˜å¯ä»¥[ç¡¬](https://en.wikipedia.org/wiki/Cache_invalidation)ï¼Œåˆ‡è®°éµå¾ªè¡Œä¸š[æœ€ä½³å®è·µ](https://en.wikipedia.org/wiki/Cache_invalidation)ã€‚ç»´æŠ¤ç‰©åŒ–è§†å›¾å’Œç´¢å¼•è¡¨å¯èƒ½ä¼šå¾ˆå¤æ‚ã€‚å¤åˆ¶æ•°æ®ä¼šå¢åŠ æˆæœ¬ã€å·¥ä½œé‡å’Œé€»è¾‘æ€§ã€‚å¯¹äºéå¸¸å¤§çš„æ•°æ®é›†ï¼Œå¾ˆéš¾ä¿æŒä¸€è‡´æ€§ï¼Œä¿æŒæ•°æ®åŒæ­¥ä¼šé™ä½ç³»ç»Ÿé€Ÿåº¦ã€‚è§†å›¾å’Œç´¢å¼•è¡¨ä¸å®Œå…¨ä¸€è‡´ã€‚

#### [](#streams-and-pipelines)æºªæµå’Œç®¡é“

> ä¸€ä¸ªè¿ç»­çš„æµå¤„ç†å™¨ï¼Œå¯æ•è·å¤§é‡äº‹ä»¶æˆ–æ•°æ®ï¼Œå¹¶åœ¨å®ƒä»¬åˆ°è¾¾æ—¶å°½å¿«å°†å…¶åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡æˆ–æ•°æ®å­˜å‚¨

æˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§æ˜¯å¤„ç†æ•°æ®æµï¼Œå…¶é€Ÿåº¦ä¸æ•°æ®ç”Ÿæˆçš„é€Ÿåº¦ä¸€æ ·å¿«ï¼Œå¹¶ä¸”å¯ä»¥å¿«é€Ÿæ‰©å±•ä»¥æ»¡è¶³å¤§é‡äº‹ä»¶çš„éœ€æ±‚ã€‚ä¸‹æ¸¸æœåŠ¡æ¥æ”¶æµå¹¶åº”ç”¨ä¸šåŠ¡é€»è¾‘æ¥è½¬æ¢ã€åˆ†ææˆ–åˆ†å‘æ•°æ®ã€‚

å¸¸è§çš„ä¾‹å­æ˜¯æ•æ‰ç”¨æˆ·è¡Œä¸ºï¼Œå¦‚ç‚¹å‡»æµå’Œç”¨æˆ·ç•Œé¢äº¤äº’ã€‚æ•°æ®ç”¨äºåˆ†æã€‚ç‰©è”ç½‘ä¼ æ„Ÿå™¨çš„æ•°æ®ç­‰ã€‚

[![](../Images/4b2c5ecc383cb826438cfb86390a094a.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--04y0CDd0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2A0oPw3DvpApBTZ50HNrnw-g.png) 

<figcaption>ä½¿ç”¨ Kinesis Streamsã€Analytics å’Œ Athena æ„å»ºæ•°æ®ç®¡é“ã€‚</figcaption>

åœ¨ç¤ºä¾‹ä¸­ï¼Œa [Kinesis æµ](https://aws.amazon.com/kinesis/data-streams/)æ¥æ”¶æ¥è‡ªæœåŠ¡ a çš„äº‹ä»¶ã€‚æ•°æ®ä½¿ç”¨ lambda å‡½æ•°è¿›è¡Œè½¬æ¢ï¼Œå­˜å‚¨åœ¨ DynamoDB ä¸­ä»¥ä¾¿å¿«é€Ÿè¯»å–ï¼Œå¹¶åœ¨ Elasticsearch ä¸­å»ºç«‹ç´¢å¼•ä»¥è·å¾—è‰¯å¥½çš„æœç´¢ç”¨æˆ·ä½“éªŒã€‚

[Kinesis Analytics](https://aws.amazon.com/kinesis/data-analytics/) æä¾›å¿«é€Ÿ[å®æ—¶æŸ¥è¯¢æµä¸­çš„æ•°æ®](https://docs.aws.amazon.com/kinesisanalytics/latest/dev/streaming-sql-concepts.html)ã€‚é€šè¿‡ S3 é›†æˆï¼Œæ‰€æœ‰æ•°æ®éƒ½è¢«å­˜å‚¨èµ·æ¥ï¼Œä»¥å¤‡å°†æ¥åˆ†æå’ŒçœŸæ­£æ´å¯Ÿã€‚ [Athena](https://aws.amazon.com/athena/) æä¾›æ‰€æœ‰å†å²æ•°æ®çš„æŸ¥è¯¢ã€‚

***æ³¨æ„äº‹é¡¹:*** æµå¤„ç†å¯èƒ½ä¼šå¾ˆæ˜‚è´µï¼Œå¦‚æœæ•°æ®é›†å¾ˆå°æˆ–è€…åªæœ‰å‡ ä¸ªäº‹ä»¶ï¼Œå¯èƒ½ä¸å€¼å¾—ã€‚æ‰€æœ‰äº‘æä¾›å•†éƒ½æä¾›æ•°æ®ç®¡é“ã€æµå¤„ç†å’Œåˆ†æäº§å“ï¼Œä½†å®ƒä»¬å¯èƒ½æ— æ³•ä¸ä¸å±äºå…¶ç”Ÿæ€ç³»ç»Ÿçš„æœåŠ¡å¾ˆå¥½åœ°é›†æˆã€‚

#### [](#fanout-and-fanin)æ‰‡å‡ºå’Œæ‰‡å…¥

> â€œå¤§å‹ä½œä¸šæˆ–ä»»åŠ¡å¾ˆå®¹æ˜“è¶…è¿‡ Lambda å‡½æ•°çš„æ‰§è¡Œæ—¶é—´é™åˆ¶ã€‚ä½¿ç”¨åˆ†è€Œæ²»ä¹‹çš„ç­–ç•¥æœ‰åŠ©äºç¼“è§£è¿™ä¸ªé—®é¢˜ã€‚
> 
> è¿™é¡¹å·¥ä½œç”±ä¸åŒçš„ lambda å·¥ä½œäººå‘˜åˆ†æ‹…ã€‚æ¯ä¸ªå·¥äººå°†å¼‚æ­¥å¤„ç†ä½œä¸šï¼Œå¹¶å°†ç»“æœçš„å­é›†ä¿å­˜åœ¨ä¸€ä¸ªå…¬å…±å­˜å‚¨åº“ä¸­ã€‚
> 
> æœ€ç»ˆç»“æœå¯ä»¥ç”±å¦ä¸€ä¸ªæµç¨‹æ”¶é›†å’Œæ‹¼æ¥åœ¨ä¸€èµ·ï¼Œä¹Ÿå¯ä»¥ä»å­˜å‚¨åº“æœ¬èº«æŸ¥è¯¢ã€‚"

**æ‰‡å‡º**å’Œ**æ‰‡å…¥**æ˜¯æŒ‡å°†ä¸€ä¸ªä»»åŠ¡åˆ†è§£æˆå­ä»»åŠ¡ï¼Œå¹¶å‘æ‰§è¡Œå¤šä¸ªåŠŸèƒ½ï¼Œç„¶åèšåˆç»“æœã€‚

å®ƒä»¬æ˜¯ä¸€èµ·ä½¿ç”¨çš„ä¸¤ç§æ¨¡å¼ã€‚æ‰‡å‡ºæ¨¡å¼æ¶ˆæ¯è¢«ä¼ é€’ç»™å·¥ä½œäººå‘˜ï¼Œæ¯ä¸ªå·¥ä½œäººå‘˜æ¥æ”¶åŸå§‹ä»»åŠ¡çš„ä¸€ä¸ªåˆ†åŒºå­ä»»åŠ¡ã€‚æ‰‡å…¥æ¨¡å¼æ”¶é›†æ‰€æœ‰å•ä¸ªå·¥ä½œäººå‘˜çš„ç»“æœï¼Œèšåˆå®ƒï¼Œå­˜å‚¨å®ƒï¼Œå¹¶å‘é€ä¸€ä¸ªè¡¨ç¤ºå·¥ä½œå®Œæˆçš„äº‹ä»¶ã€‚

[![](../Images/91b1d309b0a2b688aa87c36b45f5129e.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Mwrdm2Hq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2A8bBnJqOLyZmkiwNeSpUVHQ.png) 

<figcaption>æ•°å­—èµ„äº§ç®¡ç†ç³»ç»Ÿ(DAM)çš„åç«¯å¼•æ“â€”â€”æ— æœåŠ¡å™¨å·¥ä½œè´Ÿè½½çš„ç»å…¸ä¾‹å­ã€‚</figcaption>

è°ƒæ•´å›¾ç‰‡å¤§å°æ˜¯[ä¸­çš„](https://read.acloud.guru/serverless-image-optimization-and-delivery-510b6c311fe5)[ä¹‹ä¸€](https://cloudonaut.io/serverless-image-resizing-at-any-scale/)æœ€å¸¸è§çš„ [ä¸­çš„](https://sketchboard.io/blog/serverless-image-resize-with-amazon-lambda) [ä¾‹å­](https://aws.amazon.com/solutions/serverless-image-handler/)å…³äºä½¿ç”¨æ— æœåŠ¡å™¨ã€‚è¿™å°±æ˜¯æ‰‡å‡ºæ–¹æ³•ã€‚

å®¢æˆ·ç«¯å°†åŸå§‹å›¾åƒä¸Šä¼ åˆ°èµ„äº§ S3 å­˜å‚¨æ¡¶ã€‚API ç½‘å…³æœ‰ä¸€ä¸ªå¤„ç†ç›´æ¥ä¸Šä¼ åˆ° S3 çš„é›†æˆã€‚

Î»å‡½æ•°ç”± S3 è§¦å‘ã€‚è®©ä¸€ä¸ª lambda å‡½æ•°åšæ‰€æœ‰çš„å·¥ä½œä¼šå¯¼è‡´é™åˆ¶é—®é¢˜ã€‚ç›¸åï¼Œlambda å°†èµ„äº§åˆ›å»ºäº‹ä»¶æ¨é€åˆ° SNSï¼Œä»¥ä¾¿æˆ‘ä»¬çš„å¤„ç† lambda å¼€å§‹å·¥ä½œã€‚

å³è¾¹æœ‰ä¸‰ä¸ªç”¨äºè°ƒæ•´å¤§å°çš„ lambda å‡½æ•°ã€‚æ¯ä¸ªéƒ½åˆ›å»ºä¸åŒçš„å›¾åƒå¤§å°ï¼Œå°†ç»“æœå†™å…¥ Renditions æ¡¶ã€‚

åº•éƒ¨çš„ lambda ä»åŸå§‹æ¥æºè¯»å–å…ƒæ•°æ®â€”â€”ä½ç½®ã€ä½œè€…ã€æ—¥æœŸã€ç›¸æœºã€å¤§å°ç­‰ã€‚å¹¶å°†æ–°èµ„äº§æ·»åŠ åˆ° DynamoDB ä¸Šçš„ DAM çš„èµ„äº§è¡¨ä¸­ï¼Œä½†æ²¡æœ‰å°†å…¶æ ‡è®°ä¸ºå¯ä¾›ä½¿ç”¨ã€‚æ™ºèƒ½è‡ªåŠ¨æ ‡è®°ã€æ–‡æœ¬æå–å’Œå†…å®¹å®¡æ ¸å¯ä»¥æ·»åŠ åˆ°ç¨åä½¿ç”¨ [Rekognition](https://aws.amazon.com/rekognition/image-features/) å¤„ç†çš„ lambdas ä¸­ã€‚

[![](../Images/217e5d6d362f3875e30032063b85336a.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--qAx3mzoS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AQMsQOv8R3JB4XfLx2WJ80Q.png) 

<figcaption>ç»ç† App é€šè¿‡ DAM API æ¶ˆè€—èµ„äº§ã€‚</figcaption>

å¯¹äº DAM çš„æ‰‡å…¥éƒ¨åˆ†ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª lambda å‡½æ•°ï¼Œå®ƒç›‘å¬ renditions æ¡¶ï¼Œå½“æ¡¶ä¸Šæœ‰å˜åŒ–æ—¶ï¼Œå®ƒæ£€æŸ¥æ˜¯å¦æ‰€æœ‰çš„ renditions éƒ½å‡†å¤‡å¥½äº†ï¼Œå¹¶æ ‡è®°èµ„äº§å¯ä¾›ä½¿ç”¨ã€‚

ç”±äºæ— æœåŠ¡å™¨çš„äº‹ä»¶é©±åŠ¨ç‰¹æ€§ï¼Œä»¥åŠ lambda å‡½æ•°çš„èµ„æºé™åˆ¶ï¼Œæˆ‘ä»¬æ›´å–œæ¬¢è¿™ç§ç¼–æ’[è€Œä¸æ˜¯ç¼–æ’](https://specify.io/concepts/microservices#choreography)ã€‚

***æ³¨æ„äº‹é¡¹*** :å¹¶ä¸æ˜¯æ‰€æœ‰çš„å·¥ä½œè´Ÿè½½éƒ½å¯ä»¥è¢«åˆ†å‰²æˆè¶³å¤Ÿå°çš„å—ç”¨äº lambda å‡½æ•°ã€‚ä¸¤ä¸ªæµç¨‹éƒ½åº”è¯¥è€ƒè™‘å¤±è´¥ï¼Œå¦åˆ™ä»»åŠ¡å¯èƒ½ä¼šæ°¸è¿œæ— æ³•å®Œæˆã€‚åˆ©ç”¨ lambda çš„[é‡è¯•ç­–ç•¥](https://docs.aws.amazon.com/lambda/latest/dg/retries-on-errors.html)å’Œ[æ­»ä¿¡é˜Ÿåˆ—](https://docs.aws.amazon.com/lambda/latest/dg/dlq.html)ã€‚ä»»ä½•è¶…è¿‡ 15 åˆ†é’Ÿçš„ä»»åŠ¡éƒ½åº”è¯¥ä½¿ç”¨å®¹å™¨è€Œä¸æ˜¯ lambda å‡½æ•°ï¼ŒåšæŒä½¿ç”¨*ç¼–æ’æ–¹æ³•*ã€‚

### [](#more-resources)æ›´å¤šèµ„æºğŸ“š

*   å¾®è½¯çš„ Azure Architecture Center æœ‰ä¸€ä¸ªå¹¿æ³›çš„äº‘æ¨¡å¼åˆ—è¡¨ï¼Œä¸€ä¸ªå…³äº T2 æœ€ä½³å®è·µçš„å¯é æŒ‡å—ï¼Œä¸€ä¸ªå…³äº T4 æ€§èƒ½åæ¨¡å¼çš„å¾ˆå¥½çš„æ¦‚è¿°å’Œä¸€äº›ä¾‹å­ã€‚
*   AWS è¿˜æ‹¥æœ‰å¤§é‡å…³äº[åˆ†å¸ƒå¼ç³»ç»Ÿç»„ä»¶](https://docs.aws.amazon.com/aws-technical-content/latest/microservices-on-aws/distributed-systems-components.html)ã€[ä¸€èˆ¬æ— æœåŠ¡å™¨](https://aws.amazon.com/serverless/)ã€[æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºåº“](https://aws.amazon.com/serverless/serverlessrepo/)ä¸­çš„ç¤ºä¾‹ä»¥åŠå‡ ä¸ª[ç½‘ç»œç ”è®¨ä¼šè§†é¢‘](https://aws.amazon.com/about-aws/events/monthlywebinarseries/on-demand/?awsf.ott-on-demand=categories%23serverless&awsf.ott-on-demand-master=categories%23serverless)çš„èµ„æºã€‚
*   æ°ç‘ç±³Â·æˆ´åˆ©æœ‰ä¸€ä¸ª[æ— æœåŠ¡å™¨æ¨¡å¼](https://medium.com/@jeremydaly/serverless-microservice-patterns-for-aws-6dadcd21bc02)çš„è¯¦ç»†åˆ—è¡¨ã€‚ä»–æ˜¯è½»é‡çº§ API æ¡†æ¶ [Lambda API](https://www.jeremydaly.com/projects/lambda-api/) å’Œç”¨äºç®¡ç† Lambda å‡½æ•°è¿æ¥çš„æ— æœåŠ¡å™¨ MySQL [æ¨¡å—](https://www.npmjs.com/package/serverless-mysql)çš„ä½œè€…ã€‚
*   [å´”ç°](https://medium.com/u/d00f1e6b06a2)æœ‰ä¸€å¨å…³äº[æ— æœåŠ¡å™¨](https://theburningmonk.com/topics/programming/aws/serverless/)çš„å†…å®¹ã€‚åŒ…æ‹¬[è®¾è®¡æ¨¡å¼](https://theburningmonk.com/topics/programming/aws/serverless/)ã€[æ€§èƒ½](https://theburningmonk.com/topics/programming/performance-programming/)ã€[çš„](https://www.protego.io/the-serverless-show-ft-yan-cui-do-we-ever-learn/)[æ‰¹æ¬¡](https://www.realworlddevops.com/episodes/the-business-value-of-serverless-with-yan-cui)ã€[è§†å›¾](https://www.trek10.com/blog/think-faas-serverless-in-production/)çš„ä»¥åŠæ— æœåŠ¡å™¨ä¸Šçš„æœ€ä½³[è®­ç»ƒã€‚ä»–æ˜¯æ— æœåŠ¡å™¨åœºæ™¯ä¸­çš„å¿…é€‰é¡¹ã€‚](https://productionreadyserverless.com/)
*   è¿ˆå…‹Â·ç½—ä¼¯ç‰¹ [å†™](https://martinfowler.com/articles/serverless.html)[æ·±å…¥è®¨è®º](http://thoughtworks.libsyn.com/diving-into-serverless-architecture)æ— æœåŠ¡å™¨ã€‚
*   [è¨æ²™Â·â˜Â·ç±³å‹’æ—](https://medium.com/u/4858a304914)è°ˆè®º[æ— æœåŠ¡å™¨æ¶æ„æ¨¡å¼å’Œæœ€ä½³å®è·µ](https://www.infoq.com/presentations/serverless-architecture-patterns)ã€‚
*   ç½—å¸ƒÂ·æ ¼é²å°”åœ¨è¯ºå¾·æ–¯ç‰¹é¾™çš„[æ´»åŠ¨é‡‡è´­ï¼Œå…³äº](https://medium.com/tech-at-nordstrom/adventures-in-event-sourced-architecture-part-1-cc21d06187c7)[ä½ å¥½é›¶å”®çš„å¸–å­ï¼](https://read.acloud.guru/serverless-event-sourcing-at-nordstrom-ea69bd8fb7cc)ï¼Œè¿˜æœ‰å…³äº[ä»–ä»¬æ¶æ„çš„è§†é¢‘](https://www.youtube.com/watch?v=O7PTtm_3Os4)ã€‚
*   [æ–¯æ²ƒå¾·åˆ©](https://medium.com/u/280dd9543ba9)å’Œ[ç¦é‡Œæ–¯ç‰¹åšé¢œæ— è€»](https://medium.com/u/b8d1e8a0e0d8)å…³äº[é›†è£…ç®± vs æ— æœåŠ¡å™¨](https://read.acloud.guru/simon-wardley-is-a-big-fan-of-containers-despite-what-you-might-think-18c9f5352147)çš„è®¨è®ºã€‚
*   Gregor Hohpe çš„[ä¼ä¸šé›†æˆæ¨¡å¼](https://www.enterpriseintegrationpatterns.com/patterns/messaging/)æ˜¯ 65 ç§æŠ€æœ¯ç‹¬ç«‹æ¨¡å¼çš„ç›®å½•ï¼Œå…¶ä¸­ä¸€äº›æ¨¡å¼æ˜¯ä»–ç§»æ¤åˆ°è°·æ­Œäº‘ä¸­çš„[æ— æœåŠ¡å™¨æ¨¡å¼](https://www.enterpriseintegrationpatterns.com/ramblings/google_cloud_functions.html)ã€‚
*   Twitch çš„[ä¸º Twitch Scale è®¾è®¡çš„æ¨¡å¼](https://www.twitch.tv/videos/335360204?collection=8zVaW4B4YhU1pA)è§¦åŠäº†å‡ ä¸ªæœ‰è¶£çš„ç‚¹ï¼Œå…³äºå¯ä»¥åº”ç”¨äº Scale çš„æ¨¡å¼ã€‚
*   [Capital One Tech](https://medium.com/u/73d9ee9c08c8) [ã€ä½•æ—¶ååº” vs .ç¼–æ’ã€‘](https://medium.com/capital-one-tech/microservices-when-to-react-vs-orchestrate-c6b18308a14c)æ˜¯ä¸€ç¯‡å…³äºç¼–æ’ vs .ç¼–æ’çš„ä¼˜ç§€å¸–å­ã€‚