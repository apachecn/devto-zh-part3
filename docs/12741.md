# JS ä¸­çš„ CSS

> åŸæ–‡:[https://dev.to/thorning_m/css-in-js-il](https://dev.to/thorning_m/css-in-js-il)

æˆ‘ä»¥å‰çœ‹è¿‡ JS åº“ä¸­çš„ CSSï¼Œä½†ä¼¼ä¹æ€»æ˜¯æœ‰æ‰€å–èˆï¼Œè¿™ä½¿å¾—å®ƒä»¬çœ‹èµ·æ¥ä¸å¦‚ Sass ç”šè‡³æ™®é€š CSS æœ‰å¸å¼•åŠ›ã€‚ç„¶è€Œï¼Œæˆ‘æœ€è¿‘ä¸€ç›´åœ¨ç©[æƒ…æ„Ÿ](https://github.com/emotion-js/emotion),æˆ‘å¯¹æ­¤å°è±¡æ·±åˆ»ï¼Œæ‰€ä»¥æˆ‘æƒ³æˆ‘åº”è¯¥å†™ä¸€ä¸ªç®€çŸ­çš„å¸–å­æ¥å±•ç¤ºå®ƒèƒ½åšä»€ä¹ˆã€‚

æˆ‘ä¸€ç›´åœ¨ React ä¸Šä½¿ç”¨ Emotionï¼Œæœ‰ä¸€ä¸ª React ç‰¹å®šçš„åŒ…( *@emotion/core* )æä¾›äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œä½†æˆ‘ä¸€ç›´åœ¨ä½¿ç”¨ä»–ä»¬çš„æ¡†æ¶æ— å…³ç‰ˆæœ¬ã€‚æœ‰å‡ ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥ä½¿ç”¨æƒ…æ„Ÿï¼Œä¸‹é¢çš„ä¾‹å­ä½¿ç”¨äº†æœ€é€‚åˆæˆ‘çš„æ–¹æ³•ï¼Œå¦‚æœä½ å¯¹å®ƒè¿˜èƒ½åšä»€ä¹ˆæ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹çœ‹ä»–ä»¬çš„[æ–‡æ¡£](https://emotion.sh/docs/introduction)ã€‚

## [](#basic-usage)åŸºæœ¬ç”¨æ³•

Emotion ä½¿ç”¨[æ ‡è®°çš„æ¨¡æ¿](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#Tagged_templates)åˆ›å»ºä¸€ä¸ª CSS ç±»ï¼Œç„¶ååº”ç”¨äºå…ƒç´ ã€‚ä¸‹é¢æ˜¯å°†æ ·å¼åº”ç”¨åˆ° React ç»„ä»¶çš„åŸºæœ¬æ¨¡å¼:

```
import React from 'react'
import { css } from 'emotion'

export default function TestComponent(props) {
  return (
    <div
      className={css`
        background: blue;
        border: 1px solid red;
        max-width: 300px;
      `}
    >
      Hello
    </div>
  )
} 
```

è¯·æ³¨æ„ï¼Œä¼ é€’ç»™æ ‡è®°æ¨¡æ¿çš„å­—ç¬¦ä¸²æ˜¯å®é™…çš„ CSSï¼Œæ²¡æœ‰éª†é©¼å¤§å°å†™çš„é”®ï¼Œå€¼ä¸éœ€è¦ç”¨å•å¼•å·æ‹¬èµ·æ¥ï¼Œè¡Œä»¥åˆ†å·ç»“æŸã€‚èµ·åˆæˆ‘å¾ˆå¤±æœ›ï¼Œå› ä¸º VS ä»£ç ä¸­çš„è¯­æ³•çªå‡ºæ˜¾ç¤ºè¢«æä¹±äº†ï¼Œä½†æˆ‘æ·»åŠ äº† [Babel Javascript](https://marketplace.visualstudio.com/items?itemName=mgmcdermott.vscode-language-babel) æ‰©å±•ï¼Œå®ƒæ ¼å¼åŒ– CSSï¼Œå°±å¥½åƒå®ƒåœ¨*ä¸­ä¸€æ ·ã€‚css* æ–‡ä»¶ï¼Œæ‰€ä»¥ç°åœ¨çœ‹èµ·æ¥ä¸é”™ã€‚ğŸ‘

[![vs code syntax highlighting](../Images/15bcb6fa15717493b7d6a69fc5da9915.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--WCF5buev--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://hellocode.dev/syntax-29bc790a0952e988e831f0a979550e91.jpg)

å¦‚æœæ‚¨æŸ¥çœ‹æ ‡è®°ï¼Œæ‚¨å¯ä»¥çœ‹åˆ° Emotion ä¸ºå…ƒç´ åˆ†é…äº†ä¸€ä¸ªç±»ï¼Œå¹¶é™„åŠ äº†ä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ã€‚

[![divs with classes](../Images/f2d4b5fe7bddf921b917307980c27a75.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--fy-2WiyF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://hellocode.dev/css_classnames-74f503558466dcf9d480016738d9a744.jpg)

è¿™å°†ä½ çš„ CSS é™åˆ¶åœ¨å®ƒæ‰€åº”ç”¨çš„å…ƒç´ èŒƒå›´å†…ï¼Œå› æ­¤å®ƒä¸ä¼šæ³„æ¼åˆ°å…¶ä»–ç»„ä»¶ï¼Œä½¿ä½ çš„æ ·å¼*åŸºäºç»„ä»¶*è€Œä¸æ˜¯åŸºäº*æ–‡æ¡£*ï¼Œè¿™æ›´é€‚åˆ React åº”ç”¨ç¨‹åºçš„ç¼–å†™æ–¹å¼ã€‚å¦‚æœæ‚¨æƒ³è®¾ç½®å…¨å±€æ ·å¼ï¼Œé‚£ä¹ˆ Emotion æœ‰ä¸€ä¸ªæ‚¨å¯ä»¥ä½¿ç”¨çš„[å…¨å±€ç»„ä»¶](https://emotion.sh/docs/globals)ï¼Œé™¤äº†ç»„ä»¶çº§æ ·å¼ä¹‹å¤–ï¼Œæ²¡æœ‰ä»€ä¹ˆå¯ä»¥é˜»æ­¢æ‚¨ä½¿ç”¨å…¨å±€æ ·å¼è¡¨ã€‚

æˆ‘ä¸€å¼€å§‹æŠŠæˆ‘çš„é£æ ¼ç›´æ¥å†™åœ¨ JSX ä¸Šï¼Œä½†æ˜¯äº‹æƒ…å¼€å§‹å˜å¾—æ··ä¹±ã€‚å¹¸è¿çš„æ˜¯ï¼Œæå–è§„åˆ™å¹¶å°†å…¶ç§»åŠ¨åˆ° JSX ä¹‹ä¸Šç”šè‡³ç§»åŠ¨åˆ°å®ƒä»¬è‡ªå·±çš„æ–‡ä»¶ä¸­çœŸçš„å¾ˆå®¹æ˜“:

```
import React from 'react'
import { css } from 'emotion'

export default function TestComponent(props) {
  const styling = css`
    background: blue;
    border: 1px solid red;
    max-width: 300px;
  `
  return (
    <div
      className={styling}
    >
      Hello
    </div>
  )
} 
```

## [](#just-like-css)å°±åƒ CSS ä¸€æ ·

å¯ä»¥åšåµŒå¥—ç»„ä»¶ã€ä¼ªç±»å’Œåª’ä½“æŸ¥è¯¢:

```
const styling = css`
  background: blue;
  border: 1px solid red;
  max-width: 300px;

  a {
    color: black;
  }
  &:hover {
    background: pink;
  }
  @media (max-width: 400px) {
    font-size: 12px;
  }
` 
```

å¦‚æœä½ æ£€æŸ¥æƒ…æ„Ÿæ–‡æ¡£ï¼Œå¦‚æœä½ æœ‰å¾ˆå¤šæ–­ç‚¹éœ€è¦å¤„ç†ï¼Œä½ å¯ä»¥ç”¨åª’ä½“æŸ¥è¯¢åšä¸€äº›éå¸¸èªæ˜çš„äº‹æƒ…ï¼Œæˆ‘ä¸ä¼šåœ¨è¿™é‡Œæ·±å…¥è®¨è®ºï¼Œä½†æ˜¯å¦‚æœä½ æ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹ä¸€çœ‹ã€‚

## [](#just-like-js)è·Ÿ JS ä¸€æ ·

å› ä¸ºè¿™äº›åªæ˜¯å­—ç¬¦ä¸²ï¼Œä½ å¯ä»¥åšæ’å€¼:

```
const baseStyle = css`
  width: 300px;
  border: 1px solid black;
`
const green = css` ${baseStyle} background: green;
  `
const blue = css` ${baseStyle} background: blue;
`
const red = css` ${baseStyle} background: red;
`
return (
  <>
    <div className={green}>Green</div>
    <div className={blue}>Blue</div>
    <div className={red}>Red</div>
  </> ) 
```

ä½ å¯ä»¥è¿›ä¸€æ­¥ä½¿ç”¨å‡½æ•°:

```
const baseStyle = css`
  width: 300px;
  border: 1px solid black;
`
function styles(color) {
  return css` ${baseStyle} background: ${color};
  `
}

return (
  <>
    <div className={styles('green')}>Green</div>
    <div className={styles('blue')}>Blue</div>
    <div className={styles('red')}>Red</div>
  </> ) 
```

è€Œä¸”ä¸ä»…ä»…æ˜¯å€¼ï¼Œå­—ç¬¦ä¸²çš„ä»»ä½•éƒ¨åˆ†éƒ½å¯ä»¥æ’å€¼:

```
const smallScreen = '@media (max-width: 400px)'

const style = css` ${smallScreen} {
    font-size: 12px;
  }
` 
```

è¿™å¯¹äºå…è®¸ä½ å»ºç«‹ä¸€ä¸ªå¸¸é‡æ–‡ä»¶æ˜¯å¾ˆå¥½çš„ï¼Œè¿™ä¸ªæ–‡ä»¶å¯ä»¥è¢«å¯¼å…¥åˆ°ä½ æ‰€æœ‰çš„æ¨¡å—ä¸­ä»¥ä¿æŒä¸€è‡´æ€§æˆ–ä¸»é¢˜åŒ–ã€‚

åŒæ ·å€¼å¾—è®°ä½çš„æ˜¯ï¼Œ`css`å‡½æ•°(å¸¦æ ‡ç­¾çš„æ¨¡æ¿)è¿”å›ä¸€ä¸ªç±»ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åƒå¯¹å¾…ç±»ä¸€æ ·åŠ¨æ€åœ°æ·»åŠ æ ·å¼:

```
const baseStyle = css`
  color: ${textColor};
`

function TagBlock(tagName) {
  const highlighted = tagSelected && css`
    color: ${highlightColor};
  `
  return (
    <span className={css` ${baseStyle}  ${highlighted} `}>
      {tagName}
    </span>
  )
} 
```

åœ¨æœ¬ä¾‹ä¸­ï¼Œå½“`tagSelected`ä¸ºçœŸæ—¶ï¼Œç»„ä»¶ä¼šå°†æ–‡æœ¬çš„é¢œè‰²æ›´æ”¹ä¸º`highlightColor`ã€‚

* * *

æˆ‘ä½¿ç”¨æƒ…æ„Ÿçš„æ—¶é—´å¾ˆçŸ­ï¼Œè€Œä¸”ä»…ä»…è§¦åŠäº†å®ƒçš„çš®æ¯›ã€‚è¿‡æ¸¡åˆ°å®ƒéå¸¸å®¹æ˜“ï¼Œå› ä¸ºå®ƒæä¾›äº† CSS çš„æ‰€æœ‰åŠŸèƒ½ï¼Œä½†å…·æœ‰ JavaScript çš„çµæ´»æ€§ã€‚Emotion å…è®¸æ‚¨æ„å»º CSS èµç¾çš„ç»„åˆæ–¹å¼ååº”å¾ˆå¥½ï¼Œå°¤å…¶æ˜¯ç°åœ¨é’©å­æ˜¯æ´»çš„ã€‚å½“æ‚¨æƒ³è¦å°†ä¸€äº›é€»è¾‘æå–åˆ°å®ƒè‡ªå·±çš„ç»„ä»¶ä¸­æ—¶ï¼Œè¿™ä¸€ç‚¹å°¤å…¶æ˜æ˜¾ï¼›ç®€å•åœ°å‰ªåˆ‡å’Œç²˜è´´ä½ çš„ç»„ä»¶çš„ JSXï¼Œé’©å­å’Œæ ·å¼ï¼Œå¹¶ç²˜è´´åˆ°ä¸€ä¸ªæ–°çš„æ–‡ä»¶ä¸­ã€‚

è¿™åªæ˜¯å¯¹æƒ…æ„Ÿçš„ä¸€ä¸ªå¿«é€Ÿæµè§ˆï¼Œæˆ‘æ²¡æœ‰å°è¯•è¿‡å…¶ä»– CSS-in-JS åº“ï¼Œä½†æˆ‘å¯¹å®ƒçš„ä½“éªŒå°è±¡æ·±åˆ»ï¼Œæ‰€ä»¥æˆ‘æƒ³æŠŠè¿™ä¸ªå¿«é€Ÿå¸–å­æ”¾åœ¨ä¸€èµ·ã€‚å¸Œæœ›å¯¹æŸä¸ªäººæœ‰å¸®åŠ©ï¼