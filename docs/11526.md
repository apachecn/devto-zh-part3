# ä½¿ç”¨ Schematics with React å¹¶åœ¨ 5 åˆ†é’Ÿå†…æ·»åŠ  OpenID è¿æ¥èº«ä»½éªŒè¯

> åŸæ–‡:[https://dev . to/oktadev/use-schematics-with-react-and-add-OpenID-connect-authentic ation-in-5-minutes-416m](https://dev.to/oktadev/use-schematics-with-react-and-add-openid-connect-authentication-in-5-minutes-416m)

å¼€å‘äººå‘˜å–œæ¬¢è‡ªåŠ¨åŒ–ã€‚è¿™æ˜¯æˆ‘ä»¬è°‹ç”Ÿçš„ä¸»è¦æ‰‹æ®µã€‚æˆ‘ä»¬åˆ›é€ ç¨‹åºæ¥æ¶ˆé™¤ä»»åŠ¡çš„ä¹å‘³ã€‚æˆ‘åšäº†å¾ˆå¤šæ¼”ç¤ºå’Œç°åœºæ¼”ç¤ºã€‚åœ¨è¿‡å»çš„ä¸€å¹´é‡Œï¼Œæˆ‘æ³¨æ„åˆ°æˆ‘çš„ä¸€äº›æ¼”ç¤ºæœ‰å¤ªå¤šçš„æ­¥éª¤éœ€è¦è®°å¿†ã€‚æˆ‘å·²ç»æŠŠå®ƒä»¬å†™åœ¨è„šæœ¬ä¸­äº†ï¼Œä½†æ˜¯æˆ‘æœ€è¿‘å‘ç°ç”¨ Schematics é©±åŠ¨çš„å·¥å…·æ¥è‡ªåŠ¨åŒ–å®ƒä»¬æ›´é…·ï¼

Schematics æ˜¯ Angular CLI é¡¹ç›®ä¸­çš„ä¸€ä¸ªåº“ï¼Œå…è®¸æ‚¨ä½¿ç”¨ä»£ç æ“ä½œé¡¹ç›®ã€‚æ‚¨å¯ä»¥åˆ›å»º/æ›´æ–°æ–‡ä»¶ï¼Œå¹¶å‘ä»»ä½•å…·æœ‰`package.json`æ–‡ä»¶çš„é¡¹ç›®æ·»åŠ ä¾èµ–é¡¹ã€‚æ²¡é”™ï¼ŒSchematics ä¸åªæ˜¯é’ˆå¯¹æœ‰è§’åº¦çš„é¡¹ç›®ï¼

ä½ æœ‰æ—¶é—´å—ï¼Ÿæˆ‘å¾ˆä¹æ„å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨æˆ‘ç¼–å†™çš„ç¤ºæ„å›¾å‘ React åº”ç”¨ç¨‹åºæ·»åŠ èº«ä»½éªŒè¯ã€‚æ‚¨éœ€è¦å®‰è£… Node.js 10+;ç„¶åè¿è¡Œ:

```
npx create-react-app rs --typescript 
```

[![Create React app with TypeScript](../Images/9ec7633918141f189a18cd6ec88fb0d4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--aTEVWVJC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://developer.okta.com/assets-jekyll/blog/react-schematics/create-react-app-6fdd7b3e270eedbf9e9030e4cb07f189208142122537e8f4769639126421deed.png)

è¿™ä¸ªè¿‡ç¨‹å®Œæˆåï¼Œåœ¨ Okta ä¸Šåˆ›å»ºä¸€ä¸ª OIDC åº”ç”¨ç¨‹åºã€‚

ä¸ºä»€ä¹ˆæ˜¯ Oktaï¼Ÿå› ä¸ºæœ‹å‹ä¸è®©æœ‹å‹å†™è®¤è¯ï¼Okta æœ‰è®¤è¯å’Œç”¨æˆ·ç®¡ç† APIï¼Œå¯ä»¥å¤§å¤§å‡å°‘ä½ çš„å¼€å‘æ—¶é—´ã€‚æˆ‘ä»¬çš„ API å’Œ SDK ä½¿å¼€å‘äººå‘˜å¯ä»¥è½»æ¾åœ°åœ¨ä»»ä½•åº”ç”¨ä¸­éªŒè¯ã€ç®¡ç†å’Œä¿æŠ¤ç”¨æˆ·ã€‚

### [](#create-an-oidc-app-on-okta)åœ¨ Okta ä¸Šåˆ›å»º OIDC App

ç™»å½•æ‚¨çš„ Okta å¼€å‘è€…è´¦æˆ·(å¦‚æœæ‚¨æ²¡æœ‰è´¦æˆ·ï¼Œè¯·æ³¨å†Œï¼Œç„¶åå¯¼èˆªè‡³**åº”ç”¨** > **æ·»åŠ åº”ç”¨**ã€‚ç‚¹å‡»**å•é¡µ App** ï¼Œç‚¹å‡»**ä¸‹ä¸€æ­¥**ã€‚ç»™åº”ç”¨å–ä¸€ä¸ªä½ ä¼šè®°ä½çš„åå­—ï¼ŒæŠŠç«¯å£ä»`8080`æ”¹æˆ`3000`ï¼Œç‚¹å‡»**å®Œæˆ**ã€‚

ä¸‹ä¸€ä¸ªå±å¹•åº”è¯¥ç±»ä¼¼äºä¸‹å›¾:

[![Okta OIDC App Settings](../Images/4ebaa7b52997d62c505607b921873d5f.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--qrMNVV9G--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://developer.okta.com/assets-jekyll/blog/react-schematics/app-settings-e843a338e20305c1db05e38f09ae4ab019fe5d8204ca70e556da12cda158a972.png)

è¿”å›åˆ°æ‚¨åˆ›å»º`rs`åº”ç”¨ç¨‹åºçš„ç»ˆç«¯çª—å£ã€‚å¯¼èˆªåˆ°ç›®å½•å¹¶è¿è¡Œåº”ç”¨ç¨‹åºï¼Œä»¥ç¡®ä¿å®ƒåœ¨ç«¯å£ 3000 ä¸Šå¯åŠ¨ã€‚

```
cd rs
npm start 
```

åœæ­¢è¯¥è¿‡ç¨‹(Ctrl+C ),å¹¶ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°† OIDC è®¤è¯æ·»åŠ åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­:

```
npm i @oktadev/schematics
schematics @oktadev/schematics:add-auth 
```

å‡ºç°æç¤ºæ—¶ï¼Œè¾“å…¥æ‚¨çš„å‘è¡Œå•†(å¯ä»¥åœ¨ Okta çš„ä»ªè¡¨æ¿ä¸­çš„ **API** > **æˆæƒæœåŠ¡å™¨**ä¸‹æ‰¾åˆ°)å’Œå®¢æˆ· IDã€‚å½“å®‰è£…å®Œæˆåï¼Œè¿è¡Œ`npm start`ï¼Œä½ ä¼šæƒŠå¥‡åœ°å‘ç°ä½ çš„ React åº”ç”¨æ‹¥æœ‰ OIDC è®¤è¯ï¼

[![React + Okta = ğŸ’™](../Images/19379175ee6143d3cc1264b4d1564842.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--FPG3316j--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://developer.okta.com/assets-jekyll/blog/react-schematics/react-okta-45f521d892f2b75216eed5e791c29d52ce893331eb3463d1df61cc4213ede17d.png)

ç‚¹å‡»**ç™»å½•**ï¼Œè¾“å…¥ä½ ç”¨æ¥æ³¨å†Œ Okta çš„å‡­è¯ï¼Œä½ å°†è¢«é‡å®šå‘å›ä½ çš„åº”ç”¨ã€‚è¿™ä¸€æ¬¡ï¼Œå°†æ˜¾ç¤ºä¸€ä¸ª**æ³¨é”€**æŒ‰é’®ã€‚

## [](#create-a-react-schematic)åˆ›å»º React ç¤ºæ„å›¾

çœ‹åˆ°è¿è¡Œä¸­çš„åŸç†å›¾å¾ˆæ•´æ´ï¼Œå†™å‡ºæ¥ä¹Ÿå¾ˆæœ‰è¶£ï¼ç°åœ¨ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ Schematics æ¥ä¿®æ”¹ä½¿ç”¨ Create React App åˆ›å»ºçš„é¡¹ç›®ã€‚

ä¸ºä»€ä¹ˆè¦ååº”ï¼Ÿå› ä¸ºç”¨å®ƒå†™åº”ç”¨ç¨‹åºå¾ˆå—æ¬¢è¿ï¼Œä¹Ÿå¾ˆæœ‰è¶£(ä»¥æˆ‘çš„ç»éªŒæ¥çœ‹)ã€‚æ­¤å¤–ï¼ŒEric Elliot åœ¨ä»–çš„[é¡¶çº§ JavaScript æ¡†æ¶å’Œ 2019 å¹´è¦å­¦ä¹ çš„ä¸»é¢˜](https://medium.com/javascript-scene/top-javascript-frameworks-and-topics-to-learn-in-2019-b4142f38df20)ä¸­é¢„æµ‹â€œReact å°†åœ¨ 2019 å¹´ç»§ç»­å æ®ä¸»å¯¼åœ°ä½â€ã€‚

Bootstrap æ˜¯ä¸€ä¸ªæµè¡Œçš„ CSS æ¡†æ¶ï¼ŒReact é€šè¿‡ [reactstrap](https://reactstrap.github.io/) æ”¯æŒå®ƒã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•åˆ›å»ºé›†æˆ reactstrap çš„åŸç†å›¾ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘å°†åŒ…æ‹¬å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•æŠ€å·§ã€‚

## [](#schematics-manipulate-files-and-dependencies-with-code)Schematics:ç”¨ä»£ç æ“çºµæ–‡ä»¶å’Œä¾èµ–å…³ç³»

Angular DevKit æ˜¯ GitHub ä¸Šçš„ [Angular CLI é¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚DevKit æä¾›äº†å¯ç”¨äºç®¡ç†ã€å¼€å‘ã€éƒ¨ç½²å’Œåˆ†æä»£ç çš„åº“ã€‚DevKit æœ‰ä¸€ä¸ª`schematics-cli`å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»ºè‡ªå·±çš„åŸç†å›¾ã€‚](https://github.com/angular/angular-cli)

è¦åˆ›å»º Schematics é¡¹ç›®ï¼Œé¦–å…ˆå®‰è£… Schematics CLI:

```
npm i -g @angular-devkit/schematics-cli@0.13.4 
```

ç„¶åè¿è¡Œ`schematics`åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºé¡¹ç›®ã€‚å°†å…¶å‘½åä¸º`rsi`ï¼Œä½œä¸º ReactStrap Installer çš„ç¼©å†™ã€‚

```
schematics blank --name=rsi 
```

è¿™å°†åˆ›å»ºä¸€ä¸ª`rsi`ç›®å½•å¹¶å®‰è£…é¡¹ç›®çš„ä¾èµ–é¡¹ã€‚æœ‰ä¸€ä¸ª`rsi/package.json`å¤„ç†ä½ çš„é¡¹ç›®çš„ä¾èµ–å…³ç³»ã€‚è¿˜æœ‰ä¸€ä¸ª`src/collection.json`ï¼Œå®ƒå®šä¹‰äº†åŸç†å›¾çš„å…ƒæ•°æ®ã€‚

```
{  "$schema":  "../node_modules/@angular-devkit/schematics/collection-schema.json",  "schematics":  {  "rsi":  {  "description":  "A blank schematic.",  "factory":  "./rsi/index#rsi"  }  }  } 
```

ä½ å¯ä»¥çœ‹åˆ°`rsi`åŸç†å›¾æŒ‡å‘äº†`src/rsi/index.ts`ä¸­çš„ä¸€ä¸ªå‡½æ•°ã€‚æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œä½ ä¼šçœ‹åˆ°ä¸‹é¢çš„å†…å®¹:

```
import { Rule, SchematicContext, Tree } from '@angular-devkit/schematics';

export function rsi(_options: any): Rule {
  return (tree: Tree, _context: SchematicContext) => {
    return tree;
  };
} 
```

ç”±`src/rsi/index_spec.ts`æµ‹è¯•ã€‚

```
import { Tree } from '@angular-devkit/schematics';
import { SchematicTestRunner } from '@angular-devkit/schematics/testing';
import * as path from 'path';

const collectionPath = path.join(__dirname, '../collection.json');

describe('rsi', () => {
  it('works', () => {
    const runner = new SchematicTestRunner('schematics', collectionPath);
    const tree = runner.runSchematic('rsi', {}, Tree.empty());

    expect(tree.files).toEqual([]);
  });
}); 
```

Schematics çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯å®ƒä»¬ä¸ä¼šå¯¹æ–‡ä»¶ç³»ç»Ÿæ‰§è¡Œä»»ä½•ç›´æ¥æ“ä½œã€‚ç›¸åï¼Œæ‚¨æŒ‡å®šé’ˆå¯¹`Tree`çš„åŠ¨ä½œã€‚`Tree`æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„ï¼ŒåŒ…å«ä¸€ç»„å·²ç»å­˜åœ¨çš„æ–‡ä»¶å’Œä¸€ä¸ªæš‚å­˜åŒº(åŒ…å«æ–°çš„/æ›´æ–°çš„ä»£ç çš„æ–‡ä»¶)ã€‚

## [](#schematics-with-react)åŸç†å›¾ä¸ React

å¦‚æœä½ ç†Ÿæ‚‰åŸç†å›¾ï¼Œä½ å¯èƒ½è§è¿‡å®ƒä»¬è¢«ç”¨æ¥æ“çºµè§’åº¦é¡¹ç›®ã€‚Schematics å¯¹ Angular æœ‰å¾ˆå¥½çš„æ”¯æŒï¼Œä½†æ˜¯å¦‚æœä½ ç¼–ç æ­£ç¡®ï¼Œå®ƒä»¬å¯ä»¥åœ¨ä»»ä½•é¡¹ç›®ä¸Šè¿è¡Œï¼ä½ å¯ä»¥åªå¯»æ‰¾`package.json`å’Œä¸€ä¸ªé€šç”¨çš„æ–‡ä»¶ç»“æ„ï¼Œè€Œä¸æ˜¯å¯»æ‰¾è§’åº¦ç»†èŠ‚ã€‚ç”Ÿæˆé¡¹ç›®çš„ CLI å·¥å…·ï¼Œå¦‚ Create React Appï¼Œä½¿è¿™ä¸€ç‚¹å˜å¾—å®¹æ˜“å¾—å¤šï¼Œå› ä¸ºæ‚¨çŸ¥é“æ–‡ä»¶å°†åœ¨å“ªé‡Œåˆ›å»ºã€‚

## [](#add-dependencies-to-your-react-app-with-schematics)ä½¿ç”¨ Schematics å‘ React åº”ç”¨ç¨‹åºæ·»åŠ ä¾èµ–é¡¹

[ååº”å †æ–‡ä»¶](https://reactstrap.github.io/)æä¾›å®‰è£…è¯´æ˜ã€‚è¿™äº›æ˜¯æ‚¨å°†ä½¿ç”¨`rsi`åŸç†å›¾è‡ªåŠ¨å®Œæˆçš„æ­¥éª¤ã€‚

1.  `npm i bootstrap reactstrap`
2.  å¯¼å…¥å¼•å¯¼çš„ CSS
3.  å¯¼å…¥å’Œä½¿ç”¨ reactstrap ç»„ä»¶

æ‚¨å¯ä»¥ä½¿ç”¨ [Schematics å®ç”¨ç¨‹åº](https://nitayneeman.github.io/schematics-utilities/)æ¥è‡ªåŠ¨æ·»åŠ ä¾èµ–å…³ç³»ï¼Œç­‰ç­‰ã€‚é¦–å…ˆæ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œåœ¨æ‚¨åˆ›å»ºçš„`rsi`é¡¹ç›®ä¸­å®‰è£…`schematic-utilities`ã€‚

```
npm i schematics-utilities@1.1.1 
```

æ›´æ”¹`src/rsi/index.ts`ä»¥æ·»åŠ `bootstrap`å’Œ`reactstrap`ä½œä¸º`addDependencies()`å‡½æ•°çš„ä¾èµ–é¡¹ã€‚ä»ä¸»`rsi()`å‡½æ•°ä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚

```
import { Rule, SchematicContext, Tree } from '@angular-devkit/schematics';
import { addPackageJsonDependency, NodeDependency, NodeDependencyType } from 'schematics-utilities';

function addDependencies(host: Tree): Tree {
  const dependencies: NodeDependency[] = [
    { type: NodeDependencyType.Default, version: '4.3.1', name: 'bootstrap' },
    { type: NodeDependencyType.Default, version: '7.1.0', name: 'reactstrap' }
  ];
  dependencies.forEach(dependency => addPackageJsonDependency(host, dependency));
  return host;
}

export function rsi(_options: any): Rule {
  return (tree: Tree, _context: SchematicContext) => {
    addDependencies(tree);
    return tree;
  };
} 
```

## [](#create-copy-and-update-react-files)åˆ›å»ºã€å¤åˆ¶å’Œæ›´æ–° React æ–‡ä»¶

åˆ›å»ºä¸€ä¸ª`src/rsi/templates/src`ç›®å½•ã€‚æ‚¨å°†åœ¨è¿™ä¸ªç›®å½•ä¸­åˆ›å»ºæ¨¡æ¿ï¼Œè¿™äº›æ¨¡æ¿å·²ç»æœ‰äº†å¿…éœ€çš„ reactstrap å¯¼å…¥å’Œç”¨æ³•ã€‚

æ·»åŠ ä¸€ä¸ª`App.js`æ¨¡æ¿ï¼Œå¹¶å°†ä¸‹é¢çš„å¼•å¯¼ä»£ç æ”¾å…¥å…¶ä¸­ã€‚

```
import React, { Component } from 'react';
import logo from './logo.svg';
import './App.css';
import { Alert } from 'reactstrap';

class App extends Component {
  render() {
    return (
      <div className="App">
        <header className="App-header">
          <img src={logo} className="App-logo" alt="logo" />
          <p>
            Edit <code>src/App.js</code> and save to reload.
          </p>
          <Alert color="success">reactstrap installed successfully! 
            <span role="img" aria-label="hooray">ğŸ‰</span>
            </Alert>
        </header>
      </div>
    );
  }
}

export default App; 
```

åœ¨åŒä¸€ä¸ªç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª`index.js`æ–‡ä»¶æ¥æ·»åŠ å¼•å¯¼ CSS å¯¼å…¥ã€‚

```
import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import App from './App';
import * as serviceWorker from './serviceWorker';
import 'bootstrap/dist/css/bootstrap.min.css';

ReactDOM.render(<App />, document.getElementById('root'));

serviceWorker.unregister(); 
```

ä¿®æ”¹`src/rsi/index.ts`ä¸­çš„`rsi()`å‡½æ•°ï¼Œå¤åˆ¶è¿™äº›æ¨¡æ¿å¹¶è¦†ç›–ç°æœ‰æ–‡ä»¶ã€‚

```
import { Rule, SchematicContext, Tree, apply, url, template, move, forEach, FileEntry, mergeWith, MergeStrategy } from '@angular-devkit/schematics';
import { addPackageJsonDependency, NodeDependency, NodeDependencyType } from 'schematics-utilities';
import { normalize } from 'path';

function addDependencies(host: Tree): Tree {
  const dependencies: NodeDependency[] = [
    { type: NodeDependencyType.Default, version: '4.3.1', name: 'bootstrap' },
    { type: NodeDependencyType.Default, version: '7.1.0', name: 'reactstrap' }
  ];
  dependencies.forEach(dependency => addPackageJsonDependency(host, dependency));
  return host;
}

export function rsi(_options: any): Rule {
  return (tree: Tree, _context: SchematicContext) => {
    addDependencies(tree);

    const movePath = normalize('./src');
    const templateSource = apply(url('./templates/src'), [
      template({..._options}),
      move(movePath),
      // fix for https://github.com/angular/angular-cli/issues/11337
      forEach((fileEntry: FileEntry) => {
        if (tree.exists(fileEntry.path)) {
          tree.overwrite(fileEntry.path, fileEntry.content);
        }
        return fileEntry;
      }),
    ]);
    const rule = mergeWith(templateSource, MergeStrategy.Overwrite);
    return rule(tree, _context);
  };
} 
```

## [](#test-your-reactstrap-installer-schematic)æµ‹è¯•æ‚¨çš„ reactstrap å®‰è£…ç¨‹åºç¤ºæ„å›¾

ä¸ºäº†å‘`package.json`æ·»åŠ ä¾èµ–é¡¹ï¼Œæ‚¨å¿…é¡»åœ¨æ‚¨çš„æµ‹è¯•ä¸­æä¾›ä¸€ä¸ªã€‚å¹¸è¿çš„æ˜¯ï¼ŒTypeScript 2.9 æ·»åŠ äº† JSON å¯¼å…¥ï¼Œå› æ­¤æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå¯æµ‹è¯•ç‰ˆæœ¬çš„`package.json`(ç”± Create React App ç”Ÿæˆ)å¹¶åœ¨è¿è¡Œæµ‹è¯•ä¹‹å‰å°†å…¶æ·»åŠ åˆ°`Tree`ã€‚

åœ¨`rsi/tsconfig.json`æ–‡ä»¶ä¸­ï¼Œåœ¨ç¼–è¯‘å™¨é€‰é¡¹ä¸‹ï¼Œæ·»åŠ è¿™ä¸¤è¡Œ:

```
{  "compilerOptions":  {  ...  "resolveJsonModule":  true,  "esModuleInterop":  true  }  } 
```

åœ¨ä¸`index_spec.ts`ç›¸åŒçš„ç›®å½•ä¸‹åˆ›å»º`react-pkg.json`ã€‚

```
{  "name":  "rsi-test",  "version":  "0.1.0",  "private":  true,  "dependencies":  {  "react":  "^16.8.3",  "react-dom":  "^16.8.3",  "react-scripts":  "2.1.5"  }  } 
```

ç°åœ¨æ‚¨å¯ä»¥åœ¨æ‚¨çš„æµ‹è¯•ä¸­å¯¼å…¥è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ä¸€ä¸ªå¯æµ‹è¯•çš„æ ‘ä¸­ã€‚è¿™å…è®¸æ‚¨éªŒè¯æ–‡ä»¶åŠå…¶å†…å®¹æ˜¯å¦å·²åˆ›å»ºã€‚ä¿®æ”¹`src/rsi/index_spec.ts`ä»¥åŒ¹é…ä¸‹é¢çš„ä»£ç ã€‚

```
import { HostTree } from '@angular-devkit/schematics';
import { SchematicTestRunner, UnitTestTree } from '@angular-devkit/schematics/testing';
import * as path from 'path';
import packageJson from './react-pkg.json';

const collectionPath = path.join(__dirname, '../collection.json');

describe('rsi', () => {
  it('works', () => {
    const tree = new UnitTestTree(new HostTree);
    tree.create('/package.json', JSON.stringify(packageJson));

    const runner = new SchematicTestRunner('schematics', collectionPath);
    runner.runSchematic('rsi', {}, tree);

    expect(tree.files.length).toEqual(3);
    expect(tree.files.sort()).toEqual(['/package.json', '/src/App.js', '/src/index.js']);

    const mainContent = tree.readContent('/src/index.js');
    expect(mainContent).toContain(`import 'bootstrap/dist/css/bootstrap.min.css'`);
  });
}); 
```

å¥”è·‘å§ï¼Œå½“ä¸€åˆ‡éƒ½è¿‡å»çš„æ—¶å€™ï¼Œå°½æƒ…æ¬¢ä¹å§ï¼

## [](#verify-your-react-schematic-works)éªŒè¯æ‚¨çš„ React åŸç†å›¾ä½œå“

æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ Create React åº”ç”¨ç¨‹åºçš„é»˜è®¤è®¾ç½®åˆ›å»ºä¸€ä¸ªæ–°çš„ React é¡¹ç›®ã€å®‰è£…æ‚¨çš„åŸç†å›¾å¹¶è¿è¡Œå®ƒæ¥éªŒè¯æ‚¨çš„åŸç†å›¾æ˜¯å¦æœ‰æ•ˆã€‚

```
npx create-react-app test 
```

è¿è¡Œ`npm link /path/to/rsi`æ¥å®‰è£…æ‚¨çš„ reactstrap å®‰è£…ç¨‹åºã€‚æ‚¨å¯èƒ½éœ€è¦è°ƒæ•´`rsi`é¡¹ç›®çš„è·¯å¾„ä»¥é€‚åº”æ‚¨çš„ç³»ç»Ÿã€‚

```
cd test npm link ../rsi 
```

è¿è¡Œ`schematics rsi:rsi`ï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°æ–‡ä»¶æ­£åœ¨æ›´æ–°ã€‚

```
UPDATE /package.json (530 bytes)
UPDATE /src/App.js (620 bytes)
UPDATE /src/index.js (294 bytes) 
```

è¿è¡Œ`npm install`ï¼Œç„¶åè¿è¡Œ`npm start`ï¼Œäº«å—å®‰è£…äº†å¼•å¯¼ç¨‹åºçš„ React åº”ç”¨ç¨‹åºçš„è£è€€ï¼

[![reactstrap installed!](../Images/34e32ce2a6dd4eff2f642f7164f13f17.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--iriGN8iK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://developer.okta.com/assets-jekyll/blog/react-schematics/reactstrap-installed-a47a04039c653437bff5c7a3a423a4914a38d1d3fb93c2b3fb011fae5fd7a245.png)

## [](#schematics-with-angular)å¸¦æ£±è§’çš„ç¤ºæ„å›¾

Angular CLI åŸºäºåŸç†å›¾ï¼Œå…¶ PWA å’Œ Angular Material æ¨¡å—ä¹Ÿæ˜¯å¦‚æ­¤ã€‚æˆ‘ä¸ä¼šåœ¨è¿™é‡Œæ·±å…¥è®¨è®ºç‰¹å®šè§’åº¦çš„åŸç†å›¾ï¼Œä½ å¯ä»¥é˜…è¯»[ä½¿ç”¨è§’åº¦åŸç†å›¾æ¥ç®€åŒ–ä½ çš„ç”Ÿæ´»](https://dev.to/oktadev/use-angular-schematics-to-simplify-your-life-3pel-temp-slug-6091747)æ¥äº†è§£ã€‚

æœ¬æ•™ç¨‹åŒ…æ‹¬å¦‚ä½•æ·»åŠ æç¤ºï¼Œå¦‚ä½•å‘å¸ƒæ‚¨çš„åŸç†å›¾ï¼Œå®ƒå¼•ç”¨äº†æˆ‘å¸®åŠ©å¼€å‘çš„ [OktaDev Schematics](https://github.com/oktadeveloper/schematics) é¡¹ç›®ã€‚è¿™ä¸ªé¡¹ç›®çš„æŒç»­é›†æˆä½¿ç”¨ä¸€ä¸ª [`test-app.sh`](https://github.com/oktadeveloper/schematics/blob/master/test-app.sh) è„šæœ¬ï¼Œè¯¥è„šæœ¬ä½¿ç”¨æ¯ä¸ªæ¡†æ¶å„è‡ªçš„ CLI åˆ›å»ºé¡¹ç›®ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„è„šæœ¬æµ‹è¯•åˆ›å»ºä¸€ä¸ªæ–°çš„ Create React åº”ç”¨ç¨‹åºçš„é¡¹ç›®ï¼Œå¹¶å®‰è£…ç¤ºæ„å›¾ã€‚

```
elif ["$1" == "react"] || ["$1" == "r"]
then npx create-react-app react-app
  cd react-app
  npm install ../../oktadev*.tgz
  schematics @oktadev/schematics:add-auth --issuer=$issuer --clientId=$clientId
  CI=true npm test 
```

è¿™ä¸ªé¡¹ç›®ä¹Ÿæ”¯æŒæ”¯æŒç±»å‹è„šæœ¬çš„ React é¡¹ç›®ã€‚

## [](#learn-more-about-react-schematics-and-secure-authentication)äº†è§£ Reactã€Schematics å’Œå®‰å…¨è®¤è¯çš„æ›´å¤šä¿¡æ¯

æˆ‘å¸Œæœ›ä½ å–œæ¬¢å­¦ä¹ å¦‚ä½•ä¸º React åˆ›å»ºåŸç†å›¾ã€‚æˆ‘å‘ç°è¿™ä¸ª API å¾ˆå®¹æ˜“ä½¿ç”¨ï¼Œå¹¶ä¸”å¯¹å®ƒçš„æµ‹è¯•æ”¯æŒä¹Ÿå¾ˆæ»¡æ„ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº Okta çš„ React SDKï¼Œè¯·çœ‹[å®ƒçš„æ–‡æ¡£](https://github.com/okta/okta-oidc-js/tree/master/packages/okta-react)ã€‚

ä½ å¯ä»¥åœ¨ GitHub ä¸Šæ‰¾åˆ°æœ¬æ•™ç¨‹[çš„ç¤ºä¾‹åŸç†å›¾ã€‚](https://github.com/oktadeveloper/react-schematics-example)

æˆ‘ä»¬å·²ç»å†™äº†ä¸€äº›å…³äº Schematics çš„åšå®¢æ–‡ç« ï¼Œå¹¶åœ¨ Okta å¼€å‘è€…åšå®¢ä¸Šä½œå‡ºäº†å›åº”ã€‚ä½ å¯èƒ½ä¹Ÿä¼šå–œæ¬¢å®ƒä»¬ã€‚

*   [ä½¿ç”¨è§’åº¦ç¤ºæ„å›¾ç®€åŒ–ä½ çš„ç”Ÿæ´»](https://dev.to/oktadev/use-angular-schematics-to-simplify-your-life-3pel-temp-slug-6091747)
*   [ç”¨ Node å’Œ React æ„å»ºä¸€ä¸ªåŸºæœ¬çš„ CRUD åº”ç”¨](https://dev.to/oktadev/build-a-basic-crud-app-with-node-and-react-554c)
*   [ä½¿ç”¨ React å’Œ Spring Boot æ„å»ºä¸€ä¸ªç®€å•çš„ CRUD åº”ç”¨](https://dev.to/oktadev/use-react-and-spring-boot-to-build-a-simple-crud-app-2pdn)
*   [ä¸ Spring Boot å’Œ React çš„è‰¯å¥½å‘å±•](https://developer.okta.com/blog/2017/12/06/bootiful-development-with-spring-boot-and-react)
*   [å¦‚æœä¸æ˜¯æ‰“å­—ç¨¿ï¼Œå°±ä¸æ€§æ„Ÿ](https://dev.to/oktadev/if-it-aint-typescript-it-aint-sexy-5dnl-temp-slug-3998661)

åœ¨ Twitter ä¸Šå…³æ³¨ [@oktadev](https://twitter.com/oktadev) ï¼Œäº†è§£æ›´å¤šå…³äº Java çš„å‰æ²¿æ€æƒ³ã€‚NETã€Angularã€React å’Œ JavaScriptã€‚