# Google Colab ç¬”è®°æœ¬å¦‚ä½•åˆ©ç”¨å…è´¹çš„ 12GB å†…å­˜ GPU çš„ 8 ä¸ªæŠ€å·§ã€‚

> åŸæ–‡:[https://dev . to/kriyeng/8-tips-for-Google-colab-notebooks-to-take-advantage-of-free-of-employee-12gb-ram-GPU-be4](https://dev.to/kriyeng/8-tips-for-google-colab-notebooks-to-take-advantage-of-their-free-of-charge-12gb-ram-gpu-be4)

[![Title](../Images/7365724057825a3b7ed752bee0a1e978.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--4bGTM_6f--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/guw5bt6tjx438fkse6yf.jpg)

Colab æ˜¯åŸºäº Jupyter ç¬”è®°æœ¬çš„å…è´¹äº‘æœåŠ¡ï¼Œç”¨äºæœºå™¨å­¦ä¹ æ•™è‚²å’Œç ”ç©¶ã€‚å®ƒæä¾›äº†ä¸€ä¸ªå®Œå…¨é…ç½®ç”¨äºæ·±åº¦å­¦ä¹ çš„è¿è¡Œæ—¶ï¼Œä»¥åŠå¯¹å¼ºå¤§ GPU çš„å…è´¹è®¿é—®ã€‚

è¿™ 8 ä¸ªæŠ€å·§æ˜¯ä¸¤ä¸ªæ˜ŸæœŸæ¥ä½¿ç”¨ Colab è®­ç»ƒ YOLO æ¨¡å‹çš„ç»“æœã€‚ç”±äºå·¥å…·çš„ä¸€äº›ä¸ä¾¿ï¼Œæˆ‘æ­£è¦æ”¾å¼ƒã€‚ä½†æ˜¯ï¼Œåœ¨ç¬¬äºŒæ¬¡æœºä¼šä¸‹ï¼Œç»è¿‡ä¸€ç•ªåŠªåŠ›å’Œè°ƒæ•´ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªå¾ˆæ£’çš„å·¥å…·ï¼Œå…è´¹æä¾›ç»™æ¯ä¸ªäººã€‚

ä½¿ç”¨ Colab ç¬”è®°æœ¬ç”µè„‘ï¼Œä½ é¦–å…ˆä¼šæ³¨æ„åˆ°çš„æ˜¯å¤„ç†æ¯ 12 å°æ—¶å°±ä¼šçˆ†ç‚¸ä¸€æ¬¡çš„è¿è¡Œæ—¶çš„éšœç¢ï¼è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåŠ å¿«å†æ¬¡è¿è¡Œè¿è¡Œæ—¶æ‰€éœ€çš„æ—¶é—´å¦‚æ­¤é‡è¦ã€‚è¿™äº›æç¤ºè®©æˆ‘å¯ä»¥åœ¨æ›´å°‘çš„æ—¶é—´å’Œæ›´å°‘çš„äººå·¥å¹²é¢„ä¸‹é‡æ–°å¼€å§‹è®­ç»ƒæ¨¡å‹ã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæˆ‘å°†æ–°è®­ç»ƒçš„é‡é‡è‡ªåŠ¨ä¿å­˜åœ¨æˆ‘çš„æœ¬åœ°ç”µè„‘ä¸­

è¿™äº›æŠ€å·§æ˜¯åŸºäºä½¿ç”¨ Darknet è®­ç»ƒ YOLO çš„ï¼Œä½†æ˜¯æˆ‘å°†è¯•ç€æ¦‚æ‹¬ä¸€ä¸‹ã€‚

æˆ‘ä»¬æ¥çœ‹çœ‹å§ï¼

> æˆ‘åœ¨**è¿™é‡Œè¿›å…¥é‡ç‚¹æ¨¡å¼**ï¼Œä½†æ˜¯ä½ å¯ä»¥æ‰¾åˆ°[ä¸€æ­¥ä¸€æ­¥æ•™ç¨‹](http://blog.ibanyez.info/blogs/coding/20190410-run-a-google-colab-notebook-to-train-yolov3-using-darknet-in/)ï¼Œå¯è¿è¡Œçš„ [Colab ç¬”è®°æœ¬](https://colab.research.google.com/drive/1lTGZsfMaGUpBG4inDIQwIJVW476ibXk_#scrollTo=Cqo1gtPX6BXO)æˆ–è€… [github å›è´­](https://github.com/kriyeng/yolo-on-colab-notebook)

## [](#1-map-your-google-drive)1ã€‚æ˜ å°„æ‚¨çš„ Google Drive

åœ¨ Colab ç¬”è®°æœ¬ä¸Šï¼Œæ‚¨å¯ä»¥åœ¨ Colab VM è¿è¡Œæ—¶å°† Google Drive ä½œä¸ºç½‘ç»œæ˜ å°„é©±åŠ¨å™¨è¿›è¡Œè®¿é—®ã€‚

```
# This cell imports the drive library and mounts your Google Drive as a VM local drive.  
# You can access to your Drive files using this path "/content/gdrive/My Drive/" 
from google.colab import drive
drive.mount('/content/gdrive') 
```

[![schema drive.jpg](../Images/8a6a91de09ecc61a7ddf81a06921be6e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--krVkVkQu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/http://blog.ibanyez.info/download/B20190408T000000060.jpg)

## [](#2-work-with-your-files-transparently-in-your-computer)2ã€‚åœ¨è®¡ç®—æœºä¸­é€æ˜åœ°å¤„ç†æ–‡ä»¶

æ‚¨å¯ä»¥åŒæ­¥ç”µè„‘ä¸­çš„ Google Drive æ–‡ä»¶å¤¹ã€‚ä¸å‰é¢çš„æŠ€å·§ä¸€æ ·ï¼Œæ‚¨çš„æœ¬åœ°æ–‡ä»¶å°†åœ¨æ‚¨çš„ Colab ç¬”è®°æœ¬ä¸­æœ¬åœ°å¯ç”¨ã€‚

[![Sync Drive.jpg](../Images/30fbfdf02625926dad1e2b19b47c8dd4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--1Cwymuxd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/http://blog.ibanyez.info/download/B20190408T000000063.jpg)

æˆ‘å°†ä½¿ç”¨åä¸º`darknet`çš„ Google Drive æ–‡ä»¶å¤¹ã€‚è¿™æ˜¯æˆ‘å°†åœ¨æœ¬åœ°è®¡ç®—æœºä¸­ä¿æŒåŒæ­¥çš„æ–‡ä»¶å¤¹ã€‚

## [](#3-reduce-manual-interactions-on-every-run)3ã€‚å‡å°‘æ¯æ¬¡è¿è¡Œæ—¶çš„æ‰‹åŠ¨äº¤äº’

åœ¨æˆ‘çš„æƒ…å†µä¸‹ï¼Œæˆ‘æ¯æ¬¡éƒ½éœ€è¦ä» Nvidia ä¸‹è½½ cuDNNã€‚æ­¤åº“éœ€è¦ç™»å½•æ‰èƒ½ä¸‹è½½ã€‚æˆ‘çš„æ–¹æ³•æ˜¯å°† tar æ–‡ä»¶ä¸€æ¬¡æ€§ä¿å­˜åœ¨æˆ‘çš„è®¡ç®—æœºä¸­ã€‚æ¯æ¬¡è¿è¡Œæ—¶ï¼Œæˆ‘éƒ½ç›´æ¥åœ¨éœ€è¦ lib æ–‡ä»¶çš„åœ°æ–¹æå–æ–‡ä»¶ã€‚æ— éœ€æ‰‹åŠ¨ä¸Šä¼ ã€‚ä½ å¯ä»¥æŠŠå®ƒåº”ç”¨åˆ°ä½ éœ€è¦å®‰è£…çš„ä»»ä½•åº“ä¸Šã€‚

```
# Extracts the cuDNN files from Drive folder directly to the VM CUDA folders !tar -xzvf gdrive/My\ Drive/darknet/cuDNN/cudnn-10.0-linux-x64-v7.5.0.56.tgz -C /usr/local/
!chmod a+r /usr/local/cuda/include/cudnn.h

# Now we check the version we already installed. Can comment this line on future runs !cat /usr/local/cuda/include/cudnn.h | grep CUDNN_MAJOR -A 2 
```

## [](#4-dont-compile-libraries-on-every-run-just-once)4ã€‚ä¸è¦æ¯æ¬¡éƒ½ç¼–è¯‘åº“ï¼Œåªç¼–è¯‘ä¸€æ¬¡ã€‚

å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯ Darknetï¼Œæ‰€ä»¥æˆ‘éœ€è¦åœ¨æ¯æ¬¡è¿è¡Œæ—¶å…‹éš†å­˜å‚¨åº“å¹¶ç¼–è¯‘æ¡†æ¶ã€‚æ¯æ¬¡è¿è¡Œéƒ½éœ€è¦ä¸€äº›æ—¶é—´ã€‚æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯ä»…åœ¨ç¬¬ä¸€æ¬¡è¿è¡Œç¬”è®°æœ¬æ—¶ç¼–è¯‘æºä»£ç ï¼Œå¹¶åœ¨æˆ‘çš„é©±åŠ¨å™¨æ–‡ä»¶å¤¹ä¸­ä¿å­˜ä¸€ä»½å¯æ‰§è¡Œæ–‡ä»¶çš„å‰¯æœ¬ã€‚åœ¨ä»¥åçš„è¿è¡Œä¸­ï¼Œæˆ‘åªéœ€è¦å°† bin æ–‡ä»¶å¤åˆ¶åˆ°å¿…è¦çš„æ–‡ä»¶å¤¹ä¸­ã€‚

**ç¬¬ä¸€æ¬¡è¿è¡Œçš„ä»£ç **

```
# Leave this code uncommented on the very first run of your notebook
# or if you ever need to recompile darknet again.
# Comment this code on the future runs. !git clone https://github.com/kriyeng/darknet/
%cd darknet

# Check the folder !ls

# I have a branch where I have done the changes commented below !git checkout feature/google-colab

#Compile Darknet !make

#Copies the Darknet compiled version to Google drive !cp ./darknet /content/gdrive/My\ Drive/darknet/bin/darknet 
```

> **å¦‚æœä½ å¯¹ä½¿ç”¨æš—ç½‘æ„Ÿå…´è¶£:**æˆ‘ç”¨çš„æ˜¯æš—ç½‘çš„ä¿®æ”¹ç‰ˆã€‚æˆ‘éœ€è¦å¯¹åŸå§‹æºä»£ç è¿›è¡Œä¸€äº›ä¿®æ”¹ã€‚æˆ‘è¿™é‡Œçš„æ–¹æ³•æ˜¯ç›´æ¥ä»é©±åŠ¨å™¨ä½¿ç”¨é…ç½®æ–‡ä»¶ã€‚åŸå§‹æš—ç½‘ä¸å…è®¸åœ¨é…ç½®æ–‡ä»¶`obj.data`ä¸­çš„æ–‡ä»¶è·¯å¾„ä¸Šæœ‰ç©ºæ ¼ã€‚æˆ‘æ·»åŠ äº†æ¥å—è½¬ä¹‰ç©ºæ ¼çš„ç‰¹æ€§:**(...)/gr dive/My \ Drive/darknet**
> æˆ‘å‡å°‘äº†å±å¹•ä¸Šæ‰“å°çš„æ—¥å¿—è¡Œæ•°ã€‚åŸå§‹æºåœ¨å±å¹•ä¸Šæ‰“å°æ›´å¤šè¡Œï¼ŒColab ç¬”è®°æœ¬å¯ä»¥ä¸æ‚¨çš„æµè§ˆå™¨åŒæ­¥ã€‚

**ç¬¬ä¸€æ¬¡è¿è¡Œåè¦æ‰§è¡Œçš„ä»£ç **

```
# Uncomment after the first run, when you have a copy of compiled darkent in your Google Drive 
# Makes a dir for darknet and move there !mkdir darknet
%cd darknet

# Copy the Darkent compiled version to the VM local drive !cp /content/gdrive/My\ Drive/darknet/bin/darknet ./darknet

# Set execution permissions to Darknet !chmod +x ./darknet 
```

## [](#5-clean-your-root-folder-on-google-drive)5ã€‚æ¸…ç† Google Drive ä¸Šçš„æ ¹æ–‡ä»¶å¤¹

Google çš„ä¸€äº›èµ„æºè§£é‡Šäº†åœ¨ä½ çš„æ ¹æ–‡ä»¶å¤¹ä¸­æœ‰å¾ˆå¤šæ–‡ä»¶ä¼šå½±å“æ˜ å°„å•å…ƒçš„è¿‡ç¨‹ã€‚å¦‚æœæ‚¨åœ¨é©±åŠ¨å™¨ä¸Šçš„æ ¹æ–‡ä»¶å¤¹ä¸­æœ‰è®¸å¤šæ–‡ä»¶ï¼Œè¯·åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹å¹¶å°†å®ƒä»¬å…¨éƒ¨ç§»åŠ¨åˆ°é‚£é‡Œã€‚æˆ‘è®¤ä¸ºæ ¹æ–‡ä»¶å¤¹ä¸­æœ‰å¾ˆå¤šæ–‡ä»¶å¤¹ä¹Ÿä¼šæœ‰ç±»ä¼¼çš„å½±å“ã€‚

## [](#6-copy-your-data-sets-to-vm-local-filesystem-to-improve-training-speeds)6ã€‚å°†æ‚¨çš„æ•°æ®é›†å¤åˆ¶åˆ°è™šæ‹Ÿæœºæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œä»¥æé«˜è®­ç»ƒé€Ÿåº¦ã€‚

Colab ç¬”è®°æœ¬æœ‰æ—¶åœ¨å¤„ç†é©±åŠ¨å™¨æ–‡ä»¶æ—¶ä¼šæœ‰ä¸€äº›å»¶è¿Ÿã€‚æˆ‘å‘ç°å°†æ•°æ®é›†å¤åˆ¶åˆ° VM æ–‡ä»¶ç³»ç»Ÿå¯ä»¥æé«˜é€Ÿåº¦ã€‚è¿™å¯¼è‡´æ¯æ¬¡è¿è¡Œæ—¶ï¼Œæ‚¨éƒ½éœ€è¦èŠ±è´¹ä¸€äº›æ—¶é—´åœ¨æœ¬åœ°å¤åˆ¶æ‚¨çš„æ•°æ®é›†æ–‡ä»¶ï¼Œä½†æ˜¯è¿™ä¼šå¯¹è®­ç»ƒæ—¶é—´äº§ç”Ÿç›¸å½“å¤§çš„å½±å“ã€‚æ ¹æ®æ•°æ®é›†å¤§å°å’Œç»“æœï¼Œæ‚¨å¯ä»¥å°è¯•ä¸¤ç§æ–¹æ³•ã€‚

**ç¬¬ä¸€æ¬¡æ¥è¿‘ã€‚å°†æ‚¨çš„æ•°æ®ä»é©±åŠ¨å™¨å¤åˆ¶åˆ°è™šæ‹Ÿæœºé©±åŠ¨å™¨**

```
# Copy files from Google Drive to the VM local filesystem !cp -r "/content/gdrive/My Drive/darknet/img" ./img 
```

ä¹Ÿè®¸è¿˜æœ‰å¦ä¸€ä¸ªé€‰æ‹©ï¼Œå°±æ˜¯æŠŠä½ çš„æ•°æ®é›†å‹ç¼©åˆ°ä½ çš„ç¡¬ç›˜é‡Œã€‚ç„¶åå¤åˆ¶ tar æ–‡ä»¶ï¼Œè§£å‹åˆ°ç¬”è®°æœ¬æœ¬åœ°ã€‚æˆ‘æ²¡æœ‰æµ‹è¯•è¿‡è¿™ä¸ªã€‚

**ç¬¬äºŒç§æ–¹æ³•ã€‚ä¸Šä¼ ä½ çš„æ•°æ®é›†åˆ° git repoï¼Œç„¶åä»é‚£é‡Œä¸‹è½½**

```
# Git clone directly to ./img folder !git clone https://[your-repository] ./img

# Check the result - Uncomment when you checked for speed up further runs !ls -la ./img 
```

## [](#7-work-with-the-config-files-directly-from-your-computer)7ã€‚ç›´æ¥ä»æ‚¨çš„è®¡ç®—æœºä½¿ç”¨é…ç½®æ–‡ä»¶ã€‚

æŠŠæ‰€æœ‰çš„é…ç½®æ–‡ä»¶ä¿å­˜åœ¨ä½ çš„ç”µè„‘ä¸Šå¯ä»¥è®©äº‹æƒ…å˜å¾—æ›´å®¹æ˜“å’Œæ–¹ä¾¿ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ‚¨æœ€å–œæ¬¢çš„ç¼–è¾‘å™¨åœ¨æœ¬åœ°ä¿®æ”¹ä»»ä½•é…ç½®ï¼Œè¿™äº›é…ç½®å°†ä¼šè‡ªåŠ¨åŒæ­¥ï¼Œå¹¶ä¸”å¯ä»¥ä»æ‚¨çš„ç¬”è®°æœ¬ä¸Šè®¿é—®ã€‚

è¿™å°±æ˜¯æˆ‘å¦‚ä½•æ‰§è¡Œæš—ç½‘å¼€å§‹è®­ç»ƒã€‚

```
!./darknet detector train "/content/gdrive/My Drive/darknet/obj.data" "/content/gdrive/My Drive/darknet/yolov3.cfg" "/content/gdrive/My Drive/darknet/darknet53.conv.74" -dont_show 
```

è¿™æ˜¯æˆ‘çš„`obj.data`æ–‡ä»¶:

```
classes=1
train = /content/gdrive/My\ Drive/darknet/train.txt
test = /content/gdrive/My\ Drive/darknet/test.txt
names = /content/gdrive/My\ Drive/darknet/obj.names
backup = /content/gdrive/My\ Drive/darknet/backup 
```

## [](#8-get-your-trained-weights-directly-synced-in-your-computer-in-realtime-during-the-training)8ã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå°†è®­ç»ƒåçš„é‡é‡ç›´æ¥å®æ—¶åŒæ­¥åˆ°ç”µè„‘ä¸­

æ­£å¦‚ä½ åœ¨ä¸Šé¢å‡ è¡Œä¸­çœ‹åˆ°çš„ï¼Œæˆ‘æ­£åœ¨å°†å¤‡ä»½æ–‡ä»¶å¤¹è®¾ç½®åˆ°æˆ‘çš„ Google Driveã€‚å› ä¸ºæˆ‘çš„ç¡¬ç›˜ä¸æˆ‘çš„ç”µè„‘åŒæ­¥ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥åœ¨ç¬”è®°æœ¬ç”µè„‘è®­ç»ƒæ—¶å®æ—¶æ¥æ”¶è®­ç»ƒåçš„é‡é‡ã€‚è¿™æœ‰ä¸€äº›ä¼˜ç‚¹:

*   åœ¨æ¨¡å‹è®­ç»ƒæ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æµ‹è¯•æ•°æ®é›†åœ¨æ‚¨çš„è®¡ç®—æœºä¸­æ£€æŸ¥å®ƒçš„æœ¬åœ°è¿è¡Œæƒ…å†µã€‚
*   å½“è¿è¡Œæ—¶é—´åœ¨ 12 å°æ—¶åå…³é—­æ—¶ï¼Œæ‚¨ä¼šå°†æœ€åä¸€æ¬¡è®­ç»ƒçš„é‡é‡ä¿å­˜åœ¨ç”µè„‘ä¸­
*   æ‚¨å¯ä»¥å†æ¬¡è¿è¡Œç¬”è®°æœ¬ï¼Œå¹¶ä½¿ç”¨ä»¥ä¸‹ä»£ç ä»ä¸Šæ¬¡ä¼šè®®çš„ä½ç½®å¼€å§‹åŸ¹è®­:

```
# Start training at the point where the last runtime finished !./darknet detector train "/content/gdrive/My Drive/darknet/obj.data" "/content/gdrive/My Drive/darknet/yolov3.cfg" "/content/gdrive/My Drive/darknet/backup/yolov3_last.weights" -dont_show 
```

ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ä¸€ä¸ªæ­¥éª¤æ•™ç¨‹æˆ–è€…å¯è¿è¡Œçš„ Colab ç¬”è®°æœ¬ğŸ‘‡

*   æ›´å¤šæ·±åº¦è®²è§£åœ¨[å¾ªåºæ¸è¿›æ•™ç¨‹](http://blog.ibanyez.info/blogs/coding/20190410-run-a-google-colab-notebook-to-train-yolov3-using-darknet-in/)
*   åœ¨ Colab ä¸ºè‡ªå·±è¿è¡Œ: [Colab notebook ä½¿ç”¨ Darknet è®­ç»ƒ YOLO çš„æŠ€å·§&æŠŠ Colab notebook å˜æˆæœ‰ç”¨å·¥å…·çš„æŠ€å·§](https://colab.research.google.com/drive/1lTGZsfMaGUpBG4inDIQwIJVW476ibXk_)
*   ä½ å¯ä»¥åœ¨ [Github](https://github.com/kriyeng/yolo-on-colab-notebook/) æ‰¾åˆ°ç¬”è®°æœ¬

æ„Ÿè°¢é˜…è¯»ï¼æˆ‘å¸Œæœ›ä½ å–œæ¬¢ï¼æˆ‘é¼“åŠ±æ‚¨ç»™æˆ‘å‘é€ä¸€äº›åé¦ˆå’Œå»ºè®®ã€‚åœ¨æ­¤å¼€å¯è®¨è®ºï¼

å¿«ä¹çš„ç‰©ä½“æ¢æµ‹ç¼–ç¨‹ï¼
[![cyclist-3659933_1920-yolo.jpg](../Images/55e714aab12b881f3fe78596ec714cda.png)T3ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--7ybVTOrI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/http://blog.ibanyez.info/download/B20190410T000000073.jpg)

### [](#sources)æ¥æº

*   YOLO åŸåˆ›ç½‘ç«™[çº¦ç‘Ÿå¤«Â·é›·å¾·è’™é¡µé¢](https://pjreddie.com/darknet/yolo/)
*   AlexeyAB darknet repo[github](https://github.com/AlexeyAB/darknet/)
*   ä¼Šå‡¡Â·å†ˆæŸ¥ç½—å¤«[ç¬”è®°æœ¬](https://github.com/ivangrov/YOLOv3-GoogleColab/blob/master/YOLOv3_GoogleColab.ipynb)
*   [Google co laboratory ä½œä¸ºåŠ é€Ÿæ·±åº¦å­¦ä¹ åº”ç”¨å·¥å…·çš„æ€§èƒ½åˆ†æ](https://ieeexplore.ieee.org/document/8485684)