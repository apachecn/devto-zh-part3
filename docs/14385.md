# æ™®é€š JS (POC)ä¸­çš„åŒå‘æ•°æ®ç»‘å®š

> åŸæ–‡:[https://dev . to/phoinixi/two-way-data-binding-in-vanilla-js-POC-4e 06](https://dev.to/phoinixi/two-way-data-binding-in-vanilla-js-poc-4e06)

åœ¨ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å±•ç¤ºäº†ç”¨æ™®é€š JS å®ç°çš„[å•å‘æ•°æ®ç»‘å®šçš„åŸºæœ¬å®ç°ğŸ‘¨ğŸ¼â€ğŸ’»ã€‚](////dev.to/phoinixi/one-way-data-binding-in-vanilla-js-poc-4dj7)

ä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨åº“å’Œ/æˆ–æ¡†æ¶æ¥å¼€å‘å’Œç»´æŠ¤å¤æ‚çš„ web åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯è¿™é‡Œé¢æœ‰ä»€ä¹ˆå‘¢ï¼Ÿä½ é—®è¿‡è‡ªå·±è¿™ä¸ªé—®é¢˜å—ï¼Ÿä½ æ²¡æœ‰ï¼ï¼Ÿå—¯ï¼Œä½ åº”è¯¥ï¼ğŸ™ƒ

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³æŠŠå‰é¢çš„ä¾‹å­æ‰©å±•åˆ°**åŒå‘æ•°æ®ç»‘å®š**ã€‚ğŸ•º

### [](#twoway-data-binding)åŒå‘æ•°æ®ç»‘å®šğŸ¤“

å¦‚æœæ‚¨ä¸ç†Ÿæ‚‰è¿™ä¸ªæ¦‚å¿µï¼Œ**åŒå‘æ•°æ®ç»‘å®š**æ„å‘³ç€å¯¹**çŠ¶æ€**çš„æ¯ä¸€æ¬¡æ›´æ”¹éƒ½ä¼šç«‹å³ä¼ æ’­åˆ°**è§†å›¾**(è€Œ*åä¹‹äº¦ç„¶*)ã€‚

### [](#demo)æ¼”ç¤º

[![demo](../Images/0a9beba9dc48f268edfbbbce96504895.png)T2ã€‘](//thepracticaldev.s3.amazonaws.com/i/xax8qjn8qubpijnv2c3o.gif)

### [](#lets-break-it-down)æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹

åŒå‘æ•°æ®ç»‘å®šéœ€è¦ä»€ä¹ˆï¼Ÿ

*   ä¸€ä¸ª**è§†å›¾**ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ HTML ä¸­ã€‚
*   ä¸€ä¸ª**çŠ¶æ€**ï¼Œç”¨ JavaScript ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚

å…³é”®ç‰¹å¾æ˜¯:

> æ¯æ¬¡**çŠ¶æ€**æ”¹å˜æ—¶ï¼Œ**è§†å›¾**éœ€è¦æ›´æ–°(å•å‘æ•°æ®ç»‘å®š)

å¹¶ä¸”

> æ¯æ¬¡è§†å›¾æ”¹å˜æ—¶ï¼ŒçŠ¶æ€éƒ½éœ€è¦æ›´æ–°

æ‰€ä»¥è®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª HTML **è§†å›¾** :

```
 <div class="field">
        <label for="name">Enter your name:</label>
        <input id="name" type="text" name="name"  data-model="name" />
      </div>

      <div class="field">
        <label for="title">Enter your title:</label>
        <input id="title" type="text" name="title" data-model="title" />
      </div>

      <div class="results">
        <h1 data-binding="name"></h1>
        <h2 data-binding="title"></h2>
      </div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å’Œä¸€ä¸ª**çŠ¶æ€** :

```
 const state = {
      name: 'Francesco',
      title: 'Front-end Developer'
    }; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°è®¾ç½®**è§†å›¾**ç¬¬ä¸€æ¬¡:

```
 document.querySelector('[data-binding="name"]').innerHTML = state.name
    document.querySelector('[data-binding="title"]').innerHTML = state.title
    document.querySelector('[data-model="name"]').value = state.name
    document.querySelector('[data-model="title"]').value = state.title 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯æˆ‘ä»¬æƒ³è¦ä¸€äº›é­”æ³•ï¼Œè¿™æ ·å½“æˆ‘ä»¬æ›´æ–°çŠ¶æ€æ—¶:

```
 state.name = 'Richard'
    state.title = 'Technical Lead' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

**è§†å›¾**ä¹Ÿåº”è¯¥æ›´æ–°ã€‚

ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹`state`å¯¹è±¡çš„`set`å±æ€§çš„é»˜è®¤è¡Œä¸ºï¼Œè¿™æ ·é™¤äº†æ›´æ–°**çŠ¶æ€**ï¼Œå®ƒè¿˜ä¼šæ›´æ–°æˆ‘ä»¬çš„**è§†å›¾**ã€‚

JavaScript ä¸­çš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨[ä»£ç†å¯¹è±¡](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy) :

```
 const createState = (state) => {
      return new Proxy(state, {
        set(target, property, value) {
          target[property] = value; // default set behaviour
          render(); // updates the view every time the state changes
          return true;
    }
      });
    };

    const state = createState({
      name = 'Francesco'
      title = 'Front-end Engineer'
    }); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å€ŸåŠ©ä»£ç†çš„åŠ›é‡ï¼Œæ¯æ¬¡æˆ‘ä»¬æ›´æ–°`state`æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨`render`å‡½æ•°ã€‚
`render`çš„ä¸€ä¸ªå¯èƒ½å®ç°å¯ä»¥æ˜¯:

```
 const render = () => {
     document.querySelector('[data-binding="name"]').innerHTML = state.name;
     document.querySelector('[data-binding="title"]').innerHTML = state.title;
     document.querySelector('[data-model="name"]').value = state.name;
     document.querySelector('[data-model="title"]').value = state.title;
    }; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬åªæ˜¯é”™è¿‡äº†æœ€åä¸€å°å—ã€‚æ¯æ¬¡æˆ‘ä»¬ä¿®æ”¹**è§†å›¾**æ—¶ï¼Œ**çŠ¶æ€**ä¹Ÿè¦ç›¸åº”æ”¹å˜ã€‚æˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼Œå‘è¾“å…¥æ·»åŠ ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨:ğŸ˜

```
 const listener = (event) => {
      state[event.target.dataset.model] = event.target.value;
    });

   document.querySelector('[data-model="name"]').addEventListener('keyup', listener);  
   document.querySelector('[data-model="title"]').addEventListener('keyup', listener); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶å*ç§å•Š*ï¼ç°åœ¨æŠŠæˆå®Œæˆäº†ï¼ğŸ‘¨â€ğŸ’»

### [](#more-generic-implementation-poc)æ›´é€šç”¨çš„å®ç°(POC)ğŸŒŸ

[https://stackblitz.com/edit/two-way-data-binding-poc?](https://stackblitz.com/edit/two-way-data-binding-poc?)