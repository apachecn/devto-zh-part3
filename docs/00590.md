# ä½¿ç”¨ Now.sh éƒ¨ç½²é™æ€ Gatsby åº”ç”¨ç¨‹åº

> åŸæ–‡:[https://dev . to/p0ooker/deploying-a-static-Gatsby-app-using-now-sh-32ob](https://dev.to/p0oker/deploying-a-static-gatsby-app-using-now-sh-32ob)

å¦‚æœæ‚¨æ­£åœ¨ç”¨ Gatsby åˆ›å»ºæ–°çš„é™æ€ç½‘ç«™ï¼Œæ‚¨å¯èƒ½æ­£åœ¨å¯»æ‰¾ä¸€ç§ç®€å•çš„æ–¹æ³•æ¥æ„å»ºå’Œéƒ¨ç½²å®ƒã€‚æœ‰ä¸¤ç§é€šç”¨çš„æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½¿ç”¨ Github ä¸ Now.sh å¹³å°é›†æˆï¼Œæˆ–è€…æ‰‹åŠ¨ä½¿ç”¨ CLIã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è§£é‡Šè¿™ä¸¤ç§æ–¹æ³•ï¼Œå¹¶åæ˜ æˆ‘ä½¿ç”¨ Now.sh éƒ¨ç½²æ‚¨æ­£åœ¨é˜…è¯»çš„åŒä¸€ä¸ªåšå®¢çš„ç»éªŒã€‚

æˆ‘å¯¹æœ¬æ–‡çš„å‡è®¾æ˜¯ï¼Œæ‚¨ç†Ÿæ‚‰ Gatsbyï¼Œå¹¶ä¸”æœ€è¿‘å¼€å§‹ä½¿ç”¨ Now.shã€‚å¸Œæœ›æ‚¨ä¹Ÿå‘è¯¥æœåŠ¡æ³¨å†Œäº†ä¸€ä¸ªåŸŸï¼Œä»¥ä¾¿ä¸ºæ‚¨çš„éƒ¨ç½²åˆ›å»ºä¸€ä¸ªåˆ«åï¼Œä½†è¿™ä¸æ˜¯å¿…éœ€çš„ã€‚

## [](#using-cli)ä½¿ç”¨ CLI

Now.sh æœ‰ä¸€ä¸ªéå¸¸æ–¹ä¾¿å’Œå¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ã€‚æ— è®ºä½ å¤šä¹ˆå–œæ¬¢ä¸ Github é›†æˆæˆ–ä½¿ç”¨æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œä½ æ€»æ˜¯éœ€è¦å›åˆ° cli æ¥è·å¾—é«˜çº§åŠŸèƒ½ã€‚æˆ‘ä¹Ÿä¸æƒ³è¿™ä¹ˆè¯´ï¼Œä½†å®ƒæ¯” Github é›†æˆå¯é å¾—å¤šï¼Œå› ä¸ºæœ‰æ—¶è¿™äº›æœåŠ¡ä¼šå› ä¸ºæŠ€æœ¯åŸå› è€Œåœæ­¢å·¥ä½œã€‚

ä¸ºäº†è¿›è¡Œéƒ¨ç½²ï¼Œæ‚¨éœ€è¦é¦–å…ˆä» npm:
ä¸‹è½½å‘½ä»¤è¡Œå·¥å…·

```
npm install -g now 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æ‚¨éœ€è¦åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ç™»å½•åˆ°æ‚¨çš„ now.sh å¸æˆ·:

```
now login youremail@gmail.com 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¾“å…¥å¯†ç ï¼Œä¸€åˆ‡å°±ç»ªã€‚å¦‚æœæ‚¨åœ¨æ¯ä¸ªæ–‡ä»¶å¤¹ä¸­è¾“å…¥`now`,å®ƒä¼šå°†è¯¥æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ åˆ°ä¸€ä¸ªå¯åˆ†é…ç»™æ‚¨çš„åŸŸçš„æ–°åœ°å€ã€‚ç„¶è€Œï¼Œå¦‚æœä½ åœ¨ Gatsby åšå®¢ä¸Šè¿™ä¹ˆåšï¼Œä½ æœ€ç»ˆä¼šä¸Šä¼ ä½ çš„æºç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬`package.json`ï¼Œä½†ä¸ä¸Šä¼ é™æ€æ–‡ä»¶ã€‚å¦‚æœæ‚¨æƒ³è¦åœ¨äº‘ä¸­è¿è¡Œæ„å»ºï¼Œæ‚¨éœ€è¦ä¸º now.sh æŒ‡å®šä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä»¥äº†è§£å¦‚ä½•æ„å»ºæ‚¨çš„æ–‡ä»¶ã€‚

åœ¨ Gatsby ç›®å½•çš„æ ¹ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ªåä¸º`now.json`çš„æ–‡ä»¶(åœ¨`package.json`æ—è¾¹)ã€‚è¿™æ˜¯ä¸€ä¸ªæ ·æœ¬ï¼Œè¿™ä¸ªæ–‡ä»¶åº”è¯¥æ˜¯:

```
// now.json
{
  "version": 2, // using version 2.0 of now.sh
  "name": "Your Gatsby App Name",
  "alias": "yourdomain.com", // remove it if you don't own a domain with now.sh
  "builds": [
    {
      "src": "package.json",
      "use": "@now/static-build",
      "config": {
        "distDir": "public" // default folder for Gatsby builds
      }
    }
  ]
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å†èµ°ä¸€æ­¥ï¼Œæˆ‘ä»¬å°±æ²¡äº‹äº†ã€‚è½¬åˆ°ä½ çš„`package.json`ï¼Œæ·»åŠ ä¸€ä¸ªåä¸º`now-build`çš„æ–°è„šæœ¬ï¼Œå®ƒåº”è¯¥æŒ‡å‘`gatsby build`ï¼Œå°±åƒè¿™æ ·:

```
// package.json
"scripts": {
    "dev": "gatsby develop",
    "now-build": "gatsby build",
    // other scripts ....
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬éƒ½å‡†å¤‡å¥½äº†ã€‚ç°åœ¨ï¼Œæ‚¨å¯ä»¥ç®€å•åœ°åœ¨ Gatsby æ ¹æ–‡ä»¶å¤¹ä¸­è¿è¡Œä¸‹é¢çš„å‘½ä»¤:

```
now --target production 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ­¤å‘½ä»¤å°†å‡†å¤‡ä¸€ä¸ªæ–°çš„æ„å»ºï¼Œå¹¶ä½¿ç”¨ Now.sh å°†æ‚¨çš„ Gatsby åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°æ‚¨çš„åŸŸä¸­ã€‚ç”Ÿæ´»æ˜¯ç¾å¥½çš„ï¼

## [](#using-github)ä½¿ç”¨ Github

æ˜¯çš„ï¼Œä½¿ç”¨ Github ç¼–è¾‘å™¨æ¥å†™ä¸€ç¯‡æ–°çš„åšå®¢æ–‡ç« æˆ–è€…åªæ˜¯ç¼–è¾‘ä»¥å‰çš„æ–‡ç« æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¸»æ„ï¼ŒNow.sh å¯ä»¥åœ¨æ¯æ¬¡æ–°æäº¤åç«‹å³è§¦å‘æ–°çš„éƒ¨ç½²ã€‚è¿™é‡Œçš„ç»éªŒæ³•åˆ™æ˜¯ï¼Œå¦‚æœä½ å·²ç»ä¸ºä½ çš„åŸŸè®¾ç½®äº†ä¸€ä¸ªåˆ«åï¼Œé‚£ä¹ˆ Github ä¸»åˆ†æ”¯çš„æ¯ä¸€æ¬¡æäº¤éƒ½ä¼šè§¦å‘ä¸€æ¬¡å¯¹ä½ çš„ç½‘ç«™ URL çš„éƒ¨ç½²ï¼Œè€Œå…¶ä»–åˆ†æ”¯åªä¼šå°†ä¸€ä¸ªç‰ˆæœ¬éƒ¨ç½²åˆ°ä¸€ä¸ªæ–°çš„åœ°å€ã€‚è¿™ä¸ªåœ°å€å¯ä»¥åœ¨ä½ çš„ Github ç¯å¢ƒæ ‡ç­¾æˆ–è€… Now.sh é¢æ¿ä¸­æ‰¾åˆ°ã€‚

ä¸ºäº†ä½¿ç”¨ Github åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ éœ€è¦é¦–å…ˆ[å°†ä½ çš„ Github è´¦æˆ·](https://zeit.co/docs/v2/integrations/now-for-github/)è¿æ¥åˆ° Now.shã€‚ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æ·»åŠ ä¸€ä¸ªç±»ä¼¼äºä¸Šä¸€æ­¥çš„`now.json`æ–‡ä»¶:

```
// now.json
{
  "version": 2, // using version 2.0 of now.sh
  "name": "Your Gatsby App Name",
  "alias": "yourdomain.com", // remove it if you don't own a domain with now.sh
  "builds": [
    {
      "src": "package.json",
      "use": "@now/static-build",
      "config": {
        "distDir": "public" // default folder for Gatsby builds
      }
    }
  ]
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿˜è¦ç¡®ä¿å°†`now-build`è„šæœ¬æ·»åŠ åˆ°ä½ çš„`package.json`æ–‡ä»¶:

```
// package.json
"scripts": {
    "dev": "gatsby develop",
    "now-build": "gatsby build",
    // other scripts ....
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä»ç°åœ¨å¼€å§‹ï¼Œæ¯æ¬¡æäº¤åˆ° Github çš„ä¸»åˆ†æ”¯éƒ½ä¼šè§¦å‘ä¸€ä¸ªåˆ°ä½ çš„ç½‘ç«™ URL çš„éƒ¨ç½²ã€‚å¹²å¾—å¥½ï¼Œä½ ä¸æ˜¯ä¸€ä¸ªæ‡’æƒ°çš„å¼€å‘äººå‘˜ï¼

è¿™ç¯‡æ–‡ç« æœ€åˆæ˜¯ä¸ºæˆ‘çš„ä¸ªäººåšå®¢ [fsociety](https://fsociety.at) å†™çš„ğŸ™ƒ