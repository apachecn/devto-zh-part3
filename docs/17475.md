# ä» Xcode æ’ä»¶åˆ° Xcode æ‰©å±•

> åŸæ–‡:[https://dev . to/on myway 133/from-xcode-plugins-to-xcode-extensions-491 e](https://dev.to/onmyway133/from-xcode-plugins-to-xcode-extensions-491e)

[![](../Images/944b476e55223bb14685029a965c721e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--eXvWVnMD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2000/0%2A1koaW2o_S4P9h9-H.jpg)

Xcode æ˜¯ iOS å’Œ macOS å¼€å‘è€…ä¸å¯æˆ–ç¼ºçš„ IDEã€‚ä»æ—©æœŸå¼€å§‹ï¼Œæ„å»ºå’Œå®‰è£…å®šåˆ¶æ’ä»¶çš„èƒ½åŠ›æå¤§åœ°æé«˜äº†æˆ‘ä»¬çš„ç”Ÿäº§åŠ›ã€‚æ²¡è¿‡å¤šä¹…ï¼Œè‹¹æœå‡ºäºéšç§è€ƒè™‘æ¨å‡ºäº† Xcode æ‰©å±•ã€‚

æˆ‘å·²ç»æ„å»ºäº†ä¸€äº› Xcode æ’ä»¶å’Œæ‰©å±•ï¼Œå¦‚ [XcodeWay](https://github.com/onmyway133/XcodeWay) ã€ [XcodeColorSense](https://github.com/onmyway133/XcodeColorSense) ã€ [XcodeColorSense2](https://github.com/onmyway133/XcodeColorSense2) å’Œ [Xmas](https://github.com/onmyway133/Xmas) ã€‚è¿™æ˜¯ä¸€æ¬¡æœ‰ç›Šçš„ç»å†ã€‚æˆ‘å­¦åˆ°äº†å¾ˆå¤šï¼Œæ”¶è·çš„ç”Ÿäº§åŠ›ä¹Ÿå¾ˆå¯è§‚ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æ¼”ç¤ºäº†å¦‚ä½•å°†æˆ‘çš„ Xcode æ’ä»¶è½¬æ¢æˆæ‰©å±•ï¼Œä»¥åŠæˆ‘åœ¨è½¬æ¢è¿‡ç¨‹ä¸­çš„ç»å†ã€‚

## [](#my-first-xcode-plugin-xcodeway)æˆ‘çš„ç¬¬ä¸€ä¸ª Xcode æ’ä»¶:XcodeWay

> # I choose a lazy person to do a hard job. Because a lazy person will find an easy way to do

æˆ‘å¾ˆå–œæ¬¢æ¯”å°”Â·ç›–èŒ¨çš„ä¸Šè¿°[è¯­å½•ã€‚æˆ‘å°½é‡é¿å…é‡å¤å’Œæ— èŠçš„ä»»åŠ¡ã€‚æ¯å½“æˆ‘å‘ç°è‡ªå·±åˆåœ¨åšåŒæ ·çš„ä»»åŠ¡æ—¶ï¼Œæˆ‘å°±ä¼šç¼–å†™è„šæœ¬å’Œå·¥å…·æ¥å®ç°è‡ªåŠ¨åŒ–ã€‚è¿™æ ·åšéœ€è¦ä¸€äº›æ—¶é—´ï¼Œä½†åœ¨ä¸ä¹…çš„å°†æ¥ï¼Œæˆ‘ä¼šå˜å¾—æ›´æ‡’ã€‚](https://www.goodreads.com/quotes/568877-i-choose-a-lazy-person-to-do-a-hard-job)

é™¤äº†å¯¹æ„å»ºå¼€æºæ¡†æ¶å’Œå·¥å…·æ„Ÿå…´è¶£ä¹‹å¤–ï¼Œæˆ‘è¿˜å–œæ¬¢æ‰©å±•æˆ‘æ­£åœ¨ä½¿ç”¨çš„ IDEâ€”â€”ä¸»è¦æ˜¯ Xcodeã€‚

2014 å¹´ç¬¬ä¸€æ¬¡å¼€å§‹ iOS å¼€å‘ã€‚æˆ‘æƒ³è¦ä¸€ç§å¿«é€Ÿçš„æ–¹æ³•ï¼Œé€šè¿‡å½“å‰é¡¹ç›®çš„ä¸Šä¸‹æ–‡ç›´æ¥ä» Xcode å¯¼èˆªåˆ°è®¸å¤šåœ°æ–¹ã€‚æœ‰å¾ˆå¤šæ¬¡æˆ‘ä»¬æƒ³:

*   åœ¨â€œFinderâ€ä¸­æ‰“å¼€å½“å‰é¡¹ç›®æ–‡ä»¶å¤¹ä»¥æ›´æ”¹ä¸€äº›æ–‡ä»¶

*   æ‰“å¼€ç»ˆç«¯è¿è¡Œä¸€äº›å‘½ä»¤

*   åœ¨ GitHub ä¸­æ‰“å¼€å½“å‰æ–‡ä»¶ï¼Œå¿«é€Ÿå°†é“¾æ¥ç»™åŒäº‹

*   æˆ–è€…æ‰“å¼€å…¶ä»–æ–‡ä»¶å¤¹ï¼Œå¦‚ä¸»é¢˜ã€æ’ä»¶ã€ä»£ç ç‰‡æ®µã€è®¾å¤‡æ—¥å¿—ã€‚

æˆ‘ä»¬æ¯å¤©èŠ‚çœçš„æ¯ä¸€ç‚¹æ—¶é—´éƒ½å¾ˆé‡è¦ã€‚

æˆ‘è®¤ä¸ºå†™ä¸€ä¸ª Xcode æ’ä»¶æ˜¯ä¸€ä¸ªå¾ˆé…·çš„æƒ³æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Xcode é‡Œé¢åšä¸Šé¢æ‰€æœ‰çš„äº‹æƒ…ã€‚æˆ‘æ²¡æœ‰ç­‰å¾…å…¶ä»–äººæ¥åšï¼Œè€Œæ˜¯å·èµ·è¢–å­å†™äº†æˆ‘çš„ç¬¬ä¸€ä¸ª Xcode æ’ä»¶â€”â€”[Xcode way](https://github.com/onmyway133/XcodeWay)â€”â€”å¹¶ä½œä¸ºå¼€æºå…±äº«ã€‚

XcodeWay çš„å·¥ä½œåŸç†æ˜¯åœ¨ç¼–è¾‘å™¨ä¸‹åˆ›å»ºä¸€ä¸ªèœå•ï¼Œæœ‰å¾ˆå¤šé€‰é¡¹å¯ä»¥ç›´æ¥ä» Xcode å¯¼èˆªåˆ°å…¶ä»–åœ°æ–¹ã€‚è¿™çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†éœ€è¦ä¸€äº›è‰°è‹¦çš„å·¥ä½œã€‚

## [](#what-are-xcode-plugins)ä»€ä¹ˆæ˜¯ Xcode æ’ä»¶ï¼Ÿ

Xcode æ’ä»¶ä¸æ˜¯ Xcode å®˜æ–¹æ”¯æŒçš„ï¼Œä¹Ÿä¸æ˜¯ Apple æ¨èçš„ã€‚æ²¡æœ‰å…³äºä»–ä»¬çš„æ–‡ä»¶ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç°æœ‰æ’ä»¶çš„æºä»£ç å’Œä¸€äº›æ•™ç¨‹æ¥äº†è§£å®ƒä»¬ã€‚

Xcode æ’ä»¶åªæ˜¯ä¸€ä¸ª xcplugin ç±»å‹çš„åŒ…ï¼Œæ”¾åœ¨~/Library/Application Support/Developer/Shared/Xcode/plugins ä¸­ã€‚Xcode å¯åŠ¨æ—¶ï¼Œä¼šè½½å…¥æ­¤æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰ Xcode æ’ä»¶ã€‚æ’ä»¶å’Œ Xcode è¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œæ‰€ä»¥å¯ä»¥åƒ Xcode ä¸€æ ·åšä»»ä½•äº‹æƒ…ã€‚ä»»ä½•æ’ä»¶ä¸­çš„é”™è¯¯éƒ½å¯èƒ½å¯¼è‡´ Xcode å´©æºƒã€‚

è¦åˆ¶ä½œ Xcode æ’ä»¶ï¼Œåˆ›å»ºä¸€ä¸ª macOS Bundleï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªä» NSObject æ‰©å±•çš„ç±»ï¼Œå¹¶æœ‰ä¸€ä¸ªæ¥å— NSBundle çš„åˆå§‹åŒ–å™¨ï¼Œä¾‹å¦‚åœ¨ [Xmas](https://github.com/onmyway133/Xmas/blob/master/Xmas/Xmas.swift) ä¸­:

[![](../Images/a6a58a6e9bd4d07f00df19c8a4f19278.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Ojg67Mtr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/3104/1%2A00MyrPD8FnUCCCPZL8G8qg.png)

```
class Xmas: NSObject {

  var bundle: NSBundle

  init(bundle: NSBundle) {
    self.bundle = bundle
    super.init()
  }
} 
```

Inside Info.plist æˆ‘ä»¬éœ€è¦:

*   å°†è¿™ä¸ªç±»å£°æ˜ä¸ºæ’ä»¶çš„ä¸»å…¥å£ç±»ï¼Œå¹¶ä¸”

*   è¿™ä¸ªåŒ…æ²¡æœ‰ UIï¼Œå› ä¸ºæˆ‘ä»¬åœ¨è¿è¡Œæ—¶åˆ›å»º UI æ§ä»¶å¹¶æ·»åŠ åˆ° Xcode æ¥å£

    nsprincipaiclass
    åœ£è¯èŠ‚
    xcpluginahui

Xcode æ’ä»¶çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å¿…é¡»ä¸æ–­æ›´æ–° dvtplug ä¸å…¼å®¹ UIDsã€‚æ¯å½“æ–°ç‰ˆæœ¬çš„ Xcode é—®ä¸–æ—¶ï¼Œè¿™ç§æƒ…å†µéƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚å¦‚æœæ²¡æœ‰æ›´æ–°ï¼ŒXcode å°†æ‹’ç»åŠ è½½æ’ä»¶ã€‚

## Xcode æ’ä»¶èƒ½åšä»€ä¹ˆ

è®¸å¤šå¼€å‘äººå‘˜æ„å»º Xcode æ’ä»¶ï¼Œå› ä¸ºä»–ä»¬ç¼ºå°‘å…¶ä»– ide ä¸­çš„ç‰¹å®šåŠŸèƒ½ï¼Œå¦‚ Sublime Textã€AppCode æˆ– Atomã€‚

ç”±äº Xcode æ’ä»¶æ˜¯åœ¨ä¸ Xcode ç›¸åŒçš„è¿›ç¨‹ä¸­åŠ è½½çš„ï¼Œå®ƒä»¬å¯ä»¥åš Xcode èƒ½åšçš„ä¸€åˆ‡ã€‚å”¯ä¸€çš„é™åˆ¶æ˜¯æˆ‘ä»¬çš„æƒ³è±¡åŠ›ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Objective C Runtime æ¥å‘ç°ç§æœ‰æ¡†æ¶å’Œå‡½æ•°ã€‚ç„¶åï¼ŒLLDB å’Œç¬¦å·æ–­ç‚¹å¯ä»¥è¿›ä¸€æ­¥ç”¨äºæ£€æŸ¥æ­£åœ¨è¿è¡Œçš„ä»£ç å¹¶æ”¹å˜å®ƒä»¬çš„è¡Œä¸ºã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ swizzling æ¥æ”¹å˜ä»»ä½•æ­£åœ¨è¿è¡Œçš„ä»£ç çš„å®ç°ã€‚ç¼–å†™ Xcode æ’ä»¶å¾ˆéš¾â€”â€”éœ€è¦å¾ˆå¤šçŒœæµ‹ï¼Œæœ‰æ—¶éœ€è¦å¾ˆå¥½çš„æ±‡ç¼–çŸ¥è¯†ã€‚

åœ¨æ’ä»¶çš„é»„é‡‘æ—¶ä»£ï¼Œæœ‰ä¸€ä¸ªæµè¡Œçš„æ’ä»¶ç®¡ç†å™¨ï¼Œå®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œå«åš[é˜¿å¡ç‰¹å…¹](https://github.com/alcatraz/Alcatraz)ã€‚å®ƒå¯ä»¥å®‰è£…å…¶ä»–æ’ä»¶ï¼Œè¿™åŸºæœ¬ä¸Šåªæ˜¯ä¸‹è½½ xcplugin æ–‡ä»¶å¹¶å°†å…¶ç§»åŠ¨åˆ° plugins æ–‡ä»¶å¤¹ã€‚

[![](../Images/93a6bffc9293aaa73742307339a38998.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--5Lvi0kSB--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/3476/0%2APJ2uoFz8fm7TLI6F.png)

ä¸ºäº†äº†è§£æ’ä»¶èƒ½åšä»€ä¹ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€äº›æµè¡Œçš„æ’ä»¶ã€‚

### [](#xvim)Xvim

åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªæ˜¯ [Xvim](https://github.com/XVimProject/XVim) ï¼Œå®ƒåœ¨ Xcode ä¸­æ·»åŠ äº† vim é”®ç»‘å®šã€‚å®ƒå‡ ä¹æ”¯æŒæˆ‘ä»¬ä»¥å‰åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨çš„æ‰€æœ‰æŒ‰é”®ç»‘å®šã€‚

[![](../Images/0df05322e48debf2a4f5fa60cb6ee9ba.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--vlqBnh-J--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2584/1%2Amk9e6p3myodrOVbspovq-w.png)

### [](#scxcodeminimap)SCXcodeMiniMap

å¦‚æœä½ åœ¨ Sublime æ–‡æœ¬ä¸­é”™è¿‡äº† MiniMap æ¨¡å¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ [SCXcodeMiniMap](https://github.com/stefanceriu/SCXcodeMiniMap) åœ¨ Xcode ç¼–è¾‘å™¨ä¸­æ·»åŠ ä¸€ä¸ªå³è¾¹çš„åœ°å›¾é¢æ¿ã€‚

[![](../Images/ea50e3c1fcd32f5706967d2793eba109.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--CEdInc6F--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/3360/0%2A2ceF-Oww_gKb8V65)

### [](#fuzzyautocompleteplugin)æ¨¡ç³Šè‡ªåŠ¨å®Œæˆæ’ä»¶

åœ¨ç‰ˆæœ¬ 9 ä¹‹å‰ï¼ŒXcode æ²¡æœ‰é€‚å½“çš„è‡ªåŠ¨å®ŒæˆåŠŸèƒ½ï¼Œå®ƒåªæ˜¯åŸºäºå‰ç¼€ã€‚è¿™å°±æ˜¯ [FuzzyAutocompletePlugin](https://github.com/FuzzyAutocomplete/FuzzyAutocompletePlugin) çš„é—ªå…‰ç‚¹ã€‚å®ƒæ ¹æ® Xcode ä¸­éšè—çš„ IDEOpenQuicklyPattern ç‰¹æ€§æ‰§è¡Œæ¨¡ç³Šè‡ªåŠ¨å®Œæˆã€‚

[![](../Images/4316051e7560cc6e902755574ebbf1b0.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--94MoPBNw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2532/1%2A-DlTVNe370dbXNlxzOmH1g.png)

### [](#ksimagenamedxcode)KSImageNamed-Xcode

ä¸ºäº†åœ¨ UIImageView ä¸­æ˜¾ç¤ºä¸€ä¸ªåŒ…å›¾åƒï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨ imageNamed æ–¹æ³•ã€‚ä½†æ˜¯å‡†ç¡®è®°ä½å›¾åƒæ–‡ä»¶çš„åç§°æ˜¯å›°éš¾çš„ã€‚KSImageNamed-Xcode æ¥å¸®å¿™äº†ã€‚å½“æ‚¨å¼€å§‹é”®å…¥æ—¶ï¼Œæ‚¨å°†è·å¾—ä¸€ä¸ªè‡ªåŠ¨å»ºè®®çš„å›¾åƒåç§°åˆ—è¡¨ã€‚

[![](../Images/028ed6ef9096d964be627ead7432a352.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--azpPpVnG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2556/1%2AoMRkzNj6881iK9Tsv3OGRA.png)

### [](#colorsenseforxcode)ColorSense-for-Xcode

å¼€å‘è¿‡ç¨‹ä¸­çš„å¦ä¸€ä¸ªéš¾é¢˜æ˜¯ä½¿ç”¨ UIColorï¼Œå®ƒä½¿ç”¨ RGBA è‰²å½©ç©ºé—´ã€‚æˆ‘ä»¬æ²¡æœ‰å¾—åˆ°æˆ‘ä»¬æŒ‡å®šçš„é¢œè‰²çš„è§†è§‰æŒ‡ç¤ºå™¨ï¼Œå¹¶ä¸”æ‰‹åŠ¨æ‰§è¡Œæ£€æŸ¥å¯èƒ½å¾ˆè€—æ—¶ã€‚å¹¸è¿çš„æ˜¯ï¼Œæœ‰ [ColorSense-for-Xcode](https://github.com/omz/ColorSense-for-Xcode) æ˜¾ç¤ºæ­£åœ¨ä½¿ç”¨çš„é¢œè‰²å’Œé¢œè‰²é€‰æ‹©å™¨é¢æ¿ï¼Œå¯ä»¥è½»æ¾é€‰æ‹©æ­£ç¡®çš„é¢œè‰²ã€‚

[![](../Images/fa374883cb8bd0baeaa616043678d224.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--I2h15EQp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2880/0%2AEZE4S-PiYPa3fmu4.png)

### [](#linkedconsole)é“¾æ¥æ§åˆ¶å°

åœ¨ AppCode ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è·³è½¬åˆ°æ§åˆ¶å°ä¸­è®°å½•çš„æ–‡ä»¶ä¸­çš„ç‰¹å®šè¡Œã€‚å¦‚æœä½ åœ¨ Xcode ä¸­é”™è¿‡äº†è¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨ [LinkedConsole](https://github.com/krzysztofzablocki/LinkedConsole) ã€‚è¿™å°†å¯ç”¨ Xcode æ§åˆ¶å°ä¸­çš„å¯ç‚¹å‡»é“¾æ¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç«‹å³è·³è½¬åˆ°è¯¥æ–‡ä»¶ã€‚

[![](../Images/6474e3f0398cbc064faf1626eed335cc.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--foich3Rf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/3740/1%2A1K4Ndh9cQiKHNjFq3FELkA.png)

## Xcode æ’ä»¶èƒŒåçš„è¾›è‹¦

åˆ¶ä½œä¸€ä¸ª Xcode æ’ä»¶å¹¶ä¸å®¹æ˜“ã€‚æˆ‘ä»¬ä¸ä»…éœ€è¦äº†è§£ macOS ç¼–ç¨‹ï¼Œè¿˜éœ€è¦æ·±å…¥ç ”ç©¶ Xcode è§†å›¾å±‚æ¬¡ç»“æ„ã€‚ä¸ºäº†æ³¨å…¥æˆ‘ä»¬æƒ³è¦çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬éœ€è¦æ¢ç´¢ç§æœ‰æ¡†æ¶å’Œ APIã€‚

å…³äºå¦‚ä½•åˆ¶ä½œæ’ä»¶çš„æ•™ç¨‹å¾ˆå°‘ï¼Œä½†æ˜¯å¹¸è¿çš„æ˜¯ï¼Œå¤§å¤šæ•°æ’ä»¶éƒ½æ˜¯å¼€æºçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç†è§£å®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æ—¢ç„¶æˆ‘åšäº†å‡ ä¸ªæ’ä»¶ï¼Œæˆ‘å¯ä»¥ç»™å‡ºä¸€äº›å…³äºå®ƒä»¬çš„æŠ€æœ¯ç»†èŠ‚ã€‚

Xcode æ’ä»¶é€šå¸¸ç”±ä¸¤ä¸ªç§æœ‰æ¡†æ¶å®Œæˆ:DVTKit å’Œ IDEKitã€‚ç³»ç»Ÿæ¡†æ¶åœ¨/System/Library/private Frameworksï¼Œä½†æ˜¯ Xcode ä¸“ç”¨çš„æ¡†æ¶åœ¨/Applications/Xcode . app/Contents/ä¸‹ï¼Œåœ¨é‚£é‡Œä½ å¯ä»¥æ‰¾åˆ°æ¡†æ¶ã€å…¶ä»–æ¡†æ¶å’Œå…±äº«æ¡†æ¶ã€‚

æœ‰ä¸€ä¸ªå·¥å…· [class-dump](https://github.com/nygard/class-dump) å¯ä»¥ä» Xcode app bundle ç”Ÿæˆå¤´ã€‚æœ‰äº†ç±»åå’Œæ–¹æ³•ï¼Œæ‚¨å¯ä»¥è°ƒç”¨ NSClassFromString ä»åç§°ä¸­è·å–ç±»ã€‚

### [](#swizzling-dvtbezelalertpanel-framework-in-xmas)åœ¨ Xmas ä¸­é‡ç»„ DVTBezelAlertPanel æ¡†æ¶

åœ£è¯èŠ‚ä¸€ç›´ç»™æˆ‘ä¸€ç§ç‰¹åˆ«çš„æ„Ÿè§‰ï¼Œæ‰€ä»¥æˆ‘å†³å®šåˆ¶ä½œ [Xmas](https://github.com/onmyway133/Xmas) ï¼Œå®ƒæ˜¾ç¤ºçš„æ˜¯éšæœºçš„åœ£è¯èŠ‚å›¾ç‰‡ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„è­¦æŠ¥è§†å›¾ã€‚ç”¨äºå‘ˆç°è¯¥è§†å›¾çš„ç±»æ˜¯ DVTKit æ¡†æ¶å†…çš„ [DVTBezelAlertPanel](https://github.com/luisobo/Xcode-RuntimeHeaders/blob/master/DVTKit/DVTBezelAlertPanel.h) ã€‚[æˆ‘å…³äºæ„å»ºè¿™ä¸ªæ’ä»¶çš„æ–‡ç« åœ¨è¿™é‡Œã€‚](https://medium.com/fantageek/xmas-9522c2c88db3)

[![](../Images/1b7ab39c633850b3f2fc894d8befc731.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--G7IyRqNu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2880/0%2ArPYi7qKWFen5Oq5W.png)

åœ¨ Objective C Runtime ä¸­ï¼Œæœ‰ä¸€ç§æŠ€æœ¯å«åš swizzlingï¼Œå®ƒå¯ä»¥æ”¹å˜å’Œåˆ‡æ¢ä»»ä½•æ­£åœ¨è¿è¡Œçš„ç±»å’Œæ–¹æ³•çš„å®ç°å’Œæ–¹æ³•ç­¾åã€‚

è¿™é‡Œï¼Œä¸ºäº†æ”¹å˜è­¦æŠ¥è§†å›¾çš„å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æˆ‘ä»¬è‡ªå·±çš„æ–¹æ³•äº¤æ¢åˆå§‹åŒ–å™¨ã€‚æˆ‘ä»¬åœ¨æ—©æœŸé€šè¿‡ç›‘å¬ nsapplicationdifinishlaunchingnition æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯¥é€šçŸ¥åœ¨ macOS æ’ä»¶(åœ¨æœ¬ä¾‹ä¸­ä¸º Xcode)å¯åŠ¨æ—¶å‘å‡ºã€‚

```
class func swizzleMethods() {
    guard let originalClass = NSClassFromString("DVTBezelAlertPanel") as? NSObject.Type else {
        return
    }

do {
        try originalClass.jr_swizzleMethod("initWithIcon:message:parentWindow:duration:",
            withMethod: "xmas_initWithIcon:message:parentWindow:duration:")
    }
    catch {
        Swift.print("Swizzling failed")
    }
} 
```

æˆ‘æœ€åˆå–œæ¬¢ç”¨ Swift åšä»»ä½•äº‹æƒ…ã€‚ä½†æ˜¯åœ¨ Swift ä¸­ä½¿ç”¨ s [wizzle init æ–¹æ³•å¾ˆæ£˜æ‰‹ï¼Œæ‰€ä»¥æœ€å¿«çš„æ–¹æ³•æ˜¯åœ¨](https://stackoverflow.com/questions/34317766/how-to-swizzle-init-in-swift) [Objective C](https://github.com/onmyway133/xmas/blob/master/Xmas/NSObject%2BXmas.m) ä¸­ä½¿ç”¨ã€‚ç„¶åæˆ‘ä»¬ç®€å•åœ°éå†è§†å›¾å±‚æ¬¡ç»“æ„ï¼Œæ‰¾åˆ° NSPanel å†…éƒ¨çš„ NSVisualEffectView æ¥æ›´æ–°å›¾åƒã€‚

### [](#interacting-with-dvtsourcetextview-in-xcodecolorsense)åœ¨ XcodeColorSense ä¸­ä¸ DVTSourceTextView äº¤äº’

æˆ‘ä¸»è¦ä½¿ç”¨åå…­è¿›åˆ¶é¢œè‰²ï¼Œæˆ‘æƒ³è¦ä¸€ç§å¿«é€Ÿçš„æ–¹æ³•æ¥æŸ¥çœ‹é¢œè‰²ã€‚æ‰€ä»¥æˆ‘æ„å»ºäº† XcodeColorSenseâ€”â€”å®ƒæ”¯æŒåå…­è¿›åˆ¶é¢œè‰²ã€RGBA å’Œå‘½åé¢œè‰²ã€‚

[![](../Images/b615948f8a481ce4deef22c049cdb606.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--eXug90Bu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/3772/1%2AZ-87Nylaul0qvQMVBo9JeA.png)

è¿™ä¸ªæƒ³æ³•å¾ˆç®€å•ã€‚è§£æè¯¥å­—ç¬¦ä¸²ï¼ŒæŸ¥çœ‹ç”¨æˆ·æ˜¯å¦è¾“å…¥äº†ä¸ UIColor ç›¸å…³çš„å†…å®¹ï¼Œå¹¶æ˜¾ç¤ºä¸€ä¸ªä»¥è¯¥é¢œè‰²ä¸ºèƒŒæ™¯çš„å°è¦†ç›–è§†å›¾ã€‚Xcode ä½¿ç”¨çš„æ–‡æœ¬è§†å›¾å±äº DVTKit æ¡†æ¶ä¸­çš„ DVTSourceTextView ç±»å‹ã€‚æˆ‘ä»¬è¿˜éœ€è¦ç›‘å¬ NSTextViewDidChangeSelectionNotificationï¼Œæ¯å½“ä»»ä½• NSTextView å†…å®¹å‘ç”Ÿ[æ›´æ”¹](https://github.com/onmyway133/XcodeColorSense/blob/master/XcodeColorSense/XcodeColorSense.swift)æ—¶å°±ä¼šè§¦å‘è¯¥é€šçŸ¥ã€‚

```
func listenNotification() {
  NSNotificationCenter.defaultCenter().addObserver(self, selector: #selector(handleSelectionChange(_:)), name: NSTextViewDidChangeSelectionNotification, object: nil)
}

func handleSelectionChange(note: NSNotification) {
  guard let DVTSourceTextView = NSClassFromString("DVTSourceTextView") as? NSObject.Type,
    object = note.object where object.isKindOfClass(DVTSourceTextView.self),
    let textView = object as? NSTextView
  else { return }

self.textView = textView
} 
```

æˆ‘æœ‰ä¸€ä¸ªåŒ¹é…å™¨æ¶æ„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ£€æµ‹ä¸åŒç±»å‹çš„ UIColor ç»“æ„â€”â€”ä¾‹å¦‚ [HexMatcher](https://github.com/onmyway133/XcodeColorSense/blob/master/XcodeColorSense/Matcher/HexMatcher.swift) ã€‚

```
public struct HexMatcher: Matcher {

func check(line: String, selectedText: String) -> (color: NSColor, range: NSRange)? {
    let pattern1 = "\"#?[A-Fa-f0-9]{6}\""
    let pattern2 = "0x[A-Fa-f0-9]{6}"

let ranges = [pattern1, pattern2].flatMap {
      return Regex.check(line, pattern: $0)
    }

guard let range = ranges.first
      else { return nil }

let text = (line as NSString).substringWithRange(range).replace("0x", with: "").replace("\"", with: "")
    let color = NSColor.hex(text)

return (color: color, range: range)
  }
} 
```

ä¸ºäº†æ¸²æŸ“è¦†ç›–å›¾ï¼Œæˆ‘ä»¬ä½¿ç”¨ NSColorWellï¼Œå®ƒé€‚åˆæ˜¾ç¤ºå¸¦æœ‰èƒŒæ™¯çš„è§†å›¾ã€‚ä½ç½®æ˜¯é€šè¿‡è°ƒç”¨ firstRectForCharacterRange å’Œç”¨ convertRectFromScreen å’Œ convertRect è¿›è¡Œä¸€äº›ç‚¹è½¬æ¢æ¥ç¡®å®šçš„ã€‚

### [](#using-nstask-and-ideworkspacewindowcontroller-in-xcodeway)åœ¨ XcodeWay ä¸­ä½¿ç”¨ NSTask å’Œ IDEWorkspaceWindowController

æœ€åæ˜¯æˆ‘å¿ƒçˆ±çš„ [XcodeWay](https://github.com/onmyway133/XcodeWay/tree/1.0) ã€‚

æˆ‘å‘ç°è‡ªå·±éœ€è¦å¸¦ç€å½“å‰é¡¹ç›®çš„ä¸Šä¸‹æ–‡ä» Xcode è½¬åˆ°ä¸åŒçš„åœ°æ–¹ã€‚æ‰€ä»¥æˆ‘æŠŠ XcodeWay ä½œä¸ºä¸€ä¸ªæ’ä»¶ï¼Œåœ¨ Window ä¸‹æ·»åŠ äº†å¾ˆå¤šæ–¹ä¾¿çš„èœå•é€‰é¡¹ã€‚

[![](../Images/d5cdb0cf7833cdd861b187b506357d6e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Gxyhiaz7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2880/0%2Af2mTvSC0HtdbcEZ6.png)

ç”±äºæ’ä»¶è¿è¡Œåœ¨åŒä¸€ä¸ª Xcode è¿›ç¨‹ä¸­ï¼Œå®ƒå¯ä»¥è®¿é—®ä¸»èœå• NSApp.mainMenuï¼Ÿã€‚itemWithTitle(â€œçª—å£â€)ã€‚åœ¨é‚£é‡Œæˆ‘ä»¬å¯ä»¥æ”¹å˜èœå•ã€‚XcodeWay æ—¨åœ¨é€šè¿‡å…¶ [Navigator](https://github.com/onmyway133/XcodeWay/blob/1.0/XcodeWay/Navigator/Navigator.swift) åè®®è½»æ¾æ‰©å±•åŠŸèƒ½ã€‚

```
[@objc](http://twitter.com/objc) protocol Navigator: NSObjectProtocol {
  func navigate()
  var title: String { get }
} 
```

å¯¹äºå¸¦æœ‰é™æ€è·¯å¾„çš„æ–‡ä»¶å¤¹ï¼Œå¦‚ Provisioning Profile ~/Library/mobiled device/Provisioning Profiles æˆ– User data Developer/Xcode/User dataï¼Œæˆ‘ä»¬å¯ä»¥åªæ„é€  URL å¹¶è°ƒç”¨ NSWorkspace.sharedWorkspace()ã€‚openURLã€‚å¯¹äºæ ¹æ®å½“å‰é¡¹ç›®è€Œå˜åŒ–çš„åŠ¨æ€æ–‡ä»¶å¤¹ï¼Œéœ€è¦åšæ›´å¤šçš„å·¥ä½œã€‚

æˆ‘ä»¬å¦‚ä½•åœ¨ Finder ä¸­æ‰“å¼€å½“å‰é¡¹ç›®çš„æ–‡ä»¶å¤¹ï¼Ÿå½“å‰é¡¹ç›®è·¯å¾„çš„ä¿¡æ¯ä¿å­˜åœ¨ IDEWorkspaceWindowController ä¸­ã€‚è¿™æ˜¯ä¸€ä¸ªåœ¨ Xcode ä¸­ç®¡ç†å·¥ä½œç©ºé—´çª—å£çš„ç±»ã€‚çœ‹çœ‹[ç¯å¢ƒç®¡ç†å™¨](https://github.com/onmyway133/XcodeWay/blob/1.0/XcodeWay/Helper/FTGEnvironmentManager.m)ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ [objc_getClass](https://developer.apple.com/documentation/objectivec/1418952-objc_getclass?language=objc) ä»å­—ç¬¦ä¸²ä¸­è·å–ç±»å®šä¹‰ã€‚

```
self.IDEWorkspaceWindowControllerClass = objc_getClass("IDEWorkspaceWindowController");

NSArray *workspaceWindowControllers = [self.IDEWorkspaceWindowControllerClass valueForKey:@"workspaceWindowControllers"];

id workSpace = nil;

for (id controller in workspaceWindowControllers) {
  if ([[controller valueForKey:@"window"] isEqual:[NSApp keyWindow]]) {
    workSpace = [controller valueForKey:@"_workspace"];
  }
}

NSString * path = [[workSpace valueForKey:@"representingFilePath"] valueForKey:@"_pathString"]; 
```

æœ€åï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ valueForKey æ¥è·å¾—æˆ‘ä»¬è®¤ä¸ºå­˜åœ¨çš„ä»»ä½•è´¢äº§çš„ä»·å€¼ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬ä¸ä»…å¾—åˆ°äº†[é¡¹ç›®è·¯å¾„](https://github.com/onmyway133/XcodeWay/blob/1.0/XcodeWay/Navigator/FTGProjectFolderNavigator.m)ï¼Œè¿˜å¾—åˆ°æ‰“å¼€æ–‡ä»¶çš„è·¯å¾„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ NSWorkspace ä¸Šè°ƒç”¨ activateFileViewerSelectingURLs æ¥æ‰“å¼€ Finder å¹¶é€‰ä¸­è¯¥æ–‡ä»¶ã€‚è¿™å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºç”¨æˆ·ä¸éœ€è¦åœ¨ Finder ä¸­æŸ¥æ‰¾è¯¥æ–‡ä»¶ã€‚

å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨å½“å‰é¡¹ç›®æ–‡ä»¶å¤¹ä¸­æ‰§è¡Œä¸€äº›ç»ˆç«¯å‘½ä»¤ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸¦æœ‰ launch pad /usr/bin/open å’Œå‚æ•°[@"-a", @"Terminal "ï¼ŒprojectFolderPath]çš„ NSTaskã€‚iTermï¼Œå¦‚æœé…ç½®çš„è¯ï¼Œå¯èƒ½ä¼šåœ¨ä¸€ä¸ªæ–°çš„æ ‡ç­¾é¡µä¸­æ‰“å¼€å®ƒã€‚

iOS 7 åº”ç”¨ç¨‹åºçš„æ–‡æ¡£æ”¾åœ¨åº”ç”¨ç¨‹åºæ”¯æŒå†…éƒ¨çš„å›ºå®šä½ç½® iPhone Simulator ä¸­ã€‚ä½†æ˜¯ï¼Œä» iOS 8 å¼€å§‹ï¼Œæ¯ä¸ªåº”ç”¨éƒ½æœ‰ä¸€ä¸ªç‹¬ç‰¹çš„ UUIDï¼Œå®ƒä»¬çš„[æ–‡ä»¶å¤¹](https://github.com/onmyway133/XcodeWay/blob/1.0/XcodeWay/Navigator/FTGSimulatorFolderNavigator.m)å¾ˆéš¾é¢„æµ‹ã€‚

```
~/Library/Developer/CoreSimulator/Devices/1A2FF360-B0A6-8127-95F3-68A6AB0BCC78/data/Container/Data/Application/ 
```

æˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªæ˜ å°„å¹¶æ‰§è¡Œè·Ÿè¸ªæ¥æŸ¥æ‰¾ä¸ºå½“å‰é¡¹ç›®ç”Ÿæˆçš„ IDï¼Œæˆ–è€…æ£€æŸ¥æ¯ä¸ªæ–‡ä»¶å¤¹ä¸­çš„ plist æ¥æ¯”è¾ƒåŒ…æ ‡è¯†ç¬¦ã€‚

æˆ‘æƒ³åˆ°çš„å¿«é€Ÿè§£å†³æ–¹æ¡ˆæ˜¯æœç´¢æœ€è¿‘æ›´æ–°çš„æ–‡ä»¶å¤¹ã€‚æ¯æ¬¡æˆ‘ä»¬æ„å»ºé¡¹ç›®ï¼Œæˆ–åœ¨åº”ç”¨ç¨‹åºä¸­è¿›è¡Œæ›´æ”¹ï¼Œä»–ä»¬çš„æ–‡æ¡£æ–‡ä»¶å¤¹éƒ½ä¼šæ›´æ–°ã€‚åœ¨é‚£é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ NSFileModificationDate æ¥æŸ¥æ‰¾å½“å‰é¡¹ç›®çš„æ–‡ä»¶å¤¹ã€‚

ä½¿ç”¨ Xcode æ’ä»¶æ—¶ä¼šé‡åˆ°å¾ˆå¤šéº»çƒ¦ï¼Œä½†ç»“æœæ˜¯å€¼å¾—çš„ã€‚æˆ‘ä»¬æ¯å¤©èŠ‚çœçš„æ¯å‡ åˆ†é’Ÿæœ€ç»ˆä¼šèŠ‚çœå¤§é‡çš„æ—¶é—´ã€‚

## [](#security-and-freedom)å®‰å…¨å’Œè‡ªç”±

æƒåŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ã€‚æ’ä»¶å¯ä»¥ä¸ºæ‰€æ¬²ä¸ºçš„äº‹å®æ•²å“äº†å®‰å…¨è­¦é’Ÿã€‚2015 å¹´æœ«ï¼Œå‡ºç°äº†ä¸€æ¬¡æ¶æ„è½¯ä»¶æ”»å‡»ï¼Œé€šè¿‡åˆ†å‘ Xcode çš„ä¿®æ”¹ç‰ˆæœ¬ï¼Œåä¸º [XcodeGhost](https://en.wikipedia.org/wiki/XcodeGhost) ï¼Œå°†æ¶æ„ä»£ç æ³¨å…¥ä»»ä½•ç”¨ XcodeGhost æ„å»ºçš„åº”ç”¨ã€‚è¯¥æ¶æ„è½¯ä»¶è¢«è®¤ä¸ºä½¿ç”¨äº†æ’ä»¶æœºåˆ¶ã€‚

å°±åƒæˆ‘ä»¬ä» Appstore ä¸‹è½½çš„ iOS åº”ç”¨ç¨‹åºä¸€æ ·ï¼Œå½“æˆ‘ä»¬ä» Mac Appstore æˆ–é€šè¿‡è‹¹æœå®˜æ–¹ä¸‹è½½é“¾æ¥ä¸‹è½½æ—¶ï¼ŒXcode ç­‰ macOS åº”ç”¨ç¨‹åºéƒ½æ˜¯ç”±è‹¹æœå…¬å¸[ç­¾ç½²](https://developer.apple.com/support/code-signing/)çš„ã€‚

**ä»£ç ç­¾åæ‚¨çš„åº”ç”¨**å‘ç”¨æˆ·ä¿è¯å®ƒæ¥è‡ªå·²çŸ¥çš„æ¥æºï¼Œå¹¶ä¸”è¯¥åº”ç”¨è‡ªä¸Šæ¬¡ç­¾ååæœªè¢«ä¿®æ”¹è¿‡ã€‚åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºå¯ä»¥é›†æˆåº”ç”¨ç¨‹åºæœåŠ¡ã€å®‰è£…åœ¨è®¾å¤‡ä¸Šæˆ–æäº¤åˆ°åº”ç”¨ç¨‹åºå•†åº—ä¹‹å‰ï¼Œå®ƒå¿…é¡»ä½¿ç”¨è‹¹æœé¢å‘çš„[è¯ä¹¦](https://developer.apple.com/support/technical/certificates/)è¿›è¡Œç­¾å

ä¸ºäº†é¿å…è¿™ç§æ½œåœ¨çš„æ¶æ„è½¯ä»¶ï¼Œåœ¨ WWDC 2016 ä¸Šï¼Œè‹¹æœå®£å¸ƒå°† [Xcode æºä»£ç ç¼–è¾‘å™¨æ‰©å±•](https://developer.apple.com/videos/play/wwdc2016/414/)ä½œä¸ºå°†ç¬¬ä¸‰æ–¹æ‰©å±•åŠ è½½åˆ° Xcode çš„å”¯ä¸€æ–¹å¼ã€‚è¿™æ„å‘³ç€ï¼Œä» Xcode 8 å¼€å§‹ï¼Œæ’ä»¶æ— æ³•åŠ è½½ã€‚

### [](#source-editor-extension)æºç ç¼–è¾‘æ‰©å±•

[æ‰©å±•](https://developer.apple.com/app-extensions/)æ˜¯ä»¥å—é™æ–¹å¼å®‰å…¨æ·»åŠ åŠŸèƒ½çš„æ¨èæ–¹æ³•ã€‚

åº”ç”¨ç¨‹åºæ‰©å±•è®©ç”¨æˆ·å¯ä»¥åœ¨æ•´ä¸ª iOS å’Œ macOS ä¸­è®¿é—®æ‚¨çš„åº”ç”¨ç¨‹åºçš„åŠŸèƒ½å’Œå†…å®¹ã€‚ä¾‹å¦‚ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºç°åœ¨å¯ä»¥ä½œä¸ºä¸€ä¸ªå°éƒ¨ä»¶å‡ºç°åœ¨â€œä»Šæ—¥â€å±å¹•ä¸Šï¼Œåœ¨æ“ä½œè¡¨å•ä¸­æ·»åŠ æ–°æŒ‰é’®ï¼Œåœ¨ç…§ç‰‡åº”ç”¨ç¨‹åºä¸­æä¾›ç…§ç‰‡è¿‡æ»¤å™¨ï¼Œæˆ–è€…æ˜¾ç¤ºæ–°çš„ç³»ç»ŸèŒƒå›´çš„è‡ªå®šä¹‰é”®ç›˜ã€‚

ç›®å‰ï¼ŒXcode çš„å”¯ä¸€æ‰©å±•æ˜¯ Source Editorï¼Œå®ƒå…è®¸æˆ‘ä»¬è¯»å–å’Œä¿®æ”¹æºæ–‡ä»¶çš„å†…å®¹ï¼Œä»¥åŠè¯»å–å’Œä¿®æ”¹ç¼–è¾‘å™¨ä¸­çš„å½“å‰æ–‡æœ¬é€‰æ‹©ã€‚

Extension æ˜¯ä¸€ä¸ªæ–°çš„ç›®æ ‡ï¼Œè¿è¡Œåœ¨ä¸ Xcode ä¸åŒçš„è¿›ç¨‹ä¸­ã€‚è¿™å¾ˆå¥½ï¼Œå› ä¸ºå®ƒä¸èƒ½ä»¥ä»»ä½•æ–¹å¼æ”¹å˜ Xcodeï¼Œåªèƒ½éµå¾ª XCSourceEditorCommand æ¥ä¿®æ”¹å½“å‰æ–‡æ¡£å†…å®¹ã€‚

```
protocol XCSourceEditorCommand {

  func perform(with invocation: [XCSourceEditorCommandInvocation](https://developer.apple.com/documentation/xcodekit/xcsourceeditorcommandinvocation), 
completionHandler: @escaping ([Error](https://developer.apple.com/documentation/swift/error)?) -> [Void](https://developer.apple.com/documentation/swift/void))
} 
```

[![](../Images/545a7dce6642fab0012bb3e74aaf2031.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--MQ9XCmpN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2720/0%2AQfHcnpb6WZaMrMDi.png)

Xcode 8 æœ‰å¾ˆå¤šæ”¹è¿›ï¼Œæ¯”å¦‚æ–°çš„ä»£ç å®ŒæˆåŠŸèƒ½ã€Swift å›¾åƒå’Œé¢œè‰²æ–‡å­—ä»¥åŠä»£ç ç‰‡æ®µã€‚è¿™å¯¼è‡´äº†è®¸å¤š Xcode æ’ä»¶è¢«å¼ƒç”¨ã€‚å¯¹äº XVim è¿™æ ·ä¸€äº›ä¸å¯æˆ–ç¼ºçš„æ’ä»¶æ¥è¯´ï¼Œè¿™æ˜¯æœ‰äº›äººæ— æ³•æ‰¿å—çš„ã€‚ä¸€äº›è€çš„æ’ä»¶ç‰¹æ€§æ˜¯ç›®å‰çš„æºç ç¼–è¾‘å™¨æ‰©å±•ç³»ç»Ÿæ— æ³•å®ç°çš„ã€‚

### [](#unless-you-resign-xcode)é™¤éä½ è¾èŒ Xcode

ç»•è¿‡ Xcode 8 å¯¹æ’ä»¶çš„é™åˆ¶çš„ä¸€ä¸ªè§£å†³æ–¹æ³•æ˜¯ç”¨ä¸€ç§å«åš[é‡æ–°ç­¾å](https://github.com/XVimProject/XVim2/blob/master/SIGNING_Xcode.md)çš„æŠ€æœ¯æ¥æ›¿æ¢ç°æœ‰çš„ Xcode ç­¾åã€‚é‡æ–°ç­¾åéå¸¸ç®€å•â€”â€”æˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªç­¾åè¯ä¹¦å¹¶è°ƒç”¨ codesign å‘½ä»¤ã€‚åœ¨è¿™ä¹‹åï¼ŒXcode åº”è¯¥å¯ä»¥åŠ è½½æ’ä»¶äº†ã€‚

[![](../Images/9f5b15f1516ba19119fb89be0d98616a.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ElphBmnm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2000/0%2A9BeVwHROwO7ls9Z0.png)

```
codesign -f -s MySelfSignedCertificate /Applications/Xcode.app 
```

ç„¶è€Œï¼Œ**ä¸å¯èƒ½**æäº¤ç”¨åºŸå¼ƒ Xcode æ„å»ºçš„åº”ç”¨ç¨‹åºï¼Œå› ä¸ºç­¾åä¸ Xcode çš„å®˜æ–¹ç‰ˆæœ¬ä¸åŒ¹é…ã€‚ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ä¸¤ä¸ª Xcodes:ä¸€ä¸ªå®˜å‘˜ç”¨äºåˆ†é…ï¼Œä¸€ä¸ªè¾èŒç”¨äºå¼€å‘ã€‚

## [](#moving-to-xcode-extension)ç§»åŠ¨åˆ° Xcode æ‰©å±•

Xcode æ‰©å±•æ˜¯æ­£ç¡®çš„é€‰æ‹©ï¼Œæ‰€ä»¥æˆ‘å¼€å§‹å°†æˆ‘çš„æ’ä»¶è½¬ç§»åˆ° extensionã€‚å¯¹äº Xmasï¼Œå› ä¸ºå®ƒä¿®æ”¹äº†è§†å›¾å±‚æ¬¡ç»“æ„ï¼Œæ‰€ä»¥å®ƒä¸èƒ½æˆä¸ºæ‰©å±•ã€‚

### xcodecolorsense 2 ä¸­çš„é¢œè‰²æ–‡å­—

ä¸ºäº†è‰²å½©æ„Ÿï¼Œæˆ‘ä»å¤´é‡å†™äº†æ‰©å±•ï¼Œå¹¶å°†å…¶å‘½åä¸º [XcodeColorSense2](https://github.com/onmyway133/XcodeColorSense2) ã€‚å½“ç„¶ï¼Œè¿™ä¸èƒ½æ˜¾ç¤ºå½“å‰ç¼–è¾‘å™¨è§†å›¾çš„è¦†ç›–å›¾ã€‚æ‰€ä»¥æˆ‘é€‰æ‹©åˆ©ç”¨ Xcode 8+ä¸­çš„æ–°é¢œè‰²æ–‡å­—ã€‚

[![](../Images/c761a5d3cd1b601d62ec2d07638e7076.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ifIDp_I0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/3800/1%2ADWeJnAh6xu1-CLfaABornQ.png)

é¢œè‰²æ˜¾ç¤ºåœ¨ä¸€ä¸ªå°ç›’å­é‡Œã€‚å¯èƒ½å¾ˆéš¾åŒºåˆ†ç›¸ä¼¼çš„é¢œè‰²ï¼Œæ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¹ŸåŒ…æ‹¬åç§°ã€‚è¿™æ®µä»£ç åªæ˜¯æ£€æŸ¥é€‰æ‹©å¹¶è§£æä»¥æ‰¾åˆ°é¢œè‰²å£°æ˜ã€‚

```
func perform(with invocation: XCSourceEditorCommandInvocation, completionHandler: [@escaping](http://twitter.com/escaping) (Error?) -> Void ) -> Void {
    guard let selection = invocation.buffer.selections.firstObject as? XCSourceTextRange else {
      completionHandler(nil)
      return
    }

let lineNumber = selection.start.line

guard lineNumber < invocation.buffer.lines.count,
      let line = invocation.buffer.lines[lineNumber] as? String else {
      completionHandler(nil)
      return
    }

guard let hex = findHex(string: line) else {
      completionHandler(nil)
      return
    }

let newLine = process(line: line, hex: hex)

invocation.buffer.lines.replaceObject(at: lineNumber, with: newLine)

completionHandler(nil)
  }
} 
```

å¤§å¤šæ•°åŠŸèƒ½éƒ½åµŒå…¥åœ¨æˆ‘çš„æ¡†æ¶ [Farge](https://github.com/onmyway133/Farge) ä¸­ï¼Œä½†æ˜¯æˆ‘æ‰¾ä¸åˆ°åœ¨ Xcode æ‰©å±•ä¸­ä½¿ç”¨[æ¡†æ¶çš„æ–¹æ³•ã€‚](https://stackoverflow.com/questions/43673353/how-to-use-framework-in-xcode-source-editor-extension)

ç”±äºæ‰©å±•ç‰¹æ€§åªèƒ½é€šè¿‡ç¼–è¾‘å™¨èœå•è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥å®šåˆ¶ä¸€ä¸ªé”®ç»‘å®šæ¥è°ƒç”¨è¿™ä¸ªèœå•é¡¹ã€‚ä¾‹å¦‚ï¼Œæˆ‘é€‰æ‹© Cmd+Ctrl+S æ¥æ˜¾ç¤ºå’Œéšè—é¢œè‰²ä¿¡æ¯ã€‚

[![](../Images/8f7869f5c299ddd48cc9b7e829257fab.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--uaekiRfr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2880/0%2Ar080P3DKAy_-zvJu.png)

å½“ç„¶ï¼Œä¸æœ€åˆçš„æ’ä»¶ç›¸æ¯”ï¼Œè¿™å¹¶ä¸ç›´è§‚ï¼Œä½†æ€»æ¯”æ²¡æœ‰å¥½ã€‚

### [](#how-to-debug-xcode-extensions)å¦‚ä½•è°ƒè¯• Xcode æ‰©å±•

å·¥ä½œå’Œè°ƒè¯•æ‰©å±•éå¸¸ç®€å•ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ Xcode æ¥è°ƒè¯• Xcodeã€‚Xcode çš„è°ƒè¯•ç‰ˆæœ¬æœ‰ä¸€ä¸ªç°è‰²å›¾æ ‡ã€‚

[![](../Images/d9e7b173c1fb0098ba90b24ca829ed5d.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--cwj63b6v--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/5580/1%2A-8Uw2DfLyJKt0cU4Ogcdvg.png)

### [](#how-to-install-xcode-extensions)å¦‚ä½•å®‰è£… Xcode æ‰©å±•

æ‰©å±•å¿…é¡»æœ‰ä¸€ä¸ªé™„å¸¦çš„ macOS åº”ç”¨ç¨‹åºã€‚è¿™å¯ä»¥åˆ†å‘åˆ° Mac Appstore æˆ–è€…è‡ªç­¾åã€‚æˆ‘å·²ç»å†™äº†ä¸€ç¯‡å…³äºå¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„æ–‡ç« ã€‚

åº”ç”¨ç¨‹åºçš„æ‰€æœ‰æ‰©å±•éƒ½éœ€è¦é€šè¿‡â€œç³»ç»Ÿåå¥½è®¾ç½®â€æ˜ç¡®å¯ç”¨ã€‚

[![](../Images/d2552e6fd1e7573ae1f4be144db92ad9.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--d4dfRr6b--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/NaN/1%2A6SSRVpyiSoP_QRa9DOO4ew.png)

Xcode æ‰©å±•ç›®å‰åªé€‚ç”¨äºç¼–è¾‘å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»æ‰“å¼€ä¸€ä¸ªæºæ–‡ä»¶ï¼Œç¼–è¾‘å™¨èœå•æ‰èƒ½ç”Ÿæ•ˆã€‚

## xcode way ä¸­çš„ AppleScript

åœ¨ Xcode æ‰©å±•ä¸­ï¼ŒNSWorkspaceã€NSTask å’Œç§æœ‰ç±»æ„é€ ä¸å†èµ·ä½œç”¨ã€‚ç”±äºæˆ‘å·²ç»åœ¨ [FinderGo](https://github.com/onmyway133/FinderGo) ä¸­ä½¿ç”¨äº† Finder Sync æ‰©å±•ï¼Œæˆ‘æƒ³æˆ‘å¯ä»¥ä¸º Xcode æ‰©å±•å°è¯•ç›¸åŒçš„ AppleScript è„šæœ¬ã€‚

[AppleScript](https://developer.apple.com/library/archive/documentation/AppleScript/Conceptual/AppleScriptLangGuide/introduction/ASLR_intro.html) æ˜¯è‹¹æœå…¬å¸åˆ›é€ çš„è„šæœ¬è¯­è¨€ã€‚å®ƒå…è®¸ç”¨æˆ·ç›´æ¥æ§åˆ¶å¯è„šæœ¬åŒ–çš„ Macintosh åº”ç”¨ç¨‹åºï¼Œä»¥åŠéƒ¨åˆ† macOS æœ¬èº«ã€‚æ‚¨å¯ä»¥åˆ›å»ºè„šæœ¬(ä¸€ç»„ä¹¦é¢è¯´æ˜)æ¥è‡ªåŠ¨æ‰§è¡Œé‡å¤æ€§ä»»åŠ¡ï¼Œç»„åˆå¤šä¸ªå¯è„šæœ¬åŒ–åº”ç”¨ç¨‹åºçš„åŠŸèƒ½ï¼Œå¹¶åˆ›å»ºå¤æ‚çš„å·¥ä½œæµç¨‹ã€‚

è¦å°è¯• AppleScriptï¼Œå¯ä»¥ä½¿ç”¨ macOS å†…ç½®çš„ app Script ç¼–è¾‘å™¨ç¼–å†™åŸå‹å‡½æ•°ã€‚å‡½æ•°å£°æ˜ä»¥ on å¼€å§‹ï¼Œä»¥ end ç»“æŸã€‚ä¸ºäº†é¿å…ä¸ç³»ç»Ÿå‡½æ•°çš„æ½œåœ¨å†²çªï¼Œæˆ‘é€šå¸¸ä½¿ç”¨ my ä½œä¸ºå‰ç¼€ã€‚ä¸‹é¢æ˜¯æˆ‘å¦‚ä½•ä¾é ç³»ç»Ÿäº‹ä»¶æ¥è·å–ä¸»ç›®å½•ã€‚

[ç”¨æˆ·ç•Œé¢è„šæœ¬](https://developer.apple.com/library/archive/documentation/LanguagesUtilities/Conceptual/MacAutomationScriptingGuide/AutomatetheUserInterface.html)æœ¯è¯­å¯åœ¨â€œç³»ç»Ÿäº‹ä»¶â€è„šæœ¬å­—å…¸çš„â€œè¿›ç¨‹å¥—ä»¶â€ä¸­æ‰¾åˆ°ã€‚è¯¥å¥—ä»¶åŒ…æ‹¬ä¸å¤§å¤šæ•°ç±»å‹çš„ç”¨æˆ·ç•Œé¢å…ƒç´ äº¤äº’çš„æœ¯è¯­ï¼ŒåŒ…æ‹¬:

*   çª—å­

*   æŒ‰é’®

*   å¤é€‰æ¡†

*   èœå•

*   å•é€‰æŒ‰é’®

*   æ–‡æœ¬å­—æ®µã€‚

åœ¨ç³»ç»Ÿäº‹ä»¶ä¸­ï¼Œprocess ç±»è¡¨ç¤ºæ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚

[![](../Images/4200627d3b3a6fc6ab9a530fd0deb04c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--dL3u0c9f--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/3248/1%2AxX3TnFjBX7uDh_Wpid7bzA.png)

è®¸å¤šå¥½å…¬æ°‘åº”ç”¨ç¨‹åºé€šè¿‡å…¬å¼€å®ƒä»¬çš„ä¸€äº›åŠŸèƒ½æ¥æ”¯æŒ AppleScriptï¼Œå› æ­¤è¿™äº›åŠŸèƒ½å¯ä»¥è¢«å…¶ä»–åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯æˆ‘å¦‚ä½•ä» Spotify è·å¾—å½“å‰æ­Œæ›²çš„æ­Œè¯ã€‚

```
tell application "Spotify"
  set trackId to id of current track as string
  set trackName to name of current track as string
  set artworkUrl to artwork url of current track as string
  set artistName to artist of current track as string
  set albumName to album of current track as string
  return trackId & "---" & trackName & "---" & artworkUrl & "---" & artistName & "---" & albumName
end tell 
```

ä¸ºäº†è·å¾—æŸä¸ªåº”ç”¨ç¨‹åºæ‰€æœ‰å¯èƒ½çš„å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è„šæœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€å­—å…¸ã€‚åœ¨é‚£é‡Œï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£æ”¯æŒå“ªäº›å‡½æ•°å’Œå‚æ•°ã€‚

[![](../Images/547b132d60ff6cc9cbf7e6b6932b95ea.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--FvO4vIdg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/3664/1%2As3c33Gtd9Hq5u1a0pBrkPQ.png)

å¦‚æœä½ è§‰å¾—ç›®æ ‡ C éš¾ï¼ŒAppleScript éš¾å¤šäº†ã€‚è¯­æ³•å†—é•¿ä¸”å®¹æ˜“å‡ºé”™ã€‚ä¾›æ‚¨å‚è€ƒï¼Œè¿™é‡Œæ˜¯ä¸º XcodeWay æä¾›åŠ¨åŠ›çš„[å®Œæ•´è„šæœ¬æ–‡ä»¶](https://github.com/onmyway133/XcodeWay/blob/master/XcodeWayExtensions/Script/XcodeWayScript.scpt)ã€‚

è¦æ‰“å¼€æŸä¸ªæ–‡ä»¶å¤¹ï¼Œå‘Šè¯‰ Finder ä½¿ç”¨ POSIX æ–‡ä»¶ã€‚ä¸ºäº†æ›´å¥½åœ°é‡ç”¨ä»£ç ï¼Œæˆ‘å°†æ¯ä¸ªåŠŸèƒ½éƒ½é‡æ„ä¸ºå‡½æ•°ã€‚

```
on myOpenFolder(myPath)
tell application "Finder"
activate
open myPath as POSIX file
end tell
end myOpenFolder 
```

ç„¶åï¼Œè¦åœ¨ macOS åº”ç”¨ç¨‹åºæˆ–æ‰©å±•ä¸­è¿è¡Œ AppleScriptï¼Œæˆ‘ä»¬éœ€è¦ç”¨æ­£ç¡®çš„è¿›ç¨‹åºåˆ—å·å’Œäº‹ä»¶æ ‡è¯†ç¬¦æ„å»ºä¸€ä¸ª [AppleScript æè¿°ç¬¦](https://github.com/onmyway133/XcodeWay/blob/master/XcodeWayExtensions/Helper/ScriptRunner.swift)ã€‚

```
func eventDescriptior(functionName: String) -> NSAppleEventDescriptor {
  var psn = ProcessSerialNumber(highLongOfPSN: 0, lowLongOfPSN: UInt32(kCurrentProcess))
  let target = NSAppleEventDescriptor(
    descriptorType: typeProcessSerialNumber,
    bytes: &psn,
    length: MemoryLayout<ProcessSerialNumber>.size
  )

let event = NSAppleEventDescriptor(
    eventClass: UInt32(kASAppleScriptSuite),
    eventID: UInt32(kASSubroutineEvent),
    targetDescriptor: target,
    returnID: Int16(kAutoGenerateReturnID),
    transactionID: Int32(kAnyTransactionID)
  )

let function = NSAppleEventDescriptor(string: functionName)
  event.setParam(function, forKeyword: AEKeyword(keyASSubroutineName))

return event
} 
```

å…¶ä»–ä»»åŠ¡ï¼Œæ¯”å¦‚æ£€æŸ¥å½“å‰çš„ Git é¥æ§å™¨ï¼Œè¦ç¨å¾®å¤æ‚ä¸€äº›ã€‚å¾ˆå¤šæ—¶å€™æˆ‘æƒ³æŠŠæˆ‘æ­£åœ¨è°ƒè¯•çš„æ–‡ä»¶çš„é“¾æ¥åˆ†äº«ç»™æˆ‘çš„è¿œç¨‹é˜Ÿå‹ï¼Œè¿™æ ·ä»–ä»¬å°±çŸ¥é“æˆ‘å¼•ç”¨çš„æ˜¯ä»€ä¹ˆæ–‡ä»¶ã€‚è¿™å¯ä»¥é€šè¿‡åœ¨ AppleScript ä¸­ä½¿ç”¨ shell è„šæœ¬æ¥å®ç°ã€‚

```
on myGitHubURL()
set myPath to myProjectPath()
set myConsoleOutput to (do shell script "cd " & quoted form of myPath & "; git remote -v")
set myRemote to myGetRemote(myConsoleOutput)
set myUrl to (do shell script "cd " & quoted form of myPath & "; git config --get remote." & quoted form of myRemote & ".url")
set myUrlWithOutDotGit to myRemoveSubString(myUrl, ".git")
end myGitHubURL 
```

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¼•å·å’Œå­—ç¬¦ä¸²è¿æ¥æ¥å½¢æˆå­—ç¬¦ä¸²ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å…¬å¼€åŸºç¡€æ¡†æ¶å’ŒæŸäº›ç±»ã€‚ä¸‹é¢æ˜¯æˆ‘å¦‚ä½•å…¬å¼€ NSString æ¥åˆ©ç”¨æ‰€æœ‰ç°æœ‰çš„åŠŸèƒ½ã€‚ä½¿ç”¨æ™®é€šçš„ AppleScript ä»å¤´å¼€å§‹ç¼–å†™å­—ç¬¦ä¸²æ“ä½œä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ã€‚

```
use scripting additions
use framework "Foundation"
property NSString : a reference to current application's NSString 
```

æœ‰äº†è¿™ä¸ªï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„å»ºå…¶ä»–çš„å­—ç¬¦ä¸²å¤„ç†å‡½æ•°äº†ã€‚

```
on myRemoveLastPath(myPath)
set myString to NSString's stringWithString:myPath
set removedLastPathString to myString's stringByDeletingLastPathComponent
removedLastPathString as text
end myRemoveLastPath 
```

XcodeWay æ”¯æŒçš„ä¸€ä¸ªå¾ˆé…·çš„åŠŸèƒ½æ˜¯èƒ½å¤Ÿåœ¨æ¨¡æ‹Ÿå™¨ä¸­è¿›å…¥å½“å‰åº”ç”¨ç¨‹åºçš„æ–‡æ¡£ç›®å½•ã€‚å½“æˆ‘ä»¬éœ€è¦æ£€æŸ¥æ–‡æ¡£ä»¥æ£€æŸ¥ä¿å­˜æˆ–ç¼“å­˜çš„æ•°æ®æ—¶ï¼Œè¿™å¾ˆæ–¹ä¾¿ã€‚è¿™ä¸ªç›®å½•æ˜¯åŠ¨æ€çš„ï¼Œæ‰€ä»¥å¾ˆéš¾è¢«å‘ç°ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç›®å½•è¿›è¡Œæ’åºï¼ŒæŸ¥æ‰¾æœ€è¿‘æ›´æ–°çš„å†…å®¹ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬å¦‚ä½•é“¾æ¥å¤šä¸ª shell è„šæœ¬å‘½ä»¤æ¥æŸ¥æ‰¾æ–‡ä»¶å¤¹ã€‚

```
on myOpenDocument()
set command1 to "cd ~/Library/Developer/CoreSimulator/Devices/;"
set command2 to "cd `ls -t | head -n 1`/data/Containers/Data/Application;"
set command3 to "cd `ls -t | head -n 1`/Documents;"
set command4 to "open ."
do shell script command1 & command2 & command3 & command4
end myOpenDocument 
```

åœ¨å¼€å‘ [Gallery](https://github.com/hyperoslo/Gallery) æ¥æ£€æŸ¥è§†é¢‘å’Œä¸‹è½½çš„å›¾ç‰‡æ˜¯å¦ä¿å­˜åœ¨æ­£ç¡®çš„ä½ç½®æ—¶ï¼Œè¿™ä¸ªåŠŸèƒ½å¸®äº†æˆ‘å¾ˆå¤§çš„å¿™ã€‚

ç„¶è€Œï¼Œè¿™äº›è„šæœ¬ä¼¼ä¹éƒ½ä¸èµ·ä½œç”¨ã€‚è‡ª 1993 å¹´ä»¥æ¥ï¼Œè„šæœ¬ä¸€ç›´æ˜¯ macOS çš„ä¸€éƒ¨åˆ†ã€‚ä½†æ˜¯ï¼Œéšç€ Mac Appstore çš„å‡ºç°å’Œå®‰å…¨é—®é¢˜ï¼ŒAppleScript ç»ˆäºåœ¨ 2012 å¹´å¹´ä¸­å—åˆ°é™åˆ¶ã€‚é‚£æ˜¯åº”ç”¨æ²™ç›’è¢«å¼ºåˆ¶æ‰§è¡Œçš„æ—¶å€™ã€‚

### åº”ç”¨ç¨‹åºæ²™ç®±

App Sandbox æ˜¯ macOS ä¸­æä¾›çš„ä¸€ç§è®¿é—®æ§åˆ¶æŠ€æœ¯ï¼Œåœ¨å†…æ ¸çº§å¼ºåˆ¶æ‰§è¡Œã€‚å®ƒæ—¨åœ¨å½“åº”ç”¨ç¨‹åºå—åˆ°å¨èƒæ—¶ï¼Œæ§åˆ¶å¯¹ç³»ç»Ÿå’Œç”¨æˆ·æ•°æ®çš„æŸå®³ã€‚é€šè¿‡ Mac App Store åˆ†å‘çš„åº”ç”¨å¿…é¡»é‡‡ç”¨[åº”ç”¨æ²™ç®±](https://www.objc.io/issues/14-mac/sandbox-scripting/)ã€‚

[![](../Images/d6de324bddd5ed41cfbb3dfcf11555b0.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--pySm3ySQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2000/0%2A3rbc5Xua7YWg4ouW.png)

å¯¹äºè¦ç”± Xcode åŠ è½½çš„ Xcode æ‰©å±•ï¼Œå®ƒè¿˜å¿…é¡»æ”¯æŒåº”ç”¨ç¨‹åºæ²™ç›’ã€‚

[![](../Images/00d96015ccb208b71880dfbd3c524aef.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--bG6N13w6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/5588/1%2AaZe8ZgEI-KLIDb1vXgVKtw.png)

åœ¨åº”ç”¨ç¨‹åºæ²™ç›’å®æ–½çš„å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨[åº”ç”¨ç¨‹åºæ²™ç›’ä¸´æ—¶å¼‚å¸¸](https://developer.apple.com/library/archive/documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/AppSandboxTemporaryExceptionEntitlements.html)æ¥ä¸´æ—¶æˆæƒæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºè®¿é—® Apple Scriptã€‚

ç°åœ¨è¿™æ˜¯ä¸å¯èƒ½çš„ã€‚

AppleScript è¿è¡Œçš„å”¯ä¸€æ–¹å¼æ˜¯å®ƒä½äºâ€œ~/èµ„æºåº“/åº”ç”¨ç¨‹åºè„šæœ¬â€æ–‡ä»¶å¤¹ä¸­ã€‚

[![](../Images/d2aeef50eb49aeef7df811aeac86c150.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--tBxjeBre--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/3956/1%2A_MnW2BezYsDlw7x6eQifQg.png)

### [](#how-to-install-custom-scripts)å¦‚ä½•å®‰è£…è‡ªå®šä¹‰è„šæœ¬

macOS åº”ç”¨æˆ–æ‰©å±•ä¸èƒ½åªæ˜¯è‡ªå·±æŠŠè„šæœ¬å®‰è£…åˆ°åº”ç”¨è„šæœ¬ä¸­ã€‚ä»–ä»¬éœ€è¦ç”¨æˆ·åŒæ„ã€‚

ä¸€ç§å¯èƒ½çš„æ–¹æ³•æ˜¯å¯ç”¨è¯»/å†™ï¼Œå¹¶ä½¿ç”¨ NSOpenPanel æ˜¾ç¤ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œè¦æ±‚ç”¨æˆ·é€‰æ‹©å®‰è£…è„šæœ¬çš„æ–‡ä»¶å¤¹ã€‚

[![](../Images/5e5cb864d7a5531bccbbb183760ec6ae.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--CxYmwh6B--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/3506/1%2AgpuztyyB9Z3-XDWOnHgn0w.png)

å¯¹äº XcodeWayï¼Œæˆ‘é€‰æ‹©æä¾›ä¸€ä¸ª[å®‰è£… shell è„šæœ¬](https://github.com/onmyway133/XcodeWay/blob/master/install.sh),è¿™æ ·ç”¨æˆ·å¯ä»¥å¿«é€Ÿå®‰è£…è„šæœ¬ã€‚

```
#!/bin/bash

set -euo pipefail

DOWNLOAD_URL=[https://raw.githubusercontent.com/onmyway133/XcodeWay/master/XcodeWayExtensions/Script/XcodeWayScript.scpt](https://raw.githubusercontent.com/onmyway133/XcodeWay/master/XcodeWayExtensions/Script/XcodeWayScript.scpt)
SCRIPT_DIR="${HOME}/Library/Application Scripts/com.fantageek.XcodeWayApp.XcodeWayExtensions"

mkdir -p "${SCRIPT_DIR}"
curl $DOWNLOAD_URL -o "${SCRIPT_DIR}/XcodeWayScript.scpt" 
```

AppleScript éå¸¸å¼ºå¤§ã€‚æ‰€æœ‰è¿™äº›éƒ½æ˜¯æ˜¾å¼çš„ï¼Œå› æ­¤ç”¨æˆ·å¯ä»¥å®Œå…¨æ§åˆ¶å“ªäº›äº‹æƒ…å¯ä»¥å®Œæˆã€‚

åƒæ‰©å±•ä¸€æ ·ï¼Œè„šæœ¬åœ¨ä¸åŒçš„è¿›ç¨‹ä¸­å¼‚æ­¥å®Œæˆï¼Œä½¿ç”¨ [XPC](https://www.objc.io/issues/14-mac/xpc/) è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡ã€‚è¿™å¢å¼ºäº†å®‰å…¨æ€§ï¼Œå› ä¸ºè„šæœ¬æ— æ³•è®¿é—®æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæˆ–æ‰©å±•çš„åœ°å€ç©ºé—´ã€‚

## [](#more-security-in-macos-mojave)æ›´å®‰å…¨çš„è«å“ˆéŸ¦

ä»Šå¹´ï¼Œåœ¨ WWDC 2018 ä¸Šï¼Œè‹¹æœæ¨å‡ºäº† macOS Mojaveï¼Œå®ƒä¸“æ³¨äºè®¸å¤šå®‰å…¨å¢å¼ºã€‚åœ¨[æ‚¨çš„åº”ç”¨å’Œ macOS å®‰å…¨çš„æœªæ¥](https://developer.apple.com/videos/play/wwdc2018/702/)ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£æ›´å¤šå…³äº macOS åº”ç”¨çš„æ–°å®‰å…¨è¦æ±‚ã€‚å…¶ä¸­ä¹‹ä¸€æ˜¯ AppleEvents çš„ç”¨æ³•æè¿°ã€‚

> # [](#unable-to-load-infoplist-exceptions-egpu-overrides)Failed to load info.plist exception (egpu override)

æˆ‘ä»¬æ›¾ç»ä¸º iOS ä¸­çš„è®¸å¤šæƒé™å£°æ˜ç”¨æ³•æè¿°ï¼Œæ¯”å¦‚ç…§ç‰‡åº“ã€ç›¸æœºå’Œæ¨é€é€šçŸ¥ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦å£°æ˜ AppleEvents çš„ç”¨æ³•æè¿°ã€‚

[![Source: [https://www.felix-schwarz.org/blog/2018/08/new-apple-event-apis-in-macos-mojave](https://www.felix-schwarz.org/blog/2018/08/new-apple-event-apis-in-macos-mojave)](../Images/e9b38cdf56f43e7d73c8524900d20187.png) ](https://res.cloudinary.com/practicaldev/image/fetch/s--Ez0QVTL1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2000/0%2AEQW2d3wyAnC1WSui.jpg) *æ¥æº:[https://www . Felix-Schwarz . org/blog/2018/08/new-apple-event-APIs-in-MAC OS-mojave](https://www.felix-schwarz.org/blog/2018/08/new-apple-event-apis-in-macos-mojave)*

æˆ‘ä»¬çš„æ‰©å±•ç¬¬ä¸€æ¬¡å°è¯•æ‰§è¡Œä¸€äº› AppleScript å‘½ä»¤æ—¶ï¼Œä¸Šé¢çš„å¯¹è¯æ¡†æ˜¾ç¤ºä¸ºè¯·æ±‚ç”¨æˆ·åŒæ„ã€‚ç”¨æˆ·å¯ä»¥æˆäºˆæˆ–æ‹’ç»æƒé™ï¼Œä½†å¯¹äº Xcodeï¼Œè¯·è¯´æ˜¯ğŸ™

æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºç›®æ ‡ä¸­å£°æ˜ NSAppleEventsUsageDescriptionã€‚æˆ‘ä»¬åªéœ€è¦åœ¨ app ç›®æ ‡ä¸­å£°æ˜ï¼Œä¸éœ€è¦åœ¨æ‰©å±•ç›®æ ‡ä¸­å£°æ˜ã€‚

```
<key>NSAppleEventsUsageDescription</key>

<string>Use AppleScript to open folders</string> 
```

## 
 [](#where-to-go-from-here) 
ä½•å»ä½•ä»

å‘¼å‘¼å‘¼ã€‚è°¢è°¢ä½ è·Ÿéšäº†è¿™ä¹ˆé•¿çš„æ—…ç¨‹ã€‚åˆ¶ä½œæ¡†æ¶å’Œå·¥å…·éœ€è¦å¾ˆå¤šæ—¶é—´ï¼Œå°¤å…¶æ˜¯æ’ä»¶å’Œæ‰©å±•â€”â€”æˆ‘ä»¬å¿…é¡»ä¸æ–­åœ°æ”¹å˜ä»¥é€‚åº”æ–°çš„æ“ä½œç³»ç»Ÿå’Œå®‰å…¨éœ€æ±‚ã€‚ä½†è¿™æ˜¯ä¸€ä¸ªæœ‰ç›Šçš„è¿‡ç¨‹ï¼Œå› ä¸ºæˆ‘ä»¬å­¦åˆ°äº†æ›´å¤šï¼Œå¹¶æœ‰ä¸€äº›å·¥å…·æ¥èŠ‚çœæˆ‘ä»¬çš„å®è´µæ—¶é—´ã€‚

ä¾›ä½ å‚è€ƒï¼Œè¿™é‡Œæ˜¯æˆ‘çš„å®Œå…¨å¼€æºçš„æ‰©å±•ã€‚

*   [XcodeWay](https://github.com/onmyway133/XcodeWay)

*   [XcodeColorSense2](https://github.com/onmyway133/XcodeColorSense2)

å¸Œæœ›ä½ èƒ½åœ¨å¸–å­é‡Œæ‰¾åˆ°æœ‰ç”¨çš„ä¸œè¥¿ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æœ‰åŠ©äºè¿›ä¸€æ­¥æ¢ç´¢ Xcode æ‰©å±•çš„èµ„æº:

*   NSHipster çš„ Xcode æ’ä»¶

*   [åœ¨ Swift ä¸­ç¼–å†™ Xcode æ’ä»¶](http://merowing.info/2015/12/writing-xcode-plugin-in-swift/)

*   [Xcode 8 æ’ä»¶(é˜¿å¡ç‰¹å…¹)â€”â€”ä¸€ä¸ªæ—¶ä»£çš„ç»ˆç»“](https://medium.com/rocknnull/xcode-8-plugins-alcatraz-the-end-of-an-era-ea6e63617d14)

*   [ä½¿ç”¨å’Œæ‰©å±• Xcode æºä»£ç ç¼–è¾‘å™¨](https://developer.apple.com/videos/play/wwdc2016/414/)

*   [ä¸ºä»€ä¹ˆæˆ‘éœ€è¦é€€å‡º Xcode æ‰èƒ½ä½¿ç”¨ XVim2](https://github.com/XVimProject/XVim2/blob/master/why_resign_xcode.md)

åŸå¸–[https://medium . freecodecamp . org/how-to-convert-your-xcode-plugins-to-xcode-extensions-AC 90 f 32 AE 0 e 3](https://medium.freecodecamp.org/how-to-convert-your-xcode-plugins-to-xcode-extensions-ac90f32ae0e3)