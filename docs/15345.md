# åˆ›å»ºå¸¦æœ‰ vue å’Œ typescript çš„æ¨¡å¼

> [https://dev . to/gugadev/create-one æ¨¡æ€-å¸¦è§†å›¾-y-typescript-3g31](https://dev.to/gugadev/creando-una-modal-con-vue-y-typescript-3g31)

# åˆ›å»ºä¸€ä¸ªæ¨¡æ€å¯¹è¯æ¡†å¹¶æ‰“å°å‡ºæ¥

## ![GitHub logo](img/a73f630113876d78cff79f59c2125b24.png)[ã€gugadevã€‘](https://github.com/gugadev)/[è§†å›¾æ¨¡æ€](https://github.com/gugadev/vue-modal)

### åŸºäº Vue å’Œ Typescript æ„å»ºçš„ç®€å•æ¨¡å‹ã€‚

<article class="markdown-body entry-content container-lg" itemprop="text">

# ç®€å•æ¨¡æ€

åŸºäº Vue å’Œ Typescript æ„å»ºçš„ç®€å•æ¨¡å‹ã€‚

[![](img/41dacecf0cbd0665afe0a2b8b37e6ece.png)](https://camo.githubusercontent.com/70689c9b2292593c1fc65999e716666f0f68da88b0aaa496e74d65307f04f51e/687474703a2f2f672e7265636f726469742e636f2f5158734e796f6c4c66792e676966)

## æ€§èƒ½

*   `title`:æ¨¡æ€çš„æ ‡é¢˜
*   `open`:è¡¨ç¤ºæ¨¡æ€æ˜¯å¦æ‰“å¼€çš„æ ‡å¿—ã€‚

## äº‹ä»¶

*   `close`:è¿‘è·ç¦»ç‚¹å‡»æ—¶è§¦å‘ã€‚

</article>

[View on GitHub](https://github.com/gugadev/vue-modal)

å»å¹´å¢é•¿æœ€å¿«çš„ JavaScript æ¡†æ¶ä¹‹ä¸€å°±æ˜¯ esteã€‚è¿™ä¸€æ¡†æ¶çš„ç‰¹ç‚¹æ˜¯æ—¢ç®€å•åˆå¼ºå¤§ï¼Œå®ƒæ”»å‡»äº†å‰ç«¯ç¤¾åŒºã€‚

misma åœ¨ Github çš„æ™®åŠç¨‹åº¦å¹¶æ²¡æœ‰è¶…è¿‡ React å’Œ Angularï¼Œå°½ç®¡[å¹¶ä¸æ„å‘³ç€å¼€å‘è€…çš„ä½¿ç”¨æ°´å¹³ä¿æŒç›¸åŒçš„](https://zendev.com/2018/06/19/react-usage-beating-vue-angular.html)ã€‚äº‹å®ä¸Š vista æ˜¯ä¸€ä¸ªä¸å¯æ€è®®çš„ã€çµæ´»çš„ã€å¼ºå¤§çš„å’Œå……æ»¡å¯èƒ½æ€§çš„æ¡†æ¶ã€‚æˆ‘å€Ÿæ­¤æœºä¼šç¥è´ºåŸƒæ–‡Â·ä¼˜å’Œä»–èº«åçš„å…¨ä½“é˜Ÿå‘˜å’Œè´¡çŒ®è€…ã€‚å„ä½ï¼Œå†·é™ç‚¹ï¼

## é¡¹ç›®å‡†å¤‡

å¥½å§ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚æˆ‘ä»¬é¦–å…ˆéœ€è¦çš„æ˜¯å¯åŠ¨é¡¹ç›®å¹¶å®‰è£…ä¸€äº›è®¾å¤‡ã€‚æˆ‘ä»¬å°†æŠŠå•ä½åˆ†ä¸ºä¸¤ä¸ªå•ä½:å‘å±•å•ä½å’Œä¸šåŠ¡å•ä½ã€‚

å¼€å‘ä¾èµ–é¡¹åŸºæœ¬ä¸Šå°†æ˜¯ Typescript å’Œ vue çš„åŠ è½½ç¨‹åºã€‚è¿™äº›æ˜¯:

*   ä»¥æ‰“å­—æ‰“çš„æ–‡ä»¶
*   å¥‘ç‰¹æ—
*   ts-loader
*   è§†å›¾åŠ è½½ç¨‹åº
*   è§†å›¾æ ·å¼åŠ è½½å™¨
*   æ¨¡æ¿ç¼–è¯‘å™¨
*   css åŠ è½½ç¨‹åº
*   æ ·å¼åŠ è½½å™¨
*   html ç½‘é¡µåŒ…æ’ä»¶
*   web pack-å¼€å‘-æœåŠ¡å™¨
*   ç½‘ç»œåŒ…
*   webpack-cli

ä¸»è¦çš„æ¯’æ€§æ˜¯:

*   æŸè§†é¢‘å‰ªè¾‘è½¯ä»¶
*   vue ç±»ç»„ä»¶
*   vue-å±æ€§-è£…é¥°

ç°åœ¨ï¼Œæˆ‘ä»¬å·²å®‰è£…äº†ä¾èµ–é¡¹ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåä¸ºâ€œ`tsconfig.json`â€çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°†è¯»å– Typescript ä»¥è€ƒè™‘æŸäº›è®¾ç½®ã€‚

```
{  "include":  [  "./src/**/*"  ],  "compilerOptions":  {  "target":  "esnext",  "lib":  ["dom",  "esnext"],  "module":  "es2015",  "moduleResolution":  "node",  "noUnusedLocals":  true,  "noUnusedParameters":  true,  "emitDecoratorMetadata":  true,  "experimentalDecorators":  true  },  "compileOnSave":  false  } 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä»¬æ‰€åšçš„ï¼Œç†è®ºä¸Šæ˜¯å‘Šè¯‰ä»–è€ƒè™‘åˆ°*å†…çš„ä»»ä½•æ–‡ä»¶ï¼Œæˆ‘ä»¬æƒ³ä½¿ç”¨*æ˜¯æ¨¡å—*ï¼Œå¹¶æ¿€æ´»[è£…é¥°å™¨](https://github.com/tc39/proposal-decorators)çš„ä½¿ç”¨ã€‚*

å®Œæˆæ­¤æ­¥éª¤åï¼Œä»¥ä¸‹æ˜¯å‡†å¤‡ Webpack é…ç½®æ–‡ä»¶:

```
const path = require('path')
const VueLoaderPlugin = require('vue-loader/lib/plugin')
const HtmlWebpackPlugin = require('html-webpack-plugin')

module.exports = {
  context: __dirname,
  entry: './src/index.ts',
  output: {
    path: path.resolve(__dirname, 'dist'),
    filename: '[name].js'
  },
  resolve: {
    alias: {
      vue$: 'vue/dist/vue.esm.js'
    },
    extensions: ['.ts', '.js']
  },
  module: {
    rules: [
      {
        test: /\.ts$/,
        exclude: /node_modules/,
        use: {
          loader: 'ts-loader',
          options: {
            appendTsSuffixTo: [/\.vue$/]
          }
        }
      },
      {
        test: /\.css$/,
        use: [
          'vue-style-loader',
          'css-loader'
        ]
      },
      {
        test: /\.vue$/,
        exclude: /node_modules/,
        use: {
          loader: 'vue-loader'
        }
      }
    ]
  },
  devtool: 'sourcemap',
  plugins: [
    new VueLoaderPlugin(),
    new HtmlWebpackPlugin({
      template: './src/index.html'
    })
  ]
} 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä»¬å°†ä½¿ç”¨ æèµ·ã€‚æ–‡ä»¶`index.html`æ”¾åœ¨æˆ‘ä»¬é¡¹ç›®çš„`src`æ–‡ä»¶å¤¹ä¸­ã€‚å°†æ”¹ä¸º:

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  Simple Modal
</head>
<body>
  <div id="app"></div>
</body>
</html> 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç»§ç»­æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚åœ¨æ­¤ï¼Œæˆ‘ä»¬å°†ä¸ä¸»æ„ä»¶ä¸€èµ·æŠ¬èµ·è§†å›¾ã€‚

```
import Vue from 'vue'
import App from './index.vue'

new Vue({
  el: '#app',
  template: '<App/>',
  render: h => h(App)
}) 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä»¬å·²å‡†å¤‡å¥½å¼€å§‹åˆ›å»ºæ¨¡æ€ã€‚

## æ¨¡å¼åˆ›å»º

æ¨¡æ€å°†ç®€å•ä¸”é¢å‘å…ƒä»¶ã€‚æˆ‘ä»¬å°†æ‰§è¡Œç»“æ„ï¼Œæ˜ å°„ä¸€äº›å±æ€§ï¼Œå¹¶è®¾ç½®æ‚¨è¦å‘å¸ƒçš„äº‹ä»¶ã€‚æ¨¡æ€å†…å®¹å°†æ ¹æ®æˆ‘ä»¬æ¯æ¬¡éœ€è¦æ’å…¥ã€‚

ç¬¬ä¸€æ­¥æ˜¯å»ºç«‹*æ¨¡æ¿*:

> **æ³¨**:è®°ä½*æ¨¡æ¿*å’Œ*æ ·å¼*å’Œ*è„šæœ¬*éƒ½åœ¨æ–‡ä»¶`.vue`å†…ã€‚

```
<template>
  <div class="modal" :class="{ open }">
    <div class="modal-content">
      <header class="modal-header">
        <h3>{{ title }}</h3>
        <span @click="close">&times;</span>
      </header>
      <article class="modal-body">
        <slot name="content"></slot>
      </article>
      <footer class="modal-footer">
        <slot name="actions"></slot>
      </footer>
    </div>
  </div>
</template> 
```

Enter fullscreen mode Exit fullscreen mode

å¦‚ä½ æ‰€è§ï¼Œå®ƒæ˜¯ä¸€ä¸ªç›¸å½“ç®€å•çš„ç»“æ„ã€‚æ¨¡æ€çš„æ ‡é¢˜åº”ç”±
å±æ€§`title`çš„ä¸­é—´æä¾›ï¼Œæ­¤å¤–ï¼Œæˆ‘ä»¬å°†é€šè¿‡å±æ€§`open`çŸ¥é“æ˜¯å¼€è¿˜æ˜¯å…³ã€‚

ä¸‹ä¸€è¡Œ:

```
<span @click="close">&times;</span> 
```

Enter fullscreen mode Exit fullscreen mode

å®ƒå‘Šè¯‰æˆ‘ä»¬ï¼Œå•å‡»â€œxâ€æ—¶ï¼Œå°†æ‰§è¡Œæˆ‘ä»¬ç»„ä»¶çš„æ–¹æ³•`close`ã€‚

æ­¤å¤–ï¼Œä¸ºäº†èƒ½å¤Ÿæ˜¾ç¤ºæˆ–éšè—æ¨¡æ€ï¼Œæˆ‘ä»¬å°†ä»¥æ­¤è¡Œä¸ºåŸºç¡€:

```
<div class="modal" :class="{ open }"> 
```

Enter fullscreen mode Exit fullscreen mode

å®ƒå‘Šè¯‰æˆ‘ä»¬ï¼Œå¦‚æœå±æ€§`open`æ˜¯`true`ï¼Œåˆ™ä¼šæ·»åŠ ä¸€ä¸ªåä¸º`open`çš„ CSS ç±»ï¼Œè¯¥ç±»å°†æ˜¾ç¤ºå…·æœ‰è¿‡æ¸¡æ•ˆæœçš„æ¨¡å¼ï¼Œå¦‚ CSS ä»£ç æ‰€ç¤º:

```
<style scoped>
  .modal {
    align-items: flex-start;
    background-color: rgba(0,0,0,.75);
    display: flex;
    height: 100vh;
    justify-content: center;
    opacity: 0;
    position: fixed;
    transition: visibility 250ms, opacity 250ms;
    width: 100%;
    z-index: -1;
  }
  .modal.open {
    opacity: 1;
    visibility: visible;
    z-index: 2;
  }
  .modal.open .modal-content {
    transform: translateY(100px);
  }
  .modal-content {
    background-color: #fff;
    border-radius: 2px;
    box-shadow: 0 8px 16px 0 rgba(0,0,0,.25);
    display: inline-block;
    min-width: 320px;
    max-width: 480px;
    transition: transform 450ms ease;
    width: 100%;
  }
  .modal-header {
    border-bottom: 1px solid #eee;
    padding: 20px;
    position: relative;
    text-align: center;
  }
  .modal-header h3 {
    color: #444;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    font-weight: 600;
    text-transform: uppercase;
  }
  .modal-header span {
    cursor: pointer;
    font-weight: bolder;
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
  }
  .modal-body {
    padding: 40px;
  }
  .modal-footer {
    background-color: #f8f8f8;
    border-top: 1px solid #eee;
    display: flex;
    justify-content: flex-end;
    padding: 20px;
  }
</style> 
```

Enter fullscreen mode Exit fullscreen mode

> **æ³¨æ„**:æˆ‘ä»¬ä½¿ç”¨`scoped`å±æ€§ç¡®å®šè¿™äº›æ ·å¼å°†å°è£…åœ¨ç»„ä»¶å†…ï¼Œé¿å…ä¸åº”ç”¨ç¨‹åºä¸­çš„å…¶ä»–æ ·å¼å‘ç”Ÿå†²çªã€‚

ä¸Šé¢çš„ CSS ä»£ç åªæ˜¯å°†ä¸€ä¸ªä¸é€æ˜åº¦è¿‡æ¸¡æ·»åŠ åˆ°æ¨¡æ€ä¸­ï¼ŒåŒæ—¶ä½¿è¯¥è¿‡æ¸¡ä»ä¸Šåˆ°ä¸‹æ»‘åŠ¨ï¼Œä»è€Œäº§ç”Ÿå¼•äººæ³¨ç›®çš„å¹³æ»‘æ•ˆæœã€‚

æœ€åï¼Œæˆ‘ä»¬ç¼–å†™äº†æˆ‘ä»¬çš„æ ¸å¿ƒç»„ä»¶ï¼Œè¯¥ç»„ä»¶ä¸æ¨¡æ¿é€šä¿¡ï¼Œå¹¶å…·æœ‰æ¨¡æ¿éœ€è¦ä½¿ç”¨çš„å±æ€§å’Œæ–¹æ³•ã€‚

```
<script lang="ts">
  import Vue from 'vue'
  import Component from 'vue-class-component'
  import { Prop, Emit } from 'vue-property-decorator'

  @Component
  export default class Modal extends Vue {
    @Prop({ required: true, type: String }) title: string
    @Prop({Â required: true, type: Boolean, default: false }) open

    @Emit('close')
    close(): void {}
  }
</script> 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä»¬åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯è¿›å£è£…é¥°å“`Component`ï¼Œè¿™æ˜¯ä¸ºäº†å‘æ‚¨è¡¨æ˜è¯¥ç±»æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œ`Prop`è¡¨ç¤ºè¯¥å˜é‡æ˜¯æ¥æ”¶è¯¥ç»„ä»¶çš„å±æ€§ï¼Œ`Emit`è¡¨ç¤ºè¯¥æ–¹æ³•å°†å‘çˆ¶çº§å‘å‡ºäº‹ä»¶ã€‚

å¦‚æˆ‘ä»¬æ‰€è¯´ï¼Œè´¢äº§`title`å’Œ`open`æ˜¯å¿…éœ€çš„ã€‚åŒæ ·ï¼Œ`open`ä¹Ÿä¼šåˆå§‹åŒ–ä¸º falseã€‚

*æ–¹æ³•ï¼Œè¿è¡Œæ—¶å°†å‘åŒ…å«æ¨¡æ€çš„çˆ¶é¡¹å‘å‡ºäº‹ä»¶ï¼Œé€šçŸ¥*è¦å…³é—­æ¨¡æ€*ã€‚*

## ä½¿ç”¨æ¨¡æ€

ä½¿ç”¨æ¨¡æ€ç›¸å½“ç®€å•ã€‚åªéœ€å°†å…¶åŒ…å«åœ¨é›¶éƒ¨ä»¶åˆ—è¡¨ä¸­å¹¶æ”¾ç½®åœ¨æ¨¡æ¿ä¸­å³å¯ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªä¾‹å­ã€‚

```
<template>
  <div class="container" @keypress="catchKey" tabindex="0">
    <Modal :title="modalTitle" :open="modalOpened" @close="closeModal">  
      <template slot="content">
        <blockquote>
          <p>Debido a nuevas polÃ­ticas de seguridad, a partir de hoy, 22 de Enero del 2019, usted es reponsable de la seguridad de sus archivos. Para saber como reforzar y manejar la seguridad de su cuenta, lea la <a href="#">DocumentaciÃ³n.</a></p>
          <caption>TI & Information Security</caption>
        </blockquote>
      </template>
      <template slot="actions">
        <button class="decline">Declinar</button>
        <button class="accept">Aceptar</button>
      </template>
    </Modal>
    <h1>Presiona O para abrir la modal</h1>
  </div>
</template>

<script lang="ts">
  import Vue from 'vue'
  import Component from 'vue-class-component'
  import Modal from './modal.vue'

  @Component({
    components: {
      Modal
    }
  })
  export default class App extends Vue {
    modalTitle = 'Alerta de seguridad'
    modalOpened = false
    MODAL_TRIGGER = 111

    catchKey(e: KeyboardEvent) {
      if (e.keyCode === this.MODAL_TRIGGER) {
        this.modalOpened = true
      }
    }
    closeModal() {
      this.modalOpened = false
    }
  }
</script> 
```

Enter fullscreen mode Exit fullscreen mode

å¦‚æˆ‘ä»¬æ‰€è§ï¼Œæ¨¡æ€çš„æ€§è´¨`title`ä¸`modalTitle`å’Œ`open`ç›¸å…³è”ï¼Œå› æ­¤ï¼Œå½“æŒ‰ä¸‹é”®æˆ–å°†çŠ¶æ€ä»`modalOpened`å˜æ›´ä¸º`true`æ—¶ï¼Œæ˜¾ç¤ºæ¨¡æ€ã€‚

çœ‹çœ‹`closeModal`æ–¹æ³•ï¼Œå°±æ˜¯å½“æ£€æµ‹åˆ°`Modal`å‘å‡º`close`ç±»å‹çš„äº‹ä»¶æ—¶å°†æ‰§è¡Œçš„æ–¹æ³•ï¼Œå¯¹æ­¤æˆ‘ä»¬æ­£åœ¨é€šè¿‡`@close="closeModal"`çº¿è·¯æ”¶å¬ã€‚

**ç»“æœæ•°æ®**

[![](img/2643120f46ad6660cff8039de20f1817.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--4yc1kBBz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/http://g.recordit.co/QXsNyolLfy.gif)

* * *

## ç»“è®º

å¦‚æ‚¨æ‰€è§ï¼Œåœ¨è§†å›¾ä¸­å»ºç«‹å…ƒä»¶éå¸¸ç®€å•ã€‚æˆ‘ä»¬åªéœ€å‡ ä¸ªå°æ—¶å°±èƒ½æ‹¥æœ‰ä¸€ä¸ªç›¸å¯¹å¤æ‚ä¸”åŠŸèƒ½å¼ºå¤§çš„ç»„ä»¶ã€‚æˆ‘ä¸ªäººè®¤ä¸ºï¼Œä»»ä½•å‰ç«¯å¼€å‘è€…éƒ½åº”è¯¥ç»™è¿™ä¸ªä¼Ÿå¤§çš„æ¡†æ¶ä¸€ä¸ªæœºä¼šã€‚ğŸ˜‰