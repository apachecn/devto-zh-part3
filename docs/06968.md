# å·¥ä½œæ—¶åæ€:æˆ‘çš„ Python é¡¹ç›®å·¥ä½œæµ

> åŸæ–‡:[https://dev . to/flopi/reflect-as-you-work-my-python-project-workflow-49he](https://dev.to/flopi/reflect-as-you-work-my-python-project-workflow-49he)

[å­¦å¾’æ¨¡å¼](http://shop.oreilly.com/product/9780596518387.do)ä¸­çš„ä¸€ç§å­¦å¾’æ¨¡å¼æ˜¯**è¾¹å·¥ä½œè¾¹åæ€**ã€‚è¿™ä¸ªæ¨¡å¼æ˜¯å…³äºåæ€ä½ æ˜¯å¦‚ä½•æœ‰è§„å¾‹åœ°å·¥ä½œçš„ã€‚è¿™æ ·åšé€šå¸¸å¯ä»¥è®©å¼€å‘äººå‘˜æ³¨æ„åˆ°ä»–ä»¬çš„å®è·µæ˜¯å¦‚ä½•å˜åŒ–çš„ï¼Œç”šè‡³æ˜¯å¦‚ä½•æ²¡æœ‰å˜åŒ–ã€‚è¿™ä¸ä»…ä»…æ˜¯è§‚å¯Ÿä½ è‡ªå·±ã€‚æ­£å¦‚ä¹¦ä¸­æ‰€è¯´ï¼Œ

> â€œä¸å¼•äººæ³¨ç›®åœ°è§‚å¯Ÿä½ å›¢é˜Ÿä¸­çš„ç†Ÿç»ƒå·¥å’Œå¤§å¸ˆçº§å·¥åŒ ã€‚åæ€ä»–ä»¬ä½¿ç”¨çš„å®è·µã€è¿‡ç¨‹å’ŒæŠ€æœ¯ï¼Œçœ‹çœ‹å®ƒä»¬æ˜¯å¦èƒ½ä¸ä½ ç»å†çš„å…¶ä»–éƒ¨åˆ†è”ç³»èµ·æ¥ã€‚å³ä½¿ä½œä¸ºä¸€åå­¦å¾’ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡å¯†åˆ‡è§‚å¯Ÿæ›´æœ‰ç»éªŒçš„å·¥åŒ çš„å·¥ä½œæ¥å‘ç°æ–°é¢–çš„æƒ³æ³•ã€‚â€ç¬¬ 36 é¡µ

æˆ‘ä¸€ç›´åœ¨æ€è€ƒè‡ªå·±çš„åšæ³•å’Œå‘¨å›´äººçš„åšæ³•ã€‚å½“æˆ‘åˆ›å»ºæ–°çš„ Python é¡¹ç›®æ—¶ï¼Œæˆ‘æ‰€éµå¾ªçš„å·¥ä½œæµç¨‹ç‰¹åˆ«çªå‡ºï¼Œå› ä¸ºæˆ‘æ˜¯é€šè¿‡ä¸å¦ä¸€ä½å·¥ç¨‹å¸ˆååœ¨ä¸€èµ·å­¦ä¹ çš„ã€‚æˆ‘æ³¨æ„åˆ°ä»–ä»¬åšäº†ä»€ä¹ˆï¼Œå¹¶é—®äº†ä¸€äº›é—®é¢˜ã€‚ç„¶åï¼Œæˆ‘å›åˆ°è‡ªå·±çš„åŠå…¬æ¡Œï¼Œä¸€è¾¹åšæ›´å¤šçš„ç¬”è®°ï¼Œä¸€è¾¹è‡ªå·±å°è¯•ã€‚æˆ‘å¤šæ¬¡éµå¾ªç”±æ­¤äº§ç”Ÿçš„å·¥ä½œæµç¨‹ï¼Œç°åœ¨è¿™äº›æ­¥éª¤ä»æˆ‘çš„æŒ‡å°–è½»æ¾åœ°æµè¿‡ã€‚

æˆ‘è®¤ä¸ºå¯èƒ½æœ‰æ–¹æ³•æ¥ä¼˜åŒ–è¿™ä¸ªå·¥ä½œæµç¨‹ï¼Œä½†é¦–å…ˆæˆ‘è¦æŠŠå®ƒè®°åœ¨è¿™é‡Œï¼Œä»¥ä¾›æœªæ¥çš„æ½œåœ¨è¯»è€…å’Œæœªæ¥çš„æˆ‘å›é¡¾ï¼

é™„æ³¨:æˆ‘åœ¨è¿™é‡Œæåˆ°çš„è®¸å¤šé¢å¤–ç»†èŠ‚éƒ½æ˜¯ä»æˆ‘çš„åŒäº‹é‚£é‡Œå­¦æ¥çš„ã€‚éå¸¸æ„Ÿè°¢ä»–ä»¬ä¸æˆ‘åˆ†äº«ä»–ä»¬æ‰€çŸ¥é“çš„ğŸ’“

* * *

# [](#prerequisites)å…ˆå†³æ¡ä»¶

*   `pyenv`å·²å®‰è£…ã€‚

# [](#new-python-project-checklist)æ–° Python é¡¹ç›®æ¸…å•

1.  å®‰è£…ç‰¹å®šçš„ Python ç‰ˆæœ¬ã€‚
2.  åˆ›å»ºé¡¹ç›®ç›®å½•ã€‚è½¬åˆ°ç›®å½•ã€‚
3.  ä¸ºé¡¹ç›®è®¾ç½® Python ç‰ˆæœ¬ã€‚
4.  åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚
5.  æ¿€æ´»è™šæ‹Ÿç¯å¢ƒã€‚
6.  å®‰è£…ä¾èµ–é¡¹ã€‚
7.  ä¿å­˜åŒ…ã€‚
8.  è¿è¡Œä»£ç ã€‚

æ³¨æ„:è¿™ä¸ªå·¥ä½œæµç¨‹åº”è¯¥å¯ä»¥åœ¨ MacOS ä¸Šè¿è¡Œã€‚

* * *

## [](#prerequisite-install-raw-pyenv-endraw-)å…ˆå†³æ¡ä»¶:å®‰è£…`pyenv`ã€‚

Mac OS X è‡ªå¸¦ Python 2.7ã€‚å¦‚æœä½ æ²¡æœ‰ä¿®æ”¹ä»»ä½•ä¸œè¥¿ï¼Œä½ åº”è¯¥å¯ä»¥æ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œè¾“å…¥`python --version`ï¼Œå¾—åˆ°ä¸€äº› 2.7 ç‰ˆæœ¬ã€‚ä¸è¿‡ï¼Œæ‚¨å¯èƒ½ä¸æƒ³ä½¿ç”¨ OS(æ“ä½œç³»ç»Ÿ)é™„å¸¦çš„ Python ç‰ˆæœ¬ã€‚å‡ºç°è¿™ç§æƒ…å†µæœ‰å¾ˆå¤šåŸå› ï¼Œæ¯”å¦‚ç‰ˆæœ¬å¯èƒ½å·²ç»è¿‡æ—¶ã€‚æˆ‘ç”šè‡³å‘ç°ä¸€ä¸ªé‡è¦çš„å›¾ä¹¦é¦†ä¸è§äº†ã€‚

ä¸ä»…è¦é¿å…ä½¿ç”¨æœºå™¨è‡ªå¸¦çš„ Python ç‰ˆæœ¬ï¼Œåœ¨å·¥ä½œä¸­è¿˜éœ€è¦åŒæ—¶å®‰è£…å‡ ä¸ªä¸åŒç‰ˆæœ¬çš„ Pythonã€‚ä¾‹å¦‚ï¼Œç”±äºæŸç§åº“ä¾èµ–æ€§ï¼Œå¯èƒ½ä¸€ä¸ªä»£ç åº“æ­£åœ¨ä½¿ç”¨æ—§ç‰ˆæœ¬çš„ Pythonã€‚å‡çº§æ‚¨ä¸ºè¯¥é¡¹ç›®ä½¿ç”¨çš„ Python ç‰ˆæœ¬å¯èƒ½éœ€è¦å¯¹è¯¥é¡¹ç›®è¿›è¡Œä¸€äº›é‡æ„ï¼Œè€Œæ‚¨å¹¶æ²¡æœ‰ä¼˜å…ˆè€ƒè™‘è¿™äº›é‡æ„ã€‚ä¸æ­¤åŒæ—¶ï¼Œæ‚¨å¯èƒ½ä¼šåœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨è¾ƒæ–°çš„ Python ç‰ˆæœ¬ï¼Œå› ä¸ºæ‚¨æƒ³è¦åˆ©ç”¨é—ªäº®çš„æ–°ç‰¹æ€§ã€‚

å¯¹äº Python å¼€å‘äººå‘˜æ¥è¯´ï¼Œåœ¨æœºå™¨ä¸Šå®‰è£…å¤šä¸ª Python ç‰ˆæœ¬æ˜¯ä¸€ä¸ªç°å®çš„åœºæ™¯ã€‚æœ‰æ•ˆåœ°ç®¡ç†è¿™äº›ç‰ˆæœ¬éå¸¸é‡è¦ã€‚

è¿™é‡Œæœ‰å…³äºå¦‚ä½•å®‰è£…`pyenv` [çš„è¯´æ˜](https://github.com/pyenv/pyenv)ã€‚

> å½“æ‚¨è¿è¡Œç±»ä¼¼äº`python`æˆ–`pip`çš„å‘½ä»¤æ—¶ï¼Œæ‚¨çš„æ“ä½œç³»ç»Ÿä¼šåœ¨ç›®å½•åˆ—è¡¨ä¸­æœç´¢ä»¥è¯¥åç§°å‘½åçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿™ä¸ªç›®å½•åˆ—è¡¨ä½äºä¸€ä¸ªåä¸º`PATH`çš„ç¯å¢ƒå˜é‡ä¸­ï¼Œåˆ—è¡¨ä¸­çš„æ¯ä¸ªç›®å½•ç”¨å†’å·åˆ†éš”...

`pyenv`çš„å·¥ä½œåŸç†æ˜¯åœ¨ä½ çš„`PATH`å‰é¢æ’å…¥ä¸€ä¸ªç”±*å«ç‰‡*ç»„æˆçš„ç›®å½•ï¼Œè¿™æ ·å½“ä½ è°ƒç”¨`python`æˆ–`pip`æ—¶ï¼Œè¿™äº›å«ç‰‡æ˜¯ä½ çš„æ“ä½œç³»ç»Ÿé¦–å…ˆæ‰¾åˆ°çš„ã€‚ç„¶åï¼Œä½ è¾“å…¥çš„å‘½ä»¤è¢«æ‹¦æˆªå¹¶å‘é€ç»™`pyenv`ï¼Œå®ƒæ ¹æ®ä¸€äº›è§„åˆ™å†³å®šä½ çš„å‘½ä»¤ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„ Pythonã€‚

æŒ‰ç…§è¯´æ˜å®‰è£…`pyenv`ã€‚å³ä½¿æ‚¨ä½¿ç”¨ Homebrew å®‰è£…ï¼Œä¹Ÿè¦ç¡®ä¿éµå¾ªåŸºæœ¬ GitHub Checkout ä¸‹çš„å…¶ä½™å®‰è£…åæ­¥éª¤ã€‚å½“æˆ‘å®‰è£…çš„æ—¶å€™ï¼Œæˆ‘å‘ç°æˆ‘æœ‰ä¸€ä¸ª`.bashrc`å’Œ`.bash_profile`ã€‚[è¿™é‡Œ](http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html)æ˜¯ä¸€ç¯‡å…³äºå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä»¥åŠä½•æ—¶ä½¿ç”¨å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶çš„æ–‡ç« ã€‚å¦‚æœæŒ‰ç…§è¯´æ˜è¾“å…¥`pyenv`åï¼Œæ²¡æœ‰å¾—åˆ°å¦‚ä¸‹ç»“æœï¼Œè¯·è¿”å›å¹¶ç¡®ä¿è®¾ç½®äº†å¦ä¸€ä¸ª bash æ–‡ä»¶:

```
flo at MacBook-Pro in ~ $ pyenv
pyenv 1.2.8
Usage: pyenv <command> [<args>]

Some useful pyenv commands are:
   commands    List all available pyenv commands
   local Set or show the local application-specific Python version
   global      Set or show the global Python version
   shell       Set or show the shell-specific Python version
   install Install a Python version using python-build
   uninstall   Uninstall a specific Python version
   rehash      Rehash pyenv shims (run this after installing executables)
   version     Show the current Python version and its origin
   versions    List all Python versions available to pyenv
   which       Display the full path to an executable
   whence      List all Python versions that contain the given executable

See `pyenv help <command>' for information on a specific command.
For full documentation, see: https://github.com/pyenv/pyenv#readme 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#step-1-install-a-specific-python-version)ç¬¬ä¸€æ­¥:å®‰è£…ç‰¹å®šçš„ Python ç‰ˆæœ¬ã€‚

å‡è®¾æˆ‘æ­£åœ¨åˆ›å»ºä¸€ä¸ªè„šæœ¬ï¼Œå®ƒå°†åœ¨ web æµè§ˆå™¨ä¸­æ‰“å¼€æœ€æ–°çš„ xkcd æ¼«ç”»ã€‚æˆ‘å‡†å¤‡ç”¨ Python 3.7.0 è¿è¡Œä¸€ä¸‹ã€‚

```
flo at MacBook-Pro in ~ $ pyenv install 3.7.0
python-build: use openssl from homebrew
python-build: use readline from homebrew
Downloading Python-3.7.0.tar.xz...
-> https://www.python.org/ftp/python/3.7.0/Python-3.7.0.tar.xz
Installing Python-3.7.0...
python-build: use readline from homebrew
Installed Python-3.7.0 to /Users/flo/.pyenv/versions/3.7.0 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#step-2-create-a-project-directory-go-to-the-directory)ç¬¬äºŒæ­¥:åˆ›å»ºé¡¹ç›®ç›®å½•ã€‚è½¬åˆ°ç›®å½•ã€‚

```
flo at MacBook-Pro in ~ $ mkdir Documents/comic-creator
flo at MacBook-Pro in ~ $ cd Documents/comic-creator/ 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#step-3-set-the-python-version-for-the-project)ç¬¬ä¸‰æ­¥:ä¸ºé¡¹ç›®è®¾ç½® Python ç‰ˆæœ¬ã€‚

å…ˆçœ‹æ–‡ä»¶å¤¹é‡Œçš„æ–‡ä»¶ï¼Œç”šè‡³æ˜¯éšè—æ–‡ä»¶(`-la`ä¼šæ˜¾ç¤ºéšè—æ–‡ä»¶)ã€‚

```
flo at MacBook-Pro in .../comic-creator $ ls -la
total 0
drwxr-xr-x   2 flo  staff    64 Apr 12 21:12 .
drwx------+ 33 flo  staff  1056 Apr 12 21:12 .. 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œä¸ºé¡¹ç›®è®¾ç½® Python ç‰ˆæœ¬ã€‚ç°åœ¨ä½ å¯ä»¥çœ‹åˆ°ä¸€ä¸ªéšè—æ–‡ä»¶(éšè—æ–‡ä»¶ä»¥ä¸€ä¸ªç‚¹å¼€å§‹)ã€‚å¾€é‡Œé¢çœ‹`.python-version`ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬è®¾å®šçš„ç‰ˆæœ¬ã€‚

```
flo at MacBook-Pro in .../comic-creator $ pyenv local 3.7.0
flo at MacBook-Pro in .../comic-creator $ ls -la
total 8
drwxr-xr-x   3 flo  staff    96 Apr 12 21:16 .
drwx------+ 33 flo  staff  1056 Apr 12 21:12 ..
-rw-r--r--   1 flo  staff     6 Apr 12 21:16 .python-version
flo at MacBook-Pro in .../comic-creator $ cat .python-version 
3.7.0 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#step-4-create-a-virtual-environment)ç¬¬å››æ­¥:åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚

æ­£å¦‚æ‚¨çš„æœºå™¨ä¸Šå¯èƒ½å®‰è£…äº†å‡ ä¸ª Python ç‰ˆæœ¬ä¸€æ ·ï¼Œæ‚¨ä¹Ÿå¯èƒ½å®‰è£…äº†ä¸åŒç‰ˆæœ¬çš„ Python åŒ…ã€‚æƒ³è±¡ä¸€ä¸‹ä½ çš„ä¸€ä¸ªé¡¹ç›®çš„ä¾èµ–å›¾æ˜¯è¿™æ ·çš„:

```
requests==2.21.0
  - certifi [required: >=2017.4.17, installed: 2019.3.9]
  - chardet [required: >=3.0.2,<3.1.0, installed: 3.0.4]
  - idna [required: >=2.5,<2.9, installed: 2.8]
  - urllib3 [required: >=1.21.1,<1.25, installed: 1.24.1] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨å¦ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œä½ å¯èƒ½ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„`requests`ï¼Œå®ƒä¾èµ–äºä¸åŒç‰ˆæœ¬çš„`certifi`ã€‚é€šè¿‡ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥ä¿æŒåŒ…å®‰è£…æŒ‰é¡¹ç›®éš”ç¦»ã€‚

> è™šæ‹Ÿç¯å¢ƒæ˜¯ä¸€ç§ Python ç¯å¢ƒï¼Œå…¶ä¸­å®‰è£…çš„ Python è§£é‡Šå™¨ã€åº“å’Œè„šæœ¬ä¸å…¶ä»–è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…çš„è§£é‡Šå™¨ã€åº“å’Œè„šæœ¬ä»¥åŠ(é»˜è®¤æƒ…å†µä¸‹)å®‰è£…åœ¨â€œç³»ç»Ÿâ€Python(å³ä½œä¸ºæ“ä½œç³»ç»Ÿçš„ä¸€éƒ¨åˆ†å®‰è£…çš„ç³»ç»Ÿ)ä¸­çš„ä»»ä½•åº“ç›¸éš”ç¦»ã€‚ [Python venv æ–‡æ¡£](https://docs.python.org/3/library/venv.html)

å› æ­¤ï¼Œé¦–å…ˆï¼Œæ‚¨å¯ä»¥(å†æ¬¡)éªŒè¯æˆ‘ä»¬ä¸ºé¡¹ç›®æ­£ç¡®åœ°è®¾ç½®äº† Python ç‰ˆæœ¬ã€‚ç°åœ¨ï¼Œé€šè¿‡è°ƒç”¨`venv`åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œå¹¶è°ƒç”¨è¿™ä¸ªæ–°ç¯å¢ƒ`venv`ã€‚æ‚¨ç°åœ¨å¯ä»¥çœ‹åˆ°ç¯å¢ƒå·²ç»åˆ›å»ºã€‚

```
flo at MacBook-Pro in .../comic-creator $ python --version
Python 3.7.0
flo at MacBook-Pro in .../comic-creator $ python -m venv venv
flo at MacBook-Pro in .../comic-creator $ ls
venv 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#step-5-activate-the-virtual-environment)ç¬¬äº”æ­¥:æ¿€æ´»è™šæ‹Ÿç¯å¢ƒã€‚

å¾€é‡Œé¢çœ‹`venv`ã€‚ç„¶åï¼Œå¾€é‡Œé¢çœ‹`venv/bin`ã€‚`bin`ä»£è¡¨*äºŒè¿›åˆ¶*ã€‚åœ¨ç±» Linux/Unix ç³»ç»Ÿä¸­ï¼Œè¿è¡Œç³»ç»Ÿæ‰€éœ€çš„å¯æ‰§è¡Œç¨‹åºåœ¨ [`/bin`](http://linfo.org/bin.html) ä¸­æ‰¾åˆ°ã€‚åŒæ ·ï¼ŒPython å¯æ‰§è¡Œç¨‹åºä¹Ÿå­˜å‚¨åœ¨`bin`ä¸­ã€‚

ç”¨`source`æ¿€æ´»è™šæ‹Ÿç¯å¢ƒã€‚

> `source`æ˜¯ä¸€ä¸ª Unix å‘½ä»¤ï¼Œå®ƒæ ¹æ®åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œçš„å‘½ä»¤è¯„ä¼°æ–‡ä»¶...é€šå¸¸â€œå½“å‰ä¸Šä¸‹æ–‡â€æ˜¯ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œç”¨æˆ·åœ¨äº¤äº’ä¼šè¯æœŸé—´åœ¨å…¶ä¸­é”®å…¥å‘½ä»¤ã€‚`source`å‘½ä»¤å¯ä»¥ç¼©å†™æˆä¸€ä¸ªç‚¹(ã€‚)åœ¨ Bash å’Œç±»ä¼¼çš„ POSIX-ish shell ä¸­ã€‚[ç»´åŸºç™¾ç§‘](https://en.wikipedia.org/wiki/Source_(command))

è¿™æ„å‘³ç€ï¼Œå¦‚æœæ‚¨æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£ï¼Œæ‚¨å°†éœ€è¦å†æ¬¡è·å–`activate`æ–‡ä»¶æ¥æ¿€æ´»è¯¥çª—å£ä¸­çš„è™šæ‹Ÿç¯å¢ƒï¼è¿˜è¦æ³¨æ„ï¼Œä½ å¯ä»¥è¾“å…¥`. venv/bin/activate`ï¼Œå®ƒä¼šåšå’Œ`source venv/bin/activate`å®Œå…¨ä¸€æ ·çš„äº‹æƒ…ã€‚

```
flo at MacBook-Pro in .../comic-creator $ ls venv/
bin        include    lib        pyvenv.cfg
flo at MacBook-Pro in .../comic-creator $ ls venv/bin/
activate         activate.csh     activate.fish    easy_install     easy_install-3.7 pip              pip3             pip3.7           python           python3
flo at MacBook-Pro in .../comic-creator $ source venv/bin/activate 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬æ¥çœ‹çœ‹`activate` :

```
flo at MacBook-Pro in .../comic-creator using virtualenv: venv $ cat venv/bin/activate
# This file must be used with "source bin/activate" *from bash*
# you cannot run it directly

deactivate () {
    # reset old environment variables
    if [ -n "${_OLD_VIRTUAL_PATH:-}" ] ; then
        PATH="${_OLD_VIRTUAL_PATH:-}"
        export PATH
        unset _OLD_VIRTUAL_PATH
    fi
    if [ -n "${_OLD_VIRTUAL_PYTHONHOME:-}" ] ; then
        PYTHONHOME="${_OLD_VIRTUAL_PYTHONHOME:-}"
        export PYTHONHOME
        unset _OLD_VIRTUAL_PYTHONHOME
    fi

    # This should detect bash and zsh, which have a hash command that must
    # be called to get it to forget past commands.  Without forgetting
    # past commands the $PATH changes we made may not be respected
    if [ -n "${BASH:-}" -o -n "${ZSH_VERSION:-}" ] ; then
        hash -r
    fi

    if [ -n "${_OLD_VIRTUAL_PS1:-}" ] ; then
        PS1="${_OLD_VIRTUAL_PS1:-}"
        export PS1
        unset _OLD_VIRTUAL_PS1
    fi

    unset VIRTUAL_ENV
    if [ ! "$1" = "nondestructive" ] ; then
    # Self destruct!
        unset -f deactivate
    fi
}

# unset irrelevant variables
deactivate nondestructive

VIRTUAL_ENV="/Users/flo/Documents/comic-creator/venv"
export VIRTUAL_ENV

_OLD_VIRTUAL_PATH="$PATH"
PATH="$VIRTUAL_ENV/bin:$PATH"
export PATH

# unset PYTHONHOME if set
# this will fail if PYTHONHOME is set to the empty string (which is bad anyway)
# could use `if (set -u; : $PYTHONHOME) ;` in bash
if [ -n "${PYTHONHOME:-}" ] ; then
    _OLD_VIRTUAL_PYTHONHOME="${PYTHONHOME:-}"
    unset PYTHONHOME
fi

if [ -z "${VIRTUAL_ENV_DISABLE_PROMPT:-}" ] ; then
    _OLD_VIRTUAL_PS1="${PS1:-}"
    if [ "x(venv) " != x ] ; then
        PS1="(venv) ${PS1:-}"
    else
    if [ "`basename \"$VIRTUAL_ENV\"`" = "__" ] ; then
        # special case for Aspen magic directories
        # see http://www.zetadev.com/software/aspen/
        PS1="[`basename \`dirname \"$VIRTUAL_ENV\"\``] $PS1"
    else
        PS1="(`basename \"$VIRTUAL_ENV\"`)$PS1"
    fi
    fi
    export PS1
fi

# This should detect bash and zsh, which have a hash command that must
# be called to get it to forget past commands.  Without forgetting
# past commands the $PATH changes we made may not be respected
if [ -n "${BASH:-}" -o -n "${ZSH_VERSION:-}" ] ; then
    hash -r
fi 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#step-6-install-dependencies)ç¬¬å…­æ­¥:å®‰è£…ä¾èµ–é¡¹ã€‚

å¦‚æœä½ æ²¡æœ‰é‡åˆ°è¿‡â€œdependencies â€,è¿™ä¸ªè¯é€šå¸¸ç”¨æ¥è¡¨ç¤ºæŸç‰©ä¾èµ–äºå¦ä¸€ç‰©...æœ‰é“ç†ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„ Python é¡¹ç›®å°†ä¾èµ–äºå®‰è£…å°šæœªä¸ Python 3.7.0 æ†ç»‘åœ¨ä¸€èµ·çš„å„ç§åº“ã€‚

è¿™æ˜¯æˆ‘ä»¬ä»£ç çš„æ ·å­:

```
import json
import sys
import webbrowser

import requests

# url of latest xkcd comic URL = 'http://xkcd.com/info.0.json'

if __name__ == '__main__':
    response = requests.get(URL)
    if response.status_code == requests.codes.ok:
        content = json.loads(response.text)
        print('Comic is located at {}'.format(content['img']))
        webbrowser.open(content['img'])
    else:
        print('Error: \n {}'.format(response.text))
        sys.exit() 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶`comic_popup.py`,å¹¶æ·»åŠ ä»¥ä¸‹ä»£ç ã€‚å¦‚æœä½ è¯•å›¾è¿è¡Œä»£ç ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚`requests`æ¨¡å—æœªå®‰è£…ã€‚è®©æˆ‘ä»¬å®‰è£…å®ƒã€‚

```
flo at MacBook-Pro in .../comic-creator using virtualenv: venv $ touch comic_popup.py
flo at MacBook-Pro in .../comic-creator using virtualenv: venv $ ls
comic_popup.py venv
flo at MacBook-Pro in .../comic-creator using virtualenv: venv $ pip install requests
Collecting requests
  Using cached https://files.pythonhosted.org/packages/7d/e3/20f3d364d6c8e5d2353c72a67778eb189176f08e873c9900e10c0287b84b/requests-2.21.0-py2.py3-none-any.whl
Collecting chardet<3.1.0,>=3.0.2 (from requests)
  Using cached https://files.pythonhosted.org/packages/bc/a9/01ffebfb562e4274b6487b4bb1ddec7ca55ec7510b22e4c51f14098443b8/chardet-3.0.4-py2.py3-none-any.whl
Collecting urllib3<1.25,>=1.21.1 (from requests)
  Using cached https://files.pythonhosted.org/packages/62/00/ee1d7de624db8ba7090d1226aebefab96a2c71cd5cfa7629d6ad3f61b79e/urllib3-1.24.1-py2.py3-none-any.whl
Collecting idna<2.9,>=2.5 (from requests)
  Using cached https://files.pythonhosted.org/packages/14/2c/cd551d81dbe15200be1cf41cd03869a46fe7226e7450af7a6545bfc474c9/idna-2.8-py2.py3-none-any.whl
Collecting certifi>=2017.4.17 (from requests)
  Using cached https://files.pythonhosted.org/packages/60/75/f692a584e85b7eaba0e03827b3d51f45f571c2e793dd731e598828d380aa/certifi-2019.3.9-py2.py3-none-any.whl
Installing collected packages: chardet, urllib3, idna, certifi, requests
Successfully installed certifi-2019.3.9 chardet-3.0.4 idna-2.8 requests-2.21.0 urllib3-1.24.1
You are using pip version 10.0.1, however version 19.0.3 is available.
You should consider upgrading via the 'pip install --upgrade pip' command. 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#step-7-save-packages)ç¬¬ä¸ƒæ­¥:ä¿å­˜åŒ…ã€‚

è¯·æ³¨æ„å½“æ‚¨è¾“å…¥`pip freeze`æ—¶æ‰“å°çš„å†…å®¹ã€‚è¯¥å‘½ä»¤ä»¥éœ€æ±‚æ ¼å¼({library-name}={version})è¾“å‡ºå·²å®‰è£…çš„è½¯ä»¶åŒ…ã€‚åœ¨ä¸‹ä¸€è¡Œä¸­ï¼Œ*ä½¿ç”¨ [`>`](https://en.wikipedia.org/wiki/Redirection_(computing)) å°†è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªåä¸º`requirements.txt`çš„æ–‡ä»¶ä¸­ã€‚å¦‚æœæ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œå•ä¸ª`>`å°†è¦†ç›–æ–‡ä»¶çš„å†…å®¹ã€‚ä½¿ç”¨`>>`å°†è¿½åŠ åˆ°ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ–‡ä»¶çš„å†…å®¹ã€‚*

ä½ ä¸å¿…è°ƒç”¨è¿™ä¸ªæ–‡ä»¶`requirements.txt`,ä½†è¿™æ˜¯å¤§å¤šæ•° Python å¼€å‘äººå‘˜ä½¿ç”¨çš„ï¼Œæ‰€ä»¥è¦éµå®ˆçº¦å®šï¼æ›´å¤šå…³äºéœ€æ±‚æ–‡ä»¶[è¿™é‡Œ](https://pip.pypa.io/en/stable/user_guide/)ã€‚

æ‚¨å¯èƒ½è¿˜æ³¨æ„åˆ°,`requests`å¹¶ä¸æ˜¯å”¯ä¸€ç”±`pip freeze`è¾“å‡ºçš„åº“ã€‚å…¶ä»–çš„åº“æ˜¯`requests`æ‰€ä¾èµ–çš„åº“ï¼Œæ‰€ä»¥å½“ä½ å®‰è£…`requests`æ—¶ï¼Œä½ å¿…é¡»å®‰è£…å…¶ä»–çš„åº“æ‰èƒ½è®©`requests`å·¥ä½œã€‚è¿™äº›å…¶ä»–çš„åº“è¢«ç§°ä¸º*ä¼ é€’ä¾èµ–*ã€‚

```
flo at MacBook-Pro in .../comic-creator using virtualenv: venv $ pip freeze
certifi==2019.3.9
chardet==3.0.4
idna==2.8
requests==2.21.0
urllib3==1.24.1
You are using pip version 10.0.1, however version 19.0.3 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
flo at MacBook-Pro in .../comic-creator using virtualenv: venv $ pip freeze > requirements.txt
You are using pip version 10.0.1, however version 19.0.3 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
flo at MacBook-Pro in .../comic-creator using virtualenv: venv $ cat requirements.txt 
certifi==2019.3.9
chardet==3.0.4
idna==2.8
requests==2.21.0
urllib3==1.24.1
flo at MacBook-Pro in .../comic-creator using virtualenv: venv $ pip --help

Usage:   
  pip <command> [options]

Commands:
  install                     Install packages.
  download                    Download packages.
  uninstall                   Uninstall packages.
  freeze                      Output installed packages in requirements format.
  list                        List installed packages.
  show                        Show information about installed packages.
  check                       Verify installed packages have compatible dependencies.
  config                      Manage local and global configuration.
  search                      Search PyPI for packages.
  wheel                       Build wheels from your requirements.
  hash                        Compute hashes of package archives.
  completion                  A helper command used for command completion.
  help                        Show help for commands.

General Options:
  -h, --help                  Show help.
  --isolated                  Run pip in an isolated mode, ignoring environment variables and user configuration.
  -v, --verbose               Give more output. Option is additive, and can be used up to 3 times.
  -V, --version               Show version and exit.
  -q, --quiet                 Give less output. Option is additive, and can be used up to 3 times (corresponding to WARNING, ERROR, and CRITICAL logging levels).
  --log <path>                Path to a verbose appending log.
  --proxy <proxy>             Specify a proxy in the form [user:passwd@]proxy.server:port.
  --retries <retries>         Maximum number of retries each connection should attempt (default 5 times).
  --timeout <sec>             Set the socket timeout (default 15 seconds).
  --exists-action <action>    Default action when a path already exists: (s)witch, (i)gnore, (w)ipe, (b)ackup, (a)bort).
  --trusted-host <hostname>   Mark this host as trusted, even though it does not have valid or any HTTPS.
  --cert <path>               Path to alternate CA bundle.
  --client-cert <path>        Path to SSL client certificate, a single file containing the private key and the certificate in PEM format.
  --cache-dir <dir>           Store the cache data in <dir>.
  --no-cache-dir              Disable the cache.
  --disable-pip-version-check
                              Don't periodically check PyPI to determine whether a new version of pip is available for download. Implied with --no-index.
  --no-color                  Suppress colored output 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#step-8-run-the-code)ç¬¬å…«æ­¥:è¿è¡Œä»£ç ã€‚

å°±æ˜¯è¿™æ ·ã€‚æ‚¨ç°åœ¨åº”è¯¥å¯ä»¥è¿è¡Œä»£ç äº†ã€‚ä¸€æ—¦å®‰è£…äº†æ‰€éœ€çš„ä¾èµ–é¡¹ï¼Œæ‚¨å°±å¯ä»¥è¿è¡Œå®ƒï¼Œä½†æ˜¯ä¸è¦å¿˜è®°ä¿å­˜æ‚¨çš„éœ€æ±‚ï¼

```
flo at MacBook-Pro in .../comic-creator using virtualenv: venv $ python comic_popup.py 
Comic is located at https://imgs.xkcd.com/comics/election_commentary.png 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œå¦‚æœæ‚¨å°†ä»£ç ä¿å­˜åˆ° repo ä¸­ï¼Œä»»ä½•äººéƒ½å¯ä»¥æå–ä»£ç å¹¶è¿è¡Œå®ƒã€‚æ·»åŠ ä¸€ä¸ª`README.md`å¹¶åŒ…å«ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„ Python æ¥è¿è¡Œä»£ç ã€‚ä¸‹ä¸€ä¸ªå¼€å‘äººå‘˜å°†è®¾ç½®æ­£ç¡®çš„ Python ç‰ˆæœ¬ï¼Œå¹¶é€šè¿‡è¿è¡Œ`pip install -r requirements.txt`æ¥å®‰è£…éœ€æ±‚ã€‚

ä¸è¦åœ¨å›è´­ä¸­åŒ…å«`.python-version`æ–‡ä»¶ï¼Œå› ä¸ºè¯¥æ–‡ä»¶æ˜¯ç‰¹å®šäº`pyenv`çš„ï¼Œå…¶ä»–å¼€å‘äººå‘˜å¯èƒ½æœ‰ä»–ä»¬è‡ªå·±çš„æ–¹å¼æ¥ç®¡ç† Python ç‰ˆæœ¬ã€‚

> ä½œä¸ºä¸€ä¸ªç»éªŒæ³•åˆ™ï¼Œæˆ‘ä¸åŒ…æ‹¬ç‰¹å®šäºæˆ‘çš„æ–‡ä»¶ï¼Œæ¯”å¦‚å„ç§ ide(é›†æˆå¼€å‘ç¯å¢ƒ)çš„é…ç½®æ–‡ä»¶ï¼Œå› ä¸ºå®ƒä»¬ä¼šä½¿å­˜å‚¨åº“å˜å¾—æ··ä¹±ã€‚é€šè¿‡æ·»åŠ å’Œé…ç½®ä¸€ä¸ª`.gitignore`æ–‡ä»¶æ¥å¿½ç•¥å­˜å‚¨åº“ä¸­çš„è¿™äº›æ–‡ä»¶ã€‚

* * *

è¿™æ˜¯æˆ‘å¼€å§‹ä¸€ä¸ª Python é¡¹ç›®æ—¶çš„å¼€å‘å·¥ä½œæµç¨‹ï¼æˆ‘åœ¨æˆ‘è®¤ä¸ºåˆé€‚çš„åœ°æ–¹åŠ å…¥äº†ä¸€äº›å¼€å‘äººå‘˜çš„æœ€ä½³å®è·µã€‚æˆ‘è¿˜å°½å¯èƒ½è§£é‡Šäº†æˆ‘è®¤ä¸ºåˆé€‚çš„ä¸Šä¸‹æ–‡ã€‚æˆ‘é¼“åŠ±ä½ å°è¯•åšåŒä¸€ä»¶äº‹çš„ä¸åŒæ–¹æ³•ï¼Œçœ‹çœ‹æ¯ç§æ–¹æ³•çš„åˆ©å¼Šã€‚

æœ‰ä»€ä¹ˆé—®é¢˜å°½ç®¡é—®ï¼æˆ‘å¾ˆä¹æ„è°ˆè®ºæœ€ä½³å®è·µä»¥åŠå¯¹æ‚¨æœ‰æ•ˆçš„æ–¹æ³•ã€‚æˆ‘ä»¬å·¥ä½œæµç¨‹çš„è®¸å¤šéƒ¨åˆ†éƒ½æ˜¯çº¦å®šä¿—æˆçš„ï¼Œæˆ–è€…å› ä¸ºè¿™æ˜¯æˆ‘ä»¬æœ€åˆå­¦ä¹ çš„æ–¹å¼ï¼Œæˆ–è€…æˆ‘ä»¬å¹¶ä¸äº†è§£æ›´å¤šã€‚æˆ‘å¾ˆæƒ³æ”¶åˆ°ä½ çš„æ¥ä¿¡ï¼