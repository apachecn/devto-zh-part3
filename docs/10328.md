# å˜¿ï¼Œå›åº”è€…ğŸ‘‹ï¼Œè¯·ç»™æˆ‘ä¸€ä¸ª Symfony çš„å›å¤ğŸ“œ

> åŸæ–‡:[https://dev.to/ro0nl/hey-responder-è¯·ç»™æˆ‘ä¸€ä¸ª-symfony-response - 4n1d](https://dev.to/ro0nl/hey-responder--please-respond-to-me-with-a-symfony-response--4n1d)

å½“åœ¨ä¸€ä¸ªå…¸å‹çš„ Symfony web åº”ç”¨ç¨‹åºä¸­å·¥ä½œæ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæŸ¥çœ‹å®ƒçš„æ§åˆ¶å™¨æ¥å‘ç°åº”ç”¨ç¨‹åºå¯èƒ½é‡åˆ°çš„ä»»ä½•å±é™©ä¿¡å·ã€‚è¿™é‡Œç»å¸¸ä¼šå‘ç”Ÿå¾ˆå¤šé­”æ³•...

> æ§åˆ¶å™¨æ˜¯æ‚¨åˆ›å»ºçš„ PHP å‡½æ•°ï¼Œå®ƒä»è¯·æ±‚å¯¹è±¡è¯»å–ä¿¡æ¯ï¼Œå¹¶åˆ›å»ºå’Œè¿”å›å“åº”å¯¹è±¡ã€‚å“åº”å¯èƒ½æ˜¯ HTML é¡µé¢ã€JSONã€XMLã€æ–‡ä»¶ä¸‹è½½ã€é‡å®šå‘ã€404 é”™è¯¯æˆ–ä»»ä½•å…¶ä»–å†…å®¹ã€‚æ§åˆ¶å™¨æ‰§è¡Œåº”ç”¨ç¨‹åºå‘ˆç°é¡µé¢å†…å®¹æ‰€éœ€çš„ä»»æ„é€»è¾‘ã€‚([æ¥æº](https://symfony.com/doc/current/controller.html))

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³é‡ç‚¹ä»‹ç»å¦‚ä½•ç”Ÿæˆ Symfony çš„ HTTP å“åº”å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°†ä»æ§åˆ¶å™¨è¿”å›ä»¥è¿›è¡Œæ¸²æŸ“ã€‚

Symfony å°†ç»§æ‰¿`AbstractController`ä½œä¸ºå…¶æœ€ä½³å®è·µ([æ¥æº](https://symfony.com/doc/current/best_practices/controllers.html))...ç­‰ç­‰ä»€ä¹ˆï¼Ÿé‚£æœ‰è§„æ¨¡å—ï¼Ÿ

æˆ‘çŒœ _(ãƒ„)_/ï¼Œä»Šå¤©ä½ å°†ç»§æ‰¿ 24 ä¸ªå®ç”¨æ–¹æ³•ã€‚æ­¤å¤–ï¼Œæ‚¨ä¾èµ–äºæœåŠ¡å®šä½å™¨æ¥å®ç°è¿™ä¸€ç‚¹(ä¸æ˜¯çº¯ç²¹çš„ä¾èµ–æ³¨å…¥)ã€‚å¦‚æœè¿™å¯¹ä½ æœ‰ç”¨ï¼Œæˆ–è€…ä½ çœŸçš„ä¸åœ¨ä¹ï¼›ç»§ç»­å‰è¿›ï¼

ä½†æ˜¯ï¼Œå¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨[åŠ¨ä½œåŸŸå“åº”è€…](https://en.wikipedia.org/wiki/Action%E2%80%93domain%E2%80%93responder)æ¨¡å¼( *ADR* ï¼Œé‚£ä¹ˆæˆ‘æœ‰æ¶ˆæ¯å‘Šè¯‰ä½ ...è®¤è¯†ä¸€ä¸‹ HTTP å“åº”è€…:ã€https://github.com/ro0NL/symfony-http-responderã€‘T4

> è®© R éƒ¨åˆ†å˜å¾—å¾ˆæœ‰è¶£ã€‚
> â€”æˆ‘

```
use ro0NL\HttpResponder\Bridge\Twig\Template;
use ro0NL\HttpResponder\Responder;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpFoundation\Request;

class SomeHttpAction
{
    public function __invoke(Request $request, Responder $responder): Response
    {
        return $responder->respond(new Template('home.html.twig'));
    }
} 
```

æˆ‘æ·»åŠ äº†ä¸€ä¸ª[å¯¹ç…§è¡¨](https://github.com/ro0NL/symfony-http-responder#comparison-table)æ¥å¸®åŠ©ä½ å†³å®šä½ æ˜¯å¦çœŸçš„éœ€è¦`AbstractController`ğŸ‘

ä¸‹ä¸€æ­¥æ˜¯æ·»åŠ ä¸€ä¸ª`Kernel::VIEW`äº‹ä»¶ç›‘å¬å™¨ï¼Œå¹¶æ ¹æ®æ§åˆ¶å™¨ç»“æœä»é‚£é‡Œåšå‡ºå“åº”ã€‚å®é™…ä¸Šï¼Œè¿™æ„å‘³ç€é»˜è®¤æƒ…å†µä¸‹ä½ æ˜¯æ— æœåŠ¡ä¾èµ–çš„ï¼

```
return new Template('home.html.twig');
return new Redirect('/path');
return new RouteRedirect('route_name'); 
```

æˆ–è€…æ›´é«˜çº§çš„ä¾‹å­:

```
return (new Template('some.html.twig'))
    ->withStatus(500)
    ->withHeader('X-Hello', 'world')
    ->withFlash('success', 'Ah yeah')
    ->withLink('href', ['rel']); 
```

å¹²æ¯ï¼Œ