# å¦‚ä½•åœ¨ Nuxt.js ä¸­è®¾ç½®åŠ¨æ€è·¯ç”±

> åŸæ–‡:[https://dev . to/VSTO tard/how-to-setup-dynamic-routes-in-nuxt-js-bcp](https://dev.to/vstothard/how-to-setup-dynamic-routes-in-nuxt-js-bcp)

å½“åœ¨ Nuxt ä¸­ä½¿ç”¨[åŠ¨æ€é¡µé¢](https://nuxtjs.org/guide/routing/)æ—¶ï¼Œä¾‹å¦‚å½“æˆ‘ä»¬æœ‰ä¸€ä¸ªåšå®¢æ–‡ç« çš„ CMS æ—¶ï¼Œæˆ‘ä»¬å¾ˆå¿«å‘ç°æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥ä¸ºæ¯ä¸ªæ–‡ç« ç”Ÿæˆè·¯ç”±ï¼Œä¾‹å¦‚`www.veritystothard.com/blog/a-post/`ã€‚

æˆ‘åœ¨ä½¿ç”¨ Contentful å»ºç«‹è‡ªå·±çš„ç½‘ç«™æ—¶é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚æˆ‘çš„åŠ¨æ€é¡µé¢åœ¨ç¬¬ä¸€æ¬¡åŠ è½½æ—¶è¿è¡Œè‰¯å¥½ï¼›åœ¨`<nuxt-link />`ä¸­ä¼ é€’çš„ post slug å…è®¸æˆ‘ä½¿ç”¨ asyncData æ–¹æ³•é¢„å…ˆå‘ˆç°æ‰€éœ€çš„ postï¼Œå¯¹ Contentful çš„è°ƒç”¨è¿”å›äº†ä¸€ä¸ªç±»å‹ä¸º`blogPost`çš„æ¡ç›®ï¼Œå…¶ slug ä¸ URL ä¸­çš„åŒ¹é…ã€‚ç„¶è€Œï¼Œå½“æˆ‘åˆ·æ–°é¡µé¢æ—¶ï¼Œå®ƒå´ä¸è§äº†ã€‚

å‡ºç°è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºæˆ‘æ²¡æœ‰åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰æˆ‘éœ€è¦ Nuxt ä¸ºæˆ‘çš„åŠ¨æ€é¡µé¢ç”Ÿæˆçš„è·¯ç”±ï¼Œæ‰€ä»¥å½“`nuxt generate`è¿è¡Œæ—¶ï¼Œæ²¡æœ‰åˆ›å»ºè·¯ç”±ã€‚

è¿™ä¸ªé—®é¢˜çš„å¿«é€Ÿè§£å†³æ–¹æ³•æ˜¯ç®€å•åœ°å°†æ¯ä¸ªå¸–å­çš„è·¯çº¿æ·»åŠ åˆ°`nuxt.config.js`æ–‡ä»¶
çš„`routes`æ•°ç»„ä¸­

```
 export default {
    ...
      generate: {
          routes: [
              '/blog/a-post',
              '/blog/another-one'
          ]
      }
    ...
    } 
```

ä½†æ˜¯ï¼Œå½“å°†æ¥å¢åŠ æ–°èŒä½æ—¶ï¼Œè¿™ç§æ–¹æ³•å¾ˆå¿«å°±ä¼šå˜å¾—ä¹å‘³å’Œä½æ•ˆã€‚

æ›´å¥½çš„æ–¹æ³•æ˜¯æ ¹æ®æ‚¨çš„è¾“å…¥ç”Ÿæˆä¸€ç»„è·¯ç”±ã€‚å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘å°†ä½¿ç”¨ä» Contentful ä¸­æå–çš„ç±»å‹ä¸º`blogPost`çš„æ¡ç›®ï¼Œä½†æ˜¯è¿™ä¸ªæ¦‚å¿µå¯ä»¥åº”ç”¨äºå„ç§ CMS /æ•°æ®æºã€‚

é¦–å…ˆï¼Œæˆ‘è®¾ç½®æˆ‘çš„å®¢æˆ·æœºå¹¶è°ƒç”¨ Contentful è¿”å›æ‰€æœ‰ç±»å‹ä¸º`blogPost`çš„æ¡ç›®ã€‚ç„¶åï¼Œæˆ‘å°†æ¯ä¸ª slug æ ¼å¼åŒ–ä»¥é€‚åº”æˆ‘çš„ç½‘ç«™çš„æ–‡ä»¶å¤¹ç»“æ„ï¼Œå¹¶å°†å…¶æ¨é€åˆ°`routes`æ•°ç»„ä¸­(ä¾‹å¦‚ï¼Œslug `a-post`å˜æˆäº†`/blog/a-post`)ã€‚

```
 require('dotenv').config()

    const contentful = require('contentful')
    const config = {
      space: process.env.CONTENTFUL_SPACE_ID,
      accessToken: process.env.CONTENTFUL_ACCESS_TOKEN
    }
    const client = contentful.createClient(config)

    export default {
        generate: {
          routes: async function () {
            const entries = await client.getEntries({ content_type: "blogPost" });
            const routes = []
            entries.items.forEach(item => {
              routes.push(`blog/${item.fields.slug}`)
            })
            return routes
          }
       }
    } 
```

ä¸ºäº†æµ‹è¯•æˆ‘çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘è¿è¡Œäº†`yarn generate`ï¼Œå‘ç°æ§åˆ¶å°ä¸­è®°å½•äº†æˆ‘çš„æ¯ä¸ªé¡µé¢*å’Œ*å¸–å­çš„è·¯å¾„ã€‚ç„¶åï¼Œæˆ‘å°†æˆ‘çš„æ›´æ”¹éƒ¨ç½²åˆ°æˆ‘çš„ Netlify é¡¹ç›®ä¸­ï¼Œå‘ç°åœ¨é¡µé¢åˆ·æ–°æ—¶ï¼Œæˆ‘çš„å†…å®¹ä»ç„¶å­˜åœ¨ğŸ™Œ

*æœ¬å¸–æœ€åˆå‘è¡¨äº[veritystothard.com](http://www.veritystothard.com/blog/nuxt-dynamic-routes)T3ã€‘*