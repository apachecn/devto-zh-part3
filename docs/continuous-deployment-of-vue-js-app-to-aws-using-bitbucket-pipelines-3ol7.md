# ä½¿ç”¨ Bitbucket ç®¡é“å°† Vue.js åº”ç”¨ç¨‹åºæŒç»­éƒ¨ç½²åˆ° AWS

> åŸæ–‡ï¼š<https://dev.to/pavanvora/continuous-deployment-of-vue-js-app-to-aws-using-bitbucket-pipelines-3ol7>

å¤§å®¶å¥½ï¼Œæˆ‘æœ€è¿‘åˆ›å»ºäº†ä¸€ä¸ª Bitbucket Pipelines æ¥åœ¨äºšé©¬é€Š S3 ä¸Šéƒ¨ç½²æˆ‘çš„ Vue.js åº”ç”¨ç¨‹åºï¼Œä»Šå¤©åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³åˆ†äº«ä¸€æ­¥ä¸€æ­¥çš„è¿‡ç¨‹ã€‚åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘å‡è®¾ä½ å·²ç»åœ¨ bitbucket å’Œ AWS å¸æˆ·ä¸Šè¿è¡Œ vuejs åº”ç”¨ç¨‹åºã€‚

### æœ‰å“ªäº›æ­¥éª¤ï¼Ÿ

1.  åˆ›å»ºå’Œé…ç½®**äºšé©¬é€Š S3 æ¡¶**ã€‚
2.  åœ¨ AWS æ§åˆ¶å°ä¸­åˆ›å»ºèƒ½å¤Ÿä» Bitbucket è®¿é—® S3 å­˜å‚¨æ¡¶çš„ IAM ç”¨æˆ·ã€‚
3.  é…ç½® Bitbucket ä»¥ä½¿ç”¨**ç®¡é“**ã€‚
4.  åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­æ·»åŠ  **bitbucket-pipelines.yml** æ–‡ä»¶ã€‚
5.  å°†ä»£ç æ¨é€åˆ° Bitbucketï¼Œå¹¶æ£€æŸ¥ live vue åº”ç”¨ç¨‹åºã€‚

## ç¬¬ä¸€æ­¥:åˆ›å»ºå¹¶é…ç½®äºšé©¬é€Š S3 æ¡¶

ç‚¹å‡»[æ­¤å¤„](https://console.aws.amazon.com/console/home)ç™»å½•æ‚¨çš„ AWS æ§åˆ¶å°ã€‚ç™»å½•åˆ° aws æ§åˆ¶å°åï¼Œç‚¹å‡»æ ‡é¢˜ä¸­çš„**æœåŠ¡**ï¼Œåœ¨å­˜å‚¨éƒ¨åˆ†æŸ¥æ‰¾ **S3** æœåŠ¡å¹¶ç‚¹å‡»å®ƒã€‚

[![](img/79fd7018fd29d858ff770cea2c1f1358.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--a4dhcRmW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/dI6ykRf.png)

é‡å®šå‘åˆ° S3 é¡µé¢åï¼Œå•å‡»**åˆ›å»ºå­˜å‚¨æ¡¶**æŒ‰é’®ã€‚åœ¨**åç§°å’ŒåŒºåŸŸ**é¡µé¢ä¸­ï¼Œä¸ºæ‚¨çš„å­˜å‚¨æ¡¶é”®å…¥åç§°ï¼Œå¹¶é€‰æ‹©æ‚¨å¸Œæœ›å­˜å‚¨æ¡¶æ‰€åœ¨çš„åŒºåŸŸï¼Œç„¶åå•å‡»ä¸‹ä¸€æ­¥æŒ‰é’®ã€‚åœ¨**é…ç½®é€‰é¡¹**é¡µé¢ä¸Šï¼Œæ— éœ€åšä»»ä½•æ›´æ”¹ï¼Œä¿æŒåŸæ ·ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥æŒ‰é’®ã€‚ç°åœ¨ï¼Œåœ¨**è®¾ç½®æƒé™**é¡µé¢ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åšä¸€äº›æ”¹å˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä½¿æ–‡ä»¶å¯ä»¥å…¬å¼€ä½¿ç”¨ã€‚

[![](img/e7612acc329976aff9c1b8bc1692b3c6.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--v2p4Dw6U--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/jCHLlMN.png)

æ‚¨å¯ä»¥çœ‹åˆ° amazon å»ºè®®å‹¾é€‰**ç®¡ç†å…¬å…±è®¿é—®æ§åˆ¶åˆ—è¡¨(ACL)**éƒ¨åˆ†ä¸­çš„é€‰é¡¹ï¼Œä½†å‰ææ˜¯æ‚¨æƒ³åœ¨è¿™ä¸ªæ¡¶ä¸­å­˜å‚¨ç§æœ‰æ•°æ®ã€‚å› æ­¤ï¼Œè¦åˆ›å»ºå¯å…¬å¼€è®¿é—®çš„å­˜å‚¨æ¡¶ï¼Œæˆ‘ä»¬å°†å¿½ç•¥è¯¥å»ºè®®å¹¶å–æ¶ˆé€‰æ‹©ä¸Šå›¾ä¸­ç»™å‡ºçš„ä¸¤ä¸ªé€‰é¡¹ã€‚ä¹‹åï¼Œæ‚¨å¯ä»¥å•å‡»ä¸‹ä¸€æ­¥æŒ‰é’®ï¼Œ**æŸ¥çœ‹**S3 å­˜å‚¨æ¡¶ï¼Œç„¶åå•å‡»**åˆ›å»ºå­˜å‚¨æ¡¶**ã€‚

åˆ›å»ºä¸€ä¸ªå­˜å‚¨æ¡¶éœ€è¦å‡ ç§’é’Ÿæ—¶é—´ï¼Œç„¶åæ‚¨å¯ä»¥åœ¨å­˜å‚¨æ¡¶åˆ—è¡¨ä¸­çœ‹åˆ°è¯¥å­˜å‚¨æ¡¶ã€‚å•å‡»æ‚¨åˆšåˆšåˆ›å»ºçš„ bucket åç§°ï¼Œæ‚¨å°†çœ‹åˆ°å¦‚ä¸‹å†…å®¹ã€‚

[![](img/3d6502232caa1bc57e57402415758b4c.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--n-ZZjBCC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/cVKlV1p.png)

ç°åœ¨ï¼Œéšç€æˆ‘ä»¬çš„ Bucket è¢«åˆ›å»ºï¼Œæˆ‘ä»¬éœ€è¦**ä¸ºè¿™ä¸ª Bucket å¯ç”¨é™æ€ç«™ç‚¹æ‰˜ç®¡**ã€‚ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥è½¬åˆ°**å±æ€§**é€‰é¡¹å¡ã€‚ç‚¹å‡»**é™æ€ç½‘ç«™æ‰˜ç®¡**ï¼Œç„¶åé€‰æ‹©**ç”¨è¿™ä¸ªæ¡¶æ‰˜ç®¡ä¸€ä¸ªç½‘ç«™**ã€‚ç³»ç»Ÿå°†æç¤ºæ‚¨æä¾›ç´¢å¼•æ–‡æ¡£(ç½‘ç«™çš„ä¸»é¡µæˆ–é»˜è®¤é¡µé¢)ï¼Œè¾“å…¥**index.html**ï¼Œåœ¨ç‚¹å‡»ä¿å­˜ä¹‹å‰ï¼Œæ‚¨å¯ä»¥è®°ä¸‹**ç«¯ç‚¹** URLï¼Œæ‚¨çš„ç½‘ç«™å°†åœ¨ç¬¬ 5 æ­¥ä¸­ä¸Šçº¿ã€‚

[![](img/c72df5396e3a090626be2a12cb0a3329.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--ot4VPM1q--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/pbW39x4.png)

ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äºšé©¬é€Š S3 æ¡¶é™æ€ç½‘ç«™æ‰˜ç®¡ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç»§ç»­ä¸‹ä¸€æ­¥ã€‚

## æ­¥éª¤ 2:åœ¨ AWS æ§åˆ¶å°ä¸­åˆ›å»º IAM ç”¨æˆ·

åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»º IAM ç”¨æˆ·ï¼Œå®ƒå°†ä¸ºæˆ‘ä»¬æä¾›ä¸¤ä¸ªå¯†é’¥ **1ã€‚è®¿é—®å¯†é’¥ ID** å’Œ **2ã€‚ç§˜å¯†è®¿é—®å¯†é’¥**ã€‚æˆ‘ä»¬çš„ bitbucket å¸æˆ·å°†ä½¿ç”¨è¿™äº›å¯†é’¥å°†å­˜å‚¨åº“ä»£ç ä¸Šä¼ åˆ°äºšé©¬é€Š S3 bucketã€‚è¦è¿›å…¥ IAM æœåŠ¡é¡µé¢ï¼Œè¯·å¯¼èˆªè‡³**æœåŠ¡>å®‰å…¨ã€èº«ä»½ã€&åˆè§„æ€§> IAM** ï¼Œæˆ–è€…æ‚¨ä¹Ÿå¯ä»¥è·Ÿéšä¸‹å›¾ã€‚

[![](img/466e88bd612cbe850b373a81509d9895.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--MODBuXmU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/ht42aUz.png)

åœ¨å¯¼èˆªçª—æ ¼ä¸­ç§»åŠ¨åˆ° **IAM** æœåŠ¡é¡µé¢åï¼Œé€‰æ‹©**ç”¨æˆ·**ï¼Œç„¶åé€‰æ‹©**æ·»åŠ ç”¨æˆ·**ã€‚

[![](img/8ead6ece462d79660851d17f4a6f33a3.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Knj9bwnl--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/Zc6Ww6o.png)

ä¸ºæ–°ç”¨æˆ·é”®å…¥**ç”¨æˆ·å**ï¼Œå¹¶åœ¨è®¿é—®ç±»å‹ä¸­é€‰æ‹©**ç¨‹åºåŒ–è®¿é—®**ï¼Œç„¶åç‚¹å‡»ä¸‹æ–¹çš„**ä¸‹ä¸€æ­¥:æƒé™**æŒ‰é’®ã€‚æˆ‘ä»¬æ­£åœ¨åˆ›å»ºæ­¤ç”¨æˆ·ï¼Œä»¥ä¾¿ä» Bitbucket è®¿é—® S3 å­˜å‚¨æ¡¶ï¼Œå› æ­¤æˆ‘å°†ç”¨æˆ·åå‘½åä¸º s3-full-accessï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•åç§°ã€‚

[![](img/7b67427e8b10153078ae3189a43a4b34.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--CfZOlFoe--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/OCu5BHH.png)

åœ¨**è®¾ç½®æƒé™**é¡µé¢æœ‰ä¸‰ä¸ªé€‰é¡¹ï¼Œé€‰æ‹©**ç›´æ¥é™„åŠ å·²æœ‰ç­–ç•¥**ä¼šçœ‹åˆ°å¯ç”¨ç­–ç•¥åˆ—è¡¨ã€‚åœ¨æœç´¢å­—æ®µä¸­é”®å…¥ **s3full** å¹¶é€‰æ‹©åä¸º **AmazonS3FullAccess** çš„ç­–ç•¥ï¼Œç„¶åå•å‡» **Next: Tags** æŒ‰é’®ã€‚

[![](img/264d965dc4904b9dde4782c8e396bf5a.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--LJBUs-rr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/NxtLsRh.png)

åœ¨**æ·»åŠ æ ‡ç­¾**é¡µé¢ä¸Šï¼Œæ‚¨å¯ä»¥é€šè¿‡è¾“å…¥å°†ä½œä¸ºå…ƒæ•°æ®æ·»åŠ åˆ°ç”¨æˆ·çš„é”®å€¼å¯¹æ¥æ·»åŠ æ ‡ç­¾ã€‚ä½†è¿™æ˜¯å¯é€‰çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç»§ç»­ç‚¹å‡»**ä¸‹ä¸€æ­¥:å®¡æŸ¥**æŒ‰é’®ã€‚æŸ¥çœ‹æ‚¨çš„ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶ç‚¹å‡»**åˆ›å»ºç”¨æˆ·**æŒ‰é’®ã€‚å¦‚å‰æ‰€è¿°ï¼Œä½ å°†å¾—åˆ°ä¸¤æŠŠé’¥åŒ™ã€‚è®¿é—®å¯†é’¥ ID å’Œ **2ã€‚å·²åˆ›å»ºç”¨æˆ·çš„ç§˜å¯†è®¿é—®å¯†é’¥**ã€‚æ­¤å¯†é’¥å¯¹æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºéƒ¨ç½²éå¸¸é‡è¦ï¼Œè¯·å°†ä¸¤ä¸ªå¯†é’¥å¤åˆ¶/ç²˜è´´åˆ°æ‚¨ç”µè„‘ä¸Šçš„å®‰å…¨ä½ç½®ã€‚

[![](img/87e22f0f8673f514d81283af5899da20.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--mJzpbUTY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/PoFAEuy.png)

> ä¸è¦è¯•å›¾ä» image ä¸­å¤åˆ¶æˆ‘çš„å¯†é’¥ï¼Œå› ä¸ºåœ¨ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« çš„æ—¶å€™å®ƒæ˜¯æ— æ•ˆçš„ğŸ˜¬

ç°åœ¨ï¼Œéšç€æˆ‘ä»¬çš„ç”¨æˆ·æˆåŠŸåˆ›å»ºï¼Œæˆ‘ä»¬å°†è¿›å…¥ä¸‹ä¸€æ­¥ã€‚

## ç¬¬ä¸‰æ­¥:é…ç½® Bitbucket ä½¿ç”¨ç®¡é“

ç™»å½•åˆ°æ‚¨çš„ Bitbucket å¸æˆ·ï¼Œç§»åŠ¨åˆ°æ‚¨çš„é¡¹ç›®å­˜å‚¨åº“ï¼Œç„¶åæŒ‰ç…§ä¸‹å›¾ä¸ºå­˜å‚¨åº“å¯ç”¨ç®¡é“ã€‚

[![](img/ea5b29e40df640d020c8c4db26b78d7e.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--FleY8F83--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/qDOHTbi.png)

å¯ç”¨ç®¡é“åï¼Œåœ¨åº“**è®¾ç½®**ä¸­ä»å¯¼èˆªé¢æ¿ä¸­é€‰æ‹©**åº“å˜é‡**ã€‚åœ¨åç§°å­—æ®µä¸­å†™å…¥ **AWS_ACCESS_KEY_ID** ï¼Œå¹¶åœ¨å€¼ä¸­ç²˜è´´æ‚¨åœ¨ä¸Šä¸€æ­¥ä¸­å¤åˆ¶çš„è®¿é—®å¯†é’¥ ID çš„å€¼ï¼Œç„¶åå•å‡» **Add** æŒ‰é’®ï¼Œå†æ¬¡æŒ‰ç…§ç›¸åŒçš„æ–¹å¼å°†ç§˜å¯†è®¿é—®å¯†é’¥å‘½åä¸º **AWS_SECRET_ACCESS_KEY** ã€‚ä¹‹åï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹å›¾çš„ä¸œè¥¿ã€‚

[![](img/996618e93c9bc4a31e75079b5a953be2.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--RexWaU21--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/oBXvUuZ.png)

è¿™ä¸ªæ·»åŠ çš„å­˜å‚¨åº“å˜é‡å°†åœ¨ä¸‹ä¸€æ­¥çš„ **bitbucket-pipelines.yml** æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚

## æ­¥éª¤ 4:å°† bitbucket-pipelines.yml æ–‡ä»¶æ·»åŠ åˆ°é¡¹ç›®ä¸­

è½¬åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º **bitbucket-pipelines.yml** çš„æ–°æ–‡ä»¶ã€‚å¤åˆ¶ä¹‹åï¼Œå°†ä¸‹é¢çš„ä»£ç ç²˜è´´åˆ° **bitbucket-pipelines.yml** æ–‡ä»¶ä¸­ã€‚