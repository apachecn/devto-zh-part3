# 2019 å¹´å£°æ˜ JS å˜é‡

> åŸæ–‡:[https://dev.to/samthor/declaring-js-variables-in-2019-4572](https://dev.to/samthor/declaring-js-variables-in-2019-4572)

TLï¼›åšå£«æˆ‘çš„çœ‹æ³•ğŸ¤”ğŸ’­:**é»˜è®¤ä½¿ç”¨`const`**ï¼Œä»…åœ¨éœ€è¦æ—¶ä½¿ç”¨`let`ã€‚

## [](#history)å†å²

JavaScript æœ‰ä¸‰ç§*æ–¹æ³•å£°æ˜å˜é‡:

```
var x = 123;
let y = 456;
const z = 789; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç¬¬ä¸€ä¸ªï¼Œ`var`ï¼Œæ¥è‡ª JavaScript çš„åŸå§‹ç‰ˆæœ¬ã€‚åä¸¤è€…åœ¨ 2016 å¹´å·¦å³å¹¿æ³›åº”ç”¨äºå„ç§æµè§ˆå™¨ã€‚

## [](#constant-by-default)é»˜è®¤ä¸ºå¸¸æ•°

å¦‚æœä½ ç”¨`const`å£°æ˜å˜é‡ï¼Œå®ƒä»¬å°±ä¸èƒ½è¢«æ”¹å˜(â€œå˜å¼‚â€)ã€‚(å¦‚æœå˜é‡æŒ‡å‘ä¸€ä¸ª*å¯¹è±¡*ï¼Œä½ å¯ä»¥æ”¹å˜è¿™ä¸ªå¯¹è±¡ã€‚)æ¯”å¦‚:

```
const value = 123;
const object = {abc: 123};

object.abc++;   // ok âœ…
value++;        // error âŒ
object = null;  // error âŒ 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨æ„å»º JS æ—¶ï¼Œè¿™æ˜¯ä¸€ç§éå¸¸åŸå§‹ä½†æœ‰ç”¨çš„å®‰å…¨æ–¹æ³•ã€‚å¦‚æœä¸€ä¸ªå˜é‡ä¸åº”è¯¥å˜å¼‚â€”â€”å®ƒæ˜¯ä¸€äº›å¤æ‚æ“ä½œçš„ç»“æœâ€”â€”é‚£ä¹ˆ`const`æ„å‘³ç€ä½ ä¸ä¼šæ„å¤–åœ°é”™è¯¯ä½¿ç”¨å®ƒã€‚(è¿™åœ¨ä¸[ä¸¥æ ¼æ¨¡å¼](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode)ç»“åˆä½¿ç”¨æ—¶ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œä½ ä¸èƒ½åªå‘æ˜æ²¡æœ‰`var`ã€`let`æˆ–`const`çš„å˜é‡åã€‚ğŸ”¬

## [](#let-on-demand)æŒ‰éœ€å‡ºç§Ÿ

å¦‚æœä½ åæ¥å‘ç°ä½ éœ€è¦ä¸€ä¸ªå˜é‡æ¥å˜å¼‚ï¼Œä½ å¯ä»¥å›åˆ°å®ƒçš„å£°æ˜å¹¶æŠŠå®ƒæ ‡è®°ä¸º`let`ã€‚è¿™è®©ä½ çš„ç¨‹åºçš„è¯»è€…å¯¹å˜é‡æœ‰æ›´å¤šçš„äº†è§£ã€‚

```
const counter = getTotalEvents();

// ...later, we decide to add something, but this will ğŸ’¥
counter += otherEvents(); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœæˆ‘ä»¬å°†`const counter`ä¿®æ”¹ä¸º`let counter`ï¼Œè¯»è€…ä¼šçŸ¥é“è¿™ä¸æ˜¯æœ€ç»ˆå€¼:å®ƒå¯èƒ½ä¼šåœ¨ä¸‹é¢è¿›ä¸€æ­¥å˜å¼‚ã€‚

## [](#gotchas)æ˜ç™½äº†

*   å‡½æ•°å‚æ•°æ€»æ˜¯å¯å˜çš„ã€‚

```
function foo(foobar) {
  ++foobar;
  return foobar;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*   æ‚¨å¯ä»¥å¹¶ä¸”åº”è¯¥åœ¨`for-of`æˆ–`for-in`å¾ªç¯ä¸­ä½¿ç”¨`const`(è¿™å¹¶ä¸æ€»æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œå› ä¸ºä¼¼ä¹å˜é‡åœ¨æ¯æ¬¡è¿­ä»£ä¸­éƒ½ä¼šå‘ç”Ÿå˜åŒ–)ã€‚ğŸ¤”

```
for (const x in object) { ... }
for (const x of arrayOrIterable) { ... } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#var-considered-confusing)Var è¢«è®¤ä¸ºä»¤äººå›°æƒ‘

ç”¨`var`å£°æ˜æœ‰äº›å¥‡æ€ªâ€”â€”å˜é‡å£°æ˜è¢«*æå‡åˆ°äº†å‡½æ•°çš„é¡¶éƒ¨ï¼Œæ‰€ä»¥å®ƒæ€»æ˜¯å¯ç”¨çš„ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼Œä½†æ˜¯å®ƒè¡¨æ˜ä½ å¯ä»¥åªä½¿ç”¨`let`æ¥ä»£æ›¿:*

[![let vs var](../Images/8da10fd8928b290848dcc84055a14f6a.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--UP1jS_PN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/f9aaw9v8ojbt59z20s8f.gif)

ç”¨`var`å£°æ˜åœ¨æŸäº›åœºåˆå¯èƒ½ä¼šæœ‰ç”¨ï¼Œä½†æˆ‘ç›¸ä¿¡å®ƒå¹¶æ²¡æœ‰éµå¾ª[çš„æœ€å°æƒŠå–œ](https://www.google.com/search?q=principle+of+least+surprise)åŸåˆ™ï¼Œä½ éšæ—¶å¯ä»¥ç”¨`let`ä»£æ›¿ã€‚

## [](#the-exception)ä¾‹å¤–*

ä»æŠ€æœ¯ä¸Šè®²ï¼Œå‡½æ•°å£°æ˜æ˜¯å£°æ˜å˜é‡çš„å¦ä¸€ç§æ–¹å¼ã€‚

```
function foo() {
  // do stuff
}

// "foo" is now something we can pass around, e.g.:
setTimeout(foo, 1000); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸æ˜¯*ç¡®åˆ‡åœ°è¯´*å–œæ¬¢è¯´`var foo = function() { ... }`ï¼Œä½†å®ƒæ˜¯ç›¸ä¼¼çš„ã€‚ä¸»è¦çš„åŒºåˆ«æ˜¯å£°æ˜æœ¬èº«è¢«æå‡ï¼Œè€Œä¸ä»…ä»…æ˜¯å˜é‡åã€‚ä¸‹é¢æ˜¯å®é™…æ“ä½œ:

```
foo();  // ok! âœ…
bar();  // crashes: "bar" is a valid name, but contains undefined ğŸ˜•

function foo() {}
var bar = function bar() {}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å‡½æ•°å£°æ˜*åœ¨ JS ä¸­æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„æ¦‚å¿µï¼Œå› ä¸ºå®ƒè®©æˆ‘ä»¬åœ¨å£°æ˜å‡½æ•°ä¹‹å‰ä¼ é€’å‡½æ•°â€”â€”å…è®¸å¾ªç¯ğŸ”„å¼•ç”¨ï¼Œæ¯”å¦‚å°†å‡½æ•°ä½œä¸ºå›è°ƒæ¥ä¼ é€’ã€‚(å¦‚æœä½ å¥½å¥‡ï¼Œæˆ‘ä¼šåœ¨[ğŸ—£ï¸æ¼”è®²ä¸­è°ˆè®ºå®ƒå¦‚ä½•ä¸ ES6 æ¨¡å—äº¤äº’ğŸ’¬2017 å¹´èšåˆç‰©å³°ä¼šä¸Šæˆ‘ç»™çš„](https://www.youtube.com/watch?v=fIP4pjAqCtQ&list=PL5vCN4IjFTd40C6QRiHfs6h4MOdjbRo3B&index=14&t=0s)ã€‚*

## [](#thanks)è°¢è°¢ï¼

ä»Šå¤©åˆ°æ­¤ä¸ºæ­¢ï¼Œåªæ˜¯ç®€å•çš„è§‚ç‚¹ç¯‡ï¼

five