# æ„å»ºä¸€ä¸ª 980 å­—èŠ‚çš„ Docker æ˜ åƒ- Scratch Images ç¬¬äºŒé›†

> åŸæ–‡:[https://dev . to/tonymet/build-a-980-byte-docker-image-scratch-images-episode-ii-3lp 9](https://dev.to/tonymet/build-a-980-byte-docker-image-scratch-images-episode-ii-3lp9)

ğŸ““[è¦æ—¨](https://gist.github.com/tonymet/a80595400b8481e8a0274d63c290ceec)

ä¸ºä»€ä¹ˆåœåœ¨ [100kB](https://dev.to/tonymet/build-100kb-docker-images-from-scratch-4ll5) ï¼Ÿæˆ‘ä»¬èƒ½åˆ¶ä½œçš„æœ€å°çš„ã€å¯è¿è¡Œçš„ docker æ˜ åƒæ˜¯ä»€ä¹ˆï¼Ÿ

## [](#helloasm)hello.asm

`hello.asm`

```
; Define variables in the data section
SECTION .DATA
    hello:     db 'Hello world!',10
    helloLen:  equ $-hello

; Code goes in the text section
SECTION .TEXT
    GLOBAL _start 

_start:
    mov eax,4            ; 'write' system call = 4
    mov ebx,1            ; file descriptor 1 = STDOUT
    mov ecx,hello        ; string to write
    mov edx,helloLen     ; length of string to write
    int 80h              ; call the kernel

    ; Terminate program
    mov eax,1            ; 'exit' system call
    mov ebx,0            ; exit with error code 0
    int 80h              ; call the kernel 
```

`Makefile`

```
 hello.o: hello.asm
    nasm -f elf64 $< -o $@

hello: hello.o
    ld $< -o $@ 
```

## docker file

```
FROM alpine:latest as builder
WORKDIR /build
RUN apk update && \
    apk add nasm make binutils
COPY .  ./
RUN make hello

FROM scratch
WORKDIR /
COPY --from=builder /build/hello .
CMD ["/hello"] 
```

åŸºæœ¬ä¸Šå’Œä»¥å‰ä¸€æ ·ï¼Œåªæ˜¯æ–°çš„`apk` deps ä¸º`nasm`ã€‚

## [](#only-980-bytes)åªæœ‰ 980 å­—èŠ‚ï¼

```
docker images |grep tiny-hello|awk '{print $8}'
952B 
```

## [](#whats-next)æ¥ä¸‹æ¥æ˜¯ä»€ä¹ˆï¼Ÿ

æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªæ›´åŠ å¯è¡Œçš„ REST APIï¼Œä»ä¸€ä¸ªå…¸å‹çš„ docker æ˜ åƒä¸­å‰”é™¤ 99%çš„å†…å®¹ã€‚è¿™æ˜¯ä¸€ä¸ªæ›´çŸ­çš„ä¾‹å­ï¼Œå› ä¸ºå®ƒä¸æœ€åä¸€ä¸ªçš„[åŸºæœ¬ç›¸åŒã€‚](https://dev.to/tonymet/build-100kb-docker-images-from-scratch-4ll5)

â¡ï¸åœ¨é‚£ä¹‹å‰ï¼Œä½ èƒ½æ‰“è´¥ 980 å­—èŠ‚å—ï¼Ÿ

éå¸¸æ„Ÿè°¢æˆ‘çš„æœ‹å‹å’Œ devops ä¸“å®¶ Philippe å’Œè¿™ä¸ª [hello world æ±‡ç¼–å™¨](https://www.devdungeon.com/content/hello-world-nasm-assembler)é¼“åŠ±æˆ‘å˜å°ã€‚