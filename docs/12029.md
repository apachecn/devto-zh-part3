# å¦‚ä½•ä¿®å¤ npm è½¯ä»¶åŒ…

> åŸæ–‡:[https://dev.to/archiewald/how-to-fix-an-npm-package-509i](https://dev.to/archiewald/how-to-fix-an-npm-package-509i)

> æœ€åˆå‘å¸ƒäº [www.kozubek.dev](https://www.kozubek.dev/2019/02/23/fixing-npm-package.html)

æ‚¨æƒ³è¦ä½¿ç”¨çš„ npm åŒ…å¯èƒ½ä¼šæœ‰ä¸€äº›é”™è¯¯ã€‚ä½ åº”è¯¥ç­‰å¾…ç»´æŠ¤äººå‘˜æ¥ä¿®å¤å®ƒä»¬å—ï¼Ÿå½“ç„¶ä¸æ˜¯ğŸ˜‰ã€‚å¯ä»¥è‡ªå·±æ¶ˆé™¤ bug å’Œä¸»æœºåŒ…ã€‚ç„¶ååˆ›å»ºä¸€ä¸ªæ‹‰è¯·æ±‚ï¼Œå¹¶æœ‰å¯èƒ½æˆä¸ºä¸€ä¸ªå¼€æºè´¡çŒ®è€…ğŸ’ªã€‚

## bug å‘ç”Ÿäº†ğŸ›

æœ€è¿‘ï¼Œæˆ‘ä½¿ç”¨äº†ä¸€ä¸ª [react-ga](https://www.npmjs.com/package/react-ga) npm åŒ…å°†åŸºäº react çš„å•é¡µåº”ç”¨ç¨‹åºè¿æ¥åˆ°è°·æ­Œåˆ†ææœåŠ¡ã€‚

å¼€å§‹æ—¶ï¼Œæˆ‘éµå¾ªä¸€ä¸ªé€šå¸¸çš„ç¨‹åºï¼ŒåŒ…æ‹¬åœ¨`package.json`æ–‡ä»¶ä¸­çš„`react-ga`ã€‚`npm install`é¡ºåˆ©ï¼Œç„¶åä¸Š`npm start` :

```
Failed to compile.

/Users/arturkozubek/projects/orbicobeauty-web/node_modules/react-ga/types/index.d.ts
(87,20): A rest parameter must be of an array type. 
```

ğŸ™€è¿™æ˜¯ä¸å¯»å¸¸çš„...å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªåŒ…ä¸­æœ‰ä¸€ä¸ªä¸ TypeScript ç›¸å…³çš„é”™è¯¯...æŸ¥çœ‹ä¸Šè¿°`index.d.ts`æ–‡ä»¶ï¼Œç¬¬ 87 è¡Œ:

```
export function ga(...args: any): void; 
```

å—¯ï¼Œæˆ‘æƒ³æˆ‘åªæ˜¯æŒ‰ç…§ TypeScript ç¼–è¯‘å™¨çš„æ¶ˆæ¯ï¼Œä½¿:

```
export function ga(...args: any[]): void; 
```

æ‰€ä»¥æˆ‘å°†æ›´æ”¹ä¿å­˜åœ¨æœ¬åœ°å¹¶è¿›è¡Œæµ‹è¯•ã€‚æˆåŠŸäº†ï¼ä½†æ˜¯ä½ ä¸èƒ½ä»…ä»…ä¾é ä¿®æ”¹ä¸€ä¸ªèŠ‚ç‚¹æ¨¡å—çš„æºæ–‡ä»¶...æ‚¨å¯èƒ½ä¼šå¿½ç•¥ repo ä¸­çš„`node_modules`æ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æƒ¯ä¾‹ã€‚ä»»ä½•æ—¶å€™ä½ (æˆ–ä½ çš„åŒäº‹)é‡æ–°å®‰è£…è½¯ä»¶åŒ…ï¼Œå®ƒå°†å†æ¬¡ä»åŸå§‹æ¥æºä¸‹è½½ã€‚

## [](#fork-and-fix)åˆ†å‰å¹¶ä¿®å¤ğŸ´

é€šå¸¸(å¦‚æœä¸æ€»æ˜¯ï¼Œä¸ç¡®å®š)åŒ…æºä»£ç æ˜¯åœ¨ github ä¸Šæä¾›çš„ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œä½ å¯ä»¥åœ¨`package.json`ä¸­æŒ‡å‘ä¸€ä¸ª github åº“ï¼Œä»é‚£é‡Œä¸‹è½½ä¸€ä¸ªåŒ…ã€‚ä½ èƒ½çœ‹åˆ°å®ƒé€šå‘å“ªé‡Œå—ğŸ˜‰ï¼Ÿ

1.  æˆ‘å‰å¼€åŒ…è£¹ï¼Œ
2.  å…‹éš†åˆ°æˆ‘çš„æœºå™¨ä¸Šï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥ç¼–è¾‘æºä»£ç `git clone https://github.com/archiewald/react-ga.git`ï¼Œ
3.  åˆ›å»ºä¿®å¤åˆ†æ”¯ï¼Œæäº¤ä¿®å¤ï¼Œ
4.  æ¨åˆ°æˆ‘çš„åˆ†å‰å›è´­ä¸Šã€‚

åœ¨`package.json`ä¸­ï¼Œæˆ‘æ²¡æœ‰æŒ‡å‘ç‰ˆæœ¬å·ï¼Œè€Œæ˜¯æŒ‡å‘äº†æˆ‘åˆšåˆšæ´¾ç”Ÿå¹¶åˆ›å»ºçš„ repoï¼Œä½¿ç”¨ fix commit hash æ¥æ˜ç¡®æˆ‘å¼•ç”¨çš„ä»£ç :

```
{  ...  "react-ga":  "git+https://github.com/archiewald/react-ga.git#e9d592e940260017f23815bcee9703a2a4866705",  ...  } 
```

ä¹‹åï¼Œæˆ‘å¯ä»¥äº«å—å®ç°è¿™ä¸ªä¼Ÿå¤§çš„åŒ…ï¼

## [](#contribute)æŠ•ç¨¿ğŸ’ª

ä¸è¦å®³æ€•ä¸ç¤¾åŒºåˆ†äº«ä½ çš„è§£å†³æ–¹æ¡ˆï¼æå‡º[ä¸€ä¸ªé—®é¢˜](https://github.com/react-ga/react-ga/issues/342)å¹¶ç”¨æ‚¨çš„æ›´æ”¹åˆ›å»º[ä¸€ä¸ªæ‹‰åŠ¨å¼è¯·æ±‚](https://github.com/react-ga/react-ga/pull/343)ã€‚ä¸€æ—¦ä½ åœ¨åˆ†å‰å¼å›è´­ä¸­å®ç°äº†å®ƒä»¬ï¼Œäº‹æƒ…å°±ç®€å•äº†ï¼

<figure>

[![pull request](../Images/af11bbd75b7a4801233089c162d8f7a0.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--fHy9FMuP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.kozubek.dev/assets/images/1-pull-request.png)

<figcaption>Fix => contribute</figcaption>

</figure>