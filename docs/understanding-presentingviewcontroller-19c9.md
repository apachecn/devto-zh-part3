# äº†è§£ iOS ä¸­çš„ presentingViewController

> åŸæ–‡ï¼š<https://dev.to/onmyway133/understanding-presentingviewcontroller-19c9>

## å‘ˆç°(_:åŠ¨ç”»:å®Œæˆ:)

[https://developer . apple . com/documentation/ui kit/uiview controller/1621380-present](https://developer.apple.com/documentation/uikit/uiviewcontroller/1621380-present)

> è°ƒç”¨æ­¤æ–¹æ³•çš„å¯¹è±¡å¯èƒ½å¹¶ä¸æ€»æ˜¯å¤„ç†è¡¨ç¤ºçš„å¯¹è±¡ã€‚æ¯ç§æ¼”ç¤ºé£æ ¼éƒ½æœ‰ä¸åŒçš„è¡Œä¸ºè§„åˆ™ã€‚ä¾‹å¦‚ï¼Œå…¨å±æ˜¾ç¤ºå¿…é¡»ç”±ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨æ¥å®Œæˆï¼Œå®ƒæœ¬èº«è¦†ç›–äº†æ•´ä¸ªå±å¹•ã€‚å¦‚æœå½“å‰è§†å›¾æ§åˆ¶å™¨æ— æ³•å®Œæˆè¯·æ±‚ï¼Œå®ƒä¼šå°†è¯·æ±‚æ²¿è§†å›¾æ§åˆ¶å™¨å±‚æ¬¡ç»“æ„å‘ä¸Šè½¬å‘åˆ°æœ€è¿‘çš„çˆ¶è§†å›¾æ§åˆ¶å™¨ï¼Œç„¶åçˆ¶è§†å›¾æ§åˆ¶å™¨å¯ä»¥å¤„ç†æˆ–è½¬å‘è¯·æ±‚ã€‚

å‡è®¾æˆ‘ä»¬è¯•å›¾å°† viewController2 å‘ˆç°ç»™ viewController1

```
vc1.present(v2, animated: true, completion: nil) 
```

åœ¨è¿™ä¹‹å`vc1.presentedViewController == vc2`ã€‚ä½ ä¹Ÿå¯èƒ½è®¤ä¸º`vc2.presentingViewController == vc1`ä½†æƒ…å†µå¹¶éæ€»æ˜¯å¦‚æ­¤ã€‚
å½“ä¸€ä¸ªå‘ˆç°è§†å›¾æ§åˆ¶å™¨å‘ç”Ÿæ—¶ï¼Œæ¸¸æˆä¸­å¯èƒ½æœ‰ 3 ä¸ªç©å®¶

### å‘ˆç°è§†å›¾æ§åˆ¶å™¨

è¿™æ˜¯ vc2

### åŸæ¼”ç¤ºè€…

è¿™æ˜¯ vc1ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¸ºæºä»£ç è§†å›¾æ§åˆ¶å™¨ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œ`vc1.presentedViewController` == vc2

### å‘ˆç°è§†å›¾æ§åˆ¶å™¨

è¿™æ˜¯`vc2.presentingViewController`ï¼Œä½†å¹¶ä¸æ€»æ˜¯`vc1`ã€‚è¿™æ˜¯è§†å›¾æ§åˆ¶å™¨ï¼Œå…¶è§†å›¾è¢«`vc2.view`æ›¿æ¢æˆ–è¦†ç›–ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯è§†å›¾å æ®æ•´ä¸ªå±å¹•çš„è§†å›¾æ§åˆ¶å™¨ï¼Œå®ƒå¯ä»¥æ˜¯æ ¹è§†å›¾æ§åˆ¶å™¨ï¼Œä¹Ÿå¯ä»¥æ˜¯å·²ç»å‘ˆç°çš„è§†å›¾æ§åˆ¶å™¨ã€‚å®ƒå¯èƒ½ä¸ vc1 ä¸åŒã€‚

ä¾‹å¦‚ï¼Œå‘ˆç°è§†å›¾æ§åˆ¶å™¨æ˜¯æ ¹è§†å›¾æ§åˆ¶å™¨ï¼Œæˆ‘ä»¬æœ‰`rootViewController.presentedViewController == vc2`ã€‚æ‰€ä»¥åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œvc2 å¯ä»¥æ˜¯åŸå§‹å‘ˆç°è€…(vc1)å’Œå‘ˆç°è§†å›¾æ§åˆ¶å™¨(æ ¹è§†å›¾æ§åˆ¶å™¨)çš„`presentedViewController`

å¦‚æœ vc1 å æ®æ•´ä¸ªå±å¹•ï¼Œåˆ™åŸå§‹æ¼”ç¤ºè€…å’Œæ¼”ç¤ºè§†å›¾æ§åˆ¶å™¨æ˜¯ç›¸åŒçš„(vc1)

åœ¨å¦ä¸€ä¸ªä¸–ç•Œé‡Œï¼Œvc2.presentingViewController åªä¼šæŒ‡å‘çœŸæ­£çš„å‘ˆç°è§†å›¾æ§åˆ¶å™¨ã€‚

## è§£æ•£(åŠ¨ç”»:å®Œæˆ:)

[https://developer . apple . com/documentation/ui kit/uiview controller/1621505-è§£æ•£](https://developer.apple.com/documentation/uikit/uiviewcontroller/1621505-dismiss)

æˆ‘ä»¬å¯ä»¥å‘è¿™ 3 ä¸ªå¯¹è±¡ä¸­çš„ä»»ä½•ä¸€ä¸ªå‘é€`dismiss(animated:completion:)`,ç³»ç»Ÿä¼šå°†è¯¥æ¶ˆæ¯è½¬å‘ç»™å‘ˆç°è§†å›¾æ§åˆ¶å™¨ã€‚

ç»§ç»­ rootViewController ä½œä¸ºçœŸæ­£çš„å‘ˆç°è§†å›¾æ§åˆ¶å™¨çš„ä¾‹å­ï¼Œå¦‚æœä½ è¯´

```
vc2.dismiss(animated: true, completion: nil) 
```

é‚£ä¹ˆæ ¹è§†å›¾æ§åˆ¶å™¨å°±æ˜¯æ¥æ”¶è¿™ä¸ªæ¶ˆæ¯çš„é‚£ä¸ªã€‚

## å‘ˆç°è§†å›¾æ§åˆ¶å™¨é“¾

ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨ä¸€æ¬¡æœ€å¤šå¯ä»¥æœ‰ 1 ä¸ª`presentedViewController`ã€‚ç„¶è€Œï¼Œä¸€ä¸ªå‘ˆç°çš„è§†å›¾æ§åˆ¶å™¨(vc2)æœ¬èº«å¯ä»¥å‘ˆç°å¦ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨(vc3)

```
vc2.present(vc3, animated: true, completion: nil) 
```

## æ¼”ç¤ºä¸Šä¸‹æ–‡

é‚£ä¹ˆâ€œå æ»¡å±å¹•â€æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿé˜…è¯»[å‘ˆç°ä¸Šä¸‹æ–‡æä¾›è¢«å‘ˆç°çš„è§†å›¾æ§åˆ¶å™¨è¦†ç›–çš„åŒºåŸŸ](https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)

> ç”¨äºå®šä¹‰æ¼”ç¤ºåŒºåŸŸçš„å±å¹•åŒºåŸŸç”±æ¼”ç¤ºä¸Šä¸‹æ–‡å†³å®šã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¡¨ç¤ºä¸Šä¸‹æ–‡ç”±æ ¹è§†å›¾æ§åˆ¶å™¨æä¾›ï¼Œå…¶æ¡†æ¶ç”¨äºå®šä¹‰è¡¨ç¤ºä¸Šä¸‹æ–‡çš„æ¡†æ¶ã€‚ä½†æ˜¯ï¼Œå‘ˆç°è§†å›¾æ§åˆ¶å™¨æˆ–è§†å›¾æ§åˆ¶å™¨å±‚æ¬¡ç»“æ„ä¸­çš„ä»»ä½•å…¶ä»–ç¥–å…ˆå¯ä»¥é€‰æ‹©æä¾›å‘ˆç°ä¸Šä¸‹æ–‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“å¦ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨æä¾›å‘ˆç°ä¸Šä¸‹æ–‡æ—¶ï¼Œå®ƒçš„æ¡†æ¶è¢«ç”¨æ¥ç¡®å®šæ‰€å‘ˆç°è§†å›¾çš„æ¡†æ¶ã€‚è¿™ç§çµæ´»æ€§å…è®¸æ‚¨å°†æ¨¡å¼å‘ˆç°é™åˆ¶åœ¨å±å¹•çš„è¾ƒå°éƒ¨åˆ†ï¼Œè€Œè®©å…¶ä»–å†…å®¹å¯è§ã€‚
> 
> å½“æ˜¾ç¤ºè§†å›¾æ§åˆ¶å™¨æ—¶ï¼ŒiOS ä¼šæœç´¢æ˜¾ç¤ºä¸Šä¸‹æ–‡ã€‚å®ƒä»å‘ˆç°è§†å›¾æ§åˆ¶å™¨å¼€å§‹ï¼Œè¯»å–å®ƒçš„ definesPresentationContext å±æ€§ã€‚å¦‚æœè¯¥å±æ€§çš„å€¼ä¸º YESï¼Œåˆ™è¡¨ç¤ºè§†å›¾æ§åˆ¶å™¨å®šä¹‰è¡¨ç¤ºä¸Šä¸‹æ–‡ã€‚å¦åˆ™ï¼Œå®ƒç»§ç»­å‘ä¸Šé€šè¿‡è§†å›¾æ§åˆ¶å™¨å±‚æ¬¡ç»“æ„ï¼Œç›´åˆ°ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨è¿”å› YESï¼Œæˆ–è€…ç›´åˆ°å®ƒåˆ°è¾¾çª—å£çš„æ ¹è§†å›¾æ§åˆ¶å™¨ã€‚
> 
> å½“è§†å›¾æ§åˆ¶å™¨å®šä¹‰è¡¨ç¤ºä¸Šä¸‹æ–‡æ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥é€‰æ‹©å®šä¹‰è¡¨ç¤ºæ ·å¼ã€‚é€šå¸¸ï¼Œå‘ˆç°çš„è§†å›¾æ§åˆ¶å™¨ä½¿ç”¨å…¶ modalTransitionStyle å±æ€§ç¡®å®šå…¶å‘ˆç°æ–¹å¼ã€‚å°† definesPresentationContext è®¾ç½®ä¸º YES çš„è§†å›¾æ§åˆ¶å™¨ä¹Ÿå¯ä»¥å°† providesprentationcontexttransitionstyle è®¾ç½®ä¸º YESã€‚å¦‚æœ providesPresentationContextTransitionStyle è®¾ç½®ä¸º YESï¼ŒiOS å°†ä½¿ç”¨è¡¨ç¤ºä¸Šä¸‹æ–‡çš„ modalPresentationStyle æ¥ç¡®å®šæ–°è§†å›¾æ§åˆ¶å™¨çš„æ˜¾ç¤ºæ–¹å¼ã€‚

### å®šä¹‰ PresentationContext

[https://developer . apple . com/documentation/ui kit/uiview controller/1621456-definepresentationcontext](https://developer.apple.com/documentation/uikit/uiviewcontroller/1621456-definespresentationcontext)

> å½“å‘ˆç°ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨æ—¶ï¼ŒiOS ä»å‘ˆç°è§†å›¾æ§åˆ¶å™¨å¼€å§‹ï¼Œè¯¢é—®å®ƒæ˜¯å¦æƒ³è¦æä¾›å‘ˆç°ä¸Šä¸‹æ–‡ã€‚å¦‚æœå‘ˆç°è§†å›¾æ§åˆ¶å™¨æ²¡æœ‰æä¾›ä¸Šä¸‹æ–‡ï¼Œé‚£ä¹ˆ iOS ä¼šè¯¢é—®å‘ˆç°è§†å›¾æ§åˆ¶å™¨çš„çˆ¶è§†å›¾æ§åˆ¶å™¨ã€‚iOS åœ¨è§†å›¾æ§åˆ¶å™¨å±‚æ¬¡ç»“æ„ä¸­å‘ä¸Šæœç´¢ï¼Œç›´åˆ°è§†å›¾æ§åˆ¶å™¨æä¾›ä¸€ä¸ªè¡¨ç¤ºä¸Šä¸‹æ–‡ã€‚å¦‚æœæ²¡æœ‰è§†å›¾æ§åˆ¶å™¨æä¾›ä¸Šä¸‹æ–‡ï¼Œé‚£ä¹ˆçª—å£çš„æ ¹è§†å›¾æ§åˆ¶å™¨æä¾›è¡¨ç¤ºä¸Šä¸‹æ–‡ã€‚
> 
> å¦‚æœè§†å›¾æ§åˆ¶å™¨è¿”å› YESï¼Œé‚£ä¹ˆå®ƒæä¾›ä¸€ä¸ªè¡¨ç¤ºä¸Šä¸‹æ–‡ã€‚è§†å›¾æ§åˆ¶å™¨çš„è§†å›¾æ‰€è¦†ç›–çš„çª—å£éƒ¨åˆ†å†³å®šäº†æ‰€å‘ˆç°çš„è§†å›¾æ§åˆ¶å™¨è§†å›¾çš„å¤§å°ã€‚è¯¥å±æ€§çš„é»˜è®¤å€¼æ˜¯â€œå¦â€

## é˜…è¯»æ›´å¤š

*   [å±•ç¤ºè§†å›¾æ§åˆ¶å™¨](https://useyourloaf.com/blog/presenting-view-controllers/)
*   [ç¬¬åä¹ç« ã€‚è§†å›¾æ§åˆ¶å™¨-å‘ˆç°è§†å›¾æ§åˆ¶å™¨](http://www.apeth.com/iOSBook/ch19.html#_presented_view_controller)

* * *

æ”¯æŒæˆ‘çš„åº”ç”¨ç¨‹åº

*   [æ¨é€ Hero -æµ‹è¯•æ¨é€é€šçŸ¥çš„çº¯ Swift åŸç”Ÿ macOS åº”ç”¨](https://onmyway133.com/pushhero)
*   [PastePal -ç²˜è´´æ¿ã€ä¾¿ç¬ºå’Œå¿«æ·æ–¹å¼ç®¡ç†å™¨](https://onmyway133.com/pastepal)
*   [å¿«é€Ÿæ£€æŸ¥-æ™ºèƒ½å¾…åŠäº‹é¡¹ç®¡ç†å™¨](https://onmyway133.com/quickcheck)
*   [Alias - App å’Œæ–‡ä»¶å¿«æ·æ–¹å¼ç®¡ç†å™¨](https://onmyway133.com/alias)
*   [æˆ‘çš„å…¶ä»–åº”ç”¨](https://onmyway133.com/apps/)

â¤ï¸â¤ï¸ğŸ˜‡ğŸ˜ğŸ¤˜â¤ï¸â¤ï¸