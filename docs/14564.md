# å¦‚ä½•è®¾ç½® Webpack é…ç½®ğŸ“¦

> åŸæ–‡:[https://dev.to/areknawo/how-to-setup-webpack-config-1001](https://dev.to/areknawo/how-to-setup-webpack-config--1ooi)

**è¿™ç¯‡æ–‡ç« æ‘˜è‡ª[æˆ‘çš„åšå®¢](https://areknawo.com)ï¼Œæ‰€ä»¥è¯·åŠ¡å¿…æŸ¥çœ‹æ›´å¤šæœ€æ–°å†…å®¹ğŸ˜‰**

æœ€è¿‘ï¼Œå°†èµ„äº§å’Œä»£ç æ†ç»‘åœ¨ä¸€èµ·å·²ç»å¾ˆå¸¸è§äº†ã€‚å®ƒå…è®¸åˆ›å»ºå¯ç§»æ¤çš„åŒ…ï¼Œä¸ä»…æ˜“äºé‡ç”¨å’Œä¼ è¾“ï¼Œè€Œä¸”æœ‰åˆ©äºå¿«é€Ÿäº¤ä»˜ï¼Œä»è€Œè·å¾—æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ(æ€§èƒ½)ã€‚è‡ªä»å‘å¸ƒäº† **ES6 æ¨¡å—**è§„èŒƒâ€”â€”ä¸ºä½ çš„ JS ä»£ç æä¾›æ¨¡å—åŒ–çš„æ ‡å‡†åŒ–æ–¹å¼â€”â€”ä»¥æ¥ï¼Œå®ƒè·å¾—äº†æå¤§çš„æå‡ã€‚è™½ç„¶æ²¡æœ‰è¢«æµè§ˆå™¨è¿…é€Ÿé‡‡ç”¨ï¼Œä½†å®ƒä»¬å¾ˆå¿«åœ¨å¼€å‘è€…ä¸­æµè¡Œèµ·æ¥ï¼Œå–ä»£äº†å…¶ä»–åŠ£è´¨ç³»ç»Ÿï¼Œå¦‚ **AMD** å’Œ **CommonJS** ã€‚æ¨¡å—åŒ–ç¨‹åº¦è¶Šé«˜ï¼Œå¯¹æ†æ‰æœºçš„éœ€æ±‚ä¹Ÿè¶Šå¤§ã€‚Webpack ç”±äºå…¶å¼ºå¤§çš„åŠŸèƒ½æ€§å’Œå¯æ‰©å±•æ€§ï¼Œè¿…é€Ÿå æ®äº†ä¸Šé£ã€‚ä½†æ˜¯éšç€æ’ä»¶ã€æ‰©å±•ã€åŠ è½½å™¨ç­‰æ•°é‡çš„å¢åŠ ã€‚åœ¨æ‚¨çš„å®‰æ’ä¸­ï¼Œä¸ºæ‰€æœ‰å…·æœ‰ä¸åŒéœ€æ±‚çš„ç”¨æˆ·æä¾›ä¸€ä¸ªåˆé€‚çš„è§£å†³æ–¹æ¡ˆæˆ–æ›´å…·ä½“çš„é…ç½®å¹¶ä¸å®¹æ˜“ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Webpack çš„é…ç½®å¯¹ä¸€äº›äººæ¥è¯´æœ‰ç‚¹å›°éš¾å’Œä»¤äººç–²æƒ«çš„åŸå› ã€‚è¿™å°±æ˜¯è¿™ä¸ªæ•™ç¨‹å­˜åœ¨çš„åŸå› ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å°†å°è¯•å‘æ‚¨ä»‹ç»åˆ›å»º Webpack é…ç½®çš„åŸºç¡€çŸ¥è¯†ã€‚æˆ‘çœŸçš„å»ºè®®ä½ ä»å¤´åˆ°å°¾è¯»å®Œè¿™ç¯‡æ–‡ç« ï¼Œå› ä¸ºæœ€åè¿˜æœ‰ä¸€ä¸ª**å¥–**åœ¨ç­‰ç€ä½ ã€‚ğŸ˜‚äº‹ä¸å®œè¿Ÿï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ Webpack æœ¬èº«ã€‚

# [](#webpack-amp-company)ç½‘é¡µåŒ…&å…¬å¸

Webpack è¢«å®£ä¼ ä¸ºç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ†ç»‘å™¨ã€‚è¿™æ˜¯ä¸€ä¸ªæµè¡Œçš„æ†ç»‘ç½‘ç»œåº”ç”¨çš„å·¥å…·ã€‚ç”±äºæ”¯æŒ ES6 æ¨¡å—ã€CommonJSã€AMD å’Œ **@import** sï¼Œå®ƒå‡ ä¹å¯ä»¥å¤„ç†æ—¥å¸¸ web åº”ç”¨ç¨‹åºä½¿ç”¨çš„æ‰€æœ‰èµ„æºã€‚å®ƒèƒŒåæœ‰ä¸€ä¸ªå¹¿æ³›çš„ç¤¾åŒºï¼Œæœ‰ä¸€ä¸ªçœŸæ­£åºå¤§çš„ç”Ÿæ€ç³»ç»Ÿï¼ŒåŒ…æ‹¬ç”¨äºè®¸å¤šä¸åŒèµ„äº§çš„**æ’ä»¶**å’Œ**åŠ è½½å™¨**ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¹¶ä¸æ˜¯è¿™é¡¹å·¥ä½œå”¯ä¸€åˆé€‚çš„å·¥å…·ã€‚è¿˜æœ‰æ›´å¤šé«˜è´¨é‡çš„æ†æ‰æœºã€‚å…¶ä¸­ä¸€ä¸ªæ˜¯ **Rollup.js** ã€‚å®ƒåªæ˜¯å¦ä¸€ä¸ªæ†ç»‘å™¨ï¼Œä½†æ›´é€‚åˆæ†ç»‘**åº“**å’Œå…¶ä»– JS å·¥å…·ï¼Œè€Œä¸æ˜¯ web åº”ç”¨ã€‚è¿™ä¸ªé¢†åŸŸè¿˜æœ‰ä¸€ä¸ªæ–°ç©å®¶å«åš **Parcel.js** ã€‚å¯¹äºä¸å–œæ¬¢é…ç½®ä¹‹ç±»çš„ä¸œè¥¿çš„äººæ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚Parcel.js ä¸ºè®¸å¤šä¸åŒçš„èµ„äº§å’Œæ ¼å¼æä¾›çœŸæ­£çš„å¼€ç®±å³ç”¨æ”¯æŒã€‚è¿™ 3 ä¸ªæ˜¯æˆ‘æœ€å–œæ¬¢çš„ï¼Œè™½ç„¶è‚¯å®šè¿˜æœ‰æ›´å¤šå…¶ä»–çš„åŸºäºå·¥å…·ï¼Œä½†æˆ‘ä¸ä¼šè‡ªç„¶åœ°æŠŠå®ƒä»¬éƒ½åˆ—å‡ºæ¥ã€‚ğŸ™ƒç°åœ¨ï¼Œæ‚¨å·²ç»çŸ¥é“äº†å¯èƒ½çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä¸‹é¢æ˜¯å¦‚ä½•ä¸€æ­¥ä¸€æ­¥åœ°é…ç½®æ‚¨çš„ Webpackã€‚

# [](#config)é…ç½®

æ›´å…·ä½“åœ°è¯´ï¼Œè®©æˆ‘ä»¬å®šä¹‰æˆ‘ä»¬çš„é…ç½®åº”è¯¥åšä»€ä¹ˆã€‚ä»¥ä¸‹é…ç½®åº”æ»¡è¶³æˆ‘ä»¬é¡¹ç›®çš„æ‰€æœ‰è¦æ±‚ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªç®€å•çš„åŸºäº**ååº”**å¹¶å†™å…¥**ç±»å‹è„šæœ¬**çš„ **SPA** å’Œ **PWA** ã€‚åœ¨å®šä¹‰æˆ‘ä»¬çš„é£æ ¼æ—¶ï¼Œæˆ‘ä»¬è¿˜å°†ä½¿ç”¨ **SCSS** (ä¸æ”¯æŒä»»ä½• CSS)æ¥è·å¾—æ›´å¥½çš„ä½“éªŒã€‚æˆ‘ä»¬å¼€å§‹å§ï¼ğŸ˜

çœ‹çœ‹ Webpack é…ç½®æ–‡ä»¶çš„æ¡†æ¶ã€‚

```
const path = require('path');

module.exports = {
  entry: './src/index.tsx',
  output: {
    path: path.resolve(__dirname, 'dist'),
    filename: '[name].js'
  },
  resolve: {
      extensions: []
  },
  module: {
      rules: []
  },
  plugins: []
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‰€ä»¥ç°åœ¨ä½ æœ‰äº†ã€‚æˆ‘ä»¬é…ç½®çš„åŸºæœ¬ç»“æ„ã€‚å®ƒä½äº **webpack.config.js** æ–‡ä»¶ä¸­ï¼Œè¯¥æ–‡ä»¶åˆ©ç”¨ CommonJS è¯­æ³•å¯¼å‡ºæˆ‘ä»¬çš„é…ç½®å¯¹è±¡ã€‚åœ¨å®ƒé‡Œé¢ï¼Œæˆ‘ä»¬æœ‰ç›¸å¯¹æŒ‡å‘æ–‡ä»¶çš„`entry`å­—æ®µï¼Œæ†ç»‘å™¨åº”è¯¥ä»è¿™é‡Œå¼€å§‹å·¥ä½œã€‚ç„¶åæˆ‘ä»¬æœ‰äº†å¸¦æœ‰é€‚å½“çš„`path`å’Œ`filename`çš„`output`å¯¹è±¡ï¼Œç”¨äºç”Ÿæˆçš„åŒ…ã€‚åç§°ä½¿ç”¨**ã€nameã€‘**å ä½ç¬¦æ¥è¡¨ç¤ºè¾“å‡ºçš„åç§°åº”è¯¥å¯¹åº”äºæˆ‘ä»¬çš„æ¨¡å—çš„åç§°(é»˜è®¤æƒ…å†µä¸‹æ˜¯ **main** )ã€‚`Resolve.extensions`éƒ¨åˆ†åŸºæœ¬ä¸Šæ˜¯ Webpack åº”è¯¥è¯»å–å’Œå¤„ç†çš„ä¸€ç»„**æ–‡ä»¶æ‰©å±•å**ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æœ‰`module.rules`ï¼Œå®ƒå¯ä»¥è¯´æ˜¯æ•´ä¸ªé…ç½®ä¸­æœ€é‡è¦çš„åœ°æ–¹ä¹‹ä¸€ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†åº”è¯¥å¤„ç†ç‰¹å®šæ–‡ä»¶çš„**åŠ è½½å™¨**ã€‚æœ€åæ˜¯`plugins`å­—æ®µï¼Œæ‰€æœ‰ Webpack **æ’ä»¶**å°†åœ¨è¿™é‡Œæ‰¾åˆ°å®ƒä»¬çš„ä½ç½®ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç”¨ä¸€äº›å†…å®¹å¡«å……å®ƒï¼Œå¥½å—ï¼Ÿ

```
// ...
    resolve: {
        extensions: [ '.tsx', '.ts', '.js', '.jsx' ]
    },
    module: {
        rules: [{
            test: /\.tsx?$/,
            use: ['babel-loader', 'ts-loader'],
            exclude: /node_modules/
        }]
    },
// ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å’Œ...è¿™å°±æ˜¯å¤„ç† TypeScript æ‰€éœ€çš„å…¨éƒ¨å†…å®¹ï¼è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹è¿™æ˜¯æ€ä¹ˆå›äº‹ã€‚åœ¨`extensions`ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ·»åŠ äº†æˆ‘ä»¬å°†æ¥ä¼šç”¨åˆ°çš„æ‰€æœ‰å¯èƒ½çš„æ‰©å±•ã€‚åœ¨`rules`ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†æˆ‘ä»¬çš„ç¬¬ä¸€æ¡è§„åˆ™ã€‚å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰ 3 ä¸ªå±æ€§çš„å¯¹è±¡ã€‚`test`æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æ‰€æœ‰ä»¥**ç»“å°¾çš„æ–‡ä»¶ã€‚ts** æˆ–**ã€‚tsx** æ‰©å±•å¹¶ä½¿ç”¨ **ts-loader** å’Œ`use`å­—æ®µä¸­æä¾›çš„ **babel-loader** è¿›è¡Œå¤„ç†ã€‚ä½¿ç”¨ä¸¤ä¸ªå¤„ç†å™¨ä½¿æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ Babel å¤„ç†ä» TS ç¼–è¯‘å™¨è¾“å‡ºçš„ä»£ç ã€‚è¯·è®°ä½ï¼Œä»æ•°ç»„ä¸­æä¾›çš„æœ€åä¸€ä¸ª**åˆ°ç¬¬ä¸€ä¸ª**ä½¿ç”¨åŠ è½½å™¨ã€‚æœ€åï¼Œæˆ‘ä»¬å°† **node_modules** æ’é™¤åœ¨åŒ¹é…ä¹‹å¤–ï¼Œå› ä¸ºè°å¯èƒ½éœ€è¦å¤„ç†è¿™äº›å¹¶ä½¿ä»–çš„ç³»ç»Ÿæ»åå‘¢ï¼ŸğŸ˜‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæ‚¨ä¸éœ€è¦ä»¥ä»»ä½•æ–¹å¼è¦æ±‚ ts-loaderï¼Œåªéœ€å®‰è£…å®ƒå³å¯ã€‚å½“æˆ‘ä»¬è°ˆè®ºå®‰è£…çš„æ—¶å€™ï¼Œæˆ‘å¯èƒ½å¿˜è®°æåˆ°ä»»ä½•å…³äº Webpack å®‰è£…çš„ä¸œè¥¿ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„å‘½ä»¤æ¥è§£å†³è¿™ä¸ªé—®é¢˜:

```
npm install --save-dev webpack webpack-cli typescript @babel/core babel-loader ts-loader 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨è®©æˆ‘ä»¬åŠ å…¥å¯¹ SCSS çš„æ”¯æŒï¼

```
// ...
{
    test: /\.scss$/,
    use: [
        'style-loader',
        { loader: 'css-loader', options: { importLoaders: 1 } },
        'sass-loader',
    ],
},
// ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¤šè¾¾ 3 ä¸ªåŠ è½½å™¨ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å…ˆå®‰è£…å®ƒä»¬ï¼Œå¹¶ä¸”ä¸è¦å¿˜è®°ç”¨äºå¤„ç† SCSS çš„ **node-sass** ï¼

```
npm install --save-dev node-sass style-loader css-loader sass-loader 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæ‰€åšçš„æ˜¯ä½¿ç”¨å¸¦æœ‰ node-sass lib çš„ **sass-loader** å¤„ç† SCSS æ–‡ä»¶ï¼Œç”¨ **css-loader** è½¬æ¢æ‰€æœ‰çš„ **@import** å’Œ **URL** sï¼Œå¹¶ç”¨ **style-loader** å®é™…ä½¿ç”¨/æ’å…¥æˆ‘ä»¬çš„æ ·å¼ã€‚css-loader çš„`importLoaders`é€‰é¡¹è¡¨ç¤ºåœ¨ CSS 1 ä¹‹å‰ä½¿ç”¨äº†å¤šå°‘ä¸ªåŠ è½½å™¨ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªä¸€æ¬¡æ€§åŠ è½½å™¨ã€‚çœ‹çœ‹ä¸º loader æä¾›é™„åŠ é€‰é¡¹çš„è¯­æ³•ã€‚

æœ€åï¼Œè®©æˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹ï¼Œæ·»åŠ å¯¹æ†ç»‘**å›¾åƒ**åˆå**é™æ€æ–‡ä»¶**çš„æ”¯æŒï¼

```
npm install --save-dev file-loader 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
// ...
{
    test: /\.(jpe?g|png|gif|svg)$/i,
    loader: 'file-loader'
},
// ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é€šè¿‡**æ–‡ä»¶åŠ è½½å™¨**ï¼ŒWebpack å°†æ¯ä¸ªåŒ¹é…çš„å¯¼å…¥å¤„ç†æˆé€‚å½“çš„ URLã€‚è¯·æ³¨æ„ï¼Œåœ¨å®šä¹‰å•ä¸ªåŠ è½½ç¨‹åºæ—¶ï¼Œå¯ä»¥ä½¿ç”¨åŠ è½½ç¨‹åºå­—æ®µï¼Œè€Œä¸æ˜¯ä½¿ç”¨ã€‚

å¦å¤–ï¼Œä¸è¦å¿˜è®°å…¶ä»–é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚**ts config . JSON**for[**TypeScript**](http://typescriptlang.org/)...

```
{  "compilerOptions":  {  "outDir":  "./dist/",  "sourceMap":  true,  "noImplicitAny":  false,  "module":  "commonjs",  "target":  "es5",  "jsx":  "react",  "lib":  ["es5",  "es6",  "dom"]  },  "include":  [  "./src/**/*"  ],  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

...è¿˜æœ‰**ã€‚babelrc** ä¸º [**Babel**](https://babeljs.io/) :

```
npm install --save-dev @babel/preset-env @babel/preset-react @babel/preset-typescript 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
{
  "presets": [
    "@babel/preset-env",
    "@babel/preset-react"
  ],
  "env": {
    "development": {
      "presets": ["@babel/preset-typescript"]
    }
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä¸ä¼šæ¶‰åŠè¿™äº›ï¼Œå› ä¸ºå®ƒä»¬æœ‰ç‚¹è·‘é¢˜ï¼Œå¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œå¯ä»¥æŸ¥çœ‹å®ƒä»¬é¡µé¢çš„é“¾æ¥â€”â€”æœ¬æ–‡ä¸­åˆ—å‡ºçš„æ‰€æœ‰å·¥å…·éƒ½æœ‰å¾ˆæ£’çš„æ–‡æ¡£ã€‚ğŸ“™âš¡

ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ’ä»¶ã€‚

```
npm install --save-dev clean-webpack-plugin html-webpack-plugin
workbox-webpack-plugin webpack-pwa-manifest 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
const CleanPlugin = require('clean-webpack-plugin');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const WorkboxPlugin = require('workbox-webpack-plugin');
const WebpackPwaManifest = require('webpack-pwa-manifest');
// ...
plugins: [
    new CleanPlugin(["dist"]),
    new HtmlWebpackPlugin({
        filename: 'index.html',
        title: 'Webpack Config',
        template: './src/index.html'
    }),
    new WebpackPwaManifest({
        name: 'Webpack Config',
        short_name: 'WpConfig',
        description: 'Example Webpack Config',
        background_color: '#ffffff'
    }),
    new WorkboxPlugin.GenerateSW({
        swDest: 'sw.js',
        clientsClaim: true,
        skipWaiting: true,
    })
],
// ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¤šè¾¾ 4 ä¸ªæ’ä»¶ï¼ä»–ä»¬æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±ç‰¹å®šçš„ç›®çš„ã€‚ **Clean-webpack-plugin** è´Ÿè´£æ¸…ç†è¾“å‡ºç›®å½•â€”â€”ä¸€ä¸ªç®€å•çš„ä»»åŠ¡ã€‚ **Html-webpack-plugin** ä½¿ç”¨æä¾›çš„æ•°æ®å’Œæ¨¡æ¿æ–‡ä»¶è®¾ç½®æˆ‘ä»¬çš„ Html æ–‡ä»¶ã€‚

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta 
          name="viewport" 
          content="width=device-width, initial-scale=1, shrink-to-fit=no"
        >
    <title><%= htmlWebpackPlugin.options.title %></title>
</head>

<body>
    <noscript>
        You need to enable JavaScript to run this app.
    </noscript>
    <div id="root"></div>
</body>

</html> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é‚£æ˜¯æˆ‘ä»¬çš„**æ¨¡æ¿æ–‡ä»¶** BTWï¼Œæ ‡é¢˜ç›´æ¥å–è‡ªæ’ä»¶çš„é…ç½®å¯¹è±¡ã€‚æœ€åï¼Œ **workbox-webpack-plugin** å’Œ **webpack-pwa-manifest** åˆ†åˆ«ä¸º**ç¦»çº¿æœåŠ¡äººå‘˜**å’Œ **app manifest** æä¾› **PWA** åŠŸèƒ½ã€‚å…¶ä¸­ä¸€äº›æœ‰å¾ˆå¤šå®šåˆ¶é€‰é¡¹ï¼Œæ‰€ä»¥å¦‚æœæ‚¨è®¡åˆ’ä½¿ç”¨å®ƒä»¬ï¼Œè¯·è®¿é—®å®ƒä»¬çš„é¡¹ç›®é¡µé¢äº†è§£æ›´å¤šä¿¡æ¯ã€‚

# [](#production)ç”Ÿäº§

åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æœ‰æŠŠæ¡åœ°è¯´ï¼Œæˆ‘ä»¬çš„é…ç½®æ˜¯å®Œå…¨å¯æ“ä½œçš„ã€‚ä½†è¿™è¿˜ä¸å¤Ÿã€‚æœ‰äº† Webpackï¼Œæ‚¨å¯ä»¥é’ˆå¯¹ä¸åŒçš„ç”¨ä¾‹æ‹¥æœ‰å¤šä¸ªé…ç½®ã€‚æœ€å¸¸è§çš„ä¾‹å­æ˜¯æœ‰ä¸¤ç§é…ç½®ç”¨äº**ç”Ÿäº§**å’Œ**å¼€å‘**ï¼Œå› ä¸ºæ¯ä¸ªç¯å¢ƒéƒ½æœ‰å…¶ç‰¹å®šçš„è¦æ±‚ã€‚è®©æˆ‘ä»¬æŠŠæˆ‘ä»¬çš„ webpack.config.js åˆ†æˆ **3 å—**ã€‚

**Webpack.common.js** å°†åŒ…å«å¼€å‘å’Œç”Ÿäº§é…ç½®ç›¸åŒçš„é…ç½®ã€‚

```
const CleanPlugin = require('clean-webpack-plugin');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const WorkboxPlugin = require('workbox-webpack-plugin');
const WebpackPwaManifest = require('webpack-pwa-manifest');
const path = require("path");

module.exports = {
  entry: "./src/index.tsx",
  output: {
    path: path.resolve(__dirname, "dist"),
    filename: "[name].js"
  },
  resolve: {
    extensions: [".tsx", ".ts", ".js", ".jsx"]
  },
  module: {
    rules: [
      {
        test: /\.scss$/,
        use: [
          "style-loader",
          { loader: "css-loader", options: { importLoaders: 1 } },
          "sass-loader"
        ]
      },
      {
        test: /\.(jpe?g|png|gif|svg)$/i,
        loader: "file-loader"
      }
    ]
  },
  plugins: [
    new CleanPlugin(["dist"]),
    new HtmlWebpackPlugin({
        filename: 'index.html',
        title: 'Webpack Config',
        template: './src/index.html',
    }),
    new WebpackPwaManifest({
        name: 'Webpack Config',
        short_name: 'WpConfig',
        description: 'Example Webpack Config',
        background_color: '#ffffff'
    }),
    new WorkboxPlugin.GenerateSW({
        swDest: 'sw.js',
        clientsClaim: true,
        skipWaiting: true,
    })
  ]
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œè®©æˆ‘ä»¬åˆ›å»ºæˆ‘ä»¬çš„ **webpack.prod.js** é…ç½®ã€‚æˆ‘ä»¬éœ€è¦å°†å…¶ä¸æˆ‘ä»¬çš„é€šç”¨é…ç½®åˆå¹¶ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨**web pack-merge**â€”â€”ä¸€ä¸ªå·¥å…·æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬å®‰è£…å®ƒå’Œå…¶ä»– 2 ä¸ªæ’ä»¶ï¼Œæˆ‘ä»¬ç¨åå°†ä½¿ç”¨ã€‚

```
npm install --save-dev webpack-merge uglifyjs-webpack-plugin hard-source-webpack-plugin 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
const merge = require('webpack-merge');
const UglifyJsPlugin = require('uglifyjs-webpack-plugin');
const common = require('./webpack.common.js');

module.exports = merge(common, {
    mode: 'production',
    devtool: 'source-map',
    module: {
        rules: [{
            test: /\.tsx?$/,
            use: ["babel-loader", "ts-loader"],
            exclude: /node_modules/
        }]
    },
    optimization: {
        minimizer: [new UglifyJsPlugin({
            sourceMap: true
        })],
    },
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæ–°çš„å±æ€§- `mode`å’Œ`devtool`ã€‚`Mode`è¡¨ç¤ºæˆ‘ä»¬å½“å‰çš„ç¯å¢ƒâ€”â€”è¦ä¹ˆæ˜¯*ã€ç”Ÿäº§ã€‘**ã€å¼€å‘ã€‘*è¦ä¹ˆæ˜¯*ã€æ— ã€‘*ã€‚è¿™å…è®¸ä¸€äº›å·¥å…·å¯¹æ‰€é€‰çš„ env åº”ç”¨é€‚å½“çš„ä¼˜åŒ–ã€‚`Devtool`å±æ€§æ˜¯æŒ‡ç”Ÿæˆ**æºåœ°å›¾**çš„æ–¹å¼ã€‚Webpack ä¸ºè¯¥å±æ€§å†…ç½®äº†è®¸å¤šé€‰é¡¹ã€‚è¿˜æœ‰è®¸å¤šæ’ä»¶æä¾›é¢å¤–çš„åŠŸèƒ½ã€‚ä½†æ˜¯*â€œsource-mapâ€*é€‰é¡¹ä»å†…å®¹æ–‡ä»¶ä¸­ç”Ÿæˆæºåœ°å›¾ï¼Œç°åœ¨å¯¹æˆ‘ä»¬æ¥è¯´å·²ç»è¶³å¤Ÿäº†ã€‚ç„¶åæˆ‘ä»¬æœ‰æˆ‘ä»¬çš„è€å¼**ã€‚ts** æ–‡ä»¶åŠ è½½å™¨ã€‚æ¥ä¸‹æ¥æ˜¯æˆ‘ä»¬é…ç½®ä¸­æ–°çš„ã€è‡ªæˆ‘è§£é‡Šçš„å­—æ®µã€‚`optimization.minimizer`å…è®¸æˆ‘ä»¬æŒ‡å®šä¸€ä¸ªæ’ä»¶æ¥æœ€å°åŒ–æˆ‘ä»¬çš„æ–‡ä»¶ï¼Œè¿™åœ¨é¢å‘ç”Ÿäº§æ—¶å¾ˆæœ‰ç”¨ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å°†ä½¿ç”¨**uglifyjs-web pack-plugin**ï¼Œè¿™æ˜¯ä¸€æ¬¾ä¹…ç»è€ƒéªŒçš„äº§å“ï¼Œå…·æœ‰è‰¯å¥½çš„æ€§èƒ½å’Œç¨³å®šçš„è¾“å‡ºã€‚ä¸è¦å¿˜è®°è¿™ä¸ªæ’ä»¶çš„`sourceMap`é€‰é¡¹ï¼Œå¦åˆ™ä½ çš„æºåœ°å›¾**å°†ä¸ä¼šç”Ÿæˆ**ï¼ç°åœ¨ï¼Œè®©æˆ‘ä»¬è½¬åˆ°å¼€å‘é…ç½®æ–‡ä»¶- **webpack.dev.js** ã€‚

```
const merge = require('webpack-merge');
const HardSourceWebpackPlugin = require('hard-source-webpack-plugin');
const common = require('./webpack.common.js');

module.exports = merge(common, {
    mode: 'development',
    devtool: 'eval-source-map',
    module: {
        rules: [{
            test: /\.tsx?$/,
            loader: "babel-loader",
            exclude: /node_modules/
        }]
    },
    plugins: [
        new HardSourceWebpackPlugin()
    ]
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨å¼€å‘æ—¶ï¼Œæˆ‘ä»¬åªå…³å¿ƒ**é€Ÿåº¦**ã€‚æ­¤æ—¶ä¸éœ€è¦è¿›è¡Œä»»ä½•ä¼˜åŒ–ã€‚æˆ‘ä»¬åªæƒ³è®©æˆ‘ä»¬çš„ä»£ç è¢«å¿«é€Ÿæ†ç»‘**ã€‚è¿™åŒæ ·é€‚ç”¨äºæºæ˜ å°„ï¼Œè¿™ä¸€æ¬¡ä½¿ç”¨å¾—æ›´å¿«ï¼Œä½†ä¸æ˜¯é‚£ä¹ˆä¼˜åŒ–çš„*â€œeval-source-mapâ€*é€‰é¡¹ã€‚ç„¶åï¼Œåœ¨ä¸º TypeScript å®šä¹‰åŠ è½½å™¨æ—¶ï¼Œæˆ‘ä»¬åªä½¿ç”¨ä¸€ä¸ªåŠ è½½å™¨ï¼Œå³ **babel-loader** ã€‚é€šè¿‡è¿™æ ·åšï¼Œæˆ‘ä»¬åªä¼ è¾“æˆ‘ä»¬çš„ã€‚ts æ–‡ä»¶**è€Œä¸è¿›è¡Œç±»å‹æ£€æŸ¥**ï¼Œè¿™å¯¹æ†ç»‘é€Ÿåº¦æœ‰å¾ˆå¤§å½±å“ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¹‹å‰æˆ‘åœ¨**ä¸­å®šä¹‰äº†**[@ babel](https://dev.to/babel)/preset-typescript**ç”¨äºå¼€å‘é˜¶æ®µã€‚babelrc** æ–‡ä»¶ã€‚æœ€åï¼Œæˆ‘ä»¬æœ‰**hard-source-web pack-plugin**ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ¥ç¼“å­˜æˆ‘ä»¬çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç¬¬äºŒæ¬¡æ†ç»‘ä¼šæ›´å¿«ï¼
è¿˜æœ‰...å°±æ˜¯è¿™æ ·ï¼æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½å¯ä»¥ä½¿ç”¨çš„é€‚å½“çš„ç‰¹å®šäºç¯å¢ƒçš„é…ç½®ï¼**

 **# [](#hot-reload)çƒ­é‡è£…ğŸ”¥

æ‰€ä»¥æˆ‘ä»¬å·²ç»æœ‰äº†å¾ˆå¥½çš„é…ç½®ï¼Œä½†æ˜¯è°éœ€è¦ä¸€ä¸ªæ²¡æœ‰**çƒ­é‡è£…**çš„å¿«é€Ÿå¼€å‘é…ç½®å‘¢ï¼ï¼Ÿæ²¡é”™â€”â€”è¶Šæ¥è¶Šçƒ­äº†ï¼ğŸ”¥é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬æš‚æ—¶æŠŠç”Ÿäº§é…ç½®æ”¾åœ¨ä¸€è¾¹ï¼Œè®©æˆ‘ä»¬æ¥å®ç°è¿™ä¸ªå¥‡å¦™çš„ç‰¹æ€§ï¼Œå¥½å—ï¼Ÿä½¿ç”¨ **webpack-dev-server** çœŸçš„å¾ˆç®€å•ï¼ä½ å¯ä»¥ç”¨
å®‰è£…å®ƒ

```
npm install --save-dev webpack-dev-server 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¯¹äºé…ç½®ï¼Œå°†`devServer`é…ç½®å¯¹è±¡æ·»åŠ åˆ°æˆ‘ä»¬çš„ **webpack.dev.js** æ–‡ä»¶ä¸­ã€‚

```
// ...
devServer: {
    contentBase: path.join(__dirname, 'dist'),
    compress: true,
    port: 9000
}
// ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æä¾›åŸºæœ¬é€‰é¡¹ï¼Œå¦‚ç«¯å£ã€è¦æœåŠ¡çš„ç›®å½•ä»¥åŠæ˜¯å¦åº”è¯¥è¿›è¡Œå‹ç¼©ã€‚å°±æ˜¯è¿™æ ·ï¼æœ€åï¼Œè®©æˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„ **package.json** æ·»åŠ ä¸¤ä¸ª**è„šæœ¬**ä»¥ä¾¿äºå¼€å‘ã€‚

```
"scripts":  {  "start":  "webpack-dev-server --config webpack.dev.js",  "build":  "webpack --config webpack.prod.js"  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é€šè¿‡ä½¿ç”¨ **- config** é€‰é¡¹ï¼Œæˆ‘ä»¬æä¾›äº†ç‰¹å®šäº env çš„ Webpack é…ç½®çš„ä½ç½®ã€‚

ç°åœ¨ä½ æœ‰äº†ï¼æ‚¨è‡ªå·±çš„ Webpack é…ç½®ï¼Œæ”¯æŒ TS/TSXã€SCSSã€ä¼˜åŒ–ç”Ÿäº§å’Œå¼€å‘è®¾ç½®ä»¥åŠ HMRï¼ä½œä¸ºä¸€ä¸ªæ—æ³¨ï¼Œæˆ‘ä»¬çš„ HMR å·¥ä½œå¾—å¾ˆå¥½ï¼Œä½†å½“æ¶‰åŠåˆ°ååº”ç‰¹å®šçš„ä¸œè¥¿æ—¶ï¼Œè¿˜æœ‰æ”¹è¿›çš„ç©ºé—´ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨å¸Œæœ›åœ¨é‡æ–°åŠ è½½æ—¶ä¿æŒç»„ä»¶çš„çŠ¶æ€ã€‚ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ **react-hot-loader** å¹¶éµå¾ª [**è¿™ä¸ªä»¤äººæ•¬ç•çš„æŒ‡å—**](http://gaearon.github.io/react-hot-loader/getstarted/) ï¼ŒåŒæ—¶ä½¿ç”¨æ‚¨å·²ç»åœ¨è¿™é‡Œåˆ›å»ºçš„é…ç½®ã€‚

# [](#a-gift)é€ç¤¼ğŸ

å› æ­¤ï¼Œæ­£å¦‚æ‚¨é€šè¿‡é˜…è¯»æœ¬æ•™ç¨‹æ‰€çœ‹åˆ°çš„ï¼Œåˆ›å»º Webpack é…ç½®å¹¶ä¸å›°éš¾ã€‚è¿™åªæ˜¯ä¸€ä¸ªæœ‰ç‚¹è€—æ—¶çš„è¿‡ç¨‹ï¼Œå¯èƒ½éœ€è¦ä¸€äº›è°·æ­Œä¸æ—¶ã€‚ä½†å¯¹ä¸€äº›äººæ¥è¯´ä¹Ÿå¾ˆæœ‰è¶£ã€‚ä½†å¦‚æœä½ åœ¨å¦ä¸€ç»„ï¼Œæˆ‘æœ‰ç‰¹åˆ«çš„ä¸œè¥¿ç»™ä½ ã€‚æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ **CLI å·¥å…·**ï¼Œç”¨äºä¸ºæ‚¨çš„ **Webpack é…ç½®**åˆ›å»º**åŸºæœ¬æ ·æ¿æ–‡ä»¶**ã€‚é€šè¿‡ä½¿ç”¨è¿™ä¸ªï¼Œä½ å°±ä¸å¿…èŠ±æ—¶é—´ä¸€éåˆä¸€éåœ°è®¾ç½®åŒæ ·çš„ä¸œè¥¿ã€‚å®ƒå«åš**ç½‘ç»œå¥—è£…**ï¼Œä½ å¯ä»¥ä» [**NPM**](https://www.npmjs.com/package/webpack-suit-up) ä¸‹è½½ã€‚æ‰€ä»¥ï¼Œæ˜¯çš„ï¼Œå¦‚æœä½ æœ‰å…´è¶£å°±å»çœ‹çœ‹ã€‚

æˆ‘å¸Œæœ›è¿™ç¯‡æ•™ç¨‹èƒ½å¸®åŠ©ä½ é…ç½®ä½ çš„ Webpackã€‚æƒ³äº†è§£æ›´å¤šå…³äº Webpack çš„ä¿¡æ¯ï¼Œä½ å¯ä»¥æŸ¥çœ‹å®ƒçš„å®˜æ–¹ç½‘ç«™ã€‚ä½†æ˜¯ï¼Œæ­£å¦‚æˆ‘åœ¨å¼€å§‹æ—¶æ‰€è¯´çš„ï¼Œæœ‰è®¸å¤šå…¶ä»–ä¼Ÿå¤§çš„å·¥å…·å¯èƒ½ç”šè‡³ä¸éœ€è¦é…ç½®ã€‚ç”šè‡³æœ‰ä¸€äº›æ˜¯åŸºäº Webpack å¹¶è‡ªåŠ¨é…ç½®å®ƒçš„ã€‚è¿˜æœ‰ï¼Œå³ä½¿æ˜¯æ¥è‡ª **v4** çš„ Webpack æœ¬èº«ä¹Ÿä¸éœ€è¦é…ç½®ï¼Œä½†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ç¡®å®æ˜¯å¿…é¡»çš„ã€‚ä¹Ÿè®¸ä½ æƒ³çœ‹çœ‹æœ‰è¶£çš„**ç½‘ç»œæ†ç»‘å•†**çš„å®Œæ•´åˆ—è¡¨ï¼Ÿæˆ–è€…è¯´æ˜¯é…ç½® **Rollup.js** çš„æŒ‡å—ï¼Ÿå†™åœ¨ä¸‹é¢çš„è¯„è®ºé‡Œã€‚**åˆ†äº«è¿™ç¯‡æ–‡ç« **ï¼Œè®©åˆ«äººæ›´å¿«å‘ç°ã€‚æ­¤å¤–ï¼Œ **[åœ¨ Twitter ä¸Šå…³æ³¨æˆ‘](https://twitter.com/areknawo)** æˆ–åœ¨æˆ‘çš„è„¸ä¹¦é¡µé¢ä¸Šå…³æ³¨æˆ‘äº†è§£æ›´å¤šæœ€æ–°å†…å®¹ã€‚ğŸ˜**