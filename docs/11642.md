# æµ‹è¯•æ„è§

> åŸæ–‡:[https://dev.to/juliang/testing-opinions-3hlh](https://dev.to/juliang/testing-opinions-3hlh)

åœ¨å·¥ä½œä¸­ï¼Œæˆ‘å’Œæˆ‘çš„åŒäº‹ç»å¸¸è®¨è®ºæµ‹è¯•ç‰¹å®š React ç»„ä»¶çš„æœ€ä½³æ–¹å¼æˆ–æ­£ç¡®æ–¹å¼ã€‚æˆ‘ä»¬å¹¶ä¸æ€»æ˜¯æ„è§ä¸€è‡´ã€‚

> æµ‹è¯•ä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºå’Œæµ‹è¯•å®ƒçš„å®ç°ç»†èŠ‚æ˜¯ä¸åŒçš„ã€‚

## [](#avoid-testing-implementation-details)é¿å…æµ‹è¯•å®ç°ç»†èŠ‚

(å‡ ä¹)æˆ‘ä»¬æ‰€æœ‰äººéƒ½åŒæ„åº”è¯¥é¿å…[æµ‹è¯•å®ç°ç»†èŠ‚](https://kentcdodds.com/blog/testing-implementation-details)ã€‚é—®é¢˜æœ‰æ—¶æ˜¯è¦å¯¹å®ç°ç»†èŠ‚çš„å®šä¹‰è¾¾æˆä¸€è‡´ã€‚

æƒ³è±¡æˆ‘ä»¬æœ‰ä¸€ä¸ª`<Banana>`ç»„ä»¶(å½“ç„¶)ã€‚

```
export function Banana({ type, color, length }) {
  return (
    <div className="banana">
      <BananaType type={type} />
      <BananaColor color={color} />
      <BananaLength length={length} />
    </div>
  );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å•å…ƒæµ‹è¯•çº¯åŒ–è®ºè€…ä¼šè®¤ä¸ºæˆ‘ä»¬éœ€è¦å­¤ç«‹åœ°æµ‹è¯•æ¯ä¸ªç»„ä»¶ã€‚å¯¹äºç»„ä»¶éš”ç¦»ï¼Œæˆ‘ä»¬éœ€è¦æ¨¡ä»¿å­©å­æˆ–è€…åšä¸€ä¸ªç®€å•çš„æ¸²æŸ“ï¼Œçœ‹çœ‹å®ƒå¦‚ä½•åœ¨å­©å­èº«ä¸Šè®¾ç½®é“å…·ã€‚å·®ä¸å¤šæ˜¯è¿™æ ·:

```
 it("renders a banana properly", () => {
    const banana = { type: "Cavendish", color: "yellow", length: 12 };
    const wrapper = shallow(<Banana {...banana} />); // from 'enzyme'

    const bananaType = wrapper.find(BananaType); // from 'enzyme'
    const bananaColor = wrapper.find(BananaColor);
    const bananaLength = wrapper.find(BananaLength);

    // make sure each child has the correct props
    expect(bananaType.props()).toHaveProperty("type", "Cavendish");
    expect(bananaColor.props()).toHaveProperty("color", "yellow");
    expect(bananaLength.props()).toHaveProperty("length", 12);
    // ğŸ¤”
  }); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#whats-the-problem-here)è¿™é‡Œæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ

1.  æµ‹è¯•è¯•å›¾æ‰¾åˆ°ä¸»é¢˜çš„å®ç°ä¾èµ–é¡¹`BananaType`ã€`BananaColor`å’Œ`BananaLength`ã€‚
2.  æµ‹è¯•æœŸæœ›åœ¨å†…éƒ¨å­©å­èº«ä¸Šè®¾ç½®æŸäº›é“å…·ï¼›å†æ¬¡:å®ç°ç»†èŠ‚ã€‚

### [](#what-can-we-do-instead)æˆ‘ä»¬èƒ½åšä»€ä¹ˆæ¥ä»£æ›¿ï¼Ÿ

æˆ‘ä»¬çš„`<Banana>`ç»„ä»¶**æ‹¥æœ‰**è¿™ä¸‰ä¸ªå­ç»„ä»¶ï¼Œæ‰€ä»¥â€œè¢«æµ‹è¯•çš„ä¸»é¢˜â€å¯ä»¥è¢«è®¤ä¸ºæ˜¯æ•´ä¸ªäº‹ç‰©:ç»„ä»¶åŠå…¶å­ç»„ä»¶ã€‚

æˆ‘æ›´å–œæ¬¢â€œæ¸²æŸ“â€ç»„ä»¶å¹¶æ£€æŸ¥å…¶è¾“å‡ºã€‚

```
 it("renders a banana properly", () => {
    const banana = { type: "Cavendish", color: "yellow", length: 12 };

    const {
      getByText
    } = render(<Banana {...banana} />); // from 'react-testing-library'

    getByText('Cavendish Banana');
    getByText('yellow');
    getByText('12cm');
  }); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œ[å¿«ç…§](https://jestjs.io/docs/en/snapshot-testing.html)æµ‹è¯•å¯èƒ½æ›´å¥½:

```
 it("renders a banana properly", () => {
    const banana = { type: "Cavendish", color: "yellow", length: 12 };
    const result = render(<Banana {...banana} />); // from 'react-testing-library'
    expect(result.container).toMatchSnapshot();
  }); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#wait-dont-snapshot-tests-depend-on-implementation-details)ç­‰ç­‰ï¼å¿«ç…§æµ‹è¯•ä¸ä¾èµ–äºå®ç°ç»†èŠ‚å—ï¼Ÿ

ä¸€äº›äººè®¤ä¸ºå¯¹æ¸²æŸ“è¾“å‡ºçš„æµ‹è¯•(å³å¿«ç…§æµ‹è¯•)ç±»ä¼¼äºæµ‹è¯•å®ç°ç»†èŠ‚ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬çš„`<Banana>`ç»„ä»¶æ”¹å˜äº†å®ƒçš„å®ç°ï¼Œè€Œä¸æ˜¯å‘ˆç°`<BananaLength>`ï¼Œè€Œæ˜¯å‘ˆç°`<div class="banana-length">12 cm</div>`(æ³¨æ„â€˜12â€™å’Œâ€˜cmâ€™ä¹‹é—´çš„ç©ºæ ¼)ã€‚é‚£ä¹ˆæˆ‘ä¸Šé¢çš„æµ‹è¯•å°±ä¼šå¤±è´¥ã€‚

ä½†æ˜¯æˆ‘è®¤ä¸ºå‘ˆç°çš„æ ‡è®°æ˜¯å‡½æ•°çš„è¾“å‡ºï¼Œè€Œä¸æ˜¯å®ƒçš„å®ç°ç»†èŠ‚ã€‚å¦‚æœæ¸²æŸ“æ”¹å˜äº†ï¼Œé‚£ä¹ˆæˆ‘çš„æ¨¡å—çš„è¾“å‡ºä¹Ÿæ”¹å˜äº†ï¼Œé‚£ä¹ˆ**æµ‹è¯•å¿…é¡»ä¸­æ–­**ã€‚

### [](#about-reacttestinglibrary)å…³äºååº”-æµ‹è¯•-åº“

æˆ‘åœ¨ä¸€äº›é¡¹ç›®ä¸­ä½¿ç”¨äº† [reac-testing-library](https://testing-library.com/react) ã€‚ä½†æ˜¯ç¬¬ä¸€ä¸ªä¾‹å­æ˜¯ç”¨[é…¶](https://airbnb.io/enzyme/)ä»£æ›¿ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥é¿å…ç”¨ Enzyme æµ‹è¯•å®ç°ç»†èŠ‚ï¼Œä½†æ˜¯æˆ‘è®¤ä¸º react-testing-library æ›´å®¹æ˜“é¿å…é‚£äº›ä¸å¥½çš„åšæ³•ã€‚

æˆ‘çš„è§‚ç‚¹å¯èƒ½æœ‰åè§ï¼Œå› ä¸ºæˆ‘ä¸€ç›´åœ¨å­¦ä¹  Kent C. Dodds çš„[æµ‹è¯• javascript](https://testingjavascript.com/) è¯¾ç¨‹ã€‚

è¯·åœ¨è¯„è®ºä¸­ä¸åŒæ„æˆ‘çš„è§‚ç‚¹ã€‚