# React js â¡ Azure DevOps â¡ Azure App æœåŠ¡

> åŸæ–‡:[https://dev . to/Jakob _ vdh/react-js-azure-devo PS-azure-app-service-56oo](https://dev.to/jakob_vdh/react-js-azure-devops-azure-app-service-56oo)

# [](#how-to-use-azure-devops-to-build-and-deploy-your-react-js-web-app-to-azure)å¦‚ä½•ä½¿ç”¨ Azure DevOps æ„å»ºä½ çš„ React js Web App å¹¶éƒ¨ç½²åˆ° Azure

è¿™ç¯‡æ–‡ç« ä¸€æ­¥ä¸€æ­¥åœ°æŒ‡å¯¼ä½ ä½¿ç”¨ Azure DevOps å°† React js Web App(æˆ–ä»»ä½•å…¶ä»–åŸºäº Node.js çš„ Web App)éƒ¨ç½²åˆ° Azure Web App æœåŠ¡çš„ç®€å•è¿‡ç¨‹ã€‚

## [](#requirements)âœ…è¦æ±‚:

1.  Azure å¸æˆ·([å¦‚æœä½ æ˜¯å­¦ç”Ÿï¼Œè¯·ç‚¹å‡»æ­¤å¤„äº†è§£å¦‚ä½•è·å¾—å…è´¹çš„ Azure èµ„æº](https://link.medium.com/ANGMMY2P5T)
2.  æ­£åœ¨è¿è¡Œçš„ Azure Web åº”ç”¨æœåŠ¡
3.  React Web åº”ç”¨ç¨‹åº
4.  [Azure devo PS æœåŠ¡å¸æˆ·](https://azure.microsoft.com/de-de/services/devops/)

## [](#build-and-deployment)æ„å»ºå’Œéƒ¨ç½²

åœ¨ Azure DevOps é—¨æˆ·ä¸­ï¼Œè½¬åˆ°`Pipelines`é¡µé¢çš„`Builds`é€‰é¡¹å¡ã€‚åœ¨é‚£é‡Œï¼Œæ‚¨å°†çœ‹åˆ°æ‚¨ä»¥å‰æ„å»ºçš„æ¦‚è¿°ï¼Œå¹¶ä¸”ç¨åè¿˜ä¼šçœ‹åˆ°æ‚¨çš„ React Web åº”ç”¨ç¨‹åºæ„å»ºçš„æ„å»ºçŠ¶æ€ã€‚

åˆ›å»ºæ–°çš„æ„å»ºç®¡é“ï¼Œå¹¶é€‰æ‹© web åº”ç”¨ç¨‹åºå­˜å‚¨åº“çš„ä½ç½®/æœåŠ¡ã€‚å¦‚æœæ‚¨æ²¡æœ‰ä½¿ç”¨ Azure Repositoryï¼Œå¹¶ä¸”ä¹‹å‰æ²¡æœ‰æˆæƒæ‚¨çš„è®¿é—®æƒé™ï¼Œæ‚¨å°†å¿…é¡»æˆæƒå¯¹å­˜å‚¨åº“çš„è®¿é—®æƒé™ã€‚

[![Screenshot of the possible repository services](../Images/dc202e27d30d27107fb81a05a52b459f.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--wn99bCPL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://raw.githubusercontent.com/Jakob-vdH/BlogPosts/master/devTo/reactAzureDevOps/media/01-repository.jpg)

ç„¶åä»åˆ—è¡¨ä¸­é€‰æ‹©æ‚¨çš„ web åº”ç”¨ç¨‹åºçš„å­˜å‚¨åº“(åœ¨æˆªå›¾ä¸­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ Azure å­˜å‚¨åº“ï¼Œå› æ­¤è¯¥èœå•çš„å¤–è§‚å¯èƒ½ä¼šå› æ‚¨çš„å­˜å‚¨åº“è€Œå¼‚)ã€‚

[![Screenshot of the menu to choose your single repository](../Images/3c4e4b3f1d8ec06d56b9e31cc5dd3bec.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--6UgNeLax--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://raw.githubusercontent.com/Jakob-vdH/BlogPosts/master/devTo/reactAzureDevOps/media/02-chooseRepo.jpg)

é€‰æ‹©å­˜å‚¨åº“ä¹‹åï¼ŒAzure DevOps è¯•å›¾è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª Yaml æ–‡ä»¶ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒé¦–å…ˆå®šä¹‰äº†æˆ‘ä»¬å°†ä½¿ç”¨å“ªç§ VM æ± æ¥æ„å»ºæˆ‘ä»¬çš„ web åº”ç”¨ç¨‹åºã€‚ç„¶åï¼Œå®ƒå®šä¹‰äº†æˆ‘ä»¬çš„æ„å»ºæ­¥éª¤ï¼Œä»å®‰è£… Node.js å¼€å§‹ï¼Œç»§ç»­å®‰è£…æˆ‘ä»¬çš„ web åº”ç”¨ç¨‹åºçš„ä¾èµ–é¡¹(`npm install`)ï¼Œç„¶åè¿è¡Œæˆ‘ä»¬çš„ web åº”ç”¨ç¨‹åºçš„æ„å»ºå‘½ä»¤(`npm run build`)ã€‚
æœ€ç»ˆï¼Œæ ‡å‡†è¾“å‡ºè¢«è®¾ç½®ä¸ºå½’æ¡£å·¥ä½œç›®å½•ï¼Œæ¢å¥è¯è¯´å°±æ˜¯æˆ‘ä»¬çš„æ„å»ºã€‚

[![Screenshot of the automatically generated azure-pipelines Yaml file](../Images/3bef21b85c4ecceec8b10d8da08b45b1.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--LZ2r51hT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://raw.githubusercontent.com/Jakob-vdH/BlogPosts/master/devTo/reactAzureDevOps/media/03-yaml1.jpg)

æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç›´æ¥è§¦å‘ Azure Web App æœåŠ¡çš„éƒ¨ç½²ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†æœ€åä¸€ä¸ªä»»åŠ¡æ”¹ä¸º:

```
- task: AzureRmWebAppDeployment@3
  displayName: 'Azure App Service Deploy: <YourWebAppNameHere>'
  inputs:
    azureSubscription: <YourAzureSubscriptionId>
    WebAppName: <YourWebAppNameHere>
    Package: '$(System.DefaultWorkingDirectory)/build' 
```

ä½ ä»ç„¶éœ€è¦è¾“å…¥ä½ çš„ Azure è®¢é˜… Id å’Œä½ çš„ web åº”ç”¨çš„åç§°ï¼Œè¿™æ · Azure DevOps å°±çŸ¥é“ä½ æƒ³åœ¨å“ªé‡Œéƒ¨ç½²è¿™ä¸ªç‰ˆæœ¬ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨æœ€åä¸€è¡Œå®šä¹‰äº†æˆ‘ä»¬çš„æ„å»ºæ‰€åœ¨çš„ä½ç½®ï¼Œä»¥ç¡®ä¿åªéƒ¨ç½²æˆ‘ä»¬çš„æœ€ç»ˆæ„å»ºã€‚

[![Screenshot of the edited azure-pipelines Yaml to deploy to Azure file](../Images/b6769aed85ebcaa99f136a7db16b4b03.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--BPnV0aZb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://raw.githubusercontent.com/Jakob-vdH/BlogPosts/master/devTo/reactAzureDevOps/media/03-yaml2.jpg)

æ‚¨åˆšåˆšåˆ›å»ºçš„ Yaml æ–‡ä»¶å°†ä½œä¸º`azure-pipelines.yml`æ·»åŠ åˆ°å­˜å‚¨åº“ä¸­ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨éœ€è¦é…ç½®é¢å¤–çš„æ­¥éª¤ï¼Œæ¯”å¦‚æµ‹è¯•ï¼Œæ‚¨åªéœ€ç¼–è¾‘å­˜å‚¨åº“ä¸­çš„ Yaml æ–‡ä»¶ã€‚æ­¤å¤–ï¼Œå¦‚æœä½ åœ¨ Azure DevOps ä¸­åœ¨çº¿ç¼–è¾‘æ–‡ä»¶ï¼Œå®ƒä¼šå‘ä½ æ˜¾ç¤ºè¦æ·»åŠ çš„ä»»åŠ¡åˆ—è¡¨ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ UI é…ç½®æ¯ä¸ªä»»åŠ¡ã€‚

[![Screenshot of the task list provided by Azure DevOps](../Images/5f96c11051bade03280220dbba7ee250.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--K5RqOUGM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://raw.githubusercontent.com/Jakob-vdH/BlogPosts/master/devTo/reactAzureDevOps/media/04-deploy1.jpg)

[![Screenshot of deploy to Azure task configuration using a GUI](../Images/5bad768c4f88c8c8c678941efbc1a8c4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--DIthTSxO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://raw.githubusercontent.com/Jakob-vdH/BlogPosts/master/devTo/reactAzureDevOps/media/04-deploy2.jpg)

å½“ç„¶ï¼Œæ‚¨å¯ä»¥(å¯¹äºæ›´å¤§çš„é¡¹ç›®åº”è¯¥)æ˜ç¡®åœ°åˆ’åˆ†æ„å»ºå’Œéƒ¨ç½²ã€‚ç°åœ¨ï¼Œæ¯å½“æ‚¨å°†æ–°çš„æäº¤åˆå¹¶åˆ°æ‚¨çš„ç”Ÿäº§åˆ†æ”¯æ—¶ï¼Œéƒ½ä¼šè§¦å‘ä¸€ä¸ªæ–°çš„æ„å»ºã€‚

[![Screenshot of an automatically triggered build](../Images/7b453a6347ee9c1334288457b9fa8525.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Y-QJ91jc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://raw.githubusercontent.com/Jakob-vdH/BlogPosts/master/devTo/reactAzureDevOps/media/05-trigger.jpg)

è¿™å°±æ˜¯è¿è¡ŒåŸºæœ¬çš„æ„å»ºå’Œéƒ¨ç½²æµç¨‹æ‰€éœ€è¦åšçš„ä¸€åˆ‡ï¼Œç¥æ‚¨æ„‰å¿«ï¼ğŸ±â€ğŸ’»