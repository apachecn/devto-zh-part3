# ä»€ä¹ˆæ˜¯çº¢ç»¿é‡æ„å‘¨æœŸ

> åŸæ–‡:[https://dev . to/ellehallal/what-the-red-green-refactor-cycle-2n9i](https://dev.to/ellehallal/what-is-the-red-green-refactor-cycle-2n9i)

<center>

### æœ€åˆå‘å¸ƒäº [ellehallal.dev](https://ellehallal.dev) ğŸ‘©ğŸ½â€ğŸ’»

</center>

* * *

æœ¬å‘¨ï¼Œæˆ‘ç»§ç»­ä½¿ç”¨æµ‹è¯•é©±åŠ¨å¼€å‘ï¼Œç”¨ Ruby åˆ›å»ºäº†ä¸€ä¸ªäººå¯¹äºº[çš„äº•å­—æ¸¸æˆã€‚æˆ‘ä¹Ÿä¸€ç›´åœ¨åŠªåŠ›ç†Ÿæ‚‰ä¸€äº›åŸåˆ™å’Œè§„åˆ™ï¼Œæ¯”å¦‚åšå®çš„åŸåˆ™å’Œç®€å•è®¾è®¡çš„å››æ¡è§„åˆ™ã€‚](https://github.com/ellehallal/ruby-tic-tac-toe)

å½“åˆ›å»ºäº•å­—æ¸¸æˆæ—¶ï¼Œæµ‹è¯•é©±åŠ¨å¼€å‘å¸®åŠ©æˆ‘å°†æ¸¸æˆåˆ†è§£æˆå°å—ã€‚æˆ‘è¿˜æœ‰ä¸€æ®µè·¯è¦èµ°ï¼Œä½†æ˜¯çº¢è‰²ã€ç»¿è‰²çš„é‡æ„å‘¨æœŸæ­£åœ¨å¸®åŠ©æˆ‘å†™å‡ºæ›´å¹²å‡€çš„ä»£ç ã€‚

* * *

## [](#red-green-refactor-cycle)çº¢è‰²ï¼Œç»¿è‰²ï¼Œé‡æ„å¾ªç¯

### [](#red)çº¢è‰²

*çº¢è‰²*é˜¶æ®µæ„å‘³ç€åº”è¯¥ç¼–å†™ä¸€ä¸ªæµ‹è¯•ï¼Œå®ƒåº”è¯¥å¤±è´¥ã€‚è¿™æ„å‘³ç€è¿˜æ²¡æœ‰ç¼–å†™ä»»ä½•ä¸æµ‹è¯•ç›¸å…³çš„ä»£ç ã€‚æ­¤å¤–ï¼Œè¿è¡Œæµ‹è¯•ä»¥ç¡®ä¿å¤±è´¥ä¹Ÿå¾ˆé‡è¦ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªæµ‹è¯•æˆ‘çš„äº•å­—æ¸¸æˆçš„ä¾‹å­:

```
it 'returns false if there are available spaces on the board' do
  board = Board.new([1, 2, 3, 'x', 5, 6, 7, 8, 9])
  expect(board.complete?).to be false
end 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#green)ç»¿è‰²

ç»¿è‰²çš„é˜¶æ®µæ„å‘³ç€ä»£ç åº”è¯¥é€šè¿‡æµ‹è¯•ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œä»£ç ä¸éœ€è¦æœ€å¹²å‡€ï¼Œåªè¦èƒ½è®©æµ‹è¯•é€šè¿‡å°±è¡Œã€‚

é€šè¿‡ä¸Šè¿°æµ‹è¯•çš„æœ€ç®€å•æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªåä¸º completeï¼Ÿï¼Œå®ƒåªè¿”å› falseã€‚ä¸‹é¢æ˜¯æˆ‘æœ€åˆçš„å°è¯•ï¼Œé€šè¿‡äº†æµ‹è¯•:

```
def complete?
  available_squares = @squares.count { |square| square.is_a? Integer }
  available_squares == 0
end 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#refactor)é‡æ„

*é‡æ„*é˜¶æ®µæŒ‡çš„æ˜¯ç¼–å†™ä¸€ä¸ªæ›´å¹²å‡€çš„ä»£ç ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä»ç„¶é€šè¿‡æµ‹è¯•ã€‚åœ¨ Sandi Metz å…³äº[å¯é çš„é¢å‘å¯¹è±¡è®¾è®¡](https://www.youtube.com/watch?v=v-2yFMzxqwU)çš„æ¼”è®²ä¸­ï¼Œé‡æ„æ—¶éœ€è¦è€ƒè™‘å¾ˆå¤šå› ç´ :

*   æ˜¯å¹²çš„å—ï¼Ÿ

*   å®ƒæœ‰å•ä¸€çš„è´£ä»»å—ï¼Ÿ

*   é‡Œé¢çš„ä¸€åˆ‡éƒ½ä»¥åŒæ ·çš„é€Ÿåº¦å˜åŒ–å—ï¼Ÿ

*   å®ƒæ˜¯å¦ä¾èµ–äºå˜åŒ–é¢‘ç‡æ¯”å®ƒä½çš„äº‹ç‰©ï¼Ÿ

çœ‹ä¸Šé¢çš„æ–¹æ³•ï¼Œæ˜¾å¾—å¹²å·´å·´çš„ã€‚ç„¶è€Œï¼Œå®ƒç¡®å®æœ‰ä¸æ­¢ä¸€ä¸ªè´£ä»»ã€‚

*   è®¡ç®—å¯ç”¨æ–¹å—çš„æ•°é‡

*   æ ¹æ®å¯ç”¨æ–¹å—çš„æ•°é‡è¿”å›çœŸæˆ–å‡

æˆ‘çš„ç†è§£æ˜¯åº”è¯¥æœ‰ä¸¤ç§ä¸åŒçš„æ–¹æ³•ã€‚è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œåˆ›å»ºäº†å¦ä¸€ä¸ªæµ‹è¯•æ¥æµ‹è¯•è®¡ç®—å¯ç”¨æ–¹å—æ•°é‡çš„æ–¹æ³•ã€‚ç›¸å…³ä»£ç æ˜¯å¦å®Œæ•´ï¼Ÿè¢«æå–å¹¶æ·»åŠ åˆ°æ–°æ–¹æ³•:

```
//test
it 'returns the amount of available squares' do
  board = Board.new(['x', 2, 'o', 4, 5, 6, 7, 8, 9])
  expect(board.available_squares).to eq(7)
end

//method
def available_squares
  @squares.count { |square| square.is_a? Integer }
end 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é‡æ„åçš„`complete?`æ–¹æ³•ç°åœ¨åªåšä¸€ä»¶äº‹:æ ¹æ®å¯ç”¨æ–¹å—çš„æ•°é‡è¿”å› true æˆ– falseã€‘

```
def complete?
  available_squares.zero?
end 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨æ•´ä¸ªäº•å­—æ¸¸æˆä¸­åšæŒå•ä¸€è´£ä»»åŸåˆ™ï¼Œæˆ‘è¿˜æœ‰ä¸€æ®µè·¯è¦èµ°ã€‚éµå¾ªçº¢è‰²ã€ç»¿è‰²ã€é‡æ„å¾ªç¯å’Œé‡æ„è¦ç‚¹æœ‰åŠ©äºåº”ç”¨è¿™ä¸€åŸåˆ™ã€‚

* * *

## [](#helpful-resources)æœ‰ç”¨èµ„æº:

*   [Sandi Metzâ€”â€”å›ºä½“é¢å‘å¯¹è±¡è®¾è®¡](https://youtu.be/v-2yFMzxqwU)
*   [è´å…‹è®¾è®¡è§„åˆ™](https://martinfowler.com/bliki/BeckDesignRules.html)
*   [TDD çš„å‘¨æœŸ](https://blog.cleancoder.com/uncle-bob/2014/12/17/TheCyclesOfTDD.html)