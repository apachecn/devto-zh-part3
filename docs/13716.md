# æ ¹æ®é¢„ç®—ä»å¤šä¸ªä½ç½®è¡¡é‡ç½‘ç«™çš„æ€§èƒ½

> åŸæ–‡:[https://dev . to/goening/measuring-the-performance-of-a-locations-on-a-budget-1h 52](https://dev.to/goenning/measuring-the-performance-of-a-website-from-multiple-locations-on-a-budget-1h52)

## [](#global-metrics-for-websites-with-global-visitors)å…¨çƒè®¿é—®è€…ç½‘ç«™çš„å…¨çƒæŒ‡æ ‡

åœ¨å½“å‰äº’è”ç½‘çš„å…¨çƒè§„æ¨¡ä¸‹ï¼Œä»å…¨çƒå¤šä¸ªä½ç½®æµ‹é‡ç½‘ç«™çš„æ€§èƒ½è‡³å…³é‡è¦ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ çš„è®¿å®¢ä¸ä»…æ¥è‡ªä½ çš„å›½å®¶ï¼Œè¿˜æ¥è‡ªå…¶ä»–å›½å®¶ã€‚ä»åŠ æ‹¿å¤§åˆ°æ¾³å¤§åˆ©äºšï¼Œä»æ™ºåˆ©åˆ°ä¿„ç½—æ–¯ï¼Œè®¿é—®ä½ çš„ç½‘ç«™çš„äººæ¯”ä½ æƒ³è±¡çš„è¦å¤šã€‚

äººä»¬å¾ˆå®¹æ˜“å¿˜è®°è¿™ä¸€äº‹å®ï¼Œç®€å•åœ°ä»æœ¬åœ°æœºå™¨ä¸Šæµ‹é‡ç½‘ç«™çš„æ€§èƒ½ï¼Œå› ä¸ºæœ¬åœ°æœºå™¨é€šå¸¸é è¿‘ç½‘ç«™æ•°æ®ä¸­å¿ƒã€‚ä¸ä»…å¦‚æ­¤ï¼Œè¿™å°æœºå™¨å¯èƒ½ä¹Ÿæ˜¯ä¸€å¤´é‡å…½ï¼Œå®ƒå¯ä»¥åœ¨åŠç§’é’Ÿå†…æ‰“å¼€è°·æ­Œ Chrome çš„å¤šä¸ªæ ‡ç­¾ï¼ŒåŠ è½½ä»»ä½•å«æœ‰å¤§é‡ JavaScript çš„é¡µé¢ã€‚

ä½†å®é™…ä¸Šï¼Œæ‚¨çš„è®¿é—®è€…ä½¿ç”¨çš„æ˜¯ 10 å¹´å‰çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œå®‰è£…çš„æ˜¯ Windows 7ï¼Œå¹¶é€šè¿‡ 3G ç½‘ç»œè¿æ¥åˆ°äº’è”ç½‘ã€‚æ‚¨çš„æ•°æ®ä¸­å¿ƒä½äºæ—§é‡‘å±±ï¼Œè¿™äº›è®¿é—®è€…æ¥è‡ªè²å¾‹å®¾ã€‚ç”šè‡³ä½ çš„æ™ºèƒ½æ‰‹æœºä¹Ÿæ¯”ä»–ä»¬çš„é€Ÿåº¦å¿« 10 å€ï¼Œå»¶è¿Ÿæ›´ä½ã€‚

æœ‰è®¸å¤šä»˜è´¹æœåŠ¡å¯ä»¥è®©ä½ ä»ä¸–ç•Œå„åœ°çš„å¤šä¸ªåœ°æ–¹æŒç»­ç›‘æ§ä½ çš„ç½‘ç«™æ€§èƒ½ã€‚

ä½†ä¹Ÿè®¸ä½ æ˜¯ä¸ªæå®¢ï¼Œæƒ³è‡ªå·±åŠ¨æ‰‹ï¼Ÿ

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³å‘ä½ å±•ç¤ºå¦‚ä½•ä½¿ç”¨å¼€æºå·¥å…·ä»¥è¾ƒä½çš„æœˆæˆæœ¬ä»å¤šä¸ªåœ°ç‚¹æ”¶é›†ç½‘ç«™æ€§èƒ½ã€‚

## [](#webpagetiming)ç½‘é¡µ-è®¡æ—¶

[goenning/ç½‘é¡µè®¡æ—¶](https://github.com/goenning/webpage-timing)æ˜¯ Node.js åº”ç”¨ç¨‹åºï¼Œä½¿ç”¨ Headless Chrome ä»ç½‘é¡µæ”¶é›†æ€§èƒ½æŒ‡æ ‡ã€‚

è¿™ä¸ªåº”ç”¨ç¨‹åºä¹Ÿå¯ä»¥ä½œä¸º Docker é•œåƒä½¿ç”¨ï¼Œæ‰€ä»¥ä½ å¯ä»¥è¿™æ ·è¿è¡Œå®ƒ:

```
$ docker run goenning/webpage-timing 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç»§ç»­ï¼Œè¯•ä¸€è¯•ï¼Œåœ¨ä½ çš„ç»ˆç«¯ä¸Šæ‰§è¡Œè¿™ä¸ªã€‚

æ‚¨åº”è¯¥ä¼šå¾—åˆ°ç±»ä¼¼å¦‚ä¸‹çš„å“åº”:

```
{  "start":  "2019-02-10T16:32:25.655Z",  "start_ts":  1549816345655,  "duration":  430,  "origin":  "iMac.local",  "request_url":  "https://example.org",  "metrics":  {  "Timestamp":  300473.456095,  "Documents":  2,  "Frames":  1,  "JSEventListeners":  0,  "Nodes":  39,  "LayoutCount":  1,  "RecalcStyleCount":  2,  "LayoutDuration":  0.053402,  "RecalcStyleDuration":  0.000584,  "ScriptDuration":  0.000015,  "TaskDuration":  0.068091,  "JSHeapUsedSize":  2108152,  "JSHeapTotalSize":  3936256  },  "entries":  [  {  "name":  "https://example.org/",  "entryType":  "navigation",  "startTime":  0,  "duration":  427.6149999932386,  "initiatorType":  "navigation",  "nextHopProtocol":  "h2",  "workerStart":  0,  "redirectStart":  0,  "redirectEnd":  0,  "fetchStart":  0.2899999963119626,  "domainLookupStart":  7.634999987203628,  "domainLookupEnd":  8.984999964013696,  "connectStart":  8.984999964013696,  "connectEnd":  313.34999995306134,  "secureConnectionStart":  0,  "requestStart":  313.6149999918416,  "responseStart":  414.7049999446608,  "responseEnd":  415.8099999767728,  "transferSize":  800,  "encodedBodySize":  606,  "decodedBodySize":  1270,  "serverTiming":  [],  "unloadEventStart":  0,  "unloadEventEnd":  0,  "domInteractive":  426.6899999929592,  "domContentLoadedEventStart":  426.7049999907613,  "domContentLoadedEventEnd":  426.7049999907613,  "domComplete":  427.6049999753013,  "loadEventStart":  427.6149999932386,  "loadEventEnd":  427.6149999932386,  "type":  "navigate",  "redirectCount":  0  },  {  "name":  "first-paint",  "entryType":  "paint",  "startTime":  491.65999999968335,  "duration":  0  },  {  "name":  "first-contentful-paint",  "entryType":  "paint",  "startTime":  491.68499995721504,  "duration":  0  }  ]  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ˜¯ä¸€ä¸ª`Timing`å¯¹è±¡ï¼Œå®ƒåŒ…å«ä¸€äº›ä»å®¹å™¨å†…éƒ¨æ‰§è¡Œçš„æ— å¤´ Chrome æ”¶é›†çš„ä¿¡æ¯ã€‚ä¸Šä¾‹ä¸­ï¼ŒåŠ è½½ https://example.org**[ç”¨äº† **430ms** ã€‚å¦‚æœè¿™ä¸ªé¡µé¢æœ‰ CSS/JavaScript/Image æ–‡ä»¶ï¼Œå®ƒä¹Ÿä¼šä¸‹è½½å®ƒï¼Œå¹¶ä¸”æŒç»­æ—¶é—´ä¼šæ›´é•¿ã€‚](https://example.org)**

æ‚¨è¿˜å¯ä»¥æŒ‡å®šä¸€äº›è‡ªå®šä¹‰å‚æ•°ï¼Œè¿™å…è®¸æ‚¨ä»ä»»ä½•é¡µé¢æ”¶é›†æŒ‡æ ‡ã€‚

```
$ docker run -e REQUEST_URL=https://github.com/docker goenning/webpage-timing 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨è¿˜ä¼šæ³¨æ„åˆ°,`entries`æ•°ç»„ç°åœ¨æœ‰äº†æ›´å¤šçš„æ¡ç›®ï¼ŒåŒ…æ‹¬æµè§ˆå™¨å¿…é¡»ä¸‹è½½çš„æ‰€æœ‰ CSS/JavaScript/Image æ–‡ä»¶ã€‚

å¦ä¸€ä¸ªæœ‰ç”¨çš„å‚æ•°æ˜¯`MONGO_URL`ï¼Œå®ƒå…è®¸æ‚¨å°†`Timing`å¯¹è±¡å­˜å‚¨åˆ° MongoDB é›†åˆä¸­ï¼Œè€Œä¸æ˜¯æ‰“å°åˆ° stdoutã€‚å½“æ‚¨æƒ³è¦ä¿å­˜ä¸€æ®µæ—¶é—´å†…çš„æ‰§è¡Œå†å²å¹¶æ‰§è¡Œè¿›ä¸€æ­¥çš„åˆ†ææ—¶ï¼Œè¿™æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚

```
# Replace the connection string below with your own
$ docker run -e MONGO_URL=mongodb://user:pass@your-server:port/db -e REQUEST_URL=https://github.com/docker goenning/webpage-timing 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#running-it-on-a-global-infrastructure)åœ¨å…¨çƒåŸºç¡€è®¾æ–½ä¸Šè¿è¡Œ it

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æœ¬åœ° Docker å®¹å™¨ä» web é¡µé¢æ”¶é›†æŒ‡æ ‡ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ MongoDB ä¸­ã€‚

ä¸ºäº†æ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨äº‘ä¸Šçš„æœºå™¨ä»å¤šä¸ªåŒºåŸŸè¿è¡Œè¿™ä¸ªå®¹å™¨ã€‚æ‚¨å¯ä»¥åœ¨æ‚¨å–œæ¬¢çš„äº‘æä¾›å•†ä¸Šå¯åŠ¨å¤šä¸ªè™šæ‹Ÿæœºï¼Œå¹¶åœ¨ cron ä¸Šè°ƒåº¦è¿™ä¸ªè„šæœ¬ã€‚ä½†è¿™å¹¶ä¸ååˆ†ç»æµé«˜æ•ˆï¼Œè€Œä¸”æ‚¨è¿˜å¿…é¡»æ‰¿æ‹…ç»´æŠ¤æ•°åå°è™šæ‹Ÿæœºçš„è´Ÿæ‹…ã€‚

ä½†æ˜¯æœ‰æ›´å¥½çš„æ–¹æ³•ğŸ˜€

Azure æœ‰ä¸€ä¸ªåä¸º [Azure å®¹å™¨å®ä¾‹](https://azure.microsoft.com/en-us/services/container-instances/)çš„æœåŠ¡ã€‚å®ƒå…è®¸æ‚¨åœ¨äº‘ä¸Šè¿è¡Œ Docker å®¹å™¨ï¼Œè€Œä¸å¿…æ‹…å¿ƒå®ƒèƒŒåçš„åŸºç¡€è®¾æ–½ã€‚æœ€æ£’çš„ï¼Ÿä½ åªéœ€æŒ‰æ‰§è¡Œæ—¶é—´ä»˜è´¹ã€‚å¦‚æœä½ å¯åŠ¨ä¸€ä¸ªè¿è¡Œ 5 ç§’é’Ÿçš„å®¹å™¨ï¼Œä½ å°†æ”¯ä»˜ 0.000080 ç¾å…ƒã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•åœ¨ Azure ä¸Šæ‰§è¡Œè¿™ä¸ªæ“ä½œï¼Œä½†æ˜¯å¦‚æœä½ æ›´å–œæ¬¢ AWSï¼Œæœç´¢`AWS Fargate`ï¼Œè¿™æ˜¯ä¸€ä¸ªç±»ä¼¼çš„æœåŠ¡ï¼Œæ‰€ä»¥ä½ å¯ä»¥åº”ç”¨è¿™é‡Œæå‡ºçš„ç›¸åŒçš„æƒ³æ³•ã€‚

æˆ‘ä»¬è¦åšçš„æ˜¯åœ¨ 17 ä¸ªåŒºåŸŸä¸­çš„æ¯ä¸€ä¸ªåŒºåŸŸåˆ›å»ºå‡ åä¸ª Azure å®¹å™¨å®ä¾‹ï¼Œå¹¶é…ç½®å®ƒä½¿ç”¨æˆ‘ä»¬çš„è‡ªå®šä¹‰å‚æ•°æ‰§è¡Œ`goenning/webpage-timing`ã€‚æˆ‘ä»¬è¿˜éœ€è¦å­˜å‚¨æ‰€æœ‰ä½ç½®çš„æ•°æ®ï¼Œä»¥ä¾¿ä»¥åæŸ¥è¯¢ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘å°†ä½¿ç”¨ [MongoDB Atlas](https://www.mongodb.com/cloud/atlas) ï¼Œå› ä¸ºå®ƒæœ‰ä¸€ä¸ªå…è´¹å±‚ï¼Œä¹Ÿå¯ä»¥æ‰˜ç®¡åœ¨ Azure ä¸Šã€‚

å‡è®¾æ‚¨æœ‰ä¸€ä¸ª Azure å¸æˆ·ï¼Œå¹¶ä¸”å®‰è£…äº† [Azure CLI](https://docs.microsoft.com/en-us/cli/azure/install-azure-cli) ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚

```
$ az login
$ az account set --subscription "<YOUR_SUBSCRIPTION NAME>" # you can skip this if your account has only one subscription 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åˆ›å»ºä¸€ä¸ªåŒ…å«ä»¥ä¸‹å†…å®¹çš„æ–‡ä»¶ã€T0:ã€‘T1

```
apiVersion: 2018-06-01
type: Microsoft.ContainerInstance/containerGroups
location: $location$
name: $name$
properties:
  containers:
  - name: $name$-01
    properties:
      image: goenning/webpage-timing
      environmentVariables:
        - name: 'ORIGIN'
          value: '$location$'
        - name: 'REQUEST_URL'
          value: '$request_url$'
        - name: 'MONGO_URL'
          secureValue: '$mongo_url$'
      resources:
        requests:
          cpu: 0.4
          memoryInGb: 0.7
  - name: $name$-02
    properties:
      image: goenning/webpage-timing
      environmentVariables:
        - name: 'ORIGIN'
          value: '$location$'
        - name: 'REQUEST_URL'
          value: '$request_url$'
        - name: 'MONGO_URL'
          secureValue: '$mongo_url$'
      resources:
        requests:
          cpu: 0.4
          memoryInGb: 0.7
  - name: $name$-03
    properties:
      image: goenning/webpage-timing
      environmentVariables:
        - name: 'ORIGIN'
          value: '$location$'
        - name: 'REQUEST_URL'
          value: '$request_url$'
        - name: 'MONGO_URL'
          secureValue: '$mongo_url$'
      resources:
        requests:
          cpu: 0.4
          memoryInGb: 0.7
  - name: $name$-04
    properties:
      image: goenning/webpage-timing
      environmentVariables:
        - name: 'ORIGIN'
          value: '$location$'
        - name: 'REQUEST_URL'
          value: '$request_url$'
        - name: 'MONGO_URL'
          secureValue: '$mongo_url$'
      resources:
        requests:
          cpu: 0.4
          memoryInGb: 0.7
  - name: $name$-05
    properties:
      image: goenning/webpage-timing
      environmentVariables:
        - name: 'ORIGIN'
          value: '$location$'
        - name: 'REQUEST_URL'
          value: '$request_url$'
        - name: 'MONGO_URL'
          secureValue: '$mongo_url$'
      resources:
        requests:
          cpu: 0.4
          memoryInGb: 0.7
  osType: Linux
  restartPolicy: OnFailure 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯¥æ¨¡æ¿å°†è¢«åŠ è½½åˆ° Azure å®¹å™¨æœåŠ¡ä¸­ï¼Œå®ƒå°†ä½¿ç”¨ç›¸åŒçš„å›¾åƒå’Œå‚æ•°åˆ›å»º 5 ä¸ªå®¹å™¨ã€‚å®ƒè¿˜è¢«é…ç½®ä¸ºä½¿ç”¨é«˜è¾¾ 0.4 çš„ CPU å’Œä»… 700MB çš„å†…å­˜ã€‚

åˆ›å»ºå¦ä¸€ä¸ªæ–‡ä»¶`aci.sh`ï¼Œå†…å®¹å¦‚ä¸‹:

```
# The name of the resource group to be used on Azure
resource_group="webtiming-rg"

# The list of locations from where the test will be executed
locations=( "westus" "eastus" "westeurope" "westus2" "northeurope" "southeastasia" "eastus2" "centralus" "australiaeast" "uksouth" "southcentralus" "centralindia" "southindia" "northcentralus" "eastasia" "canadacentral" "japaneast" )

# The URL of the webpage we want to test
request_url="https://github.com/docker"

# The connection string to a MongoDB instance
mongo_url="mongodb+srv://webtiming:webtiming@cluster0-s5g8l.azure.mongodb.net/webtiming?retryWrites=true"

if [ $1 == "init" ]
then az group create --name $resource_group --location eastus
fi

if [ $1 == "run" ]
then rm -rf ./out
  mkdir ./out
  for loc in "${locations[@]}"
  do cat ./template.yaml | 
    sed 's|\$name\$|'$loc'-wt|' | 
    sed 's|\$request_url\$|'$request_url'|' | 
    sed 's|\$location\$|'$loc'|' | 
    sed 's|\$mongo_url\$|'$mongo_url'|' | 
    sed 's|\$location\$|'$loc'|' > "./out/$loc-wt.yaml"

    status=$(az container show -n $loc-wt --resource-group $resource_group --query containers[0].instanceView.currentState.state 2>/dev/null)
    if [ $? -eq 0 ]
    then az container start -g $resource_group --name "$loc-wt" &
      echo "$loc-wt has started..."
    else az container create -g $resource_group --location $loc --file "./out/$loc-wt.yaml" --no-wait
      echo "$loc-wt has been created..."
    fi
  done
fi

if [ $1 == "clean" ]
then az group delete --name $resource_group --yes
fi 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç¬¬ä¸€è¡Œæ˜¯å‚æ•°ï¼Œæ ¹æ®ç»™å®šçš„æ³¨é‡Šè¿›è¡Œé…ç½®å¹¶æ‰§è¡Œ:

```
$ ./aci.sh init 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç¬¬ä¸€æ­¥åªæ˜¯æ ¹æ®é…ç½®çš„åç§°åˆ›å»ºä¸€ä¸ªèµ„æºç»„ã€‚å¦‚æœæ‚¨å–œæ¬¢é€šè¿‡ Azure Portal æ‰‹åŠ¨å®Œæˆï¼Œå¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ã€‚

```
$ ./aci.sh run 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ˜¯å‰§æœ¬æœ€é‡è¦çš„éƒ¨åˆ†ã€‚å®ƒåŸºæœ¬ä¸Šä¼šéå†æ¯ä¸ªå·²é…ç½®çš„ä½ç½®ï¼Œå¹¶åŸºäº`template.yaml`åˆ›å»ºä¸€ä¸ª YAML æ–‡ä»¶ã€‚

åœ¨æ‰§è¡Œç»“æŸæ—¶ï¼Œæ‚¨åº”è¯¥åœ¨ Azure é—¨æˆ·ä¸Šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹ã€‚

[![](../Images/0c4c52d1f52a6d71d1d1c1ccc5f4ff22.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--5A1QDkI2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/nuxlgkp14rcr0pohjys5.png)

è¯·æ³¨æ„ï¼Œæœ‰ 17 ä¸ªå®¹å™¨ç»„(æ¯ä¸ªåŒºåŸŸä¸€ä¸ª)ï¼Œæ¯ä¸ªç»„æœ‰ 5 ä¸ªå®¹å™¨ã€‚å…¶ä¸­ä¸€äº›å·²ç»å®Œæˆå¤„ç†ï¼Œè€Œå¦ä¸€äº›ä»åœ¨è¿›è¡Œä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹å¯èƒ½éœ€è¦é¢å¤–çš„å‡ ç§’é’Ÿï¼Œå› ä¸º Azure éœ€è¦é¦–å…ˆä» Docker Hub Registry è·å–å›¾åƒã€‚

å‡ ç§’é’Ÿåï¼Œæ‰€æœ‰ç»„éƒ½åº”å¤„äºâ€œæˆåŠŸâ€çŠ¶æ€ã€‚åœ¨æ­¤è¿‡ç¨‹ç»“æŸæ—¶ï¼Œè¿™äº›å®ä¾‹å°†ä¿ç•™åœ¨ Azure ä¸Šï¼Œç›´åˆ°æ‚¨å°†å…¶åˆ é™¤ã€‚æ‚¨å¯ä»¥é€šè¿‡æ‰§è¡Œ`./aci.sh clean`æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¿™å°†åˆ é™¤èµ„æºç»„åŠå…¶æ‰€æœ‰å®¹å™¨å®ä¾‹ã€‚

ä½†æ˜¯å¦‚æœä½ è®¡åˆ’å®šæœŸæ‰§è¡Œè¿™ä¸ªï¼Œä½ å¯ä»¥ä¿ç•™ Azure ä¸Šçš„èµ„æºï¼Œç„¶åç®€å•åœ°å†æ¬¡æ‰§è¡Œ`./aci.sh run`ã€‚å¦‚æœå®¹å™¨å·²ç»å­˜åœ¨äº Azure ä¸Šï¼Œè¿™ä¸ªè„šæœ¬è¶³å¤Ÿæ™ºèƒ½æ¥é‡å¯å®¹å™¨ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦å¤šæ¬¡é‡å¤æ­¤è¿‡ç¨‹ã€‚

## [](#the-results)ç»“æœ

æˆ‘ä»¬ç°åœ¨åº”è¯¥åœ¨ MongoDB æ•°æ®åº“ä¸Šæœ‰ä¸€äº›æ–‡æ¡£ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨å¯ä»¥æŸ¥çœ‹æ•°æ®å¹¶æ‰§è¡Œä¸€äº›åˆ†æã€‚æˆ‘ä»¬å¯ä»¥å°†ä»»ä½• BI å·¥å…·è¿æ¥åˆ°è¿™ä¸ª MongoDB å®ä¾‹ï¼Œæå–æ•°æ®å¹¶ç»˜åˆ¶ä¸€äº›å›¾è¡¨ã€‚

ä½†æ˜¯è¿˜æœ‰ [MongoDB å›¾è¡¨](https://www.mongodb.com/products/charts)ï¼Œè¿™æ˜¯ä¸€ä¸ªæ•°æ®å¯è§†åŒ–å·¥å…·ï¼Œç”¨äºåˆ›å»ºæˆ‘ä»¬çš„ MongoDB æ•°æ®çš„å¯è§†åŒ–è¡¨ç¤ºã€‚åœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œè¿™é¡¹æœåŠ¡è¿˜åœ¨æµ‹è¯•é˜¶æ®µï¼Œå¯ä»¥å…è´¹ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘å†³å®šè¯•ä¸€è¯•ã€‚è¿™æ˜¯æˆ‘ä»è¡Œåˆ‘ä¸­å¾—åˆ°çš„ã€‚

[![](../Images/4db7507901731297a3bb4ea4cee8edaf.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--aixEo8ev--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/fjhtfqpbiw8c3ratdx82.png)

æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬æ”¶é›†äº† 595 ä¸ªè®¡æ—¶ï¼Œå…¨çƒå¹³å‡å€¼ä¸º 4165 æ¯«ç§’ã€‚å›¾è¡¨æ˜¾ç¤ºäºšæ´²äººåŠ è½½`https://github.com/docker`æ¯”ç¾å›½äººæ…¢ 2 ç§’ã€‚

æ‚¨å¯ä»¥æ›´è¿›ä¸€æ­¥ï¼Œå®é™…åˆ†æ`entries`æ•°ç»„ï¼Œæ‰¾å‡ºå“ªäº› HTTP èµ„æºéœ€è¦æ›´é•¿çš„åŠ è½½æ—¶é—´ã€‚

## [](#where-to-go-from-here)ä½•å»ä½•ä»ï¼Ÿ

å¦‚æœä½ å–œæ¬¢è¿™ä¸ªï¼Œå¹¶æƒ³è®©å®ƒæ›´ä¸Šä¸€å±‚æ¥¼ï¼Œè¿™é‡Œæœ‰ä¸€äº›æƒ³æ³•:

1.  è®¡åˆ’æ­¤è„šæœ¬æ¯ X å°æ—¶æ‰§è¡Œä¸€æ¬¡
2.  ç¼©å° Docker å›¾åƒå°ºå¯¸ã€‚å›¾åƒè¶Šå°ï¼Œåœ¨äº‘ä¸Šæ‰§è¡Œçš„é€Ÿåº¦å°±è¶Šå¿«ï¼Œè¿™æ„å‘³ç€è¶Šå°‘ğŸ’¸
3.  åˆ†å‰é¡¹ç›®ï¼Œç”¨ä½ éœ€è¦çš„é¢å¤–æ—¶é—´ä¿¡æ¯å¢å¼ºå®ƒ
4.  ä½¿ç”¨æœ¨å¶å¸ˆæ¥æ¨¡æ‹Ÿä¸€ä¸ªè¾ƒæ…¢çš„ç½‘ç»œå’Œ CPU
5.  å°†è„šæœ¬æ›´æ”¹ä¸ºå¤šæ­¥éª¤æµç¨‹ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªç”µå­å•†åŠ¡ï¼Œä½ æƒ³è¡¡é‡ä¸€ä¸ªç”¨æˆ·æ‰¾åˆ°ä¸€ä¸ªäº§å“å¹¶è´­ä¹°å®ƒéœ€è¦å¤šé•¿æ—¶é—´ã€‚æ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªè„šæœ¬ä½œä¸ºèµ·ç‚¹ï¼Œå¹¶åŒ…æ‹¬è¿™ä¸ªè¿‡ç¨‹çš„é¢å¤–æ­¥éª¤
6.  å°½æƒ…å‘æŒ¥ï¼Œåœ¨æ¯ä¸ªåœ°åŒºéƒ¨ç½²æ•°ç™¾ä¸ªå®¹å™¨ğŸ˜è¯·è®°ä½ï¼Œå®ƒè¿˜ä¼šå¢åŠ ä½ çš„ğŸ’¸

## [](#thats-all)å°±è¿™æ ·ï¼ğŸ‰

å¯¹æ­¤ä½ æ€ä¹ˆçœ‹ï¼Ÿå¦‚æœæ‚¨æœ‰ä»»ä½•å»ºè®®æˆ–åé¦ˆï¼Œè¯·ç•™ä¸‹æ‚¨çš„è¯„è®ºã€‚