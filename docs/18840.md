# åˆ›å»ºå®šåˆ¶å†…å®¹å—:Wordpress Gutenberg vs. Sanity.io

> åŸæ–‡:[https://dev . to/sanity-io/creating-custom-content-blocks-WordPress-Gutenberg-vs-sanity io-4k5m](https://dev.to/sanity-io/creating-custom-content-blocks-wordpress-gutenberg-vs-sanityio-4k5m)

Wordpress 5.0 å¸¦æœ‰ä¸€ä¸ªå…¨æ–°çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåä¸º [Gutenberg](https://wordpress.org/gutenberg/) ã€‚å®ƒè¢«å¯„äºˆåšæœ›ï¼ŒåŒæ—¶ä¹Ÿå¼•èµ·äº†çƒ­è®®å’Œ T2 çš„äº‰è®®ã€‚Gutenberg çš„æ‰¿è¯ºæ˜¯å¯å®šåˆ¶æ€§ï¼Œå°¤å…¶æ˜¯åœ¨æ·»åŠ å®šåˆ¶å†…å®¹å—æ—¶ã€‚å¦‚æœä½ æƒ³å¼€å§‹å­¦ä¹ å¤è…¾å ¡ï¼Œä½ å¯ä»¥åœ¨ Smashing æ‚å¿—ä¸Šé˜…è¯»è¿™ç¯‡[çš„ç²¾å½©ä»‹ç»ã€‚å®ƒå†…ç½®åœ¨ React ä¸­ï¼Œå…è®¸å¼€å‘äººå‘˜æ‰©å±•ç¼–è¾‘å™¨çš„åŸºæœ¬åŠŸèƒ½ã€‚](https://www.smashingmagazine.com/2018/10/gutenberg-testimonials-sliderblock/)

[![Custom testimonial block type in Wordpress Gutenberg](../Images/5e3863e953832dbbe9d48b0ebccb6c26.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--rWOHuEl6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn.sanity.io/images/3do82whm/production/07e5821d81408fde490467f1cffd69613fa301cc-2000x1081.png) åœ¨ Wordpress Gutenberg ä¸­è‡ªå®šä¹‰å¥–çŠ¶å—ç±»å‹ã€‚åœ¨ smashingmagazine.com å‡ºç‰ˆ

å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ— æ³•æŠ—æ‹’ã€‚ç”±äºæ‹¥æœ‰è‡ªå®šä¹‰å†…å®¹å—æ˜¯[ç†æ™º](https://www.github.com/sanity-io/sanity)çš„ DNAï¼Œæˆ‘ä»¬æƒ³å±•ç¤ºé‡æ–°åˆ›å»º 12 åˆ†é’Ÿé˜…è¯»å’Œ 10 ç¯‡æ–‡ç« å‘æ‚¨ä»‹ç»çš„è¯„ä»·å¹»ç¯ç‰‡æ˜¯å¤šä¹ˆå®¹æ˜“ã€‚åƒåä¸€åˆ†ä¹‹ä¸€çš„æ—¶é—´æ›´å®¹æ˜“ã€‚ğŸ‡

å½“ç„¶ï¼Œè¿™ç§æ¯”è¾ƒä»…é™äºæ­¤ã€‚Wordpress æ˜¯ä¸€ä¸ªç»å…¸çš„å¸¦æœ‰æ¨¡æ¿å¼•æ“çš„ CMSï¼Œè€Œä½ å¯ä»¥ä½¿ç”¨ Sanity ä½œä¸ºä¸€ä¸ªæ— å¤´ CMSï¼Œå¸¦æœ‰ä½ å–œæ¬¢çš„å‰ç«¯æ¡†æ¶ï¼Œå¯ä»¥æ˜¯ Vueï¼ŒReact æˆ–è€…å…¶ä»–ä»€ä¹ˆã€‚

å¦‚æœä½ è¿˜æ²¡æœ‰å°è¯•è¿‡ç†æ™ºï¼Œåªéœ€è¦ä¸¤åˆ†é’Ÿå°±å¯ä»¥å¼€å§‹ã€‚è¦åˆ›å»ºä¸€ä¸ªé¡¹ç›®å¹¶è·å¾—ä¸€ä¸ªå³æ—¶çš„æ‰˜ç®¡å†…å®¹ APIï¼Œä»¥åŠæœ¬åœ°è¿æ¥çš„å¼€æºç¼–è¾‘å™¨ï¼Œè¯·åœ¨æ‚¨çš„ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹ä»£ç :

```
 npm install -g @sanity/cli && sanity init 
```

å¦‚æœæ‚¨åœ¨ CLI å·¥å…·ä¸­é€‰æ‹© blog æ¨¡æ¿ï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹äº†ï¼

## [](#the-testimonial-slider-content-model)å¥–çŠ¶æ»‘å—å†…å®¹æ¨¡å‹

åœ¨ Smashing Magazine çš„æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†å­¦ä¹ åˆ¶ä½œä¸€ä¸ªâ€œæ¨èå¹»ç¯ç‰‡â€â€”â€”é€šå¸¸ç”¨äºè¥é”€é¡µé¢ï¼Œä½œä¸ºä¸€ç§å¯è§†åŒ–äº§å“ç¤¾äº¤è¯æ˜çš„æ–¹å¼ã€‚

è¦é‡æ–°åˆ›å»º Wordpress è¯„ä»·æ»‘å—ï¼Œä½ åªéœ€è¦å®šä¹‰å®ƒçš„å†…å®¹æ¨¡å‹ã€‚æˆ‘ä»¬å°†è´Ÿè´£è¾“å…¥å­—æ®µï¼Œå¹¶å®æ—¶åŒæ­¥åˆ°æ•°æ®å­˜å‚¨ã€‚

å†…å®¹æ¨¡å‹éå¸¸ç®€å•:é¦–å…ˆï¼Œæˆ‘ä»¬ä¸ºä¸€ä¸ª`testimonialSlider`åˆ›å»ºç±»å‹ã€‚å®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä¸€ä¸ªå¸¦æœ‰å­—æ®µ`author`ã€`image`ã€`content`å’Œ`link`çš„è¯æ˜å¯¹è±¡æ•°ç»„(ä¹ŸåŒ…å«è¯æ˜çš„é¡ºåº)ã€‚æˆ‘å°†å†…å®¹å­—æ®µè®¾ç½®ä¸ºçº¯æ–‡æœ¬ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦å¯Œæ–‡æœ¬(ä»¥åŠæ»‘å—ä¸­çš„æ»‘å—ï¼Œä»¥é˜²æ‚¨å¯¹é€’å½’å†…å®¹æ¨¡å¼æ„Ÿå…´è¶£)ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨`blockContent`ã€‚å¦‚æœæˆ‘ä»¬å°†`options: { hotspot: true }`æ·»åŠ åˆ°å›¾åƒåŸŸï¼Œä½ çš„ç¼–è¾‘å™¨ç”šè‡³å¯ä»¥ä¸ºå›¾åƒè®¾ç½®è‡ªå®šä¹‰çƒ­ç‚¹å’Œè£å‰ªï¼Œè¿™å¯¹äºå›¾åƒè‰ºæœ¯æŒ‡å¯¼å¯èƒ½æ˜¯æœ‰ç”¨çš„ã€‚

```
 const testimonialSlider = {
  name: 'testimonialSlider',
  title: 'Testimonial slider',
  type: 'object',
  fields: [
    {
      name: 'slider',
      title: 'Slider',
      type: 'array',
      of: [
        {
          name: 'testimonial',
          title: 'Testimonial',
          type: 'object',
          fields: [
            {
              name: 'author',
              title: 'Author',
              type: 'string'
            },
            {
              name: 'image',
              title: 'Image',
              type: 'image'
            },
            {
              name: 'content',
              title: 'Content',
              type: 'text'
            },
            {
              name: 'link',
              title: 'Link',
              type: 'url'
            }
          ]
        }
      ]
    }
  ]
}

const blockContent = {
  name: 'blockContent',
  type: 'array',
  of: [
    {
      type: 'block'
    },
    {
      type: 'testimonialSlider'
    }
  ]
}

export default {
  testimonialSlider,
  blockContent
} 
```

å·®ä¸å¤šå°±æ˜¯è¿™æ ·ã€‚ç”¨æˆ·ç•Œé¢å°†æ˜¯å¹²å‡€çš„ï¼Œå¯ä»¥ç«‹å³ä½¿ç”¨ã€‚

[![Example of the slider user interface](../Images/b6017360f63d009122edaf9b1e1ddf84.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--dIbDP2KS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/a2jp512e4wxj10b2w09e.gif)

è¦ä¸ºæ‚¨çš„å‰ç«¯è·å¾—å‡†å¤‡å¥½çš„ JSON ç»“æ„ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ª GROQ æŸ¥è¯¢ï¼Œå‡è®¾æ‚¨çš„å¯Œæ–‡æœ¬è¢«å‘½åä¸º`content`ï¼Œå¹¶åœ¨æ–‡æ¡£ç±»å‹`post` :
ä¸­ä½¿ç”¨

```
*[_type == "post"]{
  ...,
  content[]{
    ...,
    _type == "testimonialSlider" => {
      slider[]{
        ...,
        image{
          ...,
          asset->
        }
      }
    }
  }
} 
```

## [](#custom-preview-component)è‡ªå®šä¹‰é¢„è§ˆç»„ä»¶

æ‚¨è¿˜å¯ä»¥æ·»åŠ ä¸€ä¸ªå¸¦æœ‰ React ä»£ç çš„å®šåˆ¶é¢„è§ˆç»„ä»¶:

```
import React from 'react'
import client from 'part:@sanity/base/client'
import urlBuilder from '@sanity/image-url'
const urlFor = source => urlBuilder(client).image(source)

const sliderPreview = ({ value = {} }) => {
  return (
    <marquee>
      {value &&
        value.slider.map(slide => (
          <div
            key={slide._key}
            style={{ display: 'inline-block', marginRight: '1em' }}
          >
            <figure>
              <img
                src={urlFor(slide.image)
                  .width(50)
                  .url()}
                style={{ marginRight: '0.5em' }}
              />
              <span className="legend">
                â€œ<em>{slide.content}</em>â€<br />
                {slide.author} â€“ {slide.link}
              </span>
            </figure>
          </div>
        ))}
    </marquee>
  )
}

export default sliderPreview 
```

é€šè¿‡å°†å®ƒæ·»åŠ åˆ°æ‚¨çš„`testimonialSlider`å†…å®¹ç±»å‹æ¨¡å¼:
ä¸­ï¼Œå°†å®ƒåŒ…å«åœ¨æ‚¨çš„æ¨¡å¼ä¸­

```
import React from 'react'
import sliderPreview from './sliderPreview.js'

const testimonialSlider = {
  name: 'testimonialSlider',
  title: 'Testimonial slider',
  type: 'object',
  preview: {
    select: {
      slider: 'slider'
    },
    component: sliderPreview
  },
  fields: [
    /* the fields */
  ]
} 
```

è¿™é‡Œæˆ‘ä½¿ç”¨äº†ä¼ ç»Ÿçš„ HTML å…ƒç´ `<marquee>`æ¥è·å¾—æ»šåŠ¨æ•ˆæœï¼›ä½ å¯èƒ½ä¸åº”è¯¥åšåŒæ ·çš„äº‹æƒ…:

[![Preview of the testimonial slider block](../Images/c071efc13e1d9fbf9759c2b374139ebe.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--XQ3WQjBL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/2adq0mnxnz4cn6espygz.gif)

## [](#beyond-appearances-the-advantage-of-deeply-typed-rich-text-content)è¶…è¶Šè¡¨è±¡:æ·±åº¦é”®å…¥ä¸°å¯Œæ–‡æœ¬å†…å®¹çš„ä¼˜åŠ¿

è¿™ä¸ªæ¨èæ»‘åŠ¨æ¡çš„ä¾‹å­ä¸ç½‘é¡µä¸Šçš„ä¸€ä¸ªç‰¹å®šçš„å±•ç¤ºç´§å¯†åœ°è”ç³»åœ¨ä¸€èµ·ï¼Œè¿™åœ¨ WordPress ä¸­æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºå®ƒæ˜¯ä¸ºå‘ˆç°å’Œç®¡ç†ä¸€ä¸ªç½‘ç«™è€Œæ„å»ºçš„ã€‚WordPress å°† Gutenberg ä¸­çš„è¾“å…¥ä¿å­˜ä¸º HTMLï¼Œè¿™ä¹Ÿæ˜¯ä½ æœ€ç»ˆä» API ä¸­å¾—åˆ°çš„ã€‚å¦‚æœæ‚¨æƒ³åœ¨è‡ªå·±å–œæ¬¢çš„å‰ç«¯æ¡†æ¶ä¸­ä½¿ç”¨ HTMLï¼Œæˆ–è€…åœ¨åº”è¯¥åœ¨ web æµè§ˆå™¨ä¹‹å¤–çš„å…¶ä»–åœ°æ–¹å‘ˆç°çš„å†…å®¹ä¸­ä½¿ç”¨ HTMLï¼Œé‚£ä¹ˆå†…å®¹ API ä¸­çš„ HTML é€šå¸¸ä¸æ˜¯æ‚¨æƒ³è¦çš„ã€‚

[Sanity](https://www.github.com/sanity-io/sanity) å°†ç¼–è¾‘å™¨ä¸­çš„å†…å®¹ä¿å­˜ä¸º[å¯ç§»æ¤æ–‡æœ¬](https://www.portabletext.org)ï¼Œè¿™ä½¿å¾—å®ƒå¯ä»¥è·¨ä»»ä½•æ ‡è®°ç§»æ¤ï¼Œä½†ä¹Ÿä½¿å¾—å¯Œæ–‡æœ¬å¯æŸ¥è¯¢ã€‚åˆ›å»ºå®šåˆ¶çš„ç¼–è¾‘ä½“éªŒåº”è¯¥å¾ˆå®¹æ˜“ï¼Œå®šåˆ¶çš„ç±»å‹å’Œè¾“å…¥åœ¨æ‚¨çš„é¡¹ç›®æˆ–ç»„ç»‡ä¸­æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå¹¶ä¸”åº”è¯¥å¾ˆå®¹æ˜“è·å–å†…å®¹å¹¶ä½¿å…¶é€‚åˆä»»ä½•å½¢å¼çš„è¡¨ç¤ºã€‚