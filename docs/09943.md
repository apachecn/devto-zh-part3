# å…³äº React æ¸²æŸ“é“å…· vs HOC

> åŸæ–‡:[https://dev . to/krzysztofzuraw/on-react-render-props-vs-hoc-1337](https://dev.to/krzysztofzuraw/on-react-render-props-vs-hoc-1337)

å¦‚æœä½ æƒ³æ¯” dev.to ä¸Šçš„å¸–å­æ—©ä¸€å‘¨å¾—åˆ°è¿™äº›å¸–å­ï¼Œä½ å¯ä»¥åœ¨ https://krzysztofzuraw.com/newsletter çš„ä¸ŠåŠ å…¥æˆ‘çš„æ—¶äº‹é€šè®¯ã€‚

æœ€è¿‘ï¼Œæˆ‘çš„ä¸€ä¸ªåŒäº‹åœ¨ä½¿ç”¨ä¸€ç§å«åš [hoc](https://reactjs.org/docs/higher-order-components.html) (é«˜é˜¶ç»„ä»¶)çš„æµè¡Œååº”æ¨¡å¼æ—¶ï¼Œå¶ç„¶å‘ç°äº†å¥‡æ€ªçš„æƒ…å†µã€‚äº‹å®è¯æ˜ï¼Œæœ‰æ—¶æ‚¨çš„ hoc å¯ä»¥è¦†ç›–æ‚¨é€šè¿‡çš„`props`ã€‚è®©æˆ‘å†è§£é‡Šä¸€ä¸‹ã€‚

å‡è®¾æ‚¨æœ‰ä¸€ä¸ª`Button`ç»„ä»¶:

```
import * as React from 'react';

interface OwnProps {
  onClick: () => void;
  amount: number;
  name: string;
}

const Button: React.FunctionComponent<OwnProps> = props => (
  <button onClick={props.onClick}>
    {props.name} {props.amount}
  </button>
); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ˜¯ä¸€ä¸ªéœ€è¦ 3 ä¸ªé“å…·çš„å°ç»„ä»¶ã€‚ä¸€ä¸ª`onClick`ç”¨äºå¤„ç†æŒ‰é’®ç‚¹å‡»ï¼Œå…¶ä½™ä¸¤ä¸ªä»…ç”¨äºåœ¨æŒ‰é’®ä¸Šæ˜¾ç¤ºæ•°æ®ã€‚

ä½ æ€ä¹ˆèƒ½æŠŠé“å…·ä¼ ç»™è¿™ä¸ªæŒ‰é’®å‘¢ï¼Ÿè®©æˆ‘ä»¬åŒæ„ä½ éœ€è¦ä¸€ä¸ªæ›´é«˜å±‚æ¬¡çš„æŠ½è±¡ğŸ˜‚ä½ é€šè¿‡`HOC` :
ä¼ é€’å®ƒä»¬

```
import * as React from 'react';

export interface HOCProps {
  onClick: () => void;
}

export const withHOC = <WrappedComponentProps extends object>(
  WrappedComponent: React.ComponentType<WrappedComponentProps>
) => {
  // tslint:disable-next-line:no-console
  const onClick = () => console.log('Clicked! from HOC');

  const HOC: React.FunctionComponent<WrappedComponentProps & HOCProps> = props => {
    return <WrappedComponent {...props} onClick={onClick} />;
  };
  HOC.displayName = `withHOC(${WrappedComponent})`;
  return HOC;
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‰€ä»¥è¿™ä¸ªå¯ä»¥è¿™æ ·ç”¨:

```
import * as React from 'react';

import { HOCProps, withHOC } from '../hoc';
import { Button } from './button';

interface OwnProps {
  onClick: () => void;
  amount: number;
  name: string;
}

const ButtonHOC = withHOC(Button);

// usage
<ButtonHOC onClick={() => setAmount(amount + 1)} amount={amount} name="HOC button" />; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ ä¸ºè‡ªå·±å¦‚æ­¤å‡ºè‰²çš„å·¥ä½œè€Œæ„Ÿåˆ°è‡ªè±ª-ğŸ‘ğŸ»ã€‚ä½ æŠ½è±¡å¼€`onClick`ã€‚

ä»£ç çœ‹èµ·æ¥å¾ˆå¥½ï¼Œä½†æ˜¯ç‚¹å‡»æŒ‰é’®ä¼šå¯¼è‡´`console.log`ï¼ä½†æ˜¯ä½ æƒ³è®©å®ƒå¢åŠ  1ã€‚å‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Ÿ

ä½ çš„ HOC æ­£åœ¨è¦†ç›–ä½ çš„ç»„ä»¶é“å…·ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œä½ éœ€è¦æ”¹å˜é“å…·åç§°â€”â€”è¿™æ ·å†²çªå°±ä¸ä¼šå†å‘ç”Ÿäº†ã€‚

è®©æˆ‘ä»¬å¯»æ‰¾å¦ä¸€ç§åœ¨ react world ä¸­å¸¸è§çš„æ¨¡å¼â€”â€”æ¸²æŸ“é“å…·:

```
import * as React from 'react';

export interface OwnProps {
  render: ({ onClick }: { onClick: () => void }) => JSX.Element;
}

export const RenderPropsButton: React.FunctionComponent<OwnProps> = props => {
  // tslint:disable-next-line:no-console
  const onClick = () => console.log('Clicked from renderProps');
  return props.render({ onClick });
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¯ä»¥è¿™æ ·ç”¨:

```
<RenderPropsButton
  render={renderProps => (
    <Button onClick={renderProps.onClick} amount={amount} name="RenderProps button" />
  )}
/> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æœ‰å¸®åŠ©å—ï¼Ÿæ˜¯çš„â€”â€”å› ä¸ºæˆ‘ä»¬æ˜¯é€šè¿‡`renderProp`
ä¼ é€’`onClick`ï¼Œè€Œä¸æ˜¯ç›´æ¥æ³¨å…¥åˆ°ç»„ä»¶ä¸­ã€‚è¿™å…è®¸å¼€å‘è€…çœ‹åˆ°è¿™ä¸ªé“å…·æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Œå¹¶ä¿®å¤å®ƒã€‚

## [](#summary)æ€»ç»“

å½“æ¸²æŸ“é“å…·ç¬¬ä¸€æ¬¡å‡ºç°åœ¨ react world æ—¶ï¼Œæˆ‘å¹¶æ²¡æœ‰çœ‹åˆ°å®ƒæ¯” hoc æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ã€‚åœ¨çœ‹åˆ°ç±»ä¼¼ä¸Šé¢çš„ä¾‹å­åï¼Œæˆ‘å‘ç°å®ƒä»¬åœ¨å¯è¯»æ€§æ–¹é¢æ¯” hoc æ›´å¥½ã€‚

PSã€‚æˆ‘çŸ¥é“è¿™äº›ä¾‹å­è¿‡äºå¤æ‚ã€‚è¿™é‡Œæœ‰è¯æ˜è¿™ä¸€ç‚¹ã€‚

### [](#tldr)TLDR

ä½¿ç”¨æ¸²æŸ“é“å…·ï¼Œæ‚¨å¯ä»¥é¿å…æ„å¤–çš„é“å…·è¦†ç›–ã€‚

å¦‚æœä½ æƒ³æ¯” dev.to ä¸Šçš„å¸–å­æ—©ä¸€å‘¨å¾—åˆ°è¿™äº›å¸–å­ï¼Œä½ å¯ä»¥åœ¨ https://krzysztofzuraw.com/newsletter çš„ä¸ŠåŠ å…¥æˆ‘çš„æ—¶äº‹é€šè®¯ã€‚