# TIL: `color-adjust 'èƒœè¿‡æœ‰å…³åå°æ‰“å°çš„ç”¨æˆ·ä»£ç†è®¾ç½®

> åŸæ–‡ï¼š<https://dev.to/stefanjudis/til-color-adjust-trumps-user-agent-setting-about-background-printing-573l>

æˆ‘ä»¬æ¥è°ˆè°ˆå°åˆ·å“ï¼Œå¥½å—ï¼Ÿ:D

æˆ‘å¾ˆå°‘æ‰“å°ä¸œè¥¿(æˆ‘æ²¡æœ‰æ‰“å°æœº)ï¼Œä½†æ˜¯æœ€è¿‘æˆ‘å‘ç°äº†ä¸€ä¸ªæˆ‘ä»¥å‰ä»æœªå¬è¯´è¿‡çš„ CSS å±æ€§ã€‚

ä»¥ä¸‹æ˜¯æ‚¨å°†åœ¨ MDN ä¸Šæ‰¾åˆ°çš„å…³äºè¯¥é…’åº—çš„ä¿¡æ¯ã€‚

> CSS å±æ€§è®¾ç½®ç”¨æˆ·ä»£ç†å¯ä»¥åšä»€ä¹ˆæ¥ä¼˜åŒ–å…ƒç´ åœ¨è¾“å‡ºè®¾å¤‡ä¸Šçš„å¤–è§‚ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå…è®¸æµè§ˆå™¨æ ¹æ®è¾“å‡ºè®¾å¤‡çš„ç±»å‹å’ŒåŠŸèƒ½å¯¹å…ƒç´ çš„å¤–è§‚è¿›è¡Œä»»ä½•å¿…è¦å’Œè°¨æ…çš„è°ƒæ•´ã€‚

æˆ‘è§‰å¾—è¿™å¾ˆæœ‰è¶£ï¼Œäºæ˜¯æ‰“å¼€æˆ‘çš„ç½‘ç«™ï¼Œçœ‹çœ‹å°åˆ·ç‰ˆæœ¬ä¼šæ˜¯ä»€ä¹ˆæ ·å­ã€‚

[![A code block on stefanjudis.com that doesn't have a black background anymore](img/d989a686024ce07b89c7512d4a3a58f1.png)](//images.ctfassets.net/f20lfrunubsq/2h5UPKmV2mEuFWTIO494Dh/a82947db1ee3a48dbdd8f741328ed4f7/sj-printed.jpg)

æˆ‘å‘ç° Firefox ç¡®å®æŠŠåŒ…å«çš„ä»£ç å—çš„é¢œè‰²æ”¹æˆäº†ç™½åº•é»‘å­—ã€‚å®ƒé¢ å€’äº†é¢œè‰²ã€‚

## æµè§ˆå™¨å…·æœ‰æ§åˆ¶èƒŒæ™¯é¢œè‰²å’Œå›¾åƒæ‰“å°çš„é…ç½®é€‰é¡¹

äº‹å®è¯æ˜ï¼Œæ‚¨å¯ä»¥åœ¨ç‰¹å®šçš„æµè§ˆå™¨å¯¹è¯æ¡†ä¸­æ§åˆ¶æ‰“å°è¡Œä¸ºã€‚Chrome åœ¨â€œæ›´å¤šè®¾ç½®â€ä¸‹åŒ…å«ä¸€ä¸ªéšè—è®¾ç½®â€œæ‰“å°èƒŒæ™¯å›¾å½¢â€ï¼Œå¯ä»¥æ§åˆ¶æˆ‘çš„é»‘æš—ä»£ç å—çš„è¡Œä¸ºã€‚

Firefox ç”šè‡³èµ°å¾—æ›´è¿œï¼Œè®©ä½ å†³å®šæ˜¯å¦æƒ³è¦å›¾å½¢æˆ–èƒŒæ™¯é¢œè‰²æœ‰å•ç‹¬çš„é€‰é¡¹ã€‚

[![Print dialogs of Chrome and Firefox â€“ Chrome asks if you want to print background graphics and Firefox even differentiates between background color and graphics.](img/922194cc49923c96995c7aaea70345af.png)](//images.ctfassets.net/f20lfrunubsq/1qEPHWTMKu9WQ7gabUlWlR/dea9cd57f0c3641299d6bcc9a49c6b0e/print-dialogs.jpg)

(ä¸çŸ¥ä»€ä¹ˆåŸå› ï¼Œæˆ‘çš„æœºå™¨ä¸Šçš„ Firefox æ›´å–œæ¬¢å¾·è¯­...)

æœ‰äº†è¿™äº›é€‰é¡¹ï¼Œç”¨æˆ·å¯ä»¥åœ¨æ‰“å°ç½‘ç«™æ—¶é€‰æ‹©é€€å‡ºâ€œæ˜‚è´µçš„æ‰“å°æ“ä½œâ€ä»¥èŠ‚çœä¸€äº›å¢¨æ°´ã€‚

## `color-adjust`èƒœè¿‡ä¸€åˆ‡

CSS å±æ€§`color-adjust`(åœ¨ Firefox ä¸­å—æ”¯æŒï¼Œåœ¨ Chromeã€Safari å’Œ Opera ä¸­å¸¦æœ‰å‰ç¼€(`-webkit-print-color-adjust`)å…è®¸æ‚¨æ˜ç¡®å®šä¹‰ä¸å¸Œæœ›ç”¨æˆ·ä»£ç†å¼„ä¹±æ‚¨çš„é¢œè‰²â€”â€”å³ä½¿æ˜¯æ‰“å°ä¹Ÿä¸è¡Œã€‚

å®ƒæ¥å—å€¼`economy`(é»˜è®¤å€¼)å’Œ`exact`ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé€‰æ‹©è®¾ç½®`exact`ï¼Œæ— è®ºè®¾ç½®æˆ–ä¸è®¾ç½®ä»€ä¹ˆé…ç½®é€‰é¡¹ï¼Œæˆ‘çš„æ–‡ç« ä¸­çš„ä»£ç å—çš„é»‘è‰²èƒŒæ™¯éƒ½ä¼šè¢«æ‰“å°å‡ºæ¥ã€‚

[![Chrome's print dialog showing a dark background being printed even when the option for it is disabled](img/2615e582d88796a7036b87d1e923d347.png)](//images.ctfassets.net/f20lfrunubsq/5ExmFTTrNADk7vHTZGcaF4/8d3a2a125defd0a71535aecfa53ae649/print-dialog.jpg)

æˆ‘è®¤ä¸ºåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå³ä½¿åœ¨æ‰“å°æ—¶ä¿ç•™èƒŒæ™¯è‰²å’Œå›¾åƒä¹Ÿæ˜¯æœ‰æ„ä¹‰çš„â€”â€”è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ª CSS å±æ€§å¯¹æˆ‘è¿™ä¸ªæ²¡æœ‰æ‰“å°æœºçš„äººæœ‰ä»€ä¹ˆä»·å€¼ï¼ğŸ™ˆ