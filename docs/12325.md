# noobs çš„æ—¶é—´å¤æ‚åº¦

> åŸæ–‡ï¼š<https://dev.to/mercier_remi/time-complexity-for-noobs-48db>

è¿™æ˜¯ä¸€ä¸ªæˆ‘ä»æœªæƒ³è¿‡è¦å†™çš„ä¸»é¢˜ã€‚ä½†æ˜¯ç”Ÿæ´»å……æ»¡äº†æƒŠå–œã€‚

é€šè¿‡ç¼–ç è®­ç»ƒè¥å­¦ä¹  web å¼€å‘çš„äºº(é€šå¸¸)ä¸ç†Ÿæ‚‰æ—¶é—´å¤æ‚æ€§ã€‚ä»–ä»¬å¯èƒ½å·²ç»è¯»äº†è¿™äº›è¯ï¼Œä½†ä»…æ­¤è€Œå·²ã€‚æˆ‘çŸ¥é“æˆ‘è¯•å›¾æŸ¥é˜…ç»´åŸºç™¾ç§‘é¡µé¢ï¼Œç»“æœåœ¨ç¬¬ä¸€æ®µç»“æŸæ—¶ç¡ç€äº†ã€‚å½“æˆ‘ç»ˆäºé†’æ¥æ—¶ï¼Œæˆ‘æƒ³â€œæ²¡å…³ç³»ï¼Œåæ­£æˆ‘æ°¸è¿œä¹Ÿä¸ä¼šå¤„ç†å®ƒâ€ã€‚

å¤©å“ªï¼Œæˆ‘é”™äº†ã€‚åœ¨ä¸€æ¬¡ç¼–ç é¢è¯•ä¸­ï¼Œæˆ‘å¾ˆå¿«è¢«è¦æ±‚å†™ä¸€ä¸ªé…å¯¹ç®—æ³•å¹¶è®¡ç®—å®ƒçš„æ—¶é—´å¤æ‚åº¦ğŸ¤”ã€‚å®ƒè®©æˆ‘æ„è¯†åˆ°æ—¶é—´å¤æ‚æ€§ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå·¥ç¨‹å¸ˆæŠ›å‡ºçš„è®©ä½ å‡ºæ±—çš„èŠ±å“¨è¯æ±‡ã€‚äº†è§£å®ƒçš„è¦ç‚¹åœ¨ç¼–ç é¢è¯•ä¸–ç•Œä¹‹å¤–ä¹Ÿæ˜¯æœ‰ç”¨çš„ã€‚

æ‰€ä»¥ï¼Œå¯¹äºæˆ‘æ‰€æœ‰çš„æ–°æ‰‹ä¼™ä¼´ä»¬ï¼Œè¿™é‡Œæ˜¯æ—¶é—´å¤æ‚æ€§çš„åŸºæœ¬åŸåˆ™â€”â€”è¿™æ ·ä½ å°±èƒ½åœ¨ä¸‹æ¬¡é¸¡å°¾é…’ä¼šä¸Šåƒé’»çŸ³ä¸€æ ·é—ªè€€ã€‚

## noobs çš„æ—¶é—´å¤æ‚åº¦

> æ—¶é—´å¤æ‚åº¦æ˜¯æ ¹æ®è¾“å…¥çš„å¤§å°æ¥è¡¡é‡ä»£ç æ‰§è¡Œæ—¶é—´çš„æ–¹æ³•ã€‚

å°±æ˜¯è¿™æ ·ã€‚ä½ ç°åœ¨å¯ä»¥åœæ­¢é˜…è¯»ï¼Œå›åˆ°ä½ çš„ç”Ÿæ´»ä¸­å»ã€‚

è¿˜å’Œæˆ‘åœ¨ä¸€èµ·å—ï¼Ÿå¥½å§ï¼Œæƒ³è¦ CS çš„ä¹¦å‘†å­ï¼Œè¿™é‡Œæœ‰ä¸ªä¾‹å­:

*   å¦‚æœæ‚¨çš„ä»£ç åœ¨ç›¸åŒçš„æ—¶é—´å†…å¤„ç†ä¸€ä¸ª 10 æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ª 10ï¼Œ000 æ•´æ•°çš„æ•°ç»„ï¼Œåšå¾—å¥½ï¼Œæ‚¨çš„ä»£ç çš„æ—¶é—´å¤æ‚åº¦æ˜¯ğŸ‘Œã€‚
*   å¦‚æœä½ çš„ä»£ç å¤„ç†ä¸€ä¸ª 10 ä¸ªæ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ª 10ï¼Œ000 ä¸ªæ•´æ•°çš„æ•°ç»„è¦å¤šèŠ± 1ï¼Œ000 å€çš„æ—¶é—´ï¼Œå¯¹ä¸èµ·ï¼Œä½ çš„ä»£ç çš„æ—¶é—´å¤æ‚åº¦æ˜¯ğŸ’© <sup id="fnref1">[1](#fn1)</sup> ã€‚

## ä¸€ä¸ªæ€¥éœ€çš„ä¾‹å­

è®©æˆ‘ä»¬æ¥çœ‹çœ‹æˆ‘å¿…é¡»è§£å†³çš„ç»å…¸ç¼–ç é¢è¯•:

å‡è®¾ä½ å¾—åˆ°ä¸€ä¸ªç”± 10ï¼Œ000 ä¸ªéšæœºæ•´æ•°ç»„æˆçš„æ•°ç»„ï¼Œæ­£çš„å’Œè´Ÿçš„ã€‚æ‚¨å¸Œæœ›å¾—åˆ°æ‰€æœ‰å…ƒç´ å¯¹(æ²¡æœ‰é‡å¤)çš„æ€»å’Œä¸ºç»™å®šçš„æ•°å­—ã€‚

è¿™é‡Œæœ‰ç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ:

```
 def find_pairs(array, sum)
    array.repeated_combination(2).find_all { |a, b| a + b == sum }.uniq
  end 
```

è®©æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹:

*   `repeated_combination(2)`ç”Ÿæˆä¸€ä¸ªæšä¸¾æ•°ï¼ŒåŒ…å« 10ï¼Œ000 æ•°ç»„ä¸­æ‰€æœ‰é‡å¤çš„æ•´æ•°å¯¹(å¤§çº¦ 50ï¼Œ000ï¼Œ000 ä¸ªå…ƒç´ ğŸ˜±).
*   `find_all`è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰æ£€æŸ¥è¯¥å—çš„äº‹ä»¶ã€‚
*   `uniq`åˆ é™¤é‡å¤çš„å¯¹

ä½†æ›´é‡è¦çš„æ˜¯:æ ¹æ®è¾“å…¥çš„å¤§å°ï¼Œè¿™ä¸ªæ–¹æ³•è¿è¡Œéœ€è¦å¤šå°‘æ—¶é—´ï¼Ÿ

æˆ‘ä»¬å°†ç”¨ [benchmark-ips](https://github.com/evanphx/benchmark-ips) å¯¹æˆ‘ä»¬çš„ä»£ç è¿›è¡ŒåŸºå‡†æµ‹è¯•ã€‚è¿™ä¸ª gem æä¾›äº†ä½ çš„ä»£ç æ¯ç§’è¿è¡Œçš„æ¬¡æ•°ã€‚

è¦æ·»åŠ `benchmark-ips`ï¼Œé¦–å…ˆè¿è¡Œ:

```
 gem install benchmark-ips 
```

ç„¶åå°†åŸºå‡†æ·»åŠ åˆ°æ‚¨çš„ä»£ç ä¸­ã€‚è¿™é‡Œï¼Œæˆ‘å°†ä½¿ç”¨å››ä¸ªä¸åŒçš„è¾“å…¥æ¥è¿è¡Œæˆ‘çš„`find_pairs(array, sum)`:

*   ç”± 10 ä¸ªæ•´æ•°ç»„æˆçš„æ•°ç»„
*   ä¸€ä¸ª 100 æ•´æ•°çš„æ•°ç»„
*   ä¸€ä¸ª 1000 æ•´æ•°çš„æ•°ç»„
*   ä¸€ä¸ª 10ï¼Œ000 æ•´æ•°çš„æ•°ç»„

```
 require 'benchmark/ips'

  def find_pairs(array, sum)
    array.repeated_combination(2).find_all { |a, b| a + b == sum }.uniq
  end

  ########################
  # COMPLEXITY BENCHMARK #
  ########################

  # Set up

  FIRST_ARRAY = Array.new(10) { rand(-10...20) }
  SECOND_ARRAY = Array.new(100) { rand(-100...200) }
  THIRD_ARRAY = Array.new(1000) { rand(-1000...2000) }
  FOURTH_ARRAY = Array.new(10_000) { rand(-10_000...20_000) }

  # Time complexity benchmark

  Benchmark.ips do |x|
    x.config(:time => 5, :warmup => 2)

    # Typical mode, runs the block as many times as it can
    x.report("find pairs in 10-integer array") {
      find_pairs(FIRST_ARRAY, 8)
    }

    x.report("find pairs in 100-integer array") {
      find_pairs(SECOND_ARRAY, 87)
    }

    x.report("find pairs in 1000-integer array") {
      find_pairs(THIRD_ARRAY, 876)
    }

    x.report("find pairs in 10_000-integer array") {
      find_pairs(FOURTH_ARRAY, 8765)
    }

    x.compare!
  end 
```

ä¸‹é¢æ˜¯è¾“å‡º:

```
 Warming up --------------------------------------
  find pairs in 10-integer array
                          10.685k i/100ms
  find pairs in 100-integer array
                         137.000  i/100ms
  find pairs in 1000-integer array
                           1.000  i/100ms
  find pairs in 10_000-integer array
                           1.000  i/100ms
  Calculating -------------------------------------
  find pairs in 10-integer array
                          112.738k (Â± 1.5%) i/s -    566.305k in 5.024381s
  find pairs in 100-integer array
                            1.388k (Â± 2.2%) i/s -      6.987k in 5.036686s
  find pairs in 1000-integer array
                           14.208  (Â± 0.0%) i/s -     72.000  in 5.069451s
  find pairs in 10_000-integer array
                            0.138  (Â± 0.0%) i/s -      1.000  in 7.241235s

  Comparison:
  find pairs in 10-integer array:   112737.7 i/s
  find pairs in 100-integer array:     1388.0 i/s - 81.22x  slower
  find pairs in 1000-integer array:       14.2 i/s - 7934.72x  slower
  find pairs in 10_000-integer array:        0.1 i/s - 816360.51x  slower 
```

ğŸ˜“å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘çš„ä»£ç åœ¨ 10-æ•´æ•°æ•°ç»„å’Œ 100-æ•´æ•°æ•°ç»„ä¹‹é—´è¿è¡Œè¦å¤šèŠ± 80 å€çš„æ—¶é—´ã€‚ä½†æ˜¯ï¼Œ100 ä¸ªæ•´æ•°çš„æ•°ç»„å’Œ 1000 ä¸ªæ•´æ•°çš„æ•°ç»„ä¹‹é—´çš„æ—¶é—´è¦é•¿ 100 å€ã€‚1000 æ•´æ•°æ•°ç»„å’Œ 10000 æ•´æ•°æ•°ç»„ä¹‹é—´çš„é•¿åº¦æ˜¯ 100 å€ã€‚

å¯ä»¥è‚¯å®šåœ°è¯´ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯ğŸ’©ã€‚

æ‚¨å·²ç»å¯ä»¥æƒ³è±¡å½“æ‚¨çš„ä»£ç è¿è¡Œæ—¶ï¼Œç”¨æˆ·çœ‹ç€ä¸€ä¸ªç©ºç™½å±å¹• 10 ç§’é’Ÿã€‚æœ‹å‹ä»¬ï¼Œè¿™ä¸€ç‚¹éƒ½ä¸å¥½ã€‚

## ä»â€œåŠ¨ğŸ‘Œå’ŒğŸ’©â€œè®°æ•°æ³•åˆ°å¤§ 0 è®°æ•°æ³•

æ—¶é—´å¤æ‚åº¦æœ‰è‡ªå·±çš„æ ‡åº¦:å¤§ 0 ç¬¦å· <sup id="fnref2">[2](#fn2)</sup> ã€‚

ä»æœ€å¥½åˆ°æœ€å·®:

*   è¾“å…¥çš„å¤§å°ä¸ä¼šå½±å“ä»£ç çš„è¿è¡Œæ—¶é—´
*   `0(log n)`:10 å€çš„è¾“å…¥ï¼Œä½ çš„ä»£ç éœ€è¦ 2 å€çš„æ—¶é—´æ¥è¿è¡Œ
*   `0(n)`:10 å€çš„è¾“å…¥ï¼Œä½ çš„ä»£ç éœ€è¦ 10 å€çš„æ—¶é—´æ¥è¿è¡Œ
*   `0(n log n)`:10 å€çš„è¾“å…¥ï¼Œä½ çš„ä»£ç éœ€è¦ 50 å€çš„æ—¶é—´æ¥è¿è¡Œ
*   `0(n^2)`:10 å€çš„è¾“å…¥ï¼Œä½ çš„ä»£ç éœ€è¦ 100 å€çš„æ—¶é—´æ¥è¿è¡Œ
*   `0(2n)` : 10x è¾“å…¥ï¼Œä½ çš„ç”¨æˆ·å·²ç»ç¡ç€äº†ï¼Œè€Œä½ çš„ä»£ç è¿˜åœ¨è¿è¡Œ

çœŸçš„æ²¡æœ‰å¿…è¦èƒŒä¸‹æ¥æˆ–è€…èƒ½å¤Ÿåœ¨ä½ çš„å¤´é¡¶ä¸Šè®¡ç®—å‡ºæ­£ç¡®çš„å¤§ 0(ç¬¬ä¸€ä¸ªåŸå› æ˜¯: [CS å·¥ç¨‹å¸ˆå’Œæ•°å­¦ä¹¦å‘†å­ç”šè‡³åœ¨å¾®ç§¯åˆ†](https://www.reddit.com/r/programming/comments/1dotwe/bigo_cheat_sheet/c9si8pj/)ä¸Šæ„è§ä¸ä¸€è‡´)ã€‚

æœ€å¥½äº†è§£ä¸€äº›ç»éªŒæ³•åˆ™:

*   `n`æ˜¯æŒ‡**çš„è¾“å…¥å¤§å°**
*   å¦‚æœåœ¨ä¸€ä¸ªæ•°ç»„ä¸Šè¿­ä»£ä¸€æ¬¡ï¼Œè¿è¡Œæ—¶é—´ä¸æ•°ç»„ä¸­å…ƒç´ çš„æ•°é‡æˆçº¿æ€§æ¯”ä¾‹(å› æ­¤ä¸º`0(n)`)
*   å…·æœ‰ 2 çº§åµŒå¥—å¾ªç¯çš„ä»£ç é€šå¸¸ç¬¦åˆ`0(n^2)`(å…·æœ‰ 3 çº§åµŒå¥—å¾ªç¯çš„ä»£ç å°†ç¬¦åˆ`0(n^3)`ç­‰ç­‰)
*   æ—¶é—´å¤æ‚åº¦è¡¨ç¤ºåŸºäºè¾“å…¥å¤§å°çš„å¯èƒ½çš„æ€§èƒ½é—®é¢˜

å¦‚æœä½ æƒ³å¾—åˆ°æ›´æ·±å…¥çš„è§£é‡Šï¼Œå»çœ‹çœ‹ Honeybadger çš„ã€ŠRubyist çš„ Big-O ç¬¦å·æŒ‡å—ã€‹ã€‚å¾ˆæ•´æ´ğŸ‘Œã€‚

## å›åˆ°æˆ‘ä»¬ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

è®°å¾—å—ï¼Ÿ

```
 def find_pairs(array, sum)
    array.repeated_combination(2).find_all { |a, b| a + b == sum }.uniq
  end 
```

è®¡ç®—ä¸€æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ï¼Œä½ åªéœ€è¦å®šä¹‰æ¯ä¸ªå…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ï¼Œæœ€å·®çš„é‚£ä½èƒœå‡ºã€‚æ‰€ä»¥è®©æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹`find_pairs()`çœ‹çœ‹å¼•æ“ç›–ä¸‹åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚

#### â˜ï¸é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª 4-æ•´æ•°æ•°ç»„

```
 array = Array.new(4) { rand(-10...20) } # => [-6, 4, 14, 3] 
```

#### âœŒï¸ç„¶åï¼Œè®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ–¹æ³•`find_pairs()`å¹¶åœ¨æ•°ç»„ä¸Šè°ƒç”¨`repeated_combination(2)`æ¥åˆ›å»ºå¯¹

```
 array = Array.new(4) { rand(-10...20) } # => [-6, 4, 14, 3]

  def find_pairs(array, sum)
    # Calling repeated_combination without a block returns an enumerator
    array.repeatead_combination(2)
  end

  # I add a to_a to transform my enumerator into an array for readability reasons
  find_pairs(array, 8).to_a # => [[-6, -6], [-6, 4], [-6, 14], [-6, 3], [4, 4], [4, 14], [4, 3], [14, 14], [14, 3], [3, 3]] 
```

è®©æˆ‘ä»¬åœ¨é‚£é‡Œåœä¸€ä¼šå„¿ã€‚`repeated_combination(2)`éå†`array`ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶å°†å…¶ä¸`array`ä¸­çš„æ¯ä¸ªå…ƒç´ é…å¯¹ã€‚`repeated_combination(2)`åˆ›å»ºä¸€ä¸ªåµŒå¥—å¾ªç¯ã€‚

ç¬¬ä¸€ä¸ªå¾ªç¯é¦–å…ˆåœ¨`-6`å¤„åœæ­¢ï¼Œç„¶åç¬¬äºŒä¸ªå¾ªç¯å¼€å§‹å¹¶éå†æ¯ä¸ªå…ƒç´ ã€‚ä¸€æ—¦ç¬¬äºŒä¸ªå¾ªç¯å®Œæˆï¼Œæˆ‘ä»¬å›åˆ°ç¬¬ä¸€ä¸ªå¾ªç¯ï¼Œç¬¬ä¸€ä¸ªå¾ªç¯ç§»åŠ¨åˆ°`4`ä¸Šï¼Œç¬¬äºŒä¸ªå¾ªç¯å†æ¬¡å¼€å§‹ã€‚æ¸…æ´—å¹¶é‡å¤ï¼Œç›´åˆ°`repeated_combination(2)`éå†å®Œæ¯ä¸ªå…ƒç´ å¹¶è¿”å›æ‰€æœ‰ç»„åˆã€‚

å¾ªç¯ä¸­çš„å¾ªç¯ï¼ŸğŸ‘‰è¯¥æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º`0(n^2)`

#### â˜ï¸âœŒï¸ç°åœ¨è®©æˆ‘ä»¬`find_all`å¯¹å…¶æ•´æ•°ä¹‹å’Œä¸ºä¸€ä¸ªç»™å®šçš„æ•°ã€‚

```
 array = Array.new(4) { rand(-10...20) } # => [-6, 4, 14, 3]

  def find_pairs(array, sum)
    all_pairs = array.repeatead_combination(2).find_all { |a, b| a + b == sum }
  end

  find_pairs(array, 8) # => [[-6, 14], [4, 4]] 
```

`find_all`éå†ç”±`repeated_combination(2)`è¿”å›çš„æšä¸¾å™¨ï¼Œå¹¶æ£€æŸ¥ä¸å—åŒ¹é…çš„å¯¹ã€‚

å•å¾ªç¯è¡¨ç¤º`0(n)`ã€‚ç”±äº`0(n)`æ¯”`repeated_combination(2)`çš„`O(n^2)`å¿«å¾—å¤šï¼Œæ‰€ä»¥åœ¨å¤§çš„è®¡åˆ’ä¸­ï¼Œå®ƒå°†æ˜¯æ— å…³ç´§è¦çš„ã€‚

#### âœŒï¸âœŒï¸æœ€åï¼Œè®©æˆ‘ä»¬ç”¨`uniq`å»æ‰é‡å¤çš„

```
 array = Array.new(4) { rand(-10...20) } # => [-6, 4, 14, 3]

  def find_pairs(array, sum)
    all_pairs = array.repeatead_combination(2).find_all { |a, b| a + b == sum }.uniq
  end

  find_pairs(array, 8) # => [[-6, 14], [4, 4]] 
```

åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ä»»ä½•å‰¯æœ¬ã€‚ä½†æ˜¯å½“ä½ åœ¨ä¸€ä¸ª 10ï¼Œ000 æ•´æ•°çš„æ•°ç»„ä¸Šè¿è¡Œè¿™ä¸ªç®—æ³•æ—¶ï¼Œä½ ä¼šæœ‰ä¸€äº›æœºä¼šã€‚

`uniq`åªåœ¨æ•°ç»„ä¸Šè¿­ä»£ä¸€æ¬¡ï¼Œæ‰€ä»¥å®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯`0(n)`ã€‚è¿˜æ˜¯é‚£å¥è¯ï¼Œä¸ä¼šå¯¹æ•´ä¸ªæ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æœ‰å¤ªå¤§å½±å“ã€‚

#### ğŸ–æ£é¼“ç€æ•°å­—

ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†æ¯ä¸ªå…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ï¼Œè®©æˆ‘ä»¬æ¥è®¡ç®—æ•´ä¸ªæ–¹æ³•çš„å¤æ‚åº¦ã€‚

`0(n^2)` + `0(n)` + `0(n)` = `0(n^2)`

æ­£å¦‚æˆ‘ä¹‹å‰æ‰€è¯´çš„,`0(n)`æ¯”`0(n^2)`å¿«å¾—å¤šï¼Œä¸ä¼šå¯¹æœ€ç»ˆçš„æ—¶é—´å¤æ‚åº¦äº§ç”Ÿå®è´¨æ€§çš„å½±å“ã€‚

æ‰€ä»¥ç°åœ¨ï¼Œæˆ‘çŸ¥é“æˆ‘çš„ä»£ç çš„æ—¶é—´å¤æ‚åº¦æ˜¯`0(n^2)`ã€‚ä½ å¯ä»¥åšæŒæˆ‘çš„ğŸ’©notation but `0(n^2)`ä¼šè®©ä½ çœ‹èµ·æ¥ç¨å¾®èªæ˜ä¸€ç‚¹ã€‚

è¿™å°±æ˜¯äº†è§£æ—¶é—´å¤æ‚æ€§çš„è¦ç‚¹æ´¾ä¸Šç”¨åœºçš„åœ°æ–¹ã€‚å¦‚æœæ‚¨çŸ¥é“å½“è¾“å…¥å¢åŠ æ—¶ï¼Œæ‚¨çš„ä»£ç ä¼šæˆå€åœ°å˜æ…¢ï¼Œé‚£ä¹ˆæ‚¨å°±çŸ¥é“å½“æ‚¨æ‰©å±•æ—¶ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚æ‰€ä»¥ä½ å¿…é¡»è®©ä½ çš„ä»£ç æ›´å¥½ã€‚

## è®©ç®—æ³•æ›´å¥½

æˆ‘å°†ä½¿ç”¨ [Set](https://devdocs.io/ruby~2.5/set) ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ Ruby çš„ä¸€äº›å†…ç½®æ–¹æ³•ã€‚Set åˆ›å»ºä¸€ä¸ªæ²¡æœ‰é‡å¤çš„æ— åºå€¼é›†åˆï¼Œå…·æœ‰å¿«é€ŸæŸ¥æ‰¾åŠŸèƒ½ã€‚

```
 require 'set'

  def find_pairs(array, sum)
    results = Set.new
    input = array.to_set

    input.each do |element|
      other_element = sum - element
      if input.include?(other_element)
        pair = element > other_element ? [other_element, element] : [element, other_element]
        results << pair
      end
    end
    results
  end 
```

è®©æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹:

*   æˆ‘åˆ›å»ºäº†ä¸€ä¸ªç©ºé›†æ¥å­˜å‚¨`results`ã€‚
*   æˆ‘å°†è¾“å…¥æ•°ç»„è½¬æ¢æˆä¸€ä¸ªé›†åˆï¼Œå¹¶å­˜å‚¨åˆ°`input`ä¸­ã€‚
*   æˆ‘è¿­ä»£äº†`input`ã€‚
*   æˆ‘å–ç¬¬ä¸€ä¸ªæ•´æ•°(`element`)å¹¶ä»`sum`ä¸­å‡å»å®ƒã€‚è¿™ç»™äº†æˆ‘ä¸€ä¸ªæ½œåœ¨çš„é…å¯¹æ•´æ•°(`other_element`)ã€‚
*   å¦‚æœ`other_element`åŒ…å«åœ¨`input`ä¸­(æˆ‘çš„è¾“å…¥æ•°ç»„å˜æˆäº†ä¸€ä¸ªé›†åˆ)ï¼Œé‚£ä¹ˆæˆ‘ç¡®ä¿`element`å’Œ`other_element`ä»æœ€å°åˆ°æœ€å¤§é…å¯¹ï¼Œå¹¶æ¨å…¥`results`ã€‚ä¸ºä»€ä¹ˆè¦è´¹å¿ƒå»æ•´ç†å®ƒä»¬å‘¢ï¼Ÿå› ä¸ºå¦‚æœæˆ‘æœ‰é‡å¤çš„ï¼Œ`results`ä½œä¸ºä¸€ä¸ªé›†åˆåªä¼šä¿ç•™ç¬¬ä¸€ä¸ªå‡ºç°çš„ğŸ‘Œã€‚

ä¸‹é¢æ˜¯è¿™ä¸ªæ–°ä»£ç çš„åŸºå‡†:

```
 Warming up --------------------------------------
  find pairs in 10-integer array
                           8.171k i/100ms
  find pairs in 100-integer array
                           1.533k i/100ms
  find pairs in 1000-integer array
                         146.000  i/100ms
  find pairs in 10_000-integer array
                          14.000  i/100ms
  Calculating -------------------------------------
  find pairs in 10-integer array
                           80.106k (Â± 8.6%) i/s -    400.379k in 5.037247s
  find pairs in 100-integer array
                           14.005k (Â±12.4%) i/s -     68.985k in 5.026938s
  find pairs in 1000-integer array
                            1.540k (Â± 3.8%) i/s -      7.738k in 5.033787s
  find pairs in 10_000-integer array
                          157.341  (Â± 2.5%) i/s -    798.000  in 5.074419s

  Comparison:
  find pairs in 10-integer array:    80106.5 i/s
  find pairs in 100-integer array:    14005.1 i/s - 5.72x  slower
  find pairs in 1000-integer array:     1539.6 i/s - 52.03x  slower
  find pairs in 10_000-integer array:      157.3 i/s - 509.13x  slower 
```

å¥½å¤šäº†ï¼ç°åœ¨ï¼Œå½“è¾“å…¥ä¹˜ä»¥ 10 æ—¶ï¼Œæˆ‘çš„ä»£ç åªéœ€è¦å¤šè¿è¡Œ 10 å€ã€‚å®ƒçš„æ—¶é—´å¤æ‚åº¦å·²ç»å˜æˆçº¿æ€§çš„(`0(n)`)ï¼Œå¹¶ä¸”å¤„ç† 10ï¼Œ000 ä¸ªæ•´æ•°çš„è¾“å…¥ğŸ¥³.éœ€è¦ä¸åˆ° 0ï¼Œ006 ç§’

å¥½å§ï¼Œé‚£çœŸæ˜¯è¶…çº§æå®¢ã€‚æˆ‘å¸Œæœ›å®ƒèƒ½å¸®åŠ©å…¶ä»–è®­ç»ƒè¥æˆå‘˜ç†è§£æ—¶é—´å¤æ‚æ€§ä»¥åŠå®ƒçš„ç”¨å¤„ã€‚

æˆ‘é”™è¿‡äº†ä»€ä¹ˆå—ï¼Ÿè®©æˆ‘åœ¨æ¨ç‰¹æˆ–å¼€å‘âœŒï¸.ä¸ŠçŸ¥é“

é›·ç±³

* * *

1.  ä¸æ˜¯çœŸæ­£çš„å¼€å‘è€…ç¬¦å·ã€‚ [â†©](#fnref1)

2.  ä¸€ä¸ª**Real Developer**ç¬¦å·ã€‚ [â†©](#fnref2)