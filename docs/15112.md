# æ™®é€š JS (POC)ä¸­çš„å•å‘æ•°æ®ç»‘å®š

> åŸæ–‡:[https://dev . to/phoinixi/one-way-data-binding-in-vanilla-js-POC-4dj 7](https://dev.to/phoinixi/one-way-data-binding-in-vanilla-js-poc-4dj7)

**ä»£ç å’Œæ¼”ç¤º**
[https://stackblitz.com/edit/one-way-data-binding?](https://stackblitz.com/edit/one-way-data-binding?)

### [](#lets-break-it-down-in-small-pieces)è®©æˆ‘ä»¬æŠŠå®ƒåˆ†è§£æˆå°å—

æˆ‘å‡è®¾ä½ å·²ç»ç†Ÿæ‚‰äº†æ•°æ®ç»‘å®šã€‚

å¤§å¤šæ•°ç°ä»£å‰ç«¯æ¡†æ¶éƒ½æä¾›ç°æˆçš„æ•°æ®ç»‘å®šï¼Œéšæ—¶å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯å®ƒçš„å†…éƒ¨æœ‰ä»€ä¹ˆå‘¢ï¼Ÿ

æˆ‘è¯•ç€å®ç°äº†ä¸€ä¸ªå•å‘æ•°æ®ç»‘å®šçš„åŸºæœ¬ç‰ˆæœ¬ï¼Œéå¸¸æœ‰è¶£:)

é‚£ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦ä»€ä¹ˆæ¥è¿›è¡Œå•å‘æ•°æ®ç»‘å®šå‘¢ï¼Ÿ

*   ä¸€ä¸ª**è§†å›¾**ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ HTML ä¸­ã€‚
*   ä¸€ä¸ª**çŠ¶æ€**ï¼Œç”¨ JavaScript ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚

å…³é”®ç‰¹å¾æ˜¯:

> æ¯æ¬¡çŠ¶æ€æ”¹å˜æ—¶ï¼Œè§†å›¾éƒ½éœ€è¦æ›´æ–°

æ‰€ä»¥è®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª HTML **è§†å›¾** :

```
 <div data-binding="quote"></div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å’Œä¸€ä¸ª**çŠ¶æ€** :

```
 const state = {
      quote: 'Either you run the day, or the day runs you.'
    }; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ç¬¬ä¸€æ—¶é—´è®¾ç½®è§†å›¾:

```
 document.querySelector('[data-binding="quote"]').innerHTML = state.quote 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬éœ€è¦ä¸€äº›é­”æ³•ï¼Œè¿™æ ·å½“æˆ‘ä»¬æ›´æ–°çŠ¶æ€æ—¶:

```
 state.quote = 'We become what we think about' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ™¯è‰²ä¼šç¥å¥‡åœ°æ”¹å˜ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹`state`å¯¹è±¡çš„`set`å±æ€§çš„é»˜è®¤è¡Œä¸ºï¼Œè¿™æ ·é™¤äº†æ›´æ–°æ¨¡å‹ï¼Œå®ƒè¿˜ä¼šæ›´æ–°æˆ‘ä»¬çš„**è§†å›¾**ã€‚

åœ¨ JavaScript ä¸­åšåˆ°è¿™ä¸€ç‚¹çš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨[ä»£ç†å¯¹è±¡](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy) :

```
 const createState = (state) => {
      return new Proxy(state, {
        set(target, property, value) {
          target[property] = value; // default set behaviour
          render(); // updates the view everytime the state changes
          return true;
    }
      });
    };

    const state = createState({
      quote: 'Either you run the day, or the day runs you.' // creates initial state
    }); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æœ‰äº†ä»£ç†çš„åŠ›é‡ï¼Œæ¯æ¬¡æˆ‘ä»¬æ›´æ–°æˆ‘ä»¬çš„`state`ï¼Œå‡½æ•°`render`å°±ä¼šè¢«è°ƒç”¨ã€‚
`render`çš„ä¸€ä¸ªå¯èƒ½å®ç°å¯ä»¥æ˜¯:

```
 const render = () => {
     document.querySelector('[data-binding="quote"]').innerHTML = state.quote
    }; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬ç”¨
æ¥ä¿®æ”¹çŠ¶æ€

```
 state.quote = 'We become what we think about.' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°†è°ƒç”¨`render`å‡½æ•°ï¼Œè§†å›¾å°†æ›´æ–°ï¼*é­”æ³•*ï¼ğŸ‘¨â€ğŸ’»