# React Native:å¦‚ä½•è§£æ url æŸ¥è¯¢å‚æ•°

> åŸæ–‡:[https://dev . to/kapilgorve/react-native-how-to-parse-URL-query-parameters-kp2](https://dev.to/kapilgorve/react-native-how-to-parse-url-query-parameters-kp2)

[![](../Images/1f637a3914ca2177794c12b897aa89f8.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--YQV1Jmoh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s3.ap-south-1.amazonaws.com/kapilgorve/blog/covers/React-Native-parse-url-query-params.jpg) (å›¾ç‰‡é¸£è°¢:unsplash.com)

## [](#tldr-solution)TLDR è§£

```
let url = 'AppName://redirect/subpart/?token=123&refreshToken=123'
let regex = /[?&]([^=#]+)=([^&#]*)/g,
  params = {},
  match
while ((match = regex.exec(url))) {
  params[match[1]] = match[2]
  console.log(match[1], match[2])
}
const { token, refreshToken } = params 
```

å¦‚æœä½ æœ‰ä¸€ä¸ªæˆªæ­¢æ—¥æœŸ(è€Œæˆ‘ä»¬æ²¡æœ‰ï¼Ÿå‘ƒ)ä¹Ÿä¸åœ¨ä¹è§£é‡Šã€‚å¤åˆ¶ç‰‡æ®µå¹¶è§£å†³æ‚¨çš„é—®é¢˜ã€‚æˆ‘ä¸æ˜ç™½è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Œæ‰€ä»¥åœ¨æˆ‘å®Œæˆæœ€åæœŸé™åï¼Œæˆ‘æ‡’å¾—å†™åšå®¢äº†ã€‚é—®é¢˜æ˜¯æˆ‘ä¸å¤ªäº†è§£æ­£åˆ™è¡¨è¾¾å¼ã€‚æ²¡æœ‰ä¾‹å­ï¼Œæˆ‘æ— æ³•ä»å¤´å¼€å§‹å†™ï¼Œç”šè‡³æˆ‘çš„ç”Ÿå‘½éƒ½ä¾èµ–äºå®ƒã€‚ä½œä¸ºä¸€å junir deveï¼Œæˆ‘è¢«å‘ŠçŸ¥è¦é¿å…ä½¿ç”¨å®ƒä»¬ï¼Œæˆ‘å¬ä»äº†è¿™ä¸ªå»ºè®®ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œã€‚

## [](#the-problem)é—®é¢˜

è¯´åˆ° url è§£æï¼Œæˆ‘ä½¿ç”¨æµè§ˆå™¨ api ä¸­çš„`URL`æ¥å£ã€‚ä¸ºäº†è®©æœç´¢å‚æ•°å‡ºç°åœ¨ url ä¸­ï¼Œæˆ‘ä¼šè¿™æ ·åš:

```
// https://some.site/?id=123
var parsedUrl = new URL(window.location.href)
console.log(parsedUrl.searchParams.get('id')) // 123 
```

è¿™ä¸ªç‰‡æ®µå°†è§£å†³å‰ç«¯åº”ç”¨ç¨‹åºä¸­çš„å¸¸è§é—®é¢˜ã€‚åœ¨ React Native thoguh ä¸­æ²¡æœ‰è¿™æ ·çš„å¯¹ç­‰è¯ã€‚æ‰€æœ‰çš„è°·æ­Œæœç´¢éƒ½æ¥è‡ªç¬¬ä¸‰æ–¹åº“ã€‚æˆ–è€…å †å åŒ…å«å¤æ‚æ­£åˆ™è¡¨è¾¾å¼çš„ Overlflow ç­”æ¡ˆæ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚æˆ‘å¯¹æ­£åˆ™è¡¨è¾¾å¼æ„Ÿåˆ°ä¸èˆ’æœã€‚æ®æˆ‘æ‰€çŸ¥ï¼Œå¦‚æœæ²¡æœ‰ä¸Šä¸‹æ–‡ï¼Œå®ƒä»¬å¾ˆéš¾è°ƒè¯•ã€‚æˆ‘ä¹Ÿæœ‰åŒæ„Ÿã€‚

æˆ‘å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æ–¹æ³•ã€‚å½“æˆ‘åªéœ€è¦å¾—åˆ° pne å‚æ•°æ—¶ï¼Œæˆ‘åšåˆ°äº†ã€‚åœ¨æ·»åŠ äº†ä¸€äº›é‡è¦çš„å‚æ•°ä¹‹åã€‚string æ–¹æ³•æ„Ÿè§‰æ›´åƒæ˜¯ä¸€ä¸ªé»‘å®¢ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåˆé€‚çš„è§£å†³æ–¹æ¡ˆã€‚ä¹Ÿæœ‰å¯èƒ½ä»¥åä¼šæ”¹å˜ url çš„é¡ºåºï¼Œè¿™ä¼šç ´åå·²å‘å¸ƒçš„åº”ç”¨ç¨‹åºåŠŸèƒ½ã€‚è¿™æ„å‘³ç€æ¯æ¬¡åºåˆ—æ”¹å˜æ—¶éƒ½è¦æ·»åŠ ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œå¹¶æ‰“ç ´æ”¹å˜ã€‚å¯¹äº React Nativeï¼Œæˆ‘éå¸¸è°¨æ…åœ°ä¸ºçç¢çš„äº‹æƒ…æ·»åŠ ç¬¬ä¸‰æ–¹åº“ã€‚ç»è¿‡ä¸€å¤©çš„æœç´¢ï¼Œæˆ‘æ‰¾åˆ°äº†è¿™ä¸ªè§£å†³æ–¹æ¡ˆã€‚é—æ†¾çš„æ˜¯ï¼Œå½“æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œæˆ‘æ‰¾ä¸åˆ°åŸæ–‡ï¼Œæ‰€ä»¥æ— æ³•å›ç­”è¿™ä¸ªé—®é¢˜ã€‚

## [](#explaination)è§£è¯´

æˆ‘ä»¬åœ¨è¿™é‡Œå®šä¹‰ä¸€ç§æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼å°†ä»¥`&`å­—ç¬¦å¼€å§‹ã€‚å› ä¸ºæˆ‘ä»¬çš„ç½‘å€å‚æ•°å°†åœ¨`&`ä¹‹åã€‚

`regex.exec(url)``.exec()`åŠŸèƒ½å°†æœç´¢`url`ä¸­å®šä¹‰çš„æ¨¡å¼`regex`ã€‚

ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨ while å¾ªç¯ï¼Ÿ

è¿™å°†åœ¨æ¯æ¬¡æ‰§è¡Œæ—¶è¿”å›æ¯ä¸ªåŒ¹é…ã€‚å¦‚æœä½ åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œä½¿ç”¨å¾ªç¯æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚æˆ‘éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ª`while`å¾ªç¯ã€‚è¿”å›çš„åŒ¹é…é¡¹çš„æ ¼å¼ä¸º match[0] =åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œmatch[1]=é”®ï¼Œmatch[2]=å€¼ã€‚

```
let url = 'AppName://redirect/subpart/?token=123&refreshToken=123';
      let regex = /[?&]([^=#]+)=([^&#]*)/g,
      params = {},
      match;
      match = regex.exec(url);
      console.log(match);

Output:
  [
    0: "?token=123"
    1: "token"
    2: "123"
    groups: undefined
    index: 27
    input: "AppName://redirect/subpart/?token=123&refreshToken=123"
    length: 3
    __proto__ : Array(0)
  ] 
```

`params[match[1]] = match[2]`æˆ‘ä»¬å°†åŒ¹é…çš„å­—ç¬¦ä¸²ä½œä¸ºé”®å€¼å¯¹å­˜å‚¨åœ¨`params`ä¸­ã€‚è¿™åªæ˜¯å¦ä¸€ç§å¥‡ç‰¹è€Œåˆå……æ»¡æ´»åŠ›çš„æ–¹å¼æ¥å†™`params.token=match[2]`ã€‚è¿™æ ·æˆ‘ä»¬å°±ç»™`params`å†™äº†ä¸€ä¸ªåŠ¨æ€å¯†é’¥ã€‚ç¬¬ä¸€æ¬¡è¿™å°†ä¸ºæˆ‘å­˜å‚¨ä¸€ä¸ª`token`å±æ€§ï¼Œç¬¬äºŒæ¬¡å­˜å‚¨`refreshToken`ã€‚

æœ€åï¼Œæˆ‘ä½¿ç”¨ [ES6 ææ„è¯­æ³•](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)å°†ä¸¤ä¸ªå±æ€§æå–ä¸ºå•ç‹¬çš„å˜é‡ã€‚

`const { token, refreshToken } = params`

æœ¬å¸–æœ€åˆå‘å¸ƒäº[https://www . jskap . com/blog/React-Native-parse-URL-query-params/](https://www.jskap.com/blog/React-Native-parse-url-query-params/)

ğŸ‘‹å—¨ï¼æˆ‘æ˜¯å¡çš®å°”ã€‚æˆ‘æ€»æ˜¯å–‹å–‹ä¸ä¼‘åœ°è°ˆè®ºå»ºé€ ä¸œè¥¿ï¼Œåˆ†äº«æˆ‘çš„çŸ¥è¯†ï¼Œè‡ªç”±èŒä¸šã€‚æ¥ https://twitter.com/kapilgorve å’Œæˆ‘æ‰“æ‹›å‘¼å§