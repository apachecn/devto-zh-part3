# Solo Dev 的代码审查

> 原文：<https://dev.to/perigk/code-review-for-the-solo-dev-638>

我将开始这篇文章，就像我在这个系列的[上一篇](https://dev.to/perigk/self-testing-for-solo-devs-1k5p)中所做的那样。

没有什么可以取代一个伟大的团队。但是一个真正的战士必须能够在需要的时候依靠自己。

如今，一些人在一个团队中工作。

他们是主题专家，是各自领域的佼佼者(而我是地球上最不可能给他们任何专业建议的人)。

刚刚创立自己公司的人(或者他们公司的合伙人不是技术人员)。

或者是那些总是远程工作的人，他们与总部位于完全不同的时区，很难从其他同事那里获得帮助。

### 代码评审，最低可接受软件质量的里程碑

正如杰夫·阿特伍德(StackOverflow 的创始人)在他的文章[代码评审中指出的:只管去做](https://blog.codinghorror.com/code-reviews-just-do-it/)

> 我相信同行代码评审是你能做的改进代码的最重要的事情。如果你现在没有和另一个开发人员一起做代码评审，你就会错过很多代码中的 bug，并且失去一些关键的专业发展机会。就我而言，我的代码直到我和同事一起检查过之后才算完成。

如果这样一个有经验的成功工程师大胆地支持代码审查的重要性，即使你不同意，你至少要试一试。

让我们继续讨论最重要的领域，在我看来，在审查他们自己的代码时，单独的工程师应该关注这些领域。

### 自动化构建和自动化测试是否完美地通过了？

你两样都没有？太糟糕了，没有借口给像 gitlab 和 bitbucket 这样的服务提供免费的 CI 服务。也没有借口，因为[单元测试](https://dev.to/perigk/a-comprehensive-introduction-to-unit-testing-and-mocking-with-python3-624)比以往任何时候都更容易编写，因为无处不在的单元测试框架非常友好。

如果你两者都有，而且圣诞老人带了一份礼物来表扬你，但是任何一个自动化的过程都失败了，这将会给你敲响很多钟。但如果没有，这不是一个解决的迹象。

### 你写了新的测试了吗？

没有吗？真的吗？我太失望了。:(

我将引用 Django 投稿指南中的一段话

> 当我们说“PEP 8，并且必须有文档和测试”时，我们是认真的。如果一个补丁没有文档和测试，最好有一个好的理由。像“我找不到这个特性的任何现有测试”这样的论点没有太大的分量——虽然这可能是真的，但这意味着你有额外的重要工作来为那个特性编写第一个测试，而不是说你可以通过编写测试。

TDD 很难，但是拥有单元测试和可测试的代码有巨大的好处。

### 想想你的代码会如何影响现有的功能(回归)

在这个领域，有一个伟大的测试套件将会拯救你的屁股。这总是取决于您的套件的覆盖率，鉴于大多数人的覆盖率不到 100%，您的直觉和分析思维在这里会有很大的帮助。

### 差异是否有道理？

使用任何比较工具看一看，看看所做的更改是否有意义。

如果你正在处理一个安全问题，foo.css 有必要改变吗？如果你想增强一个表单，你需要改变 3 个配置文件吗？

大概不会。保持警惕，当遇到困难时，它会回报你的。假装别人问你，为什么你改变了一个特定的路线，并准备好向你的好朋友彻底解释。

### 运行安全分析

有没有不小心引入了什么安全漏洞？我指的是显而易见的东西，比如将未经清理的输入传递给数据库。在周围有大量的安全静态检查器[你可以挑选更适合你工作的。](https://www.owasp.org/index.php/Source_Code_Analysis_Tools)

此外，检查没有敏感信息被记录是至关重要的。

例如，如果打算将软件部署到符合 PCI-DSS 标准的公司，则不应记录任何卡号。在记录函数的所有参数时，很容易忘记这一点。

### 说起日志，你是(欠|过)日志吗？

当一个偷偷摸摸的 bug 浮出水面时，记录不足会让你毛骨悚然。尤其是如果你已经记录了受影响地区附近的一些事件。

过多的日志记录会降低代码的速度，成倍地增加日志文件的大小，并且在需要检查的时候会让你大海捞针。

我的建议是使用日志级别，默认级别可以很容易地更改。在这种情况下，您可以在调查问题时增加日志输出，而在不调查问题时获得更清晰的日志。除非调查的状态比完美工作的状态更频繁。

### 代码是否照顾到了极端情况和无效参数？

如果在一次大规模数据库更新过程中网络中断，或者我给你我的名字作为我的电话，你的系统会发生什么？

这与上面的安全检查有点重叠。

### 你更新了标签、文档和变更日志了吗？

这不是一个真正的功能需求，但是如果你正在开发的软件不是供个人使用的话，这是必要的(即使这样，记录你的行为也是有用的)。

通常，这包括以下内容:

*   关闭问题跟踪器中的票证，并添加相关的拉取请求链接/完整差异链接(如果不是自动完成的话)(如吉拉-位存储桶集成)
*   如果您正在一个分支上工作，关闭拉式请求(强烈推荐，即使对于单独的团队)
*   更新变更日志
*   如果需要，修改 API/用户文档并推送给用户

### 更值得考虑的几点

*   守则是否符合公司的标准？哪怕是单飞公司，你在哪里当老板？肮脏的代码有时很诱人。
*   如果你改变了一个函数，你记得修改它的注释吗？
*   复杂表达式和幻值可以分别提取到(n)(内联)函数和常数中吗
*   新的类/函数有适当的文档吗？
*   包/类/函数/变量有有意义的名字吗？
*   您是否不小心在适当的位置添加了注释代码或重复代码，从而影响了可读性？
*   如果您的新代码暴露在巨大的数据量或流量中，它会扩展吗？有什么立竿见影的方法来改善这种情况吗？
*   你能在两年内开发这个功能，而不用浪费太多时间重新熟悉吗？

### 最后，但同样重要的是，如果你独自一人去做，那会困难得多

就像在测试中，很难对自己做出严格的判断，这是大多数人的通病。

在过去的几年里，有一些服务让人们重新审视你的代码，比如 [pullrequest](https://www.pullrequest.com/) 。我还没有尝试过这项服务，但当独自一人是唯一的选择并且风险很高时，这看起来是个好主意。

### 这就是所有的乡亲

感谢您花时间阅读本文，希望您喜欢。如果你有不同的方法来审查代码，请分享你的智慧。

祝你来年万事如意。

*原载于 https://perigk.github.io/**。*

* * *