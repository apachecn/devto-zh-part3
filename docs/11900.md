# å†’æ³¡å’Œæ•è· JS äº‹ä»¶

> åŸæ–‡:[https://dev . to/Dao lf/things-you-should-know-about-js-events-4k2l](https://dev.to/daolf/things-you-should-know-about-js-events-4k2l)

æˆ–è€…æˆ‘åº”è¯¥è¯´ï¼Œå…³äº DOM äº‹ä»¶ä½ åº”è¯¥çŸ¥é“çš„äº‹æƒ…ã€‚

å¦‚æœä½ æœ‰æœºä¼šåšä¸€äº›å®¢æˆ·ç«¯ JSï¼Œä½ å½“ç„¶å¿…é¡»å¤„ç†äº‹ä»¶ã€‚è™½ç„¶åƒ Jquery è¿™æ ·çš„åº“ä½¿å¾—è¿™æ ·åšå˜å¾—éå¸¸å®¹æ˜“å’Œç®€å•ï¼Œä½†æˆ‘è®¤ä¸ºä»ç„¶æœ‰ä¸€äº›å¯ç–‘çš„éƒ¨åˆ†å€¼å¾—ç ”ç©¶ã€‚

### [](#the-event-object)äº‹ä»¶å¯¹è±¡

è®©æˆ‘ä»¬ä»æ•æ‰ä¸€ä¸ªè™šæ‹Ÿäº‹ä»¶å¯¹è±¡å¼€å§‹ï¼Œå¹¶å¯¹å…¶è¿›è¡Œç ”ç©¶ï¼Œå°±åƒè¿™æ ·ç®€å•:

```
document.body.addEventListener(â€œclickâ€, function(event) {
    console.log(event);
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä½ çœ‹ç€è¿™ä¸ªç‰©ä½“ï¼Œä½ ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœ:

[![](../Images/6d546947366e0aad9ca1503335e41571.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--4fpxph9L--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.daolf.com/images/post-1/event.png%23center)

å¯ä»¥çœ‹åˆ°å¾ˆå¤šä¸äº‹ä»¶å®é™…ä½ç½®ç›¸å…³çš„å±æ€§ã€‚`isTrusted`å±æ€§è¡¨ç¤ºäº‹ä»¶æ˜¯ç”±å®é™…ç”¨æˆ·è€Œä¸æ˜¯è„šæœ¬ç”Ÿæˆçš„ã€‚ä»Šå¤©æˆ‘ä»¬ä¸æ‰“ç®—æŠŠå®ƒä»¬éƒ½åŒ…æ‹¬åœ¨å†…ï¼Œè€Œæ˜¯åªåŒ…æ‹¬çº¢è‰²çŸ©å½¢å†…çš„å››ä¸ªã€‚

### [](#usecapture-or-the-unknown-parameter)ä½¿ç”¨ Captureï¼Œæˆ–æœªçŸ¥å‚æ•°

è¿™å°±æ˜¯æˆ‘å¦‚ä½•å°†äº‹ä»¶ç›‘å¬å™¨æ·»åŠ åˆ°æˆ‘çš„ä¸»ä½“:

```
document.body.addEventListener(â€œclickâ€, function(event) {
    console.log(event);
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ˜¯æˆ‘çš„ DOM åœ¨æ•æ‰è¿™ä¸ªäº‹ä»¶æ—¶çš„æ ·å­:

```
<body>
    <div id="div1">
        Click me!
    </div>
</body> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‰€ä»¥é€šè¿‡ç‚¹å‡»ä¸€ä¸ª div æ ‡ç­¾ï¼Œä¸€ä¸ªé™„åŠ åˆ°ä¸»ä½“çš„å¤„ç†ç¨‹åºè¢«æ‰§è¡Œï¼Œè¿™æ€ä¹ˆå¯èƒ½å‘¢ï¼Ÿæˆ‘æ˜¯è¯´ï¼Œæˆ‘ç‚¹å‡»äº†ä¸€ä¸ª div æ ‡ç­¾ï¼Œè€Œä¸æ˜¯ä¸»ä½“ã€‚å—¯ï¼Œä½ æƒ³åˆ°çš„ç¬¬ä¸€ä¸ªç­”æ¡ˆå¯èƒ½æ˜¯:

> â€œäº‹ä»¶éå† domï¼Œæ•…äº‹ç»“æŸï¼Œæ²¡æœ‰ä»€ä¹ˆå€¼å¾—å†™ä¸€ç¯‡æ–‡ç« â€

ä½ æ˜¯å¯¹çš„ï¼Œäº‹ä»¶ç¡®å®éå†äº† domï¼Œä½†æ˜¯æŒ‰ç…§ä»€ä¹ˆé¡ºåºå‘¢ï¼Ÿæˆ‘æ˜¯è¯´ï¼Œæƒ³æƒ³å§ã€‚ä¸¤ç§é¡ºåºéƒ½æ˜¯å¯èƒ½çš„ï¼Œè€Œä¸”éƒ½åŒæ ·æœ‰æ„ä¹‰ã€‚

*   å¤šå§†ç§©åº(éå®˜æ–¹åç§°)

æ‰€ä»¥ DOM æ˜¯ä¸€æ£µæ ‘ï¼Œè¦éå†ä¸€æ£µæ ‘ï¼Œä½ è¦ä»æ ‘æ ¹åˆ°æ ‘å¶ï¼Œå¯¹å—ï¼Ÿæ‰€ä»¥åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œbody æ ‡ç­¾æ˜¯æ ¹ï¼Œdiv æ ‡ç­¾æ˜¯å¶ï¼Œè¿™çœ‹èµ·æ¥å¯ä»¥æ¥å—å—ï¼Ÿ

> â€œå“¼ä¸ºä»€ä¹ˆä¸å‘¢ï¼Ÿä½†æ˜¯å¦ä¸€ç§æ–¹æ³•å‘¢

*   UI è®¢å•(éæ­£å¼åç§°)

ä½ ä¹Ÿå¯ä»¥äº‰è¾©è¯´ï¼Œå› ä¸ºä½ ï¼Œä½œä¸ºä¸€ä¸ªç”¨æˆ·ï¼Œçœ‹åˆ°äº†ä¸»ä½“ä¸Šé¢çš„ divï¼Œå› æ­¤ç‚¹å‡»äº† div è€Œä¸æ˜¯ä¸»ä½“ï¼Œäº‹ä»¶å¯ä»¥ä» div åˆ°ä¸»ä½“ã€‚ä»å¶å­åˆ°æ ¹ã€‚è¿™ä¹Ÿæ˜¯æœ‰é“ç†çš„ã€‚

> â€œæ˜¯çš„ï¼Œè¿™æ›´æœ‰é“ç†ï¼Œè¿™å°±æ˜¯æˆ‘è§‚å¯Ÿåˆ°çš„ï¼ŒçœŸç›¸åœ¨å“ªé‡Œï¼Ÿ''

çœŸç›¸åœ¨ W3Cï¼Œæˆ‘ä»¬ä¸€èµ·å›é¡¾ä¸€ä¸‹ï¼Œå†æ¥çœ‹çœ‹ addEventListener æ–¹æ³•ã€‚

[![[http://www.w3schools.com/jsref/met_element_addeventlistener.asp](http://www.w3schools.com/jsref/met_element_addeventlistener.asp)](../Images/18840fca7ad7d4ea5aafb0755ff2c2f8.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Klk0xd1Z--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/3448/1%2Amcu2E6x8CKTjGjkCqg-_KA.png)*[http://www . w3schools . com/jsref/met _ element _ addevent listener . ASP](http://www.w3schools.com/jsref/met_element_addeventlistener.asp)*

ä½ çœ‹åˆ°ç¬¬ä¸‰ä¸ªå¸ƒå°”å‚æ•°ï¼Œè¿™æ˜¯æ‰€æœ‰ç¥å¥‡äº‹æƒ…å‘ç”Ÿçš„åœ°æ–¹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å‚æ•°ä¸º falseï¼Œè¿™æ„å‘³ç€ï¼Œæ ¹æ®è¯­ä¹‰ï¼Œé»˜è®¤æƒ…å†µä¸‹æˆ‘ä»¬ä¸ä½¿ç”¨æ•è·ã€‚æ³¨æ„ï¼Œè¿™ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æˆ‘ä¸èƒ½ç”¨ Jquery å†™è¿™ç¯‡æ–‡ç« çš„åŸå› ã€‚click()æ–¹æ³•(æˆ–ä»»ä½•å…¶ä»–ä¸äº‹ä»¶ç›¸å…³çš„æ–¹æ³•)æ²¡æœ‰ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚

> â€œä½†ä»€ä¹ˆæ˜¯æ•æ‰å‘¢ï¼Ÿ''

æ•è·æ˜¯ä¸€ç§æ¨¡å¼ï¼Œæ˜¯æˆ‘ä»¬ä¹‹å‰æåˆ°çš„ DOM é¡ºåºã€‚å¦ä¸€ç§æ¨¡å¼ï¼Œé»˜è®¤æ¨¡å¼ï¼Œæ˜¯å†’æ³¡æ¨¡å¼ï¼Œå¦‚æœä½ å–œæ¬¢çš„è¯ï¼Œæ˜¯ UI é¡ºåºã€‚è¿™ä¸¤ç§æ¨¡å¼å°†å†³å®šå¤„ç†ç¨‹åºæ˜¯åœ¨æ•è·é˜¶æ®µè¿˜æ˜¯å†’æ³¡é˜¶æ®µæ‰§è¡Œã€‚

### [](#the-bubbling-and-the-capturing-phase)å†’æ³¡å’Œæ•æ‰é˜¶æ®µ

å½“ä½ ç‚¹å‡»ä¸€ä¸ªæ–‡æ¡£æ—¶ï¼Œäº‹ä»¶é¦–å…ˆä»ä½ çš„ DOM çš„æ ¹ï¼Œçª—å£èŠ‚ç‚¹ï¼Œåˆ°å¶å­ï¼Œè¿™æ˜¯æ•è·é˜¶æ®µã€‚ä¸€æ—¦äº‹ä»¶åˆ°è¾¾å¶å­ï¼Œå°±åƒæ°´ä¸­çš„æ°”æ³¡è¯•å›¾å›åˆ°è¡¨é¢ï¼Œäº‹ä»¶å›åˆ° DOM çš„æ ¹ï¼Œè¿™æ˜¯å†’æ³¡é˜¶æ®µã€‚

[![courtesy of W3C](../Images/c94e2bad88fc26f0bd28336d6810557f.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--SR-uvIxL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2000/1%2AEhug03eY1tIyJ9LdSdDljA.png%23center)

é€šè¿‡è®¾ç½®ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæ‚¨åªéœ€å‘Šè¯‰ DOM å…ƒç´ åœ¨å†’æ³¡é˜¶æ®µæˆ–æ•è·é˜¶æ®µæ‰§è¡Œå¤„ç†ç¨‹åºã€‚å› ä¸ºè¯¥å‚æ•°æœ‰ä¸€ä¸ªé»˜è®¤å€¼ï¼Œè¦†ç›–äº†å¤§éƒ¨åˆ†ç”¨ä¾‹ï¼Œæ‰€ä»¥å®ƒå·²ç»è¢«é—å¿˜äº†ã€‚é€šè¿‡æ­£ç¡®ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°æ§åˆ¶æˆ‘ä»¬çš„æ´»åŠ¨ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºã€‚

å¦‚æœæˆ‘ä»¬ä¸ºæ¯ä¸ªé˜¶æ®µæ·»åŠ ä¸€ä¸ªäº‹ä»¶ä¾¦å¬å™¨ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Œå®ƒä»¬ä¼šä»¥ä»€ä¹ˆé¡ºåºè¢«è§¦å‘ï¼Ÿè®©æˆ‘ä»¬ç¨å¾®ä¿®æ”¹ä¸€ä¸‹ä»£ç ã€‚

```
//Capturing phase
document.body.addEventListener("click", function(event) {
  console.log(" body capturing");
}, true);

document.getElementById("div1").addEventListener("click", function(event) {
  console.log(" div1 capturing");
}, true);

//Bubbling phase
document.getElementById("div1").addEventListener("click", function(event) {
  console.log(" div1 bubbling");
}, false);

document.body.addEventListener("click", function(event) {
  console.log(" body bubbling");
}, false); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ­£å¦‚æ‰€æ–™ï¼Œå¦‚æœæˆ‘ä»¬å•å‡» divï¼Œè¿™å°†æ˜¯è·Ÿè¸ªç»“æœ:

[![](../Images/1532fc56885d9d6c1cd2cf5b7c635cf7.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--nW5KmaLY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2000/1%2AwjpMIeFeIKP108ab7vuUxg.png%23center)

ä½ å¯ä»¥åœ¨è¿™é‡Œè‡ªå·±å»æŸ¥[(åˆ«å¿˜äº†æ‰“å¼€æ§åˆ¶å°)ã€‚](https://codepen.io/daolf/pen/eJxbVL)

æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œè¿™éå¸¸ç®€å•ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å…è®¸æ‚¨åˆ¤æ–­å¤–éƒ¨ div åº”è¯¥åœ¨å†…éƒ¨ div ä¹‹å‰è¿˜æ˜¯ä¹‹åæ‰§è¡Œå¤„ç†ç¨‹åºã€‚è¯·æ³¨æ„ï¼Œæ‚¨å¯ä»¥éšæ—¶ä½¿ç”¨:
æ¥å‘Šè¯‰äº‹ä»¶åœæ­¢ä»¥ä¸€ç§æ¨¡å¼æˆ–å¦ä¸€ç§æ¨¡å¼ä¼ æ’­

```
event.stopPropagation() 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#currenttarget-and-target)å½“å‰ç›®æ ‡å’Œç›®æ ‡

ç°åœ¨æ‚¨å·²ç»ç†è§£äº†äº‹ä»¶åœ¨ DOM ä¸­åŒå‘ä¼ é€’ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ä»ç„¶å¾ˆéš¾å›ç­”ã€‚

> åœ¨æˆ‘çš„å¤„ç†ç¨‹åºä¸­ï¼Œæˆ‘å¦‚ä½•çŸ¥é“äº‹ä»¶æ¥è‡ªå“ªé‡Œï¼Ÿ

ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬é™„åŠ åˆ°ä¸»ä½“çš„å¤„ç†ç¨‹åºä¸­ï¼Œå¦‚æœæˆ‘ä»¬å•å‡»ä¸»ä½“ï¼Œå¹¶ä¸”åªåœ¨ä¸»ä½“ä¸Šï¼Œè€Œä¸æ˜¯åœ¨ä¸Šé¢çš„ div ä¸­ï¼Œæˆ‘æƒ³è¦æ‰§è¡Œå¤„ç†ç¨‹åºæ€ä¹ˆåŠã€‚è¿™æ­£æ˜¯å¯ä»¥ä½¿ç”¨ currentTarget å’Œ Target çš„æƒ…å†µã€‚

`currentTarget`å¾ˆå¥½ï¼Œ`currentTarget`å°†æ€»æ˜¯å…·æœ‰ DOM å…ƒç´ çš„å€¼ï¼Œè¯¥å…ƒç´ é™„åŠ äº†äº‹ä»¶ç›‘å¬å™¨ã€‚è¿™æ„å‘³ç€åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ŒcurrentTarget æ€»æ˜¯å°† body å…ƒç´ ä½œä¸ºå€¼ã€‚

`target`å°†å…·æœ‰é¦–å…ˆæ¥æ”¶äº‹ä»¶çš„ DOM å…ƒç´ çš„å€¼(é¼ æ ‡ä¸‹çš„å…ƒç´ )ã€‚æ‰€ä»¥å¦‚æœä½ æƒ³è®©å¤„ç†ç¨‹åºåªåœ¨ä¸»ä½“è¢«â€œçœŸæ­£â€ç‚¹å‡»æ—¶æ‰§è¡Œï¼Œä½ å¯ä»¥è¿™æ ·åš:

```
document.body.addEventListener("click", function(event) {
  // Target and currentTarget are the same
  // You clicked on the body
  if(event.target === event.currentTarget) {
    // the behavior you want
  } else {
    // default behavior
  }
}, false); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#thank-you-for-reading)æ„Ÿè°¢é˜…è¯»:

æˆ‘å¸Œæœ›ä½ ç°åœ¨æ¯” 5 åˆ†é’Ÿå‰æ›´äº†è§£ JS äº‹ä»¶ã€‚

å¦‚æœä½ æœ‰ä»»ä½•å…³äº JS äº‹ä»¶çš„é—®é¢˜ï¼Œè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ï¼Œä¸è¦å¿˜è®°[è®¢é˜…](https://www.daolf.com/stay_updated/)æˆ‘çš„æ—¶äº‹é€šè®¯ï¼Œè¿˜æœ‰æ›´å¤šçš„å†…å®¹:)(ä½ è¿˜å¯ä»¥å…è´¹è·å¾—æˆ‘ä¸‹ä¸€æœ¬ç”µå­ä¹¦çš„ç¬¬ä¸€ç« ğŸ˜).

## [](#things-you-might-like)ä½ å¯èƒ½å–œæ¬¢çš„äº‹ç‰©:

ä½ å¯ä»¥é˜…è¯»æˆ‘çš„æ–° GIT ç³»åˆ—çš„ç¬¬ 1 éƒ¨åˆ†ï¼Œè¿™é‡Œçš„äººä¼¼ä¹å¾ˆå–œæ¬¢ï¼Œå®ƒè°ˆåˆ°äº†è‡­åæ˜­è‘—çš„`.git`ç›®å½•ã€‚

[![daolf](../Images/279327c39e65b127ba43b78117e6e2f0.png)](/daolf) [## é€šè¿‡æ¢ç´¢ã€‚git ç›®å½•

### çš®åŸƒå°” 2 æœˆ 25 æ—¥ 196 åˆ†é’Ÿé˜…è¯»

#git #junior #showdev #beginners](/daolf/git-series-13-understanding-git-for-real-by-exploring-the-git-director--5bd0)

æˆ–è€…å…³äº Python çš„ä¸œè¥¿[è¿™é‡Œ](https://www.daolf.com/posts/beware-of-python-dict/)ï¼›)