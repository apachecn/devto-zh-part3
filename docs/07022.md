# åœæ­¢å°†æ‚¨çš„ process.env.NODE_ENV å¤åˆ¶åˆ°å±€éƒ¨å˜é‡ï¼ğŸ¤¯

> åŸæ–‡:[https://dev . to/lgraziani 2712/stop-copy-your-process-env-vars-to-local-variables-3 jen](https://dev.to/lgraziani2712/stop-copying-your-process-env-vars-to-local-variables-3jen)

> å°é¢å›¾ç‰‡æ¥è‡ª
> [https://www . national geographic . com/photography/proof/2017/06/bird-gallery/](https://www.nationalgeographic.com/photography/proof/2017/06/bird-gallery/)

## TLï¼›é€Ÿåº¦ä¸‰è§’å½¢å®šä½æ³•(dead reckoning)

è€Œä¸æ˜¯è¿™ä¸ª:

*   ä¾‹å­

```
const localAndLessCode = process.env.NODE_ENV;

if (localAndLessCode !== 'production') {
  // do dev-only things

  console.warn('[dev-only] Warnings to help devs!');
}

export function anotherFunc(num) {
  if (localAndLessCode !== 'production' && typeof num !== 'number') {
    console.warn('[dev-only] Warnings to help devs!');
  }

  // Do something
} 
```

è¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œ:

*   ä¾‹å­

```
if (process.env.NODE_ENV !== 'production') {
  // do dev-only things

  console.warn('[dev-only] Warnings to help devs!');
}

export function anotherFunc(num) {
  if (process.env.NODE_ENV !== 'production' && typeof num !== 'number') {
    console.warn('[dev-only] Warnings to help devs!');
  }

  // Do something
} 
```

## [](#why)ä¸ºä»€ä¹ˆï¼Ÿ

åƒ babel è¿™æ ·çš„å·¥å…·ä¼šç”¨å®ƒçš„å€¼æ›¿æ¢æ¯ä¸€ä¸ª`process.env.NODE_ENV`(ä»¥åŠä»»ä½•å…¶ä»–çš„`proces.env`å˜é‡)ã€‚ç„¶åï¼Œä¸Šé¢çš„ä¾‹å­å°†è¢«è½¬æ¢æˆè¿™æ ·:

*   ä¾‹å­

```
const localAndLessCode = 'production';

if (localAndLessCode !== 'production') {
  // do dev-only things

  console.warn('[dev-only] Warnings to help devs!');
}

export function anotherFunc(num) {
  if (localAndLessCode !== 'production' && typeof num !== 'number') {
    console.warn('[dev-only] Warnings to help devs!');
  }

  // Do something
} 
```

*   ä¾‹å­

```
if ('production' !== 'production') {
  // do dev-only things

  console.warn('[dev-only] Warnings to help devs!');
}

export function anotherFunc(num) {
  if ('production' !== 'production' && typeof num !== 'number') {
    console.warn('[dev-only] Warnings to help devs!');
  }

  // Do something
} 
```

å¦‚æ‚¨æ‰€è§ï¼Œåœ¨ç¬¬äºŒä¸ªç¤ºä¾‹ä¸­ï¼Œä¸¤ä¸ªæ¯”è¾ƒéƒ½æ˜¯é™æ€çš„ã€‚åƒ webpack çš„`TerserPlugin`æˆ–`babel-minify`è¿™æ ·çš„ä¸‘åŒ–è€…ä¼šåˆ©ç”¨è¿™ä¸€ç‚¹æ¥åˆ é™¤é‚£äº› if(å’Œå®ƒä»¬çš„å†…å®¹ï¼).

### [](#its-free)å…è´¹ï¼

è¿™çœŸçš„å¾ˆé…·ï¼Œå› ä¸ºä½ ä¸éœ€è¦é…ç½®ä»»ä½•ä¸œè¥¿æ¥å‡å°‘ä½ çš„åŒ…çš„å¤§å°ï¼Œä½ å¯ä»¥åœ¨ä½ çš„ä»£ç ä¸­*ä¿®æ­£*ï¼å®ƒå°†å¸®åŠ©ä½ å‡å°‘*å¤§é‡*ä½ ä¸æƒ³åœ¨äº§å“æ„å»ºä¸­ä½¿ç”¨çš„ä»£ç ï¼