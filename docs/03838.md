# ç†è§£ Go ä¸­çš„ç©ºç•Œé¢

> åŸæ–‡:[https://dev . to/flrnd/understanding-the-empty-interface-in-go-4652](https://dev.to/flrnd/understanding-the-empty-interface-in-go-4652)

é¦–å…ˆï¼Œè¦äº†è§£æ›´å¤šå…³äºæ¥å£çš„çŸ¥è¯†ï¼Œå»ºè®®é˜…è¯»[å¦‚ä½•åœ¨ go](https://jordanorelli.com/post/32665860244/how-to-use-interfaces-in-go) å’Œ [Go æ•°æ®ç»“æ„ä¸­ä½¿ç”¨æ¥å£:æ¥å£](https://research.swtch.com/interfaces)ã€‚

# [](#now-whats-with-the-empty-interface)ç°åœ¨ï¼Œ*çš„ç©ºç•Œé¢*æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ

å‡è®¾æˆ‘ä»¬æ­£åœ¨å¼€å‘æŸç§è¾“å‡ºæ‰“å°åº“ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¼€å§‹æ€è€ƒå¦‚ä½•è®¾è®¡æˆ‘ä»¬çš„æ‰“å°åŠŸèƒ½ã€‚è¯¥å‡½æ•°éœ€è¦æ¥æ”¶ä¸€äº›å€¼ï¼Œç„¶åå°†ç»“æœä¼ é€’ç»™æ ‡å‡†è¾“å‡ºã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­( [go æ¸¸ä¹åœºé“¾æ¥](https://play.golang.org/p/JRFvPPzWaY4) ):

```
// This function takes a string as a parameter and print it to the standard output
func Println(format string) (int n, err error) {
    return fmt.Fprintln(os.Stdout, format)
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³æ‰“å°ä¸€ä¸ªæ•°å­—ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿè¿˜æ˜¯æ›´å¤æ‚çš„è¾“å…¥ï¼Ÿè¿è¡Œ [go æ¸¸ä¹åœº](https://play.golang.org/p/36UPWg3ps04) :
ä¸­çš„ç¤ºä¾‹

```
package main

import (
    "fmt"
    "os"
)

func Println(format string) (n int, err error) {
    return fmt.Fprintln(os.Stdout, format)
}

func main() {
    Println("Number: ", 10)
}

--------
// And this is what happen if we run our code, as we could expect:
prog.go:14:9: too many arguments in call to Println
    have (string, number)
    want (string)

Go build failed. 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ­£å¦‚æˆ‘ä»¬æ‰€æ–™ï¼Œæˆ‘ä»¬çš„è®¡åˆ’å¤±è´¥äº†ã€‚æˆ‘ä»¬ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œå¹¶ä¸”æˆ‘ä»¬å®šä¹‰æˆ‘ä»¬çš„å‡½æ•°åªæ¥æ”¶ä¸€ä¸ªç±»å‹ä¸º`string`çš„å‚æ•°ã€‚

é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•æ±‚è§£æˆ‘ä»¬çš„ Println å‡½æ•°å‘¢ï¼Ÿæˆ‘ä»¬æ˜¯å¦åº”è¯¥ä¸ºæƒ³åˆ°çš„æ¯ä¸ªç–¯ç‹‚çš„æƒ³æ³•å®ç°æ¯ä¸ªç”¨ä¾‹ï¼Ÿè°¢å¤©è°¢åœ°ï¼Œæˆ‘ä»¬æ²¡æœ‰ã€‚

Go å·²ç»å¤„ç†äº†åƒè¿™æ ·çš„æƒ…å†µï¼Œè¿™æ—¶ç©ºæ¥å£å°±æ´¾ä¸Šç”¨åœºäº†ã€‚å®é™…ä¸Šï¼Œ`fmt`åŒ…å‡½æ•°å°±æ˜¯è¿™æ ·å®ç°çš„ã€‚

é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹`empty interface`çš„å®šä¹‰(æ¥è‡ª[ä¸€åœºå›´æ£‹èµ›](https://tour.golang.org/methods/14)):

> æŒ‡å®šé›¶ä¸ªæ–¹æ³•çš„æ¥å£ç±»å‹ç§°ä¸ºç©ºæ¥å£:
> 
> ç©ºæ¥å£å¯ä»¥ä¿å­˜ä»»ä½•ç±»å‹çš„å€¼ã€‚(æ¯ä¸ªç±»å‹è‡³å°‘å®ç°é›¶ä¸ªæ–¹æ³•ã€‚)
> 
> å¤„ç†æœªçŸ¥ç±»å‹å€¼çš„ä»£ç ä½¿ç”¨ç©ºæ¥å£ã€‚æ¯”å¦‚ fmtã€‚Print æ¥å—ä»»æ„æ•°é‡çš„ interface{}ç±»å‹çš„å‚æ•°ã€‚

å¥½äº†ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ [fmt åŒ…æ–‡æ¡£](https://golang.org/pkg/fmt/#Fprintln)ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¹‹å‰åœ¨ Println:
`func Fprintln(w io.Writer, a ...interface{}) (n int, err error)`ä¸­ä½¿ç”¨çš„ Fprintln å‡½æ•°çš„è§„èŒƒ

ç¬¬äºŒä¸ªå‚æ•°ä¸­çš„`a ...interface{}`æ„å‘³ç€æˆ‘ä»¬æ¥æ”¶ä» 1 åˆ° N çš„`empty interface`ç±»å‹å€¼(å¯¹äºç†Ÿæ‚‰ Javascript spread æ“ä½œç¬¦çš„äººæ¥è¯´)ã€‚å¦‚æœæˆ‘ä»¬å†æ¬¡å¼•ç”¨è¿™ä¸ªå®šä¹‰:

`Empty interfaces are used by code that handles values of _unknown type_.`

å¥½çš„ï¼Œ*æœªçŸ¥ç±»å‹*ï¼Œå¯¹äºæˆ‘ä»¬çš„æ‰“å°å‡½æ•°ï¼Œæˆ‘ä»¬çœŸçš„ä¸å…³å¿ƒå®ƒæ˜¯ä»€ä¹ˆç±»å‹ï¼Œå¯¹å—ï¼Ÿæˆ‘ä»¬åªæ‹…å¿ƒæŠŠå®ƒå†™åˆ°æ ‡å‡†è¾“å‡ºä¸­ã€‚

æ‰€ä»¥ï¼Œå°±æ˜¯è¿™æ ·ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦æ‹…å¿ƒå®ç°æ¯ä¸€ä¸ªç”¨ä¾‹ï¼Œå› ä¸º Go åœ¨è¿è¡Œæ—¶ä¸ºæˆ‘ä»¬å¤„ç†é‚£äº›`unknown types`çš„è½¬æ¢ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥è¿™æ ·åš:`Println("Hello ", 10, &v)`è€Œä¸ç”¨æ‹…å¿ƒå‚æ•°ã€‚

æ³¨æ„:æˆ‘ä½¿ç”¨ fmt å®ç°è¿›è¡Œè§£é‡Šï¼Œå› ä¸ºç©ºæ¥å£æ˜¯æˆ‘å¼€å§‹å­¦ä¹ å›´æ£‹æ—¶é‡åˆ°çš„æœ€ä»¤äººå›°æƒ‘çš„äº‹æƒ…ä¹‹ä¸€ï¼Œåœ¨ go playground ä¸­ä½¿ç”¨å®ƒå¸®åŠ©æˆ‘ç†è§£äº†å¦‚ä½•ä»¥åŠä¸ºä»€ä¹ˆä½¿ç”¨å®ƒã€‚

æ³¨ 2:è¿™å°†æ˜¯æˆ‘ä»¬çš„æœ€ç»ˆè®¡åˆ’:

```
package main

import (
    "fmt"
    "os"
)

// This function is a exact implementation of fmt.Println()
func Println(a ...interface{}) (n int, err error) {
    return fmt.Fprintln(os.Stdout, a... )
}

func main() {
       n := 10                 // number
       s := "Hello!"           // string
       r := []rune("ã‚‚ã—ã‚‚ã—ï¼")// slice of runes

    // Our final Println accepts different types of values
    // and go translate them in run time.
    Println(s, n, r)
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä½ æ²¡æœ‰ç¡ç€å°±èµ°äº†è¿™ä¹ˆè¿œï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯»ï¼ğŸ¤“ ğŸ––

å°é¢ç…§ç‰‡: [*è èä¾›åº”å…¬å¸@unsplash*](https://unsplash.com/@pineapple)